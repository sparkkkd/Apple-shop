var jD=Object.defineProperty;var XD=(n,e,t)=>e in n?jD(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var t_=(n,e,t)=>(XD(n,typeof e!="symbol"?e+"":e,t),t);function JD(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in n)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();function Og(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var n8={exports:{}},Ug={},i8={exports:{}},Wt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var up=Symbol.for("react.element"),KD=Symbol.for("react.portal"),YD=Symbol.for("react.fragment"),ZD=Symbol.for("react.strict_mode"),qD=Symbol.for("react.profiler"),QD=Symbol.for("react.provider"),$D=Symbol.for("react.context"),eF=Symbol.for("react.forward_ref"),tF=Symbol.for("react.suspense"),nF=Symbol.for("react.memo"),iF=Symbol.for("react.lazy"),vw=Symbol.iterator;function rF(n){return n===null||typeof n!="object"?null:(n=vw&&n[vw]||n["@@iterator"],typeof n=="function"?n:null)}var r8={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},s8=Object.assign,o8={};function Lf(n,e,t){this.props=n,this.context=e,this.refs=o8,this.updater=t||r8}Lf.prototype.isReactComponent={};Lf.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};Lf.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function a8(){}a8.prototype=Lf.prototype;function OA(n,e,t){this.props=n,this.context=e,this.refs=o8,this.updater=t||r8}var UA=OA.prototype=new a8;UA.constructor=OA;s8(UA,Lf.prototype);UA.isPureReactComponent=!0;var yw=Array.isArray,l8=Object.prototype.hasOwnProperty,kA={current:null},u8={key:!0,ref:!0,__self:!0,__source:!0};function c8(n,e,t){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)l8.call(e,i)&&!u8.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=t;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}if(n&&n.defaultProps)for(i in a=n.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:up,type:n,key:s,ref:o,props:r,_owner:kA.current}}function sF(n,e){return{$$typeof:up,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function zA(n){return typeof n=="object"&&n!==null&&n.$$typeof===up}function oF(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var _w=/\/+/g;function n_(n,e){return typeof n=="object"&&n!==null&&n.key!=null?oF(""+n.key):e.toString(36)}function r0(n,e,t,i,r){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case up:case KD:o=!0}}if(o)return o=n,r=r(o),n=i===""?"."+n_(o,0):i,yw(r)?(t="",n!=null&&(t=n.replace(_w,"$&/")+"/"),r0(r,e,t,"",function(u){return u})):r!=null&&(zA(r)&&(r=sF(r,t+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(_w,"$&/")+"/")+n)),e.push(r)),1;if(o=0,i=i===""?".":i+":",yw(n))for(var a=0;a<n.length;a++){s=n[a];var l=i+n_(s,a);o+=r0(s,e,t,l,r)}else if(l=rF(n),typeof l=="function")for(n=l.call(n),a=0;!(s=n.next()).done;)s=s.value,l=i+n_(s,a++),o+=r0(s,e,t,l,r);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Im(n,e,t){if(n==null)return n;var i=[],r=0;return r0(n,i,"","",function(s){return e.call(t,s,r++)}),i}function aF(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var nr={current:null},s0={transition:null},lF={ReactCurrentDispatcher:nr,ReactCurrentBatchConfig:s0,ReactCurrentOwner:kA};Wt.Children={map:Im,forEach:function(n,e,t){Im(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return Im(n,function(){e++}),e},toArray:function(n){return Im(n,function(e){return e})||[]},only:function(n){if(!zA(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};Wt.Component=Lf;Wt.Fragment=YD;Wt.Profiler=qD;Wt.PureComponent=OA;Wt.StrictMode=ZD;Wt.Suspense=tF;Wt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lF;Wt.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var i=s8({},n.props),r=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=kA.current),e.key!==void 0&&(r=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)l8.call(e,l)&&!u8.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=t;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];i.children=a}return{$$typeof:up,type:n.type,key:r,ref:s,props:i,_owner:o}};Wt.createContext=function(n){return n={$$typeof:$D,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:QD,_context:n},n.Consumer=n};Wt.createElement=c8;Wt.createFactory=function(n){var e=c8.bind(null,n);return e.type=n,e};Wt.createRef=function(){return{current:null}};Wt.forwardRef=function(n){return{$$typeof:eF,render:n}};Wt.isValidElement=zA;Wt.lazy=function(n){return{$$typeof:iF,_payload:{_status:-1,_result:n},_init:aF}};Wt.memo=function(n,e){return{$$typeof:nF,type:n,compare:e===void 0?null:e}};Wt.startTransition=function(n){var e=s0.transition;s0.transition={};try{n()}finally{s0.transition=e}};Wt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Wt.useCallback=function(n,e){return nr.current.useCallback(n,e)};Wt.useContext=function(n){return nr.current.useContext(n)};Wt.useDebugValue=function(){};Wt.useDeferredValue=function(n){return nr.current.useDeferredValue(n)};Wt.useEffect=function(n,e){return nr.current.useEffect(n,e)};Wt.useId=function(){return nr.current.useId()};Wt.useImperativeHandle=function(n,e,t){return nr.current.useImperativeHandle(n,e,t)};Wt.useInsertionEffect=function(n,e){return nr.current.useInsertionEffect(n,e)};Wt.useLayoutEffect=function(n,e){return nr.current.useLayoutEffect(n,e)};Wt.useMemo=function(n,e){return nr.current.useMemo(n,e)};Wt.useReducer=function(n,e,t){return nr.current.useReducer(n,e,t)};Wt.useRef=function(n){return nr.current.useRef(n)};Wt.useState=function(n){return nr.current.useState(n)};Wt.useSyncExternalStore=function(n,e,t){return nr.current.useSyncExternalStore(n,e,t)};Wt.useTransition=function(){return nr.current.useTransition()};Wt.version="18.2.0";i8.exports=Wt;var G=i8.exports;const Tn=Og(G),p2=JD({__proto__:null,default:Tn},[G]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uF=G,cF=Symbol.for("react.element"),fF=Symbol.for("react.fragment"),hF=Object.prototype.hasOwnProperty,dF=uF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,pF={key:!0,ref:!0,__self:!0,__source:!0};function f8(n,e,t){var i,r={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)hF.call(e,i)&&!pF.hasOwnProperty(i)&&(r[i]=e[i]);if(n&&n.defaultProps)for(i in e=n.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:cF,type:n,key:s,ref:o,props:r,_owner:dF.current}}Ug.Fragment=fF;Ug.jsx=f8;Ug.jsxs=f8;n8.exports=Ug;var ce=n8.exports,m2={},h8={exports:{}},Or={},d8={exports:{}},p8={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(N,X){var J=N.length;N.push(X);e:for(;0<J;){var ae=J-1>>>1,me=N[ae];if(0<r(me,X))N[ae]=X,N[J]=me,J=ae;else break e}}function t(N){return N.length===0?null:N[0]}function i(N){if(N.length===0)return null;var X=N[0],J=N.pop();if(J!==X){N[0]=J;e:for(var ae=0,me=N.length,Ue=me>>>1;ae<Ue;){var he=2*(ae+1)-1,Te=N[he],we=he+1,je=N[we];if(0>r(Te,J))we<me&&0>r(je,Te)?(N[ae]=je,N[we]=J,ae=we):(N[ae]=Te,N[he]=J,ae=he);else if(we<me&&0>r(je,J))N[ae]=je,N[we]=J,ae=we;else break e}}return X}function r(N,X){var J=N.sortIndex-X.sortIndex;return J!==0?J:N.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,h=null,p=3,m=!1,v=!1,A=!1,_=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(N){for(var X=t(u);X!==null;){if(X.callback===null)i(u);else if(X.startTime<=N)i(u),X.sortIndex=X.expirationTime,e(l,X);else break;X=t(u)}}function E(N){if(A=!1,x(N),!v)if(t(l)!==null)v=!0,oe(b);else{var X=t(u);X!==null&&pe(E,X.startTime-N)}}function b(N,X){v=!1,A&&(A=!1,g(I),I=-1),m=!0;var J=p;try{for(x(X),h=t(l);h!==null&&(!(h.expirationTime>X)||N&&!D());){var ae=h.callback;if(typeof ae=="function"){h.callback=null,p=h.priorityLevel;var me=ae(h.expirationTime<=X);X=n.unstable_now(),typeof me=="function"?h.callback=me:h===t(l)&&i(l),x(X)}else i(l);h=t(l)}if(h!==null)var Ue=!0;else{var he=t(u);he!==null&&pe(E,he.startTime-X),Ue=!1}return Ue}finally{h=null,p=J,m=!1}}var T=!1,P=null,I=-1,z=5,w=-1;function D(){return!(n.unstable_now()-w<z)}function Q(){if(P!==null){var N=n.unstable_now();w=N;var X=!0;try{X=P(!0,N)}finally{X?ie():(T=!1,P=null)}}else T=!1}var ie;if(typeof S=="function")ie=function(){S(Q)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,se=j.port2;j.port1.onmessage=Q,ie=function(){se.postMessage(null)}}else ie=function(){_(Q,0)};function oe(N){P=N,T||(T=!0,ie())}function pe(N,X){I=_(function(){N(n.unstable_now())},X)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(N){N.callback=null},n.unstable_continueExecution=function(){v||m||(v=!0,oe(b))},n.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<N?Math.floor(1e3/N):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(N){switch(p){case 1:case 2:case 3:var X=3;break;default:X=p}var J=p;p=X;try{return N()}finally{p=J}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(N,X){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var J=p;p=N;try{return X()}finally{p=J}},n.unstable_scheduleCallback=function(N,X,J){var ae=n.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?ae+J:ae):J=ae,N){case 1:var me=-1;break;case 2:me=250;break;case 5:me=1073741823;break;case 4:me=1e4;break;default:me=5e3}return me=J+me,N={id:c++,callback:X,priorityLevel:N,startTime:J,expirationTime:me,sortIndex:-1},J>ae?(N.sortIndex=J,e(u,N),t(l)===null&&N===t(u)&&(A?(g(I),I=-1):A=!0,pe(E,J-ae))):(N.sortIndex=me,e(l,N),v||m||(v=!0,oe(b))),N},n.unstable_shouldYield=D,n.unstable_wrapCallback=function(N){var X=p;return function(){var J=p;p=X;try{return N.apply(this,arguments)}finally{p=J}}}})(p8);d8.exports=p8;var mF=d8.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m8=G,Ir=mF;function ke(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var g8=new Set,_d={};function Bu(n,e){hf(n,e),hf(n+"Capture",e)}function hf(n,e){for(_d[n]=e,n=0;n<e.length;n++)g8.add(e[n])}var Jo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g2=Object.prototype.hasOwnProperty,gF=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,xw={},Aw={};function vF(n){return g2.call(Aw,n)?!0:g2.call(xw,n)?!1:gF.test(n)?Aw[n]=!0:(xw[n]=!0,!1)}function yF(n,e,t,i){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function _F(n,e,t,i){if(e===null||typeof e>"u"||yF(n,e,t,i))return!0;if(i)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ir(n,e,t,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var bi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){bi[n]=new ir(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];bi[e]=new ir(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){bi[n]=new ir(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){bi[n]=new ir(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){bi[n]=new ir(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){bi[n]=new ir(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){bi[n]=new ir(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){bi[n]=new ir(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){bi[n]=new ir(n,5,!1,n.toLowerCase(),null,!1,!1)});var HA=/[\-:]([a-z])/g;function GA(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(HA,GA);bi[e]=new ir(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(HA,GA);bi[e]=new ir(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(HA,GA);bi[e]=new ir(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){bi[n]=new ir(n,1,!1,n.toLowerCase(),null,!1,!1)});bi.xlinkHref=new ir("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){bi[n]=new ir(n,1,!1,n.toLowerCase(),null,!0,!0)});function VA(n,e,t,i){var r=bi.hasOwnProperty(e)?bi[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(_F(e,t,r,i)&&(t=null),i||r===null?vF(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):r.mustUseProperty?n[r.propertyName]=t===null?r.type===3?!1:"":t:(e=r.attributeName,i=r.attributeNamespace,t===null?n.removeAttribute(e):(r=r.type,t=r===3||r===4&&t===!0?"":""+t,i?n.setAttributeNS(i,e,t):n.setAttribute(e,t))))}var $o=m8.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Lm=Symbol.for("react.element"),Ic=Symbol.for("react.portal"),Lc=Symbol.for("react.fragment"),WA=Symbol.for("react.strict_mode"),v2=Symbol.for("react.profiler"),v8=Symbol.for("react.provider"),y8=Symbol.for("react.context"),jA=Symbol.for("react.forward_ref"),y2=Symbol.for("react.suspense"),_2=Symbol.for("react.suspense_list"),XA=Symbol.for("react.memo"),Ea=Symbol.for("react.lazy"),_8=Symbol.for("react.offscreen"),Sw=Symbol.iterator;function ph(n){return n===null||typeof n!="object"?null:(n=Sw&&n[Sw]||n["@@iterator"],typeof n=="function"?n:null)}var Dn=Object.assign,i_;function Vh(n){if(i_===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);i_=e&&e[1]||""}return`
`+i_+n}var r_=!1;function s_(n,e){if(!n||r_)return"";r_=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var i=u}Reflect.construct(n,[],e)}else{try{e.call()}catch(u){i=u}n.call(e.prototype)}else{try{throw Error()}catch(u){i=u}n()}}catch(u){if(u&&i&&typeof u.stack=="string"){for(var r=u.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{r_=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?Vh(n):""}function xF(n){switch(n.tag){case 5:return Vh(n.type);case 16:return Vh("Lazy");case 13:return Vh("Suspense");case 19:return Vh("SuspenseList");case 0:case 2:case 15:return n=s_(n.type,!1),n;case 11:return n=s_(n.type.render,!1),n;case 1:return n=s_(n.type,!0),n;default:return""}}function x2(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Lc:return"Fragment";case Ic:return"Portal";case v2:return"Profiler";case WA:return"StrictMode";case y2:return"Suspense";case _2:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case y8:return(n.displayName||"Context")+".Consumer";case v8:return(n._context.displayName||"Context")+".Provider";case jA:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case XA:return e=n.displayName||null,e!==null?e:x2(n.type)||"Memo";case Ea:e=n._payload,n=n._init;try{return x2(n(e))}catch{}}return null}function AF(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return x2(e);case 8:return e===WA?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Qa(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function x8(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function SF(n){var e=x8(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),i=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var r=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function Dm(n){n._valueTracker||(n._valueTracker=SF(n))}function A8(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),i="";return n&&(i=x8(n)?n.checked?"true":"false":n.value),n=i,n!==t?(e.setValue(n),!0):!1}function U0(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function A2(n,e){var t=e.checked;return Dn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function Cw(n,e){var t=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;t=Qa(e.value!=null?e.value:t),n._wrapperState={initialChecked:i,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function S8(n,e){e=e.checked,e!=null&&VA(n,"checked",e,!1)}function S2(n,e){S8(n,e);var t=Qa(e.value),i=e.type;if(t!=null)i==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?C2(n,e.type,t):e.hasOwnProperty("defaultValue")&&C2(n,e.type,Qa(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function Ew(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function C2(n,e,t){(e!=="number"||U0(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var Wh=Array.isArray;function tf(n,e,t,i){if(n=n.options,e){e={};for(var r=0;r<t.length;r++)e["$"+t[r]]=!0;for(t=0;t<n.length;t++)r=e.hasOwnProperty("$"+n[t].value),n[t].selected!==r&&(n[t].selected=r),r&&i&&(n[t].defaultSelected=!0)}else{for(t=""+Qa(t),e=null,r=0;r<n.length;r++){if(n[r].value===t){n[r].selected=!0,i&&(n[r].defaultSelected=!0);return}e!==null||n[r].disabled||(e=n[r])}e!==null&&(e.selected=!0)}}function E2(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ke(91));return Dn({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Mw(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(ke(92));if(Wh(t)){if(1<t.length)throw Error(ke(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:Qa(t)}}function C8(n,e){var t=Qa(e.value),i=Qa(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),i!=null&&(n.defaultValue=""+i)}function ww(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function E8(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function M2(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?E8(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Fm,M8=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,i,r){MSApp.execUnsafeLocalFunction(function(){return n(e,t,i,r)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(Fm=Fm||document.createElement("div"),Fm.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Fm.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function xd(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Zh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},CF=["Webkit","ms","Moz","O"];Object.keys(Zh).forEach(function(n){CF.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Zh[e]=Zh[n]})});function w8(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Zh.hasOwnProperty(n)&&Zh[n]?(""+e).trim():e+"px"}function T8(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var i=t.indexOf("--")===0,r=w8(t,e[t],i);t==="float"&&(t="cssFloat"),i?n.setProperty(t,r):n[t]=r}}var EF=Dn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function w2(n,e){if(e){if(EF[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ke(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ke(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ke(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ke(62))}}function T2(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var b2=null;function JA(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var R2=null,nf=null,rf=null;function Tw(n){if(n=hp(n)){if(typeof R2!="function")throw Error(ke(280));var e=n.stateNode;e&&(e=Vg(e),R2(n.stateNode,n.type,e))}}function b8(n){nf?rf?rf.push(n):rf=[n]:nf=n}function R8(){if(nf){var n=nf,e=rf;if(rf=nf=null,Tw(n),e)for(n=0;n<e.length;n++)Tw(e[n])}}function P8(n,e){return n(e)}function B8(){}var o_=!1;function I8(n,e,t){if(o_)return n(e,t);o_=!0;try{return P8(n,e,t)}finally{o_=!1,(nf!==null||rf!==null)&&(B8(),R8())}}function Ad(n,e){var t=n.stateNode;if(t===null)return null;var i=Vg(t);if(i===null)return null;t=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(ke(231,e,typeof t));return t}var P2=!1;if(Jo)try{var mh={};Object.defineProperty(mh,"passive",{get:function(){P2=!0}}),window.addEventListener("test",mh,mh),window.removeEventListener("test",mh,mh)}catch{P2=!1}function MF(n,e,t,i,r,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(t,u)}catch(c){this.onError(c)}}var qh=!1,k0=null,z0=!1,B2=null,wF={onError:function(n){qh=!0,k0=n}};function TF(n,e,t,i,r,s,o,a,l){qh=!1,k0=null,MF.apply(wF,arguments)}function bF(n,e,t,i,r,s,o,a,l){if(TF.apply(this,arguments),qh){if(qh){var u=k0;qh=!1,k0=null}else throw Error(ke(198));z0||(z0=!0,B2=u)}}function Iu(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function L8(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function bw(n){if(Iu(n)!==n)throw Error(ke(188))}function RF(n){var e=n.alternate;if(!e){if(e=Iu(n),e===null)throw Error(ke(188));return e!==n?null:n}for(var t=n,i=e;;){var r=t.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){t=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===t)return bw(r),n;if(s===i)return bw(r),e;s=s.sibling}throw Error(ke(188))}if(t.return!==i.return)t=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===t){o=!0,t=r,i=s;break}if(a===i){o=!0,i=r,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,i=r;break}if(a===i){o=!0,i=s,t=r;break}a=a.sibling}if(!o)throw Error(ke(189))}}if(t.alternate!==i)throw Error(ke(190))}if(t.tag!==3)throw Error(ke(188));return t.stateNode.current===t?n:e}function D8(n){return n=RF(n),n!==null?F8(n):null}function F8(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=F8(n);if(e!==null)return e;n=n.sibling}return null}var N8=Ir.unstable_scheduleCallback,Rw=Ir.unstable_cancelCallback,PF=Ir.unstable_shouldYield,BF=Ir.unstable_requestPaint,Jn=Ir.unstable_now,IF=Ir.unstable_getCurrentPriorityLevel,KA=Ir.unstable_ImmediatePriority,O8=Ir.unstable_UserBlockingPriority,H0=Ir.unstable_NormalPriority,LF=Ir.unstable_LowPriority,U8=Ir.unstable_IdlePriority,kg=null,$s=null;function DF(n){if($s&&typeof $s.onCommitFiberRoot=="function")try{$s.onCommitFiberRoot(kg,n,void 0,(n.current.flags&128)===128)}catch{}}var bs=Math.clz32?Math.clz32:OF,FF=Math.log,NF=Math.LN2;function OF(n){return n>>>=0,n===0?32:31-(FF(n)/NF|0)|0}var Nm=64,Om=4194304;function jh(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function G0(n,e){var t=n.pendingLanes;if(t===0)return 0;var i=0,r=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~r;a!==0?i=jh(a):(s&=o,s!==0&&(i=jh(s)))}else o=t&~r,o!==0?i=jh(o):s!==0&&(i=jh(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=i;0<e;)t=31-bs(e),r=1<<t,i|=n[t],e&=~r;return i}function UF(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function kF(n,e){for(var t=n.suspendedLanes,i=n.pingedLanes,r=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-bs(s),a=1<<o,l=r[o];l===-1?(!(a&t)||a&i)&&(r[o]=UF(a,e)):l<=e&&(n.expiredLanes|=a),s&=~a}}function I2(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function k8(){var n=Nm;return Nm<<=1,!(Nm&4194240)&&(Nm=64),n}function a_(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function cp(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-bs(e),n[e]=t}function zF(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<t;){var r=31-bs(t),s=1<<r;e[r]=0,i[r]=-1,n[r]=-1,t&=~s}}function YA(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var i=31-bs(t),r=1<<i;r&e|n[i]&e&&(n[i]|=e),t&=~r}}var un=0;function z8(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var H8,ZA,G8,V8,W8,L2=!1,Um=[],Oa=null,Ua=null,ka=null,Sd=new Map,Cd=new Map,ba=[],HF="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Pw(n,e){switch(n){case"focusin":case"focusout":Oa=null;break;case"dragenter":case"dragleave":Ua=null;break;case"mouseover":case"mouseout":ka=null;break;case"pointerover":case"pointerout":Sd.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Cd.delete(e.pointerId)}}function gh(n,e,t,i,r,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=hp(e),e!==null&&ZA(e)),n):(n.eventSystemFlags|=i,e=n.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),n)}function GF(n,e,t,i,r){switch(e){case"focusin":return Oa=gh(Oa,n,e,t,i,r),!0;case"dragenter":return Ua=gh(Ua,n,e,t,i,r),!0;case"mouseover":return ka=gh(ka,n,e,t,i,r),!0;case"pointerover":var s=r.pointerId;return Sd.set(s,gh(Sd.get(s)||null,n,e,t,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Cd.set(s,gh(Cd.get(s)||null,n,e,t,i,r)),!0}return!1}function j8(n){var e=tu(n.target);if(e!==null){var t=Iu(e);if(t!==null){if(e=t.tag,e===13){if(e=L8(t),e!==null){n.blockedOn=e,W8(n.priority,function(){G8(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function o0(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=D2(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var i=new t.constructor(t.type,t);b2=i,t.target.dispatchEvent(i),b2=null}else return e=hp(t),e!==null&&ZA(e),n.blockedOn=t,!1;e.shift()}return!0}function Bw(n,e,t){o0(n)&&t.delete(e)}function VF(){L2=!1,Oa!==null&&o0(Oa)&&(Oa=null),Ua!==null&&o0(Ua)&&(Ua=null),ka!==null&&o0(ka)&&(ka=null),Sd.forEach(Bw),Cd.forEach(Bw)}function vh(n,e){n.blockedOn===e&&(n.blockedOn=null,L2||(L2=!0,Ir.unstable_scheduleCallback(Ir.unstable_NormalPriority,VF)))}function Ed(n){function e(r){return vh(r,n)}if(0<Um.length){vh(Um[0],n);for(var t=1;t<Um.length;t++){var i=Um[t];i.blockedOn===n&&(i.blockedOn=null)}}for(Oa!==null&&vh(Oa,n),Ua!==null&&vh(Ua,n),ka!==null&&vh(ka,n),Sd.forEach(e),Cd.forEach(e),t=0;t<ba.length;t++)i=ba[t],i.blockedOn===n&&(i.blockedOn=null);for(;0<ba.length&&(t=ba[0],t.blockedOn===null);)j8(t),t.blockedOn===null&&ba.shift()}var sf=$o.ReactCurrentBatchConfig,V0=!0;function WF(n,e,t,i){var r=un,s=sf.transition;sf.transition=null;try{un=1,qA(n,e,t,i)}finally{un=r,sf.transition=s}}function jF(n,e,t,i){var r=un,s=sf.transition;sf.transition=null;try{un=4,qA(n,e,t,i)}finally{un=r,sf.transition=s}}function qA(n,e,t,i){if(V0){var r=D2(n,e,t,i);if(r===null)v_(n,e,i,W0,t),Pw(n,i);else if(GF(r,n,e,t,i))i.stopPropagation();else if(Pw(n,i),e&4&&-1<HF.indexOf(n)){for(;r!==null;){var s=hp(r);if(s!==null&&H8(s),s=D2(n,e,t,i),s===null&&v_(n,e,i,W0,t),s===r)break;r=s}r!==null&&i.stopPropagation()}else v_(n,e,i,null,t)}}var W0=null;function D2(n,e,t,i){if(W0=null,n=JA(i),n=tu(n),n!==null)if(e=Iu(n),e===null)n=null;else if(t=e.tag,t===13){if(n=L8(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return W0=n,null}function X8(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(IF()){case KA:return 1;case O8:return 4;case H0:case LF:return 16;case U8:return 536870912;default:return 16}default:return 16}}var Ia=null,QA=null,a0=null;function J8(){if(a0)return a0;var n,e=QA,t=e.length,i,r="value"in Ia?Ia.value:Ia.textContent,s=r.length;for(n=0;n<t&&e[n]===r[n];n++);var o=t-n;for(i=1;i<=o&&e[t-i]===r[s-i];i++);return a0=r.slice(n,1<i?1-i:void 0)}function l0(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function km(){return!0}function Iw(){return!1}function Ur(n){function e(t,i,r,s,o){this._reactName=t,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?km:Iw,this.isPropagationStopped=Iw,this}return Dn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=km)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=km)},persist:function(){},isPersistent:km}),e}var Df={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$A=Ur(Df),fp=Dn({},Df,{view:0,detail:0}),XF=Ur(fp),l_,u_,yh,zg=Dn({},fp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:eS,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==yh&&(yh&&n.type==="mousemove"?(l_=n.screenX-yh.screenX,u_=n.screenY-yh.screenY):u_=l_=0,yh=n),l_)},movementY:function(n){return"movementY"in n?n.movementY:u_}}),Lw=Ur(zg),JF=Dn({},zg,{dataTransfer:0}),KF=Ur(JF),YF=Dn({},fp,{relatedTarget:0}),c_=Ur(YF),ZF=Dn({},Df,{animationName:0,elapsedTime:0,pseudoElement:0}),qF=Ur(ZF),QF=Dn({},Df,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),$F=Ur(QF),eN=Dn({},Df,{data:0}),Dw=Ur(eN),tN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},iN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rN(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=iN[n])?!!e[n]:!1}function eS(){return rN}var sN=Dn({},fp,{key:function(n){if(n.key){var e=tN[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=l0(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?nN[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:eS,charCode:function(n){return n.type==="keypress"?l0(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?l0(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),oN=Ur(sN),aN=Dn({},zg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fw=Ur(aN),lN=Dn({},fp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:eS}),uN=Ur(lN),cN=Dn({},Df,{propertyName:0,elapsedTime:0,pseudoElement:0}),fN=Ur(cN),hN=Dn({},zg,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),dN=Ur(hN),pN=[9,13,27,32],tS=Jo&&"CompositionEvent"in window,Qh=null;Jo&&"documentMode"in document&&(Qh=document.documentMode);var mN=Jo&&"TextEvent"in window&&!Qh,K8=Jo&&(!tS||Qh&&8<Qh&&11>=Qh),Nw=" ",Ow=!1;function Y8(n,e){switch(n){case"keyup":return pN.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Z8(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Dc=!1;function gN(n,e){switch(n){case"compositionend":return Z8(e);case"keypress":return e.which!==32?null:(Ow=!0,Nw);case"textInput":return n=e.data,n===Nw&&Ow?null:n;default:return null}}function vN(n,e){if(Dc)return n==="compositionend"||!tS&&Y8(n,e)?(n=J8(),a0=QA=Ia=null,Dc=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return K8&&e.locale!=="ko"?null:e.data;default:return null}}var yN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Uw(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!yN[n.type]:e==="textarea"}function q8(n,e,t,i){b8(i),e=j0(e,"onChange"),0<e.length&&(t=new $A("onChange","change",null,t,i),n.push({event:t,listeners:e}))}var $h=null,Md=null;function _N(n){lb(n,0)}function Hg(n){var e=Oc(n);if(A8(e))return n}function xN(n,e){if(n==="change")return e}var Q8=!1;if(Jo){var f_;if(Jo){var h_="oninput"in document;if(!h_){var kw=document.createElement("div");kw.setAttribute("oninput","return;"),h_=typeof kw.oninput=="function"}f_=h_}else f_=!1;Q8=f_&&(!document.documentMode||9<document.documentMode)}function zw(){$h&&($h.detachEvent("onpropertychange",$8),Md=$h=null)}function $8(n){if(n.propertyName==="value"&&Hg(Md)){var e=[];q8(e,Md,n,JA(n)),I8(_N,e)}}function AN(n,e,t){n==="focusin"?(zw(),$h=e,Md=t,$h.attachEvent("onpropertychange",$8)):n==="focusout"&&zw()}function SN(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Hg(Md)}function CN(n,e){if(n==="click")return Hg(e)}function EN(n,e){if(n==="input"||n==="change")return Hg(e)}function MN(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Bs=typeof Object.is=="function"?Object.is:MN;function wd(n,e){if(Bs(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),i=Object.keys(e);if(t.length!==i.length)return!1;for(i=0;i<t.length;i++){var r=t[i];if(!g2.call(e,r)||!Bs(n[r],e[r]))return!1}return!0}function Hw(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Gw(n,e){var t=Hw(n);n=0;for(var i;t;){if(t.nodeType===3){if(i=n+t.textContent.length,n<=e&&i>=e)return{node:t,offset:e-n};n=i}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=Hw(t)}}function eb(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?eb(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function tb(){for(var n=window,e=U0();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=U0(n.document)}return e}function nS(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function wN(n){var e=tb(),t=n.focusedElem,i=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&eb(t.ownerDocument.documentElement,t)){if(i!==null&&nS(t)){if(e=i.start,n=i.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var r=t.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!n.extend&&s>i&&(r=i,i=s,s=r),r=Gw(t,s);var o=Gw(t,i);r&&o&&(n.rangeCount!==1||n.anchorNode!==r.node||n.anchorOffset!==r.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),n.removeAllRanges(),s>i?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var TN=Jo&&"documentMode"in document&&11>=document.documentMode,Fc=null,F2=null,ed=null,N2=!1;function Vw(n,e,t){var i=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;N2||Fc==null||Fc!==U0(i)||(i=Fc,"selectionStart"in i&&nS(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),ed&&wd(ed,i)||(ed=i,i=j0(F2,"onSelect"),0<i.length&&(e=new $A("onSelect","select",null,e,t),n.push({event:e,listeners:i}),e.target=Fc)))}function zm(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var Nc={animationend:zm("Animation","AnimationEnd"),animationiteration:zm("Animation","AnimationIteration"),animationstart:zm("Animation","AnimationStart"),transitionend:zm("Transition","TransitionEnd")},d_={},nb={};Jo&&(nb=document.createElement("div").style,"AnimationEvent"in window||(delete Nc.animationend.animation,delete Nc.animationiteration.animation,delete Nc.animationstart.animation),"TransitionEvent"in window||delete Nc.transitionend.transition);function Gg(n){if(d_[n])return d_[n];if(!Nc[n])return n;var e=Nc[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in nb)return d_[n]=e[t];return n}var ib=Gg("animationend"),rb=Gg("animationiteration"),sb=Gg("animationstart"),ob=Gg("transitionend"),ab=new Map,Ww="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ul(n,e){ab.set(n,e),Bu(e,[n])}for(var p_=0;p_<Ww.length;p_++){var m_=Ww[p_],bN=m_.toLowerCase(),RN=m_[0].toUpperCase()+m_.slice(1);ul(bN,"on"+RN)}ul(ib,"onAnimationEnd");ul(rb,"onAnimationIteration");ul(sb,"onAnimationStart");ul("dblclick","onDoubleClick");ul("focusin","onFocus");ul("focusout","onBlur");ul(ob,"onTransitionEnd");hf("onMouseEnter",["mouseout","mouseover"]);hf("onMouseLeave",["mouseout","mouseover"]);hf("onPointerEnter",["pointerout","pointerover"]);hf("onPointerLeave",["pointerout","pointerover"]);Bu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Bu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Bu("onBeforeInput",["compositionend","keypress","textInput","paste"]);Bu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Bu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Bu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),PN=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xh));function jw(n,e,t){var i=n.type||"unknown-event";n.currentTarget=t,bF(i,e,void 0,n),n.currentTarget=null}function lb(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var i=n[t],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;jw(r,a,u),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;jw(r,a,u),s=l}}}if(z0)throw n=B2,z0=!1,B2=null,n}function vn(n,e){var t=e[H2];t===void 0&&(t=e[H2]=new Set);var i=n+"__bubble";t.has(i)||(ub(e,n,2,!1),t.add(i))}function g_(n,e,t){var i=0;e&&(i|=4),ub(t,n,i,e)}var Hm="_reactListening"+Math.random().toString(36).slice(2);function Td(n){if(!n[Hm]){n[Hm]=!0,g8.forEach(function(t){t!=="selectionchange"&&(PN.has(t)||g_(t,!1,n),g_(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Hm]||(e[Hm]=!0,g_("selectionchange",!1,e))}}function ub(n,e,t,i){switch(X8(e)){case 1:var r=WF;break;case 4:r=jF;break;default:r=qA}t=r.bind(null,e,t,n),r=void 0,!P2||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?n.addEventListener(e,t,{capture:!0,passive:r}):n.addEventListener(e,t,!0):r!==void 0?n.addEventListener(e,t,{passive:r}):n.addEventListener(e,t,!1)}function v_(n,e,t,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=tu(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}I8(function(){var u=s,c=JA(t),h=[];e:{var p=ab.get(n);if(p!==void 0){var m=$A,v=n;switch(n){case"keypress":if(l0(t)===0)break e;case"keydown":case"keyup":m=oN;break;case"focusin":v="focus",m=c_;break;case"focusout":v="blur",m=c_;break;case"beforeblur":case"afterblur":m=c_;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Lw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=KF;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=uN;break;case ib:case rb:case sb:m=qF;break;case ob:m=fN;break;case"scroll":m=XF;break;case"wheel":m=dN;break;case"copy":case"cut":case"paste":m=$F;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Fw}var A=(e&4)!==0,_=!A&&n==="scroll",g=A?p!==null?p+"Capture":null:p;A=[];for(var S=u,x;S!==null;){x=S;var E=x.stateNode;if(x.tag===5&&E!==null&&(x=E,g!==null&&(E=Ad(S,g),E!=null&&A.push(bd(S,E,x)))),_)break;S=S.return}0<A.length&&(p=new m(p,v,null,t,c),h.push({event:p,listeners:A}))}}if(!(e&7)){e:{if(p=n==="mouseover"||n==="pointerover",m=n==="mouseout"||n==="pointerout",p&&t!==b2&&(v=t.relatedTarget||t.fromElement)&&(tu(v)||v[Ko]))break e;if((m||p)&&(p=c.window===c?c:(p=c.ownerDocument)?p.defaultView||p.parentWindow:window,m?(v=t.relatedTarget||t.toElement,m=u,v=v?tu(v):null,v!==null&&(_=Iu(v),v!==_||v.tag!==5&&v.tag!==6)&&(v=null)):(m=null,v=u),m!==v)){if(A=Lw,E="onMouseLeave",g="onMouseEnter",S="mouse",(n==="pointerout"||n==="pointerover")&&(A=Fw,E="onPointerLeave",g="onPointerEnter",S="pointer"),_=m==null?p:Oc(m),x=v==null?p:Oc(v),p=new A(E,S+"leave",m,t,c),p.target=_,p.relatedTarget=x,E=null,tu(c)===u&&(A=new A(g,S+"enter",v,t,c),A.target=x,A.relatedTarget=_,E=A),_=E,m&&v)t:{for(A=m,g=v,S=0,x=A;x;x=tc(x))S++;for(x=0,E=g;E;E=tc(E))x++;for(;0<S-x;)A=tc(A),S--;for(;0<x-S;)g=tc(g),x--;for(;S--;){if(A===g||g!==null&&A===g.alternate)break t;A=tc(A),g=tc(g)}A=null}else A=null;m!==null&&Xw(h,p,m,A,!1),v!==null&&_!==null&&Xw(h,_,v,A,!0)}}e:{if(p=u?Oc(u):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var b=xN;else if(Uw(p))if(Q8)b=EN;else{b=SN;var T=AN}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(b=CN);if(b&&(b=b(n,u))){q8(h,b,t,c);break e}T&&T(n,p,u),n==="focusout"&&(T=p._wrapperState)&&T.controlled&&p.type==="number"&&C2(p,"number",p.value)}switch(T=u?Oc(u):window,n){case"focusin":(Uw(T)||T.contentEditable==="true")&&(Fc=T,F2=u,ed=null);break;case"focusout":ed=F2=Fc=null;break;case"mousedown":N2=!0;break;case"contextmenu":case"mouseup":case"dragend":N2=!1,Vw(h,t,c);break;case"selectionchange":if(TN)break;case"keydown":case"keyup":Vw(h,t,c)}var P;if(tS)e:{switch(n){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else Dc?Y8(n,t)&&(I="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(I="onCompositionStart");I&&(K8&&t.locale!=="ko"&&(Dc||I!=="onCompositionStart"?I==="onCompositionEnd"&&Dc&&(P=J8()):(Ia=c,QA="value"in Ia?Ia.value:Ia.textContent,Dc=!0)),T=j0(u,I),0<T.length&&(I=new Dw(I,n,null,t,c),h.push({event:I,listeners:T}),P?I.data=P:(P=Z8(t),P!==null&&(I.data=P)))),(P=mN?gN(n,t):vN(n,t))&&(u=j0(u,"onBeforeInput"),0<u.length&&(c=new Dw("onBeforeInput","beforeinput",null,t,c),h.push({event:c,listeners:u}),c.data=P))}lb(h,e)})}function bd(n,e,t){return{instance:n,listener:e,currentTarget:t}}function j0(n,e){for(var t=e+"Capture",i=[];n!==null;){var r=n,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=Ad(n,t),s!=null&&i.unshift(bd(n,s,r)),s=Ad(n,e),s!=null&&i.push(bd(n,s,r))),n=n.return}return i}function tc(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Xw(n,e,t,i,r){for(var s=e._reactName,o=[];t!==null&&t!==i;){var a=t,l=a.alternate,u=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&u!==null&&(a=u,r?(l=Ad(t,s),l!=null&&o.unshift(bd(t,l,a))):r||(l=Ad(t,s),l!=null&&o.push(bd(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var BN=/\r\n?/g,IN=/\u0000|\uFFFD/g;function Jw(n){return(typeof n=="string"?n:""+n).replace(BN,`
`).replace(IN,"")}function Gm(n,e,t){if(e=Jw(e),Jw(n)!==e&&t)throw Error(ke(425))}function X0(){}var O2=null,U2=null;function k2(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var z2=typeof setTimeout=="function"?setTimeout:void 0,LN=typeof clearTimeout=="function"?clearTimeout:void 0,Kw=typeof Promise=="function"?Promise:void 0,DN=typeof queueMicrotask=="function"?queueMicrotask:typeof Kw<"u"?function(n){return Kw.resolve(null).then(n).catch(FN)}:z2;function FN(n){setTimeout(function(){throw n})}function y_(n,e){var t=e,i=0;do{var r=t.nextSibling;if(n.removeChild(t),r&&r.nodeType===8)if(t=r.data,t==="/$"){if(i===0){n.removeChild(r),Ed(e);return}i--}else t!=="$"&&t!=="$?"&&t!=="$!"||i++;t=r}while(t);Ed(e)}function za(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function Yw(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var Ff=Math.random().toString(36).slice(2),Js="__reactFiber$"+Ff,Rd="__reactProps$"+Ff,Ko="__reactContainer$"+Ff,H2="__reactEvents$"+Ff,NN="__reactListeners$"+Ff,ON="__reactHandles$"+Ff;function tu(n){var e=n[Js];if(e)return e;for(var t=n.parentNode;t;){if(e=t[Ko]||t[Js]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=Yw(n);n!==null;){if(t=n[Js])return t;n=Yw(n)}return e}n=t,t=n.parentNode}return null}function hp(n){return n=n[Js]||n[Ko],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Oc(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(ke(33))}function Vg(n){return n[Rd]||null}var G2=[],Uc=-1;function cl(n){return{current:n}}function xn(n){0>Uc||(n.current=G2[Uc],G2[Uc]=null,Uc--)}function mn(n,e){Uc++,G2[Uc]=n.current,n.current=e}var $a={},Vi=cl($a),pr=cl(!1),Au=$a;function df(n,e){var t=n.type.contextTypes;if(!t)return $a;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in t)r[s]=e[s];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=r),r}function mr(n){return n=n.childContextTypes,n!=null}function J0(){xn(pr),xn(Vi)}function Zw(n,e,t){if(Vi.current!==$a)throw Error(ke(168));mn(Vi,e),mn(pr,t)}function cb(n,e,t){var i=n.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return t;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(ke(108,AF(n)||"Unknown",r));return Dn({},t,i)}function K0(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||$a,Au=Vi.current,mn(Vi,n),mn(pr,pr.current),!0}function qw(n,e,t){var i=n.stateNode;if(!i)throw Error(ke(169));t?(n=cb(n,e,Au),i.__reactInternalMemoizedMergedChildContext=n,xn(pr),xn(Vi),mn(Vi,n)):xn(pr),mn(pr,t)}var Po=null,Wg=!1,__=!1;function fb(n){Po===null?Po=[n]:Po.push(n)}function UN(n){Wg=!0,fb(n)}function fl(){if(!__&&Po!==null){__=!0;var n=0,e=un;try{var t=Po;for(un=1;n<t.length;n++){var i=t[n];do i=i(!0);while(i!==null)}Po=null,Wg=!1}catch(r){throw Po!==null&&(Po=Po.slice(n+1)),N8(KA,fl),r}finally{un=e,__=!1}}return null}var kc=[],zc=0,Y0=null,Z0=0,ns=[],is=0,Su=null,No=1,Oo="";function Wl(n,e){kc[zc++]=Z0,kc[zc++]=Y0,Y0=n,Z0=e}function hb(n,e,t){ns[is++]=No,ns[is++]=Oo,ns[is++]=Su,Su=n;var i=No;n=Oo;var r=32-bs(i)-1;i&=~(1<<r),t+=1;var s=32-bs(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,No=1<<32-bs(e)+r|t<<r|i,Oo=s+n}else No=1<<s|t<<r|i,Oo=n}function iS(n){n.return!==null&&(Wl(n,1),hb(n,1,0))}function rS(n){for(;n===Y0;)Y0=kc[--zc],kc[zc]=null,Z0=kc[--zc],kc[zc]=null;for(;n===Su;)Su=ns[--is],ns[is]=null,Oo=ns[--is],ns[is]=null,No=ns[--is],ns[is]=null}var Pr=null,Tr=null,Cn=!1,Es=null;function db(n,e){var t=os(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function Qw(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,Pr=n,Tr=za(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,Pr=n,Tr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Su!==null?{id:No,overflow:Oo}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=os(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,Pr=n,Tr=null,!0):!1;default:return!1}}function V2(n){return(n.mode&1)!==0&&(n.flags&128)===0}function W2(n){if(Cn){var e=Tr;if(e){var t=e;if(!Qw(n,e)){if(V2(n))throw Error(ke(418));e=za(t.nextSibling);var i=Pr;e&&Qw(n,e)?db(i,t):(n.flags=n.flags&-4097|2,Cn=!1,Pr=n)}}else{if(V2(n))throw Error(ke(418));n.flags=n.flags&-4097|2,Cn=!1,Pr=n}}}function $w(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Pr=n}function Vm(n){if(n!==Pr)return!1;if(!Cn)return $w(n),Cn=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!k2(n.type,n.memoizedProps)),e&&(e=Tr)){if(V2(n))throw pb(),Error(ke(418));for(;e;)db(n,e),e=za(e.nextSibling)}if($w(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(ke(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){Tr=za(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}Tr=null}}else Tr=Pr?za(n.stateNode.nextSibling):null;return!0}function pb(){for(var n=Tr;n;)n=za(n.nextSibling)}function pf(){Tr=Pr=null,Cn=!1}function sS(n){Es===null?Es=[n]:Es.push(n)}var kN=$o.ReactCurrentBatchConfig;function As(n,e){if(n&&n.defaultProps){e=Dn({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}var q0=cl(null),Q0=null,Hc=null,oS=null;function aS(){oS=Hc=Q0=null}function lS(n){var e=q0.current;xn(q0),n._currentValue=e}function j2(n,e,t){for(;n!==null;){var i=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),n===t)break;n=n.return}}function of(n,e){Q0=n,oS=Hc=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(dr=!0),n.firstContext=null)}function cs(n){var e=n._currentValue;if(oS!==n)if(n={context:n,memoizedValue:e,next:null},Hc===null){if(Q0===null)throw Error(ke(308));Hc=n,Q0.dependencies={lanes:0,firstContext:n}}else Hc=Hc.next=n;return e}var nu=null;function uS(n){nu===null?nu=[n]:nu.push(n)}function mb(n,e,t,i){var r=e.interleaved;return r===null?(t.next=t,uS(e)):(t.next=r.next,r.next=t),e.interleaved=t,Yo(n,i)}function Yo(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var Ma=!1;function cS(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function gb(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Go(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function Ha(n,e,t){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,Qt&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,Yo(n,t)}return r=i.interleaved,r===null?(e.next=e,uS(i)):(e.next=r.next,r.next=e),i.interleaved=e,Yo(n,t)}function u0(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,YA(n,t)}}function e4(n,e){var t=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,t===i)){var r=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?r=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?r=s=e:s=s.next=e}else r=s=e;t={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function $0(n,e,t,i){var r=n.updateQueue;Ma=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var c=n.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(s!==null){var h=r.baseState;o=0,c=u=l=null,a=s;do{var p=a.lane,m=a.eventTime;if((i&p)===p){c!==null&&(c=c.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=n,A=a;switch(p=e,m=t,A.tag){case 1:if(v=A.payload,typeof v=="function"){h=v.call(m,h,p);break e}h=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=A.payload,p=typeof v=="function"?v.call(m,h,p):v,p==null)break e;h=Dn({},h,p);break e;case 2:Ma=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,p=r.effects,p===null?r.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=m,l=h):c=c.next=m,o|=p;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;p=a,a=p.next,p.next=null,r.lastBaseUpdate=p,r.shared.pending=null}}while(!0);if(c===null&&(l=h),r.baseState=l,r.firstBaseUpdate=u,r.lastBaseUpdate=c,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);Eu|=o,n.lanes=o,n.memoizedState=h}}function t4(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var i=n[e],r=i.callback;if(r!==null){if(i.callback=null,i=t,typeof r!="function")throw Error(ke(191,r));r.call(i)}}}var vb=new m8.Component().refs;function X2(n,e,t,i){e=n.memoizedState,t=t(i,e),t=t==null?e:Dn({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var jg={isMounted:function(n){return(n=n._reactInternals)?Iu(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var i=er(),r=Va(n),s=Go(i,r);s.payload=e,t!=null&&(s.callback=t),e=Ha(n,s,r),e!==null&&(Rs(e,n,r,i),u0(e,n,r))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var i=er(),r=Va(n),s=Go(i,r);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=Ha(n,s,r),e!==null&&(Rs(e,n,r,i),u0(e,n,r))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=er(),i=Va(n),r=Go(t,i);r.tag=2,e!=null&&(r.callback=e),e=Ha(n,r,i),e!==null&&(Rs(e,n,i,t),u0(e,n,i))}};function n4(n,e,t,i,r,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!wd(t,i)||!wd(r,s):!0}function yb(n,e,t){var i=!1,r=$a,s=e.contextType;return typeof s=="object"&&s!==null?s=cs(s):(r=mr(e)?Au:Vi.current,i=e.contextTypes,s=(i=i!=null)?df(n,r):$a),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=jg,n.stateNode=e,e._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=s),e}function i4(n,e,t,i){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,i),e.state!==n&&jg.enqueueReplaceState(e,e.state,null)}function J2(n,e,t,i){var r=n.stateNode;r.props=t,r.state=n.memoizedState,r.refs=vb,cS(n);var s=e.contextType;typeof s=="object"&&s!==null?r.context=cs(s):(s=mr(e)?Au:Vi.current,r.context=df(n,s)),r.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(X2(n,e,s,t),r.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&jg.enqueueReplaceState(r,r.state,null),$0(n,t,r,i),r.state=n.memoizedState),typeof r.componentDidMount=="function"&&(n.flags|=4194308)}function _h(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(ke(309));var i=t.stateNode}if(!i)throw Error(ke(147,n));var r=i,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;a===vb&&(a=r.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(ke(284));if(!t._owner)throw Error(ke(290,n))}return n}function Wm(n,e){throw n=Object.prototype.toString.call(e),Error(ke(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function r4(n){var e=n._init;return e(n._payload)}function _b(n){function e(g,S){if(n){var x=g.deletions;x===null?(g.deletions=[S],g.flags|=16):x.push(S)}}function t(g,S){if(!n)return null;for(;S!==null;)e(g,S),S=S.sibling;return null}function i(g,S){for(g=new Map;S!==null;)S.key!==null?g.set(S.key,S):g.set(S.index,S),S=S.sibling;return g}function r(g,S){return g=Wa(g,S),g.index=0,g.sibling=null,g}function s(g,S,x){return g.index=x,n?(x=g.alternate,x!==null?(x=x.index,x<S?(g.flags|=2,S):x):(g.flags|=2,S)):(g.flags|=1048576,S)}function o(g){return n&&g.alternate===null&&(g.flags|=2),g}function a(g,S,x,E){return S===null||S.tag!==6?(S=w_(x,g.mode,E),S.return=g,S):(S=r(S,x),S.return=g,S)}function l(g,S,x,E){var b=x.type;return b===Lc?c(g,S,x.props.children,E,x.key):S!==null&&(S.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Ea&&r4(b)===S.type)?(E=r(S,x.props),E.ref=_h(g,S,x),E.return=g,E):(E=m0(x.type,x.key,x.props,null,g.mode,E),E.ref=_h(g,S,x),E.return=g,E)}function u(g,S,x,E){return S===null||S.tag!==4||S.stateNode.containerInfo!==x.containerInfo||S.stateNode.implementation!==x.implementation?(S=T_(x,g.mode,E),S.return=g,S):(S=r(S,x.children||[]),S.return=g,S)}function c(g,S,x,E,b){return S===null||S.tag!==7?(S=pu(x,g.mode,E,b),S.return=g,S):(S=r(S,x),S.return=g,S)}function h(g,S,x){if(typeof S=="string"&&S!==""||typeof S=="number")return S=w_(""+S,g.mode,x),S.return=g,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Lm:return x=m0(S.type,S.key,S.props,null,g.mode,x),x.ref=_h(g,null,S),x.return=g,x;case Ic:return S=T_(S,g.mode,x),S.return=g,S;case Ea:var E=S._init;return h(g,E(S._payload),x)}if(Wh(S)||ph(S))return S=pu(S,g.mode,x,null),S.return=g,S;Wm(g,S)}return null}function p(g,S,x,E){var b=S!==null?S.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return b!==null?null:a(g,S,""+x,E);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Lm:return x.key===b?l(g,S,x,E):null;case Ic:return x.key===b?u(g,S,x,E):null;case Ea:return b=x._init,p(g,S,b(x._payload),E)}if(Wh(x)||ph(x))return b!==null?null:c(g,S,x,E,null);Wm(g,x)}return null}function m(g,S,x,E,b){if(typeof E=="string"&&E!==""||typeof E=="number")return g=g.get(x)||null,a(S,g,""+E,b);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Lm:return g=g.get(E.key===null?x:E.key)||null,l(S,g,E,b);case Ic:return g=g.get(E.key===null?x:E.key)||null,u(S,g,E,b);case Ea:var T=E._init;return m(g,S,x,T(E._payload),b)}if(Wh(E)||ph(E))return g=g.get(x)||null,c(S,g,E,b,null);Wm(S,E)}return null}function v(g,S,x,E){for(var b=null,T=null,P=S,I=S=0,z=null;P!==null&&I<x.length;I++){P.index>I?(z=P,P=null):z=P.sibling;var w=p(g,P,x[I],E);if(w===null){P===null&&(P=z);break}n&&P&&w.alternate===null&&e(g,P),S=s(w,S,I),T===null?b=w:T.sibling=w,T=w,P=z}if(I===x.length)return t(g,P),Cn&&Wl(g,I),b;if(P===null){for(;I<x.length;I++)P=h(g,x[I],E),P!==null&&(S=s(P,S,I),T===null?b=P:T.sibling=P,T=P);return Cn&&Wl(g,I),b}for(P=i(g,P);I<x.length;I++)z=m(P,g,I,x[I],E),z!==null&&(n&&z.alternate!==null&&P.delete(z.key===null?I:z.key),S=s(z,S,I),T===null?b=z:T.sibling=z,T=z);return n&&P.forEach(function(D){return e(g,D)}),Cn&&Wl(g,I),b}function A(g,S,x,E){var b=ph(x);if(typeof b!="function")throw Error(ke(150));if(x=b.call(x),x==null)throw Error(ke(151));for(var T=b=null,P=S,I=S=0,z=null,w=x.next();P!==null&&!w.done;I++,w=x.next()){P.index>I?(z=P,P=null):z=P.sibling;var D=p(g,P,w.value,E);if(D===null){P===null&&(P=z);break}n&&P&&D.alternate===null&&e(g,P),S=s(D,S,I),T===null?b=D:T.sibling=D,T=D,P=z}if(w.done)return t(g,P),Cn&&Wl(g,I),b;if(P===null){for(;!w.done;I++,w=x.next())w=h(g,w.value,E),w!==null&&(S=s(w,S,I),T===null?b=w:T.sibling=w,T=w);return Cn&&Wl(g,I),b}for(P=i(g,P);!w.done;I++,w=x.next())w=m(P,g,I,w.value,E),w!==null&&(n&&w.alternate!==null&&P.delete(w.key===null?I:w.key),S=s(w,S,I),T===null?b=w:T.sibling=w,T=w);return n&&P.forEach(function(Q){return e(g,Q)}),Cn&&Wl(g,I),b}function _(g,S,x,E){if(typeof x=="object"&&x!==null&&x.type===Lc&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Lm:e:{for(var b=x.key,T=S;T!==null;){if(T.key===b){if(b=x.type,b===Lc){if(T.tag===7){t(g,T.sibling),S=r(T,x.props.children),S.return=g,g=S;break e}}else if(T.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Ea&&r4(b)===T.type){t(g,T.sibling),S=r(T,x.props),S.ref=_h(g,T,x),S.return=g,g=S;break e}t(g,T);break}else e(g,T);T=T.sibling}x.type===Lc?(S=pu(x.props.children,g.mode,E,x.key),S.return=g,g=S):(E=m0(x.type,x.key,x.props,null,g.mode,E),E.ref=_h(g,S,x),E.return=g,g=E)}return o(g);case Ic:e:{for(T=x.key;S!==null;){if(S.key===T)if(S.tag===4&&S.stateNode.containerInfo===x.containerInfo&&S.stateNode.implementation===x.implementation){t(g,S.sibling),S=r(S,x.children||[]),S.return=g,g=S;break e}else{t(g,S);break}else e(g,S);S=S.sibling}S=T_(x,g.mode,E),S.return=g,g=S}return o(g);case Ea:return T=x._init,_(g,S,T(x._payload),E)}if(Wh(x))return v(g,S,x,E);if(ph(x))return A(g,S,x,E);Wm(g,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,S!==null&&S.tag===6?(t(g,S.sibling),S=r(S,x),S.return=g,g=S):(t(g,S),S=w_(x,g.mode,E),S.return=g,g=S),o(g)):t(g,S)}return _}var mf=_b(!0),xb=_b(!1),dp={},eo=cl(dp),Pd=cl(dp),Bd=cl(dp);function iu(n){if(n===dp)throw Error(ke(174));return n}function fS(n,e){switch(mn(Bd,e),mn(Pd,n),mn(eo,dp),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:M2(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=M2(e,n)}xn(eo),mn(eo,e)}function gf(){xn(eo),xn(Pd),xn(Bd)}function Ab(n){iu(Bd.current);var e=iu(eo.current),t=M2(e,n.type);e!==t&&(mn(Pd,n),mn(eo,t))}function hS(n){Pd.current===n&&(xn(eo),xn(Pd))}var bn=cl(0);function eg(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var x_=[];function dS(){for(var n=0;n<x_.length;n++)x_[n]._workInProgressVersionPrimary=null;x_.length=0}var c0=$o.ReactCurrentDispatcher,A_=$o.ReactCurrentBatchConfig,Cu=0,Ln=null,ri=null,mi=null,tg=!1,td=!1,Id=0,zN=0;function Li(){throw Error(ke(321))}function pS(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Bs(n[t],e[t]))return!1;return!0}function mS(n,e,t,i,r,s){if(Cu=s,Ln=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,c0.current=n===null||n.memoizedState===null?WN:jN,n=t(i,r),td){s=0;do{if(td=!1,Id=0,25<=s)throw Error(ke(301));s+=1,mi=ri=null,e.updateQueue=null,c0.current=XN,n=t(i,r)}while(td)}if(c0.current=ng,e=ri!==null&&ri.next!==null,Cu=0,mi=ri=Ln=null,tg=!1,e)throw Error(ke(300));return n}function gS(){var n=Id!==0;return Id=0,n}function js(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mi===null?Ln.memoizedState=mi=n:mi=mi.next=n,mi}function fs(){if(ri===null){var n=Ln.alternate;n=n!==null?n.memoizedState:null}else n=ri.next;var e=mi===null?Ln.memoizedState:mi.next;if(e!==null)mi=e,ri=n;else{if(n===null)throw Error(ke(310));ri=n,n={memoizedState:ri.memoizedState,baseState:ri.baseState,baseQueue:ri.baseQueue,queue:ri.queue,next:null},mi===null?Ln.memoizedState=mi=n:mi=mi.next=n}return mi}function Ld(n,e){return typeof e=="function"?e(n):e}function S_(n){var e=fs(),t=e.queue;if(t===null)throw Error(ke(311));t.lastRenderedReducer=n;var i=ri,r=i.baseQueue,s=t.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,t.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,u=s;do{var c=u.lane;if((Cu&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:n(i,u.action);else{var h={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=h,o=i):l=l.next=h,Ln.lanes|=c,Eu|=c}u=u.next}while(u!==null&&u!==s);l===null?o=i:l.next=a,Bs(i,e.memoizedState)||(dr=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,t.lastRenderedState=i}if(n=t.interleaved,n!==null){r=n;do s=r.lane,Ln.lanes|=s,Eu|=s,r=r.next;while(r!==n)}else r===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function C_(n){var e=fs(),t=e.queue;if(t===null)throw Error(ke(311));t.lastRenderedReducer=n;var i=t.dispatch,r=t.pending,s=e.memoizedState;if(r!==null){t.pending=null;var o=r=r.next;do s=n(s,o.action),o=o.next;while(o!==r);Bs(s,e.memoizedState)||(dr=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,i]}function Sb(){}function Cb(n,e){var t=Ln,i=fs(),r=e(),s=!Bs(i.memoizedState,r);if(s&&(i.memoizedState=r,dr=!0),i=i.queue,vS(wb.bind(null,t,i,n),[n]),i.getSnapshot!==e||s||mi!==null&&mi.memoizedState.tag&1){if(t.flags|=2048,Dd(9,Mb.bind(null,t,i,r,e),void 0,null),gi===null)throw Error(ke(349));Cu&30||Eb(t,e,r)}return r}function Eb(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=Ln.updateQueue,e===null?(e={lastEffect:null,stores:null},Ln.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function Mb(n,e,t,i){e.value=t,e.getSnapshot=i,Tb(e)&&bb(n)}function wb(n,e,t){return t(function(){Tb(e)&&bb(n)})}function Tb(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Bs(n,t)}catch{return!0}}function bb(n){var e=Yo(n,1);e!==null&&Rs(e,n,1,-1)}function s4(n){var e=js();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ld,lastRenderedState:n},e.queue=n,n=n.dispatch=VN.bind(null,Ln,n),[e.memoizedState,n]}function Dd(n,e,t,i){return n={tag:n,create:e,destroy:t,deps:i,next:null},e=Ln.updateQueue,e===null?(e={lastEffect:null,stores:null},Ln.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(i=t.next,t.next=n,n.next=i,e.lastEffect=n)),n}function Rb(){return fs().memoizedState}function f0(n,e,t,i){var r=js();Ln.flags|=n,r.memoizedState=Dd(1|e,t,void 0,i===void 0?null:i)}function Xg(n,e,t,i){var r=fs();i=i===void 0?null:i;var s=void 0;if(ri!==null){var o=ri.memoizedState;if(s=o.destroy,i!==null&&pS(i,o.deps)){r.memoizedState=Dd(e,t,s,i);return}}Ln.flags|=n,r.memoizedState=Dd(1|e,t,s,i)}function o4(n,e){return f0(8390656,8,n,e)}function vS(n,e){return Xg(2048,8,n,e)}function Pb(n,e){return Xg(4,2,n,e)}function Bb(n,e){return Xg(4,4,n,e)}function Ib(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function Lb(n,e,t){return t=t!=null?t.concat([n]):null,Xg(4,4,Ib.bind(null,e,n),t)}function yS(){}function Db(n,e){var t=fs();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&pS(e,i[1])?i[0]:(t.memoizedState=[n,e],n)}function Fb(n,e){var t=fs();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&pS(e,i[1])?i[0]:(n=n(),t.memoizedState=[n,e],n)}function Nb(n,e,t){return Cu&21?(Bs(t,e)||(t=k8(),Ln.lanes|=t,Eu|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,dr=!0),n.memoizedState=t)}function HN(n,e){var t=un;un=t!==0&&4>t?t:4,n(!0);var i=A_.transition;A_.transition={};try{n(!1),e()}finally{un=t,A_.transition=i}}function Ob(){return fs().memoizedState}function GN(n,e,t){var i=Va(n);if(t={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null},Ub(n))kb(e,t);else if(t=mb(n,e,t,i),t!==null){var r=er();Rs(t,n,i,r),zb(t,e,i)}}function VN(n,e,t){var i=Va(n),r={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null};if(Ub(n))kb(e,r);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(r.hasEagerState=!0,r.eagerState=a,Bs(a,o)){var l=e.interleaved;l===null?(r.next=r,uS(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}t=mb(n,e,r,i),t!==null&&(r=er(),Rs(t,n,i,r),zb(t,e,i))}}function Ub(n){var e=n.alternate;return n===Ln||e!==null&&e===Ln}function kb(n,e){td=tg=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function zb(n,e,t){if(t&4194240){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,YA(n,t)}}var ng={readContext:cs,useCallback:Li,useContext:Li,useEffect:Li,useImperativeHandle:Li,useInsertionEffect:Li,useLayoutEffect:Li,useMemo:Li,useReducer:Li,useRef:Li,useState:Li,useDebugValue:Li,useDeferredValue:Li,useTransition:Li,useMutableSource:Li,useSyncExternalStore:Li,useId:Li,unstable_isNewReconciler:!1},WN={readContext:cs,useCallback:function(n,e){return js().memoizedState=[n,e===void 0?null:e],n},useContext:cs,useEffect:o4,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,f0(4194308,4,Ib.bind(null,e,n),t)},useLayoutEffect:function(n,e){return f0(4194308,4,n,e)},useInsertionEffect:function(n,e){return f0(4,2,n,e)},useMemo:function(n,e){var t=js();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var i=js();return e=t!==void 0?t(e):e,i.memoizedState=i.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},i.queue=n,n=n.dispatch=GN.bind(null,Ln,n),[i.memoizedState,n]},useRef:function(n){var e=js();return n={current:n},e.memoizedState=n},useState:s4,useDebugValue:yS,useDeferredValue:function(n){return js().memoizedState=n},useTransition:function(){var n=s4(!1),e=n[0];return n=HN.bind(null,n[1]),js().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var i=Ln,r=js();if(Cn){if(t===void 0)throw Error(ke(407));t=t()}else{if(t=e(),gi===null)throw Error(ke(349));Cu&30||Eb(i,e,t)}r.memoizedState=t;var s={value:t,getSnapshot:e};return r.queue=s,o4(wb.bind(null,i,s,n),[n]),i.flags|=2048,Dd(9,Mb.bind(null,i,s,t,e),void 0,null),t},useId:function(){var n=js(),e=gi.identifierPrefix;if(Cn){var t=Oo,i=No;t=(i&~(1<<32-bs(i)-1)).toString(32)+t,e=":"+e+"R"+t,t=Id++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=zN++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},jN={readContext:cs,useCallback:Db,useContext:cs,useEffect:vS,useImperativeHandle:Lb,useInsertionEffect:Pb,useLayoutEffect:Bb,useMemo:Fb,useReducer:S_,useRef:Rb,useState:function(){return S_(Ld)},useDebugValue:yS,useDeferredValue:function(n){var e=fs();return Nb(e,ri.memoizedState,n)},useTransition:function(){var n=S_(Ld)[0],e=fs().memoizedState;return[n,e]},useMutableSource:Sb,useSyncExternalStore:Cb,useId:Ob,unstable_isNewReconciler:!1},XN={readContext:cs,useCallback:Db,useContext:cs,useEffect:vS,useImperativeHandle:Lb,useInsertionEffect:Pb,useLayoutEffect:Bb,useMemo:Fb,useReducer:C_,useRef:Rb,useState:function(){return C_(Ld)},useDebugValue:yS,useDeferredValue:function(n){var e=fs();return ri===null?e.memoizedState=n:Nb(e,ri.memoizedState,n)},useTransition:function(){var n=C_(Ld)[0],e=fs().memoizedState;return[n,e]},useMutableSource:Sb,useSyncExternalStore:Cb,useId:Ob,unstable_isNewReconciler:!1};function vf(n,e){try{var t="",i=e;do t+=xF(i),i=i.return;while(i);var r=t}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:r,digest:null}}function E_(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function K2(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var JN=typeof WeakMap=="function"?WeakMap:Map;function Hb(n,e,t){t=Go(-1,t),t.tag=3,t.payload={element:null};var i=e.value;return t.callback=function(){rg||(rg=!0,r3=i),K2(n,e)},t}function Gb(n,e,t){t=Go(-1,t),t.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;t.payload=function(){return i(r)},t.callback=function(){K2(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){K2(n,e),typeof i!="function"&&(Ga===null?Ga=new Set([this]):Ga.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function a4(n,e,t){var i=n.pingCache;if(i===null){i=n.pingCache=new JN;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(t)||(r.add(t),n=aO.bind(null,n,e,t),e.then(n,n))}function l4(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function u4(n,e,t,i,r){return n.mode&1?(n.flags|=65536,n.lanes=r,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Go(-1,1),e.tag=2,Ha(t,e,1))),t.lanes|=1),n)}var KN=$o.ReactCurrentOwner,dr=!1;function qi(n,e,t,i){e.child=n===null?xb(e,null,t,i):mf(e,n.child,t,i)}function c4(n,e,t,i,r){t=t.render;var s=e.ref;return of(e,r),i=mS(n,e,t,i,s,r),t=gS(),n!==null&&!dr?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,Zo(n,e,r)):(Cn&&t&&iS(e),e.flags|=1,qi(n,e,i,r),e.child)}function f4(n,e,t,i,r){if(n===null){var s=t.type;return typeof s=="function"&&!wS(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,Vb(n,e,s,i,r)):(n=m0(t.type,null,i,e,e.mode,r),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&r)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:wd,t(o,i)&&n.ref===e.ref)return Zo(n,e,r)}return e.flags|=1,n=Wa(s,i),n.ref=e.ref,n.return=e,e.child=n}function Vb(n,e,t,i,r){if(n!==null){var s=n.memoizedProps;if(wd(s,i)&&n.ref===e.ref)if(dr=!1,e.pendingProps=i=s,(n.lanes&r)!==0)n.flags&131072&&(dr=!0);else return e.lanes=n.lanes,Zo(n,e,r)}return Y2(n,e,t,i,r)}function Wb(n,e,t){var i=e.pendingProps,r=i.children,s=n!==null?n.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},mn(Vc,Mr),Mr|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,mn(Vc,Mr),Mr|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:t,mn(Vc,Mr),Mr|=i}else s!==null?(i=s.baseLanes|t,e.memoizedState=null):i=t,mn(Vc,Mr),Mr|=i;return qi(n,e,r,t),e.child}function jb(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function Y2(n,e,t,i,r){var s=mr(t)?Au:Vi.current;return s=df(e,s),of(e,r),t=mS(n,e,t,i,s,r),i=gS(),n!==null&&!dr?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,Zo(n,e,r)):(Cn&&i&&iS(e),e.flags|=1,qi(n,e,t,r),e.child)}function h4(n,e,t,i,r){if(mr(t)){var s=!0;K0(e)}else s=!1;if(of(e,r),e.stateNode===null)h0(n,e),yb(e,t,i),J2(e,t,i,r),i=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=t.contextType;typeof u=="object"&&u!==null?u=cs(u):(u=mr(t)?Au:Vi.current,u=df(e,u));var c=t.getDerivedStateFromProps,h=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==u)&&i4(e,o,i,u),Ma=!1;var p=e.memoizedState;o.state=p,$0(e,i,o,r),l=e.memoizedState,a!==i||p!==l||pr.current||Ma?(typeof c=="function"&&(X2(e,t,c,i),l=e.memoizedState),(a=Ma||n4(e,t,a,i,p,l,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=u,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,gb(n,e),a=e.memoizedProps,u=e.type===e.elementType?a:As(e.type,a),o.props=u,h=e.pendingProps,p=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=cs(l):(l=mr(t)?Au:Vi.current,l=df(e,l));var m=t.getDerivedStateFromProps;(c=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||p!==l)&&i4(e,o,i,l),Ma=!1,p=e.memoizedState,o.state=p,$0(e,i,o,r);var v=e.memoizedState;a!==h||p!==v||pr.current||Ma?(typeof m=="function"&&(X2(e,t,m,i),v=e.memoizedState),(u=Ma||n4(e,t,u,i,p,v,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,v,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,v,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=v),o.props=i,o.state=v,o.context=l,i=u):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),i=!1)}return Z2(n,e,t,i,s,r)}function Z2(n,e,t,i,r,s){jb(n,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&qw(e,t,!1),Zo(n,e,s);i=e.stateNode,KN.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,n!==null&&o?(e.child=mf(e,n.child,null,s),e.child=mf(e,null,a,s)):qi(n,e,a,s),e.memoizedState=i.state,r&&qw(e,t,!0),e.child}function Xb(n){var e=n.stateNode;e.pendingContext?Zw(n,e.pendingContext,e.pendingContext!==e.context):e.context&&Zw(n,e.context,!1),fS(n,e.containerInfo)}function d4(n,e,t,i,r){return pf(),sS(r),e.flags|=256,qi(n,e,t,i),e.child}var q2={dehydrated:null,treeContext:null,retryLane:0};function Q2(n){return{baseLanes:n,cachePool:null,transitions:null}}function Jb(n,e,t){var i=e.pendingProps,r=bn.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(r|=1),mn(bn,r&1),n===null)return W2(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,n=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Yg(o,i,0,null),n=pu(n,i,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=Q2(t),e.memoizedState=q2,n):_S(e,o));if(r=n.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return YN(n,e,o,i,a,r,t);if(s){s=i.fallback,o=e.mode,r=n.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=Wa(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=Wa(a,s):(s=pu(s,o,t,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=n.child.memoizedState,o=o===null?Q2(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=q2,i}return s=n.child,n=s.sibling,i=Wa(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=t),i.return=e,i.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=i,e.memoizedState=null,i}function _S(n,e){return e=Yg({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function jm(n,e,t,i){return i!==null&&sS(i),mf(e,n.child,null,t),n=_S(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function YN(n,e,t,i,r,s,o){if(t)return e.flags&256?(e.flags&=-257,i=E_(Error(ke(422))),jm(n,e,o,i)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=Yg({mode:"visible",children:i.children},r,0,null),s=pu(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&mf(e,n.child,null,o),e.child.memoizedState=Q2(o),e.memoizedState=q2,s);if(!(e.mode&1))return jm(n,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(ke(419)),i=E_(s,i,void 0),jm(n,e,o,i)}if(a=(o&n.childLanes)!==0,dr||a){if(i=gi,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,Yo(n,r),Rs(i,n,r,-1))}return MS(),i=E_(Error(ke(421))),jm(n,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=n.child,e=lO.bind(null,n),r._reactRetry=e,null):(n=s.treeContext,Tr=za(r.nextSibling),Pr=e,Cn=!0,Es=null,n!==null&&(ns[is++]=No,ns[is++]=Oo,ns[is++]=Su,No=n.id,Oo=n.overflow,Su=e),e=_S(e,i.children),e.flags|=4096,e)}function p4(n,e,t){n.lanes|=e;var i=n.alternate;i!==null&&(i.lanes|=e),j2(n.return,e,t)}function M_(n,e,t,i,r){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:t,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=t,s.tailMode=r)}function Kb(n,e,t){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(qi(n,e,i.children,t),i=bn.current,i&2)i=i&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&p4(n,t,e);else if(n.tag===19)p4(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if(mn(bn,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(t=e.child,r=null;t!==null;)n=t.alternate,n!==null&&eg(n)===null&&(r=t),t=t.sibling;t=r,t===null?(r=e.child,e.child=null):(r=t.sibling,t.sibling=null),M_(e,!1,r,t,s);break;case"backwards":for(t=null,r=e.child,e.child=null;r!==null;){if(n=r.alternate,n!==null&&eg(n)===null){e.child=r;break}n=r.sibling,r.sibling=t,t=r,r=n}M_(e,!0,t,null,s);break;case"together":M_(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function h0(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Zo(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),Eu|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(ke(153));if(e.child!==null){for(n=e.child,t=Wa(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=Wa(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function ZN(n,e,t){switch(e.tag){case 3:Xb(e),pf();break;case 5:Ab(e);break;case 1:mr(e.type)&&K0(e);break;case 4:fS(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;mn(q0,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(mn(bn,bn.current&1),e.flags|=128,null):t&e.child.childLanes?Jb(n,e,t):(mn(bn,bn.current&1),n=Zo(n,e,t),n!==null?n.sibling:null);mn(bn,bn.current&1);break;case 19:if(i=(t&e.childLanes)!==0,n.flags&128){if(i)return Kb(n,e,t);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),mn(bn,bn.current),i)break;return null;case 22:case 23:return e.lanes=0,Wb(n,e,t)}return Zo(n,e,t)}var Yb,$2,Zb,qb;Yb=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};$2=function(){};Zb=function(n,e,t,i){var r=n.memoizedProps;if(r!==i){n=e.stateNode,iu(eo.current);var s=null;switch(t){case"input":r=A2(n,r),i=A2(n,i),s=[];break;case"select":r=Dn({},r,{value:void 0}),i=Dn({},i,{value:void 0}),s=[];break;case"textarea":r=E2(n,r),i=E2(n,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=X0)}w2(t,i);var o;t=null;for(u in r)if(!i.hasOwnProperty(u)&&r.hasOwnProperty(u)&&r[u]!=null)if(u==="style"){var a=r[u];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(_d.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in i){var l=i[u];if(a=r!=null?r[u]:void 0,i.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(s||(s=[]),s.push(u,t)),t=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(_d.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&vn("scroll",n),s||a===l||(s=[])):(s=s||[]).push(u,l))}t&&(s=s||[]).push("style",t);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};qb=function(n,e,t,i){t!==i&&(e.flags|=4)};function xh(n,e){if(!Cn)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function Di(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,i=0;if(e)for(var r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=n,r=r.sibling;else for(r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=n,r=r.sibling;return n.subtreeFlags|=i,n.childLanes=t,e}function qN(n,e,t){var i=e.pendingProps;switch(rS(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Di(e),null;case 1:return mr(e.type)&&J0(),Di(e),null;case 3:return i=e.stateNode,gf(),xn(pr),xn(Vi),dS(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(Vm(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Es!==null&&(a3(Es),Es=null))),$2(n,e),Di(e),null;case 5:hS(e);var r=iu(Bd.current);if(t=e.type,n!==null&&e.stateNode!=null)Zb(n,e,t,i,r),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(ke(166));return Di(e),null}if(n=iu(eo.current),Vm(e)){i=e.stateNode,t=e.type;var s=e.memoizedProps;switch(i[Js]=e,i[Rd]=s,n=(e.mode&1)!==0,t){case"dialog":vn("cancel",i),vn("close",i);break;case"iframe":case"object":case"embed":vn("load",i);break;case"video":case"audio":for(r=0;r<Xh.length;r++)vn(Xh[r],i);break;case"source":vn("error",i);break;case"img":case"image":case"link":vn("error",i),vn("load",i);break;case"details":vn("toggle",i);break;case"input":Cw(i,s),vn("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},vn("invalid",i);break;case"textarea":Mw(i,s),vn("invalid",i)}w2(t,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&Gm(i.textContent,a,n),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Gm(i.textContent,a,n),r=["children",""+a]):_d.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&vn("scroll",i)}switch(t){case"input":Dm(i),Ew(i,s,!0);break;case"textarea":Dm(i),ww(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=X0)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=E8(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=o.createElement(t,{is:i.is}):(n=o.createElement(t),t==="select"&&(o=n,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):n=o.createElementNS(n,t),n[Js]=e,n[Rd]=i,Yb(n,e,!1,!1),e.stateNode=n;e:{switch(o=T2(t,i),t){case"dialog":vn("cancel",n),vn("close",n),r=i;break;case"iframe":case"object":case"embed":vn("load",n),r=i;break;case"video":case"audio":for(r=0;r<Xh.length;r++)vn(Xh[r],n);r=i;break;case"source":vn("error",n),r=i;break;case"img":case"image":case"link":vn("error",n),vn("load",n),r=i;break;case"details":vn("toggle",n),r=i;break;case"input":Cw(n,i),r=A2(n,i),vn("invalid",n);break;case"option":r=i;break;case"select":n._wrapperState={wasMultiple:!!i.multiple},r=Dn({},i,{value:void 0}),vn("invalid",n);break;case"textarea":Mw(n,i),r=E2(n,i),vn("invalid",n);break;default:r=i}w2(t,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?T8(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&M8(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&xd(n,l):typeof l=="number"&&xd(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(_d.hasOwnProperty(s)?l!=null&&s==="onScroll"&&vn("scroll",n):l!=null&&VA(n,s,l,o))}switch(t){case"input":Dm(n),Ew(n,i,!1);break;case"textarea":Dm(n),ww(n);break;case"option":i.value!=null&&n.setAttribute("value",""+Qa(i.value));break;case"select":n.multiple=!!i.multiple,s=i.value,s!=null?tf(n,!!i.multiple,s,!1):i.defaultValue!=null&&tf(n,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(n.onclick=X0)}switch(t){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Di(e),null;case 6:if(n&&e.stateNode!=null)qb(n,e,n.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(ke(166));if(t=iu(Bd.current),iu(eo.current),Vm(e)){if(i=e.stateNode,t=e.memoizedProps,i[Js]=e,(s=i.nodeValue!==t)&&(n=Pr,n!==null))switch(n.tag){case 3:Gm(i.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Gm(i.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else i=(t.nodeType===9?t:t.ownerDocument).createTextNode(i),i[Js]=e,e.stateNode=i}return Di(e),null;case 13:if(xn(bn),i=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Cn&&Tr!==null&&e.mode&1&&!(e.flags&128))pb(),pf(),e.flags|=98560,s=!1;else if(s=Vm(e),i!==null&&i.dehydrated!==null){if(n===null){if(!s)throw Error(ke(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(ke(317));s[Js]=e}else pf(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Di(e),s=!1}else Es!==null&&(a3(Es),Es=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(i=i!==null,i!==(n!==null&&n.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(n===null||bn.current&1?si===0&&(si=3):MS())),e.updateQueue!==null&&(e.flags|=4),Di(e),null);case 4:return gf(),$2(n,e),n===null&&Td(e.stateNode.containerInfo),Di(e),null;case 10:return lS(e.type._context),Di(e),null;case 17:return mr(e.type)&&J0(),Di(e),null;case 19:if(xn(bn),s=e.memoizedState,s===null)return Di(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)xh(s,!1);else{if(si!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=eg(n),o!==null){for(e.flags|=128,xh(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=t,t=e.child;t!==null;)s=t,n=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return mn(bn,bn.current&1|2),e.child}n=n.sibling}s.tail!==null&&Jn()>yf&&(e.flags|=128,i=!0,xh(s,!1),e.lanes=4194304)}else{if(!i)if(n=eg(o),n!==null){if(e.flags|=128,i=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),xh(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Cn)return Di(e),null}else 2*Jn()-s.renderingStartTime>yf&&t!==1073741824&&(e.flags|=128,i=!0,xh(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Jn(),e.sibling=null,t=bn.current,mn(bn,i?t&1|2:t&1),e):(Di(e),null);case 22:case 23:return ES(),i=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Mr&1073741824&&(Di(e),e.subtreeFlags&6&&(e.flags|=8192)):Di(e),null;case 24:return null;case 25:return null}throw Error(ke(156,e.tag))}function QN(n,e){switch(rS(e),e.tag){case 1:return mr(e.type)&&J0(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return gf(),xn(pr),xn(Vi),dS(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return hS(e),null;case 13:if(xn(bn),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(ke(340));pf()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return xn(bn),null;case 4:return gf(),null;case 10:return lS(e.type._context),null;case 22:case 23:return ES(),null;case 24:return null;default:return null}}var Xm=!1,ki=!1,$N=typeof WeakSet=="function"?WeakSet:Set,lt=null;function Gc(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(i){kn(n,e,i)}else t.current=null}function e3(n,e,t){try{t()}catch(i){kn(n,e,i)}}var m4=!1;function eO(n,e){if(O2=V0,n=tb(),nS(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var i=t.getSelection&&t.getSelection();if(i&&i.rangeCount!==0){t=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,u=0,c=0,h=n,p=null;t:for(;;){for(var m;h!==t||r!==0&&h.nodeType!==3||(a=o+r),h!==s||i!==0&&h.nodeType!==3||(l=o+i),h.nodeType===3&&(o+=h.nodeValue.length),(m=h.firstChild)!==null;)p=h,h=m;for(;;){if(h===n)break t;if(p===t&&++u===r&&(a=o),p===s&&++c===i&&(l=o),(m=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=m}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(U2={focusedElem:n,selectionRange:t},V0=!1,lt=e;lt!==null;)if(e=lt,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,lt=n;else for(;lt!==null;){e=lt;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var A=v.memoizedProps,_=v.memoizedState,g=e.stateNode,S=g.getSnapshotBeforeUpdate(e.elementType===e.type?A:As(e.type,A),_);g.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ke(163))}}catch(E){kn(e,e.return,E)}if(n=e.sibling,n!==null){n.return=e.return,lt=n;break}lt=e.return}return v=m4,m4=!1,v}function nd(n,e,t){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&n)===n){var s=r.destroy;r.destroy=void 0,s!==void 0&&e3(e,t,s)}r=r.next}while(r!==i)}}function Jg(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var i=t.create;t.destroy=i()}t=t.next}while(t!==e)}}function t3(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function Qb(n){var e=n.alternate;e!==null&&(n.alternate=null,Qb(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Js],delete e[Rd],delete e[H2],delete e[NN],delete e[ON])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function $b(n){return n.tag===5||n.tag===3||n.tag===4}function g4(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||$b(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function n3(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=X0));else if(i!==4&&(n=n.child,n!==null))for(n3(n,e,t),n=n.sibling;n!==null;)n3(n,e,t),n=n.sibling}function i3(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for(i3(n,e,t),n=n.sibling;n!==null;)i3(n,e,t),n=n.sibling}var Ai=null,Cs=!1;function ua(n,e,t){for(t=t.child;t!==null;)eR(n,e,t),t=t.sibling}function eR(n,e,t){if($s&&typeof $s.onCommitFiberUnmount=="function")try{$s.onCommitFiberUnmount(kg,t)}catch{}switch(t.tag){case 5:ki||Gc(t,e);case 6:var i=Ai,r=Cs;Ai=null,ua(n,e,t),Ai=i,Cs=r,Ai!==null&&(Cs?(n=Ai,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):Ai.removeChild(t.stateNode));break;case 18:Ai!==null&&(Cs?(n=Ai,t=t.stateNode,n.nodeType===8?y_(n.parentNode,t):n.nodeType===1&&y_(n,t),Ed(n)):y_(Ai,t.stateNode));break;case 4:i=Ai,r=Cs,Ai=t.stateNode.containerInfo,Cs=!0,ua(n,e,t),Ai=i,Cs=r;break;case 0:case 11:case 14:case 15:if(!ki&&(i=t.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&e3(t,e,o),r=r.next}while(r!==i)}ua(n,e,t);break;case 1:if(!ki&&(Gc(t,e),i=t.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=t.memoizedProps,i.state=t.memoizedState,i.componentWillUnmount()}catch(a){kn(t,e,a)}ua(n,e,t);break;case 21:ua(n,e,t);break;case 22:t.mode&1?(ki=(i=ki)||t.memoizedState!==null,ua(n,e,t),ki=i):ua(n,e,t);break;default:ua(n,e,t)}}function v4(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new $N),e.forEach(function(i){var r=uO.bind(null,n,i);t.has(i)||(t.add(i),i.then(r,r))})}}function gs(n,e){var t=e.deletions;if(t!==null)for(var i=0;i<t.length;i++){var r=t[i];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ai=a.stateNode,Cs=!1;break e;case 3:Ai=a.stateNode.containerInfo,Cs=!0;break e;case 4:Ai=a.stateNode.containerInfo,Cs=!0;break e}a=a.return}if(Ai===null)throw Error(ke(160));eR(s,o,r),Ai=null,Cs=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(u){kn(r,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)tR(e,n),e=e.sibling}function tR(n,e){var t=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(gs(e,n),Ws(n),i&4){try{nd(3,n,n.return),Jg(3,n)}catch(A){kn(n,n.return,A)}try{nd(5,n,n.return)}catch(A){kn(n,n.return,A)}}break;case 1:gs(e,n),Ws(n),i&512&&t!==null&&Gc(t,t.return);break;case 5:if(gs(e,n),Ws(n),i&512&&t!==null&&Gc(t,t.return),n.flags&32){var r=n.stateNode;try{xd(r,"")}catch(A){kn(n,n.return,A)}}if(i&4&&(r=n.stateNode,r!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&S8(r,s),T2(a,o);var u=T2(a,s);for(o=0;o<l.length;o+=2){var c=l[o],h=l[o+1];c==="style"?T8(r,h):c==="dangerouslySetInnerHTML"?M8(r,h):c==="children"?xd(r,h):VA(r,c,h,u)}switch(a){case"input":S2(r,s);break;case"textarea":C8(r,s);break;case"select":var p=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?tf(r,!!s.multiple,m,!1):p!==!!s.multiple&&(s.defaultValue!=null?tf(r,!!s.multiple,s.defaultValue,!0):tf(r,!!s.multiple,s.multiple?[]:"",!1))}r[Rd]=s}catch(A){kn(n,n.return,A)}}break;case 6:if(gs(e,n),Ws(n),i&4){if(n.stateNode===null)throw Error(ke(162));r=n.stateNode,s=n.memoizedProps;try{r.nodeValue=s}catch(A){kn(n,n.return,A)}}break;case 3:if(gs(e,n),Ws(n),i&4&&t!==null&&t.memoizedState.isDehydrated)try{Ed(e.containerInfo)}catch(A){kn(n,n.return,A)}break;case 4:gs(e,n),Ws(n);break;case 13:gs(e,n),Ws(n),r=n.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(SS=Jn())),i&4&&v4(n);break;case 22:if(c=t!==null&&t.memoizedState!==null,n.mode&1?(ki=(u=ki)||c,gs(e,n),ki=u):gs(e,n),Ws(n),i&8192){if(u=n.memoizedState!==null,(n.stateNode.isHidden=u)&&!c&&n.mode&1)for(lt=n,c=n.child;c!==null;){for(h=lt=c;lt!==null;){switch(p=lt,m=p.child,p.tag){case 0:case 11:case 14:case 15:nd(4,p,p.return);break;case 1:Gc(p,p.return);var v=p.stateNode;if(typeof v.componentWillUnmount=="function"){i=p,t=p.return;try{e=i,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(A){kn(i,t,A)}}break;case 5:Gc(p,p.return);break;case 22:if(p.memoizedState!==null){_4(h);continue}}m!==null?(m.return=p,lt=m):_4(h)}c=c.sibling}e:for(c=null,h=n;;){if(h.tag===5){if(c===null){c=h;try{r=h.stateNode,u?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=w8("display",o))}catch(A){kn(n,n.return,A)}}}else if(h.tag===6){if(c===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(A){kn(n,n.return,A)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===n)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===n)break e;for(;h.sibling===null;){if(h.return===null||h.return===n)break e;c===h&&(c=null),h=h.return}c===h&&(c=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:gs(e,n),Ws(n),i&4&&v4(n);break;case 21:break;default:gs(e,n),Ws(n)}}function Ws(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if($b(t)){var i=t;break e}t=t.return}throw Error(ke(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(xd(r,""),i.flags&=-33);var s=g4(n);i3(n,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=g4(n);n3(n,a,o);break;default:throw Error(ke(161))}}catch(l){kn(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function tO(n,e,t){lt=n,nR(n)}function nR(n,e,t){for(var i=(n.mode&1)!==0;lt!==null;){var r=lt,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||Xm;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||ki;a=Xm;var u=ki;if(Xm=o,(ki=l)&&!u)for(lt=r;lt!==null;)o=lt,l=o.child,o.tag===22&&o.memoizedState!==null?x4(r):l!==null?(l.return=o,lt=l):x4(r);for(;s!==null;)lt=s,nR(s),s=s.sibling;lt=r,Xm=a,ki=u}y4(n)}else r.subtreeFlags&8772&&s!==null?(s.return=r,lt=s):y4(n)}}function y4(n){for(;lt!==null;){var e=lt;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ki||Jg(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!ki)if(t===null)i.componentDidMount();else{var r=e.elementType===e.type?t.memoizedProps:As(e.type,t.memoizedProps);i.componentDidUpdate(r,t.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&t4(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}t4(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var h=c.dehydrated;h!==null&&Ed(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ke(163))}ki||e.flags&512&&t3(e)}catch(p){kn(e,e.return,p)}}if(e===n){lt=null;break}if(t=e.sibling,t!==null){t.return=e.return,lt=t;break}lt=e.return}}function _4(n){for(;lt!==null;){var e=lt;if(e===n){lt=null;break}var t=e.sibling;if(t!==null){t.return=e.return,lt=t;break}lt=e.return}}function x4(n){for(;lt!==null;){var e=lt;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{Jg(4,e)}catch(l){kn(e,t,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){kn(e,r,l)}}var s=e.return;try{t3(e)}catch(l){kn(e,s,l)}break;case 5:var o=e.return;try{t3(e)}catch(l){kn(e,o,l)}}}catch(l){kn(e,e.return,l)}if(e===n){lt=null;break}var a=e.sibling;if(a!==null){a.return=e.return,lt=a;break}lt=e.return}}var nO=Math.ceil,ig=$o.ReactCurrentDispatcher,xS=$o.ReactCurrentOwner,ls=$o.ReactCurrentBatchConfig,Qt=0,gi=null,$n=null,Mi=0,Mr=0,Vc=cl(0),si=0,Fd=null,Eu=0,Kg=0,AS=0,id=null,fr=null,SS=0,yf=1/0,Ro=null,rg=!1,r3=null,Ga=null,Jm=!1,La=null,sg=0,rd=0,s3=null,d0=-1,p0=0;function er(){return Qt&6?Jn():d0!==-1?d0:d0=Jn()}function Va(n){return n.mode&1?Qt&2&&Mi!==0?Mi&-Mi:kN.transition!==null?(p0===0&&(p0=k8()),p0):(n=un,n!==0||(n=window.event,n=n===void 0?16:X8(n.type)),n):1}function Rs(n,e,t,i){if(50<rd)throw rd=0,s3=null,Error(ke(185));cp(n,t,i),(!(Qt&2)||n!==gi)&&(n===gi&&(!(Qt&2)&&(Kg|=t),si===4&&Ra(n,Mi)),gr(n,i),t===1&&Qt===0&&!(e.mode&1)&&(yf=Jn()+500,Wg&&fl()))}function gr(n,e){var t=n.callbackNode;kF(n,e);var i=G0(n,n===gi?Mi:0);if(i===0)t!==null&&Rw(t),n.callbackNode=null,n.callbackPriority=0;else if(e=i&-i,n.callbackPriority!==e){if(t!=null&&Rw(t),e===1)n.tag===0?UN(A4.bind(null,n)):fb(A4.bind(null,n)),DN(function(){!(Qt&6)&&fl()}),t=null;else{switch(z8(i)){case 1:t=KA;break;case 4:t=O8;break;case 16:t=H0;break;case 536870912:t=U8;break;default:t=H0}t=cR(t,iR.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function iR(n,e){if(d0=-1,p0=0,Qt&6)throw Error(ke(327));var t=n.callbackNode;if(af()&&n.callbackNode!==t)return null;var i=G0(n,n===gi?Mi:0);if(i===0)return null;if(i&30||i&n.expiredLanes||e)e=og(n,i);else{e=i;var r=Qt;Qt|=2;var s=sR();(gi!==n||Mi!==e)&&(Ro=null,yf=Jn()+500,du(n,e));do try{sO();break}catch(a){rR(n,a)}while(!0);aS(),ig.current=s,Qt=r,$n!==null?e=0:(gi=null,Mi=0,e=si)}if(e!==0){if(e===2&&(r=I2(n),r!==0&&(i=r,e=o3(n,r))),e===1)throw t=Fd,du(n,0),Ra(n,i),gr(n,Jn()),t;if(e===6)Ra(n,i);else{if(r=n.current.alternate,!(i&30)&&!iO(r)&&(e=og(n,i),e===2&&(s=I2(n),s!==0&&(i=s,e=o3(n,s))),e===1))throw t=Fd,du(n,0),Ra(n,i),gr(n,Jn()),t;switch(n.finishedWork=r,n.finishedLanes=i,e){case 0:case 1:throw Error(ke(345));case 2:jl(n,fr,Ro);break;case 3:if(Ra(n,i),(i&130023424)===i&&(e=SS+500-Jn(),10<e)){if(G0(n,0)!==0)break;if(r=n.suspendedLanes,(r&i)!==i){er(),n.pingedLanes|=n.suspendedLanes&r;break}n.timeoutHandle=z2(jl.bind(null,n,fr,Ro),e);break}jl(n,fr,Ro);break;case 4:if(Ra(n,i),(i&4194240)===i)break;for(e=n.eventTimes,r=-1;0<i;){var o=31-bs(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=Jn()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*nO(i/1960))-i,10<i){n.timeoutHandle=z2(jl.bind(null,n,fr,Ro),i);break}jl(n,fr,Ro);break;case 5:jl(n,fr,Ro);break;default:throw Error(ke(329))}}}return gr(n,Jn()),n.callbackNode===t?iR.bind(null,n):null}function o3(n,e){var t=id;return n.current.memoizedState.isDehydrated&&(du(n,e).flags|=256),n=og(n,e),n!==2&&(e=fr,fr=t,e!==null&&a3(e)),n}function a3(n){fr===null?fr=n:fr.push.apply(fr,n)}function iO(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var i=0;i<t.length;i++){var r=t[i],s=r.getSnapshot;r=r.value;try{if(!Bs(s(),r))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ra(n,e){for(e&=~AS,e&=~Kg,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-bs(e),i=1<<t;n[t]=-1,e&=~i}}function A4(n){if(Qt&6)throw Error(ke(327));af();var e=G0(n,0);if(!(e&1))return gr(n,Jn()),null;var t=og(n,e);if(n.tag!==0&&t===2){var i=I2(n);i!==0&&(e=i,t=o3(n,i))}if(t===1)throw t=Fd,du(n,0),Ra(n,e),gr(n,Jn()),t;if(t===6)throw Error(ke(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,jl(n,fr,Ro),gr(n,Jn()),null}function CS(n,e){var t=Qt;Qt|=1;try{return n(e)}finally{Qt=t,Qt===0&&(yf=Jn()+500,Wg&&fl())}}function Mu(n){La!==null&&La.tag===0&&!(Qt&6)&&af();var e=Qt;Qt|=1;var t=ls.transition,i=un;try{if(ls.transition=null,un=1,n)return n()}finally{un=i,ls.transition=t,Qt=e,!(Qt&6)&&fl()}}function ES(){Mr=Vc.current,xn(Vc)}function du(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,LN(t)),$n!==null)for(t=$n.return;t!==null;){var i=t;switch(rS(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&J0();break;case 3:gf(),xn(pr),xn(Vi),dS();break;case 5:hS(i);break;case 4:gf();break;case 13:xn(bn);break;case 19:xn(bn);break;case 10:lS(i.type._context);break;case 22:case 23:ES()}t=t.return}if(gi=n,$n=n=Wa(n.current,null),Mi=Mr=e,si=0,Fd=null,AS=Kg=Eu=0,fr=id=null,nu!==null){for(e=0;e<nu.length;e++)if(t=nu[e],i=t.interleaved,i!==null){t.interleaved=null;var r=i.next,s=t.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}t.pending=i}nu=null}return n}function rR(n,e){do{var t=$n;try{if(aS(),c0.current=ng,tg){for(var i=Ln.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}tg=!1}if(Cu=0,mi=ri=Ln=null,td=!1,Id=0,xS.current=null,t===null||t.return===null){si=1,Fd=e,$n=null;break}e:{var s=n,o=t.return,a=t,l=e;if(e=Mi,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,h=c.tag;if(!(c.mode&1)&&(h===0||h===11||h===15)){var p=c.alternate;p?(c.updateQueue=p.updateQueue,c.memoizedState=p.memoizedState,c.lanes=p.lanes):(c.updateQueue=null,c.memoizedState=null)}var m=l4(o);if(m!==null){m.flags&=-257,u4(m,o,a,s,e),m.mode&1&&a4(s,u,e),e=m,l=u;var v=e.updateQueue;if(v===null){var A=new Set;A.add(l),e.updateQueue=A}else v.add(l);break e}else{if(!(e&1)){a4(s,u,e),MS();break e}l=Error(ke(426))}}else if(Cn&&a.mode&1){var _=l4(o);if(_!==null){!(_.flags&65536)&&(_.flags|=256),u4(_,o,a,s,e),sS(vf(l,a));break e}}s=l=vf(l,a),si!==4&&(si=2),id===null?id=[s]:id.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var g=Hb(s,l,e);e4(s,g);break e;case 1:a=l;var S=s.type,x=s.stateNode;if(!(s.flags&128)&&(typeof S.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Ga===null||!Ga.has(x)))){s.flags|=65536,e&=-e,s.lanes|=e;var E=Gb(s,a,e);e4(s,E);break e}}s=s.return}while(s!==null)}aR(t)}catch(b){e=b,$n===t&&t!==null&&($n=t=t.return);continue}break}while(!0)}function sR(){var n=ig.current;return ig.current=ng,n===null?ng:n}function MS(){(si===0||si===3||si===2)&&(si=4),gi===null||!(Eu&268435455)&&!(Kg&268435455)||Ra(gi,Mi)}function og(n,e){var t=Qt;Qt|=2;var i=sR();(gi!==n||Mi!==e)&&(Ro=null,du(n,e));do try{rO();break}catch(r){rR(n,r)}while(!0);if(aS(),Qt=t,ig.current=i,$n!==null)throw Error(ke(261));return gi=null,Mi=0,si}function rO(){for(;$n!==null;)oR($n)}function sO(){for(;$n!==null&&!PF();)oR($n)}function oR(n){var e=uR(n.alternate,n,Mr);n.memoizedProps=n.pendingProps,e===null?aR(n):$n=e,xS.current=null}function aR(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=QN(t,e),t!==null){t.flags&=32767,$n=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{si=6,$n=null;return}}else if(t=qN(t,e,Mr),t!==null){$n=t;return}if(e=e.sibling,e!==null){$n=e;return}$n=e=n}while(e!==null);si===0&&(si=5)}function jl(n,e,t){var i=un,r=ls.transition;try{ls.transition=null,un=1,oO(n,e,t,i)}finally{ls.transition=r,un=i}return null}function oO(n,e,t,i){do af();while(La!==null);if(Qt&6)throw Error(ke(327));t=n.finishedWork;var r=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(ke(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(zF(n,s),n===gi&&($n=gi=null,Mi=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||Jm||(Jm=!0,cR(H0,function(){return af(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=ls.transition,ls.transition=null;var o=un;un=1;var a=Qt;Qt|=4,xS.current=null,eO(n,t),tR(t,n),wN(U2),V0=!!O2,U2=O2=null,n.current=t,tO(t),BF(),Qt=a,un=o,ls.transition=s}else n.current=t;if(Jm&&(Jm=!1,La=n,sg=r),s=n.pendingLanes,s===0&&(Ga=null),DF(t.stateNode),gr(n,Jn()),e!==null)for(i=n.onRecoverableError,t=0;t<e.length;t++)r=e[t],i(r.value,{componentStack:r.stack,digest:r.digest});if(rg)throw rg=!1,n=r3,r3=null,n;return sg&1&&n.tag!==0&&af(),s=n.pendingLanes,s&1?n===s3?rd++:(rd=0,s3=n):rd=0,fl(),null}function af(){if(La!==null){var n=z8(sg),e=ls.transition,t=un;try{if(ls.transition=null,un=16>n?16:n,La===null)var i=!1;else{if(n=La,La=null,sg=0,Qt&6)throw Error(ke(331));var r=Qt;for(Qt|=4,lt=n.current;lt!==null;){var s=lt,o=s.child;if(lt.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(lt=u;lt!==null;){var c=lt;switch(c.tag){case 0:case 11:case 15:nd(8,c,s)}var h=c.child;if(h!==null)h.return=c,lt=h;else for(;lt!==null;){c=lt;var p=c.sibling,m=c.return;if(Qb(c),c===u){lt=null;break}if(p!==null){p.return=m,lt=p;break}lt=m}}}var v=s.alternate;if(v!==null){var A=v.child;if(A!==null){v.child=null;do{var _=A.sibling;A.sibling=null,A=_}while(A!==null)}}lt=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,lt=o;else e:for(;lt!==null;){if(s=lt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:nd(9,s,s.return)}var g=s.sibling;if(g!==null){g.return=s.return,lt=g;break e}lt=s.return}}var S=n.current;for(lt=S;lt!==null;){o=lt;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,lt=x;else e:for(o=S;lt!==null;){if(a=lt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Jg(9,a)}}catch(b){kn(a,a.return,b)}if(a===o){lt=null;break e}var E=a.sibling;if(E!==null){E.return=a.return,lt=E;break e}lt=a.return}}if(Qt=r,fl(),$s&&typeof $s.onPostCommitFiberRoot=="function")try{$s.onPostCommitFiberRoot(kg,n)}catch{}i=!0}return i}finally{un=t,ls.transition=e}}return!1}function S4(n,e,t){e=vf(t,e),e=Hb(n,e,1),n=Ha(n,e,1),e=er(),n!==null&&(cp(n,1,e),gr(n,e))}function kn(n,e,t){if(n.tag===3)S4(n,n,t);else for(;e!==null;){if(e.tag===3){S4(e,n,t);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Ga===null||!Ga.has(i))){n=vf(t,n),n=Gb(e,n,1),e=Ha(e,n,1),n=er(),e!==null&&(cp(e,1,n),gr(e,n));break}}e=e.return}}function aO(n,e,t){var i=n.pingCache;i!==null&&i.delete(e),e=er(),n.pingedLanes|=n.suspendedLanes&t,gi===n&&(Mi&t)===t&&(si===4||si===3&&(Mi&130023424)===Mi&&500>Jn()-SS?du(n,0):AS|=t),gr(n,e)}function lR(n,e){e===0&&(n.mode&1?(e=Om,Om<<=1,!(Om&130023424)&&(Om=4194304)):e=1);var t=er();n=Yo(n,e),n!==null&&(cp(n,e,t),gr(n,t))}function lO(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),lR(n,t)}function uO(n,e){var t=0;switch(n.tag){case 13:var i=n.stateNode,r=n.memoizedState;r!==null&&(t=r.retryLane);break;case 19:i=n.stateNode;break;default:throw Error(ke(314))}i!==null&&i.delete(e),lR(n,t)}var uR;uR=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||pr.current)dr=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return dr=!1,ZN(n,e,t);dr=!!(n.flags&131072)}else dr=!1,Cn&&e.flags&1048576&&hb(e,Z0,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;h0(n,e),n=e.pendingProps;var r=df(e,Vi.current);of(e,t),r=mS(null,e,i,n,r,t);var s=gS();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,mr(i)?(s=!0,K0(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,cS(e),r.updater=jg,e.stateNode=r,r._reactInternals=e,J2(e,i,n,t),e=Z2(null,e,i,!0,s,t)):(e.tag=0,Cn&&s&&iS(e),qi(null,e,r,t),e=e.child),e;case 16:i=e.elementType;e:{switch(h0(n,e),n=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=fO(i),n=As(i,n),r){case 0:e=Y2(null,e,i,n,t);break e;case 1:e=h4(null,e,i,n,t);break e;case 11:e=c4(null,e,i,n,t);break e;case 14:e=f4(null,e,i,As(i.type,n),t);break e}throw Error(ke(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:As(i,r),Y2(n,e,i,r,t);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:As(i,r),h4(n,e,i,r,t);case 3:e:{if(Xb(e),n===null)throw Error(ke(387));i=e.pendingProps,s=e.memoizedState,r=s.element,gb(n,e),$0(e,i,null,t);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=vf(Error(ke(423)),e),e=d4(n,e,i,t,r);break e}else if(i!==r){r=vf(Error(ke(424)),e),e=d4(n,e,i,t,r);break e}else for(Tr=za(e.stateNode.containerInfo.firstChild),Pr=e,Cn=!0,Es=null,t=xb(e,null,i,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(pf(),i===r){e=Zo(n,e,t);break e}qi(n,e,i,t)}e=e.child}return e;case 5:return Ab(e),n===null&&W2(e),i=e.type,r=e.pendingProps,s=n!==null?n.memoizedProps:null,o=r.children,k2(i,r)?o=null:s!==null&&k2(i,s)&&(e.flags|=32),jb(n,e),qi(n,e,o,t),e.child;case 6:return n===null&&W2(e),null;case 13:return Jb(n,e,t);case 4:return fS(e,e.stateNode.containerInfo),i=e.pendingProps,n===null?e.child=mf(e,null,i,t):qi(n,e,i,t),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:As(i,r),c4(n,e,i,r,t);case 7:return qi(n,e,e.pendingProps,t),e.child;case 8:return qi(n,e,e.pendingProps.children,t),e.child;case 12:return qi(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,mn(q0,i._currentValue),i._currentValue=o,s!==null)if(Bs(s.value,o)){if(s.children===r.children&&!pr.current){e=Zo(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=Go(-1,t&-t),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),j2(s.return,t,e),a.lanes|=t;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(ke(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),j2(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}qi(n,e,r.children,t),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,of(e,t),r=cs(r),i=i(r),e.flags|=1,qi(n,e,i,t),e.child;case 14:return i=e.type,r=As(i,e.pendingProps),r=As(i.type,r),f4(n,e,i,r,t);case 15:return Vb(n,e,e.type,e.pendingProps,t);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:As(i,r),h0(n,e),e.tag=1,mr(i)?(n=!0,K0(e)):n=!1,of(e,t),yb(e,i,r),J2(e,i,r,t),Z2(null,e,i,!0,n,t);case 19:return Kb(n,e,t);case 22:return Wb(n,e,t)}throw Error(ke(156,e.tag))};function cR(n,e){return N8(n,e)}function cO(n,e,t,i){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function os(n,e,t,i){return new cO(n,e,t,i)}function wS(n){return n=n.prototype,!(!n||!n.isReactComponent)}function fO(n){if(typeof n=="function")return wS(n)?1:0;if(n!=null){if(n=n.$$typeof,n===jA)return 11;if(n===XA)return 14}return 2}function Wa(n,e){var t=n.alternate;return t===null?(t=os(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function m0(n,e,t,i,r,s){var o=2;if(i=n,typeof n=="function")wS(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case Lc:return pu(t.children,r,s,e);case WA:o=8,r|=8;break;case v2:return n=os(12,t,e,r|2),n.elementType=v2,n.lanes=s,n;case y2:return n=os(13,t,e,r),n.elementType=y2,n.lanes=s,n;case _2:return n=os(19,t,e,r),n.elementType=_2,n.lanes=s,n;case _8:return Yg(t,r,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case v8:o=10;break e;case y8:o=9;break e;case jA:o=11;break e;case XA:o=14;break e;case Ea:o=16,i=null;break e}throw Error(ke(130,n==null?n:typeof n,""))}return e=os(o,t,e,r),e.elementType=n,e.type=i,e.lanes=s,e}function pu(n,e,t,i){return n=os(7,n,i,e),n.lanes=t,n}function Yg(n,e,t,i){return n=os(22,n,i,e),n.elementType=_8,n.lanes=t,n.stateNode={isHidden:!1},n}function w_(n,e,t){return n=os(6,n,null,e),n.lanes=t,n}function T_(n,e,t){return e=os(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function hO(n,e,t,i,r){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=a_(0),this.expirationTimes=a_(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=a_(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function TS(n,e,t,i,r,s,o,a,l){return n=new hO(n,e,t,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=os(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:i,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},cS(s),n}function dO(n,e,t){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ic,key:i==null?null:""+i,children:n,containerInfo:e,implementation:t}}function fR(n){if(!n)return $a;n=n._reactInternals;e:{if(Iu(n)!==n||n.tag!==1)throw Error(ke(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(mr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ke(171))}if(n.tag===1){var t=n.type;if(mr(t))return cb(n,t,e)}return e}function hR(n,e,t,i,r,s,o,a,l){return n=TS(t,i,!0,n,r,s,o,a,l),n.context=fR(null),t=n.current,i=er(),r=Va(t),s=Go(i,r),s.callback=e??null,Ha(t,s,r),n.current.lanes=r,cp(n,r,i),gr(n,i),n}function Zg(n,e,t,i){var r=e.current,s=er(),o=Va(r);return t=fR(t),e.context===null?e.context=t:e.pendingContext=t,e=Go(s,o),e.payload={element:n},i=i===void 0?null:i,i!==null&&(e.callback=i),n=Ha(r,e,o),n!==null&&(Rs(n,r,o,s),u0(n,r,o)),o}function ag(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function C4(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function bS(n,e){C4(n,e),(n=n.alternate)&&C4(n,e)}function pO(){return null}var dR=typeof reportError=="function"?reportError:function(n){console.error(n)};function RS(n){this._internalRoot=n}qg.prototype.render=RS.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(ke(409));Zg(n,e,null,null)};qg.prototype.unmount=RS.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Mu(function(){Zg(null,n,null,null)}),e[Ko]=null}};function qg(n){this._internalRoot=n}qg.prototype.unstable_scheduleHydration=function(n){if(n){var e=V8();n={blockedOn:null,target:n,priority:e};for(var t=0;t<ba.length&&e!==0&&e<ba[t].priority;t++);ba.splice(t,0,n),t===0&&j8(n)}};function PS(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Qg(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function E4(){}function mO(n,e,t,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var u=ag(o);s.call(u)}}var o=hR(e,i,n,0,null,!1,!1,"",E4);return n._reactRootContainer=o,n[Ko]=o.current,Td(n.nodeType===8?n.parentNode:n),Mu(),o}for(;r=n.lastChild;)n.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var u=ag(l);a.call(u)}}var l=TS(n,0,!1,null,null,!1,!1,"",E4);return n._reactRootContainer=l,n[Ko]=l.current,Td(n.nodeType===8?n.parentNode:n),Mu(function(){Zg(e,l,t,i)}),l}function $g(n,e,t,i,r){var s=t._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=ag(o);a.call(l)}}Zg(e,o,n,r)}else o=mO(t,e,n,r,i);return ag(o)}H8=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=jh(e.pendingLanes);t!==0&&(YA(e,t|1),gr(e,Jn()),!(Qt&6)&&(yf=Jn()+500,fl()))}break;case 13:Mu(function(){var i=Yo(n,1);if(i!==null){var r=er();Rs(i,n,1,r)}}),bS(n,1)}};ZA=function(n){if(n.tag===13){var e=Yo(n,134217728);if(e!==null){var t=er();Rs(e,n,134217728,t)}bS(n,134217728)}};G8=function(n){if(n.tag===13){var e=Va(n),t=Yo(n,e);if(t!==null){var i=er();Rs(t,n,e,i)}bS(n,e)}};V8=function(){return un};W8=function(n,e){var t=un;try{return un=n,e()}finally{un=t}};R2=function(n,e,t){switch(e){case"input":if(S2(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var i=t[e];if(i!==n&&i.form===n.form){var r=Vg(i);if(!r)throw Error(ke(90));A8(i),S2(i,r)}}}break;case"textarea":C8(n,t);break;case"select":e=t.value,e!=null&&tf(n,!!t.multiple,e,!1)}};P8=CS;B8=Mu;var gO={usingClientEntryPoint:!1,Events:[hp,Oc,Vg,b8,R8,CS]},Ah={findFiberByHostInstance:tu,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},vO={bundleType:Ah.bundleType,version:Ah.version,rendererPackageName:Ah.rendererPackageName,rendererConfig:Ah.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:$o.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=D8(n),n===null?null:n.stateNode},findFiberByHostInstance:Ah.findFiberByHostInstance||pO,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Km=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Km.isDisabled&&Km.supportsFiber)try{kg=Km.inject(vO),$s=Km}catch{}}Or.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gO;Or.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!PS(e))throw Error(ke(200));return dO(n,e,null,t)};Or.createRoot=function(n,e){if(!PS(n))throw Error(ke(299));var t=!1,i="",r=dR;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=TS(n,1,!1,null,null,t,!1,i,r),n[Ko]=e.current,Td(n.nodeType===8?n.parentNode:n),new RS(e)};Or.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(ke(188)):(n=Object.keys(n).join(","),Error(ke(268,n)));return n=D8(e),n=n===null?null:n.stateNode,n};Or.flushSync=function(n){return Mu(n)};Or.hydrate=function(n,e,t){if(!Qg(e))throw Error(ke(200));return $g(null,n,e,!0,t)};Or.hydrateRoot=function(n,e,t){if(!PS(n))throw Error(ke(405));var i=t!=null&&t.hydratedSources||null,r=!1,s="",o=dR;if(t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=hR(e,null,n,1,t??null,r,!1,s,o),n[Ko]=e.current,Td(n),i)for(n=0;n<i.length;n++)t=i[n],r=t._getVersion,r=r(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,r]:e.mutableSourceEagerHydrationData.push(t,r);return new qg(e)};Or.render=function(n,e,t){if(!Qg(e))throw Error(ke(200));return $g(null,n,e,!1,t)};Or.unmountComponentAtNode=function(n){if(!Qg(n))throw Error(ke(40));return n._reactRootContainer?(Mu(function(){$g(null,null,n,!1,function(){n._reactRootContainer=null,n[Ko]=null})}),!0):!1};Or.unstable_batchedUpdates=CS;Or.unstable_renderSubtreeIntoContainer=function(n,e,t,i){if(!Qg(t))throw Error(ke(200));if(n==null||n._reactInternals===void 0)throw Error(ke(38));return $g(n,e,t,!1,i)};Or.version="18.2.0-next-9e3b772b8-20220608";function pR(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(pR)}catch(n){console.error(n)}}pR(),h8.exports=Or;var yO=h8.exports,M4=yO;m2.createRoot=M4.createRoot,m2.hydrateRoot=M4.hydrateRoot;/**
 * @remix-run/router v1.15.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Nd(){return Nd=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Nd.apply(this,arguments)}var Da;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Da||(Da={}));const w4="popstate";function _O(n){n===void 0&&(n={});function e(i,r){let{pathname:s,search:o,hash:a}=i.location;return l3("",{pathname:s,search:o,hash:a},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function t(i,r){return typeof r=="string"?r:lg(r)}return AO(e,t,null,n)}function Kn(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function mR(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function xO(){return Math.random().toString(36).substr(2,8)}function T4(n,e){return{usr:n.state,key:n.key,idx:e}}function l3(n,e,t,i){return t===void 0&&(t=null),Nd({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Nf(e):e,{state:t,key:e&&e.key||i||xO()})}function lg(n){let{pathname:e="/",search:t="",hash:i=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Nf(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substr(i),n=n.substr(0,i)),n&&(e.pathname=n)}return e}function AO(n,e,t,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:s=!1}=i,o=r.history,a=Da.Pop,l=null,u=c();u==null&&(u=0,o.replaceState(Nd({},o.state,{idx:u}),""));function c(){return(o.state||{idx:null}).idx}function h(){a=Da.Pop;let _=c(),g=_==null?null:_-u;u=_,l&&l({action:a,location:A.location,delta:g})}function p(_,g){a=Da.Push;let S=l3(A.location,_,g);t&&t(S,_),u=c()+1;let x=T4(S,u),E=A.createHref(S);try{o.pushState(x,"",E)}catch(b){if(b instanceof DOMException&&b.name==="DataCloneError")throw b;r.location.assign(E)}s&&l&&l({action:a,location:A.location,delta:1})}function m(_,g){a=Da.Replace;let S=l3(A.location,_,g);t&&t(S,_),u=c();let x=T4(S,u),E=A.createHref(S);o.replaceState(x,"",E),s&&l&&l({action:a,location:A.location,delta:0})}function v(_){let g=r.location.origin!=="null"?r.location.origin:r.location.href,S=typeof _=="string"?_:lg(_);return S=S.replace(/ $/,"%20"),Kn(g,"No window.location.(origin|href) available to create URL for href: "+S),new URL(S,g)}let A={get action(){return a},get location(){return n(r,o)},listen(_){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(w4,h),l=_,()=>{r.removeEventListener(w4,h),l=null}},createHref(_){return e(r,_)},createURL:v,encodeLocation(_){let g=v(_);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:p,replace:m,go(_){return o.go(_)}};return A}var b4;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(b4||(b4={}));function SO(n,e,t){t===void 0&&(t="/");let i=typeof e=="string"?Nf(e):e,r=BS(i.pathname||"/",t);if(r==null)return null;let s=gR(n);CO(s);let o=null;for(let a=0;o==null&&a<s.length;++a){let l=FO(r);o=IO(s[a],l)}return o}function gR(n,e,t,i){e===void 0&&(e=[]),t===void 0&&(t=[]),i===void 0&&(i="");let r=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Kn(l.relativePath.startsWith(i),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(i.length));let u=ja([i,l.relativePath]),c=t.concat(l);s.children&&s.children.length>0&&(Kn(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),gR(s.children,e,c,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:PO(u,s.index),routesMeta:c})};return n.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))r(s,o);else for(let l of vR(s.path))r(s,o,l)}),e}function vR(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,r=t.endsWith("?"),s=t.replace(/\?$/,"");if(i.length===0)return r?[s,""]:[s];let o=vR(i.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),r&&a.push(...o),a.map(l=>n.startsWith("/")&&l===""?"/":l)}function CO(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:BO(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}const EO=/^:[\w-]+$/,MO=3,wO=2,TO=1,bO=10,RO=-2,R4=n=>n==="*";function PO(n,e){let t=n.split("/"),i=t.length;return t.some(R4)&&(i+=RO),e&&(i+=wO),t.filter(r=>!R4(r)).reduce((r,s)=>r+(EO.test(s)?MO:s===""?TO:bO),i)}function BO(n,e){return n.length===e.length&&n.slice(0,-1).every((i,r)=>i===e[r])?n[n.length-1]-e[e.length-1]:0}function IO(n,e){let{routesMeta:t}=n,i={},r="/",s=[];for(let o=0;o<t.length;++o){let a=t[o],l=o===t.length-1,u=r==="/"?e:e.slice(r.length)||"/",c=LO({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},u);if(!c)return null;Object.assign(i,c.params);let h=a.route;s.push({params:i,pathname:ja([r,c.pathname]),pathnameBase:kO(ja([r,c.pathnameBase])),route:h}),c.pathnameBase!=="/"&&(r=ja([r,c.pathnameBase]))}return s}function LO(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=DO(n.path,n.caseSensitive,n.end),r=e.match(t);if(!r)return null;let s=r[0],o=s.replace(/(.)\/+$/,"$1"),a=r.slice(1);return{params:i.reduce((u,c,h)=>{let{paramName:p,isOptional:m}=c;if(p==="*"){let A=a[h]||"";o=s.slice(0,s.length-A.length).replace(/(.)\/+$/,"$1")}const v=a[h];return m&&!v?u[p]=void 0:u[p]=(v||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:n}}function DO(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),mR(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let i=[],r="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(i.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),r+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?r+="\\/*$":n!==""&&n!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function FO(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return mR(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function BS(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function NO(n,e){e===void 0&&(e="/");let{pathname:t,search:i="",hash:r=""}=typeof n=="string"?Nf(n):n;return{pathname:t?t.startsWith("/")?t:OO(t,e):e,search:zO(i),hash:HO(r)}}function OO(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(r=>{r===".."?t.length>1&&t.pop():r!=="."&&t.push(r)}),t.length>1?t.join("/"):"/"}function b_(n,e,t,i){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function UO(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function IS(n,e){let t=UO(n);return e?t.map((i,r)=>r===n.length-1?i.pathname:i.pathnameBase):t.map(i=>i.pathnameBase)}function LS(n,e,t,i){i===void 0&&(i=!1);let r;typeof n=="string"?r=Nf(n):(r=Nd({},n),Kn(!r.pathname||!r.pathname.includes("?"),b_("?","pathname","search",r)),Kn(!r.pathname||!r.pathname.includes("#"),b_("#","pathname","hash",r)),Kn(!r.search||!r.search.includes("#"),b_("#","search","hash",r)));let s=n===""||r.pathname==="",o=s?"/":r.pathname,a;if(o==null)a=t;else{let h=e.length-1;if(!i&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),h-=1;r.pathname=p.join("/")}a=h>=0?e[h]:"/"}let l=NO(r,a),u=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}const ja=n=>n.join("/").replace(/\/\/+/g,"/"),kO=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),zO=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,HO=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function GO(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const yR=["post","put","patch","delete"];new Set(yR);const VO=["get",...yR];new Set(VO);/**
 * React Router v6.22.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Od(){return Od=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Od.apply(this,arguments)}const DS=G.createContext(null),WO=G.createContext(null),hl=G.createContext(null),ev=G.createContext(null),dl=G.createContext({outlet:null,matches:[],isDataRoute:!1}),_R=G.createContext(null);function jO(n,e){let{relative:t}=e===void 0?{}:e;Of()||Kn(!1);let{basename:i,navigator:r}=G.useContext(hl),{hash:s,pathname:o,search:a}=SR(n,{relative:t}),l=o;return i!=="/"&&(l=o==="/"?i:ja([i,o])),r.createHref({pathname:l,search:a,hash:s})}function Of(){return G.useContext(ev)!=null}function Uf(){return Of()||Kn(!1),G.useContext(ev).location}function xR(n){G.useContext(hl).static||G.useLayoutEffect(n)}function AR(){let{isDataRoute:n}=G.useContext(dl);return n?rU():XO()}function XO(){Of()||Kn(!1);let n=G.useContext(DS),{basename:e,future:t,navigator:i}=G.useContext(hl),{matches:r}=G.useContext(dl),{pathname:s}=Uf(),o=JSON.stringify(IS(r,t.v7_relativeSplatPath)),a=G.useRef(!1);return xR(()=>{a.current=!0}),G.useCallback(function(u,c){if(c===void 0&&(c={}),!a.current)return;if(typeof u=="number"){i.go(u);return}let h=LS(u,JSON.parse(o),s,c.relative==="path");n==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:ja([e,h.pathname])),(c.replace?i.replace:i.push)(h,c.state,c)},[e,i,o,s,n])}function SR(n,e){let{relative:t}=e===void 0?{}:e,{future:i}=G.useContext(hl),{matches:r}=G.useContext(dl),{pathname:s}=Uf(),o=JSON.stringify(IS(r,i.v7_relativeSplatPath));return G.useMemo(()=>LS(n,JSON.parse(o),s,t==="path"),[n,o,s,t])}function JO(n,e){return KO(n,e)}function KO(n,e,t,i){Of()||Kn(!1);let{navigator:r}=G.useContext(hl),{matches:s}=G.useContext(dl),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let u=Uf(),c;if(e){var h;let _=typeof e=="string"?Nf(e):e;l==="/"||(h=_.pathname)!=null&&h.startsWith(l)||Kn(!1),c=_}else c=u;let p=c.pathname||"/",m=p;if(l!=="/"){let _=l.replace(/^\//,"").split("/");m="/"+p.replace(/^\//,"").split("/").slice(_.length).join("/")}let v=SO(n,{pathname:m}),A=$O(v&&v.map(_=>Object.assign({},_,{params:Object.assign({},a,_.params),pathname:ja([l,r.encodeLocation?r.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?l:ja([l,r.encodeLocation?r.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),s,t,i);return e&&A?G.createElement(ev.Provider,{value:{location:Od({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:Da.Pop}},A):A}function YO(){let n=iU(),e=GO(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return G.createElement(G.Fragment,null,G.createElement("h2",null,"Unexpected Application Error!"),G.createElement("h3",{style:{fontStyle:"italic"}},e),t?G.createElement("pre",{style:r},t):null,null)}const ZO=G.createElement(YO,null);class qO extends G.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?G.createElement(dl.Provider,{value:this.props.routeContext},G.createElement(_R.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function QO(n){let{routeContext:e,match:t,children:i}=n,r=G.useContext(DS);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),G.createElement(dl.Provider,{value:e},i)}function $O(n,e,t,i){var r;if(e===void 0&&(e=[]),t===void 0&&(t=null),i===void 0&&(i=null),n==null){var s;if((s=t)!=null&&s.errors)n=t.matches;else return null}let o=n,a=(r=t)==null?void 0:r.errors;if(a!=null){let c=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id]));c>=0||Kn(!1),o=o.slice(0,Math.min(o.length,c+1))}let l=!1,u=-1;if(t&&i&&i.v7_partialHydration)for(let c=0;c<o.length;c++){let h=o[c];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=c),h.route.id){let{loaderData:p,errors:m}=t,v=h.route.loader&&p[h.route.id]===void 0&&(!m||m[h.route.id]===void 0);if(h.route.lazy||v){l=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((c,h,p)=>{let m,v=!1,A=null,_=null;t&&(m=a&&h.route.id?a[h.route.id]:void 0,A=h.route.errorElement||ZO,l&&(u<0&&p===0?(sU("route-fallback",!1),v=!0,_=null):u===p&&(v=!0,_=h.route.hydrateFallbackElement||null)));let g=e.concat(o.slice(0,p+1)),S=()=>{let x;return m?x=A:v?x=_:h.route.Component?x=G.createElement(h.route.Component,null):h.route.element?x=h.route.element:x=c,G.createElement(QO,{match:h,routeContext:{outlet:c,matches:g,isDataRoute:t!=null},children:x})};return t&&(h.route.ErrorBoundary||h.route.errorElement||p===0)?G.createElement(qO,{location:t.location,revalidation:t.revalidation,component:A,error:m,children:S(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):S()},null)}var CR=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(CR||{}),ug=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(ug||{});function eU(n){let e=G.useContext(DS);return e||Kn(!1),e}function tU(n){let e=G.useContext(WO);return e||Kn(!1),e}function nU(n){let e=G.useContext(dl);return e||Kn(!1),e}function ER(n){let e=nU(),t=e.matches[e.matches.length-1];return t.route.id||Kn(!1),t.route.id}function iU(){var n;let e=G.useContext(_R),t=tU(ug.UseRouteError),i=ER(ug.UseRouteError);return e!==void 0?e:(n=t.errors)==null?void 0:n[i]}function rU(){let{router:n}=eU(CR.UseNavigateStable),e=ER(ug.UseNavigateStable),t=G.useRef(!1);return xR(()=>{t.current=!0}),G.useCallback(function(r,s){s===void 0&&(s={}),t.current&&(typeof r=="number"?n.navigate(r):n.navigate(r,Od({fromRouteId:e},s)))},[n,e])}const P4={};function sU(n,e,t){!e&&!P4[n]&&(P4[n]=!0)}function oU(n){let{to:e,replace:t,state:i,relative:r}=n;Of()||Kn(!1);let{future:s,static:o}=G.useContext(hl),{matches:a}=G.useContext(dl),{pathname:l}=Uf(),u=AR(),c=LS(e,IS(a,s.v7_relativeSplatPath),l,r==="path"),h=JSON.stringify(c);return G.useEffect(()=>u(JSON.parse(h),{replace:t,state:i,relative:r}),[u,h,r,t,i]),null}function Aa(n){Kn(!1)}function aU(n){let{basename:e="/",children:t=null,location:i,navigationType:r=Da.Pop,navigator:s,static:o=!1,future:a}=n;Of()&&Kn(!1);let l=e.replace(/^\/*/,"/"),u=G.useMemo(()=>({basename:l,navigator:s,static:o,future:Od({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof i=="string"&&(i=Nf(i));let{pathname:c="/",search:h="",hash:p="",state:m=null,key:v="default"}=i,A=G.useMemo(()=>{let _=BS(c,l);return _==null?null:{location:{pathname:_,search:h,hash:p,state:m,key:v},navigationType:r}},[l,c,h,p,m,v,r]);return A==null?null:G.createElement(hl.Provider,{value:u},G.createElement(ev.Provider,{children:t,value:A}))}function lU(n){let{children:e,location:t}=n;return JO(u3(e),t)}new Promise(()=>{});function u3(n,e){e===void 0&&(e=[]);let t=[];return G.Children.forEach(n,(i,r)=>{if(!G.isValidElement(i))return;let s=[...e,r];if(i.type===G.Fragment){t.push.apply(t,u3(i.props.children,s));return}i.type!==Aa&&Kn(!1),!i.props.index||!i.props.children||Kn(!1);let o={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(o.children=u3(i.props.children,s)),t.push(o)}),t}/**
 * React Router DOM v6.22.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function c3(){return c3=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},c3.apply(this,arguments)}function uU(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}function cU(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function fU(n,e){return n.button===0&&(!e||e==="_self")&&!cU(n)}const hU=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],dU="6";try{window.__reactRouterVersion=dU}catch{}const pU="startTransition",B4=p2[pU];function mU(n){let{basename:e,children:t,future:i,window:r}=n,s=G.useRef();s.current==null&&(s.current=_O({window:r,v5Compat:!0}));let o=s.current,[a,l]=G.useState({action:o.action,location:o.location}),{v7_startTransition:u}=i||{},c=G.useCallback(h=>{u&&B4?B4(()=>l(h)):l(h)},[l,u]);return G.useLayoutEffect(()=>o.listen(c),[o,c]),G.createElement(aU,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:o,future:i})}const gU=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",vU=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ud=G.forwardRef(function(e,t){let{onClick:i,relative:r,reloadDocument:s,replace:o,state:a,target:l,to:u,preventScrollReset:c,unstable_viewTransition:h}=e,p=uU(e,hU),{basename:m}=G.useContext(hl),v,A=!1;if(typeof u=="string"&&vU.test(u)&&(v=u,gU))try{let x=new URL(window.location.href),E=u.startsWith("//")?new URL(x.protocol+u):new URL(u),b=BS(E.pathname,m);E.origin===x.origin&&b!=null?u=b+E.search+E.hash:A=!0}catch{}let _=jO(u,{relative:r}),g=yU(u,{replace:o,state:a,target:l,preventScrollReset:c,relative:r,unstable_viewTransition:h});function S(x){i&&i(x),x.defaultPrevented||g(x)}return G.createElement("a",c3({},p,{href:v||_,onClick:A||s?i:S,ref:t,target:l}))});var I4;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(I4||(I4={}));var L4;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(L4||(L4={}));function yU(n,e){let{target:t,replace:i,state:r,preventScrollReset:s,relative:o,unstable_viewTransition:a}=e===void 0?{}:e,l=AR(),u=Uf(),c=SR(n,{relative:o});return G.useCallback(h=>{if(fU(h,t)){h.preventDefault();let p=i!==void 0?i:lg(u)===lg(c);l(n,{replace:p,state:r,preventScrollReset:s,relative:o,unstable_viewTransition:a})}},[u,l,c,i,r,t,n,s,o,a])}const _U="_container_1y5cl_1",xU="_main_1y5cl_8",AU="_background_1y5cl_14",SU={container:_U,main:xU,background:AU},tv=G.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"}),nv=G.createContext({}),iv=G.createContext(null),FS=typeof document<"u",pp=FS?G.useLayoutEffect:G.useEffect,MR=G.createContext({strict:!1}),NS=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),CU="framerAppearId",wR="data-"+NS(CU),EU={skipAnimations:!1,useManualTiming:!1};class D4{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const t=this.order.indexOf(e);t!==-1&&(this.order.splice(t,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function MU(n){let e=new D4,t=new D4,i=0,r=!1,s=!1;const o=new WeakSet,a={schedule:(l,u=!1,c=!1)=>{const h=c&&r,p=h?e:t;return u&&o.add(l),p.add(l)&&h&&r&&(i=e.order.length),l},cancel:l=>{t.remove(l),o.delete(l)},process:l=>{if(r){s=!0;return}if(r=!0,[e,t]=[t,e],t.clear(),i=e.order.length,i)for(let u=0;u<i;u++){const c=e.order[u];o.has(c)&&(a.schedule(c),n()),c(l)}r=!1,s&&(s=!1,a.process(l))}};return a}const Ym=["read","resolveKeyframes","update","preRender","render","postRender"],wU=40;function TR(n,e){let t=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},s=Ym.reduce((h,p)=>(h[p]=MU(()=>t=!0),h),{}),o=h=>{s[h].process(r)},a=()=>{const h=performance.now();t=!1,r.delta=i?1e3/60:Math.max(Math.min(h-r.timestamp,wU),1),r.timestamp=h,r.isProcessing=!0,Ym.forEach(o),r.isProcessing=!1,t&&e&&(i=!1,n(a))},l=()=>{t=!0,i=!0,r.isProcessing||n(a)};return{schedule:Ym.reduce((h,p)=>{const m=s[p];return h[p]=(v,A=!1,_=!1)=>(t||l(),m.schedule(v,A,_)),h},{}),cancel:h=>Ym.forEach(p=>s[p].cancel(h)),state:r,steps:s}}const{schedule:OS,cancel:Xse}=TR(queueMicrotask,!1);function TU(n,e,t,i){const{visualElement:r}=G.useContext(nv),s=G.useContext(MR),o=G.useContext(iv),a=G.useContext(tv).reducedMotion,l=G.useRef();i=i||s.renderer,!l.current&&i&&(l.current=i(n,{visualState:e,parent:r,props:t,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:a}));const u=l.current;G.useInsertionEffect(()=>{u&&u.update(t,o)});const c=G.useRef(!!(t[wR]&&!window.HandoffComplete));return pp(()=>{u&&(OS.postRender(u.render),c.current&&u.animationState&&u.animationState.animateChanges())}),G.useEffect(()=>{u&&(u.updateFeatures(),!c.current&&u.animationState&&u.animationState.animateChanges(),c.current&&(c.current=!1,window.HandoffComplete=!0))}),u}function Wc(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function bU(n,e,t){return G.useCallback(i=>{i&&n.mount&&n.mount(i),e&&(i?e.mount(i):e.unmount()),t&&(typeof t=="function"?t(i):Wc(t)&&(t.current=i))},[e])}function kd(n){return typeof n=="string"||Array.isArray(n)}function rv(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}const US=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],kS=["initial",...US];function sv(n){return rv(n.animate)||kS.some(e=>kd(n[e]))}function bR(n){return!!(sv(n)||n.variants)}function RU(n,e){if(sv(n)){const{initial:t,animate:i}=n;return{initial:t===!1||kd(t)?t:void 0,animate:kd(i)?i:void 0}}return n.inherit!==!1?e:{}}function PU(n){const{initial:e,animate:t}=RU(n,G.useContext(nv));return G.useMemo(()=>({initial:e,animate:t}),[F4(e),F4(t)])}function F4(n){return Array.isArray(n)?n.join(" "):n}const N4={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},zd={};for(const n in N4)zd[n]={isEnabled:e=>N4[n].some(t=>!!e[t])};function BU(n){for(const e in n)zd[e]={...zd[e],...n[e]}}const zS=G.createContext({}),RR=G.createContext({}),IU=Symbol.for("motionComponentSymbol");function PR({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:i,Component:r}){n&&BU(n);function s(a,l){let u;const c={...G.useContext(tv),...a,layoutId:LU(a)},{isStatic:h}=c,p=PU(a),m=i(a,h);if(!h&&FS){p.visualElement=TU(r,m,c,e);const v=G.useContext(RR),A=G.useContext(MR).strict;p.visualElement&&(u=p.visualElement.loadFeatures(c,A,n,v))}return G.createElement(nv.Provider,{value:p},u&&p.visualElement?G.createElement(u,{visualElement:p.visualElement,...c}):null,t(r,a,bU(m,p.visualElement,l),m,h,p.visualElement))}const o=G.forwardRef(s);return o[IU]=r,o}function LU({layoutId:n}){const e=G.useContext(zS).id;return e&&n!==void 0?e+"-"+n:n}function DU(n){function e(i,r={}){return PR(n(i,r))}if(typeof Proxy>"u")return e;const t=new Map;return new Proxy(e,{get:(i,r)=>(t.has(r)||t.set(r,e(r)),t.get(r))})}const FU=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function HS(n){return typeof n!="string"||n.includes("-")?!1:!!(FU.indexOf(n)>-1||/[A-Z]/u.test(n))}const cg={};function NU(n){Object.assign(cg,n)}const mp=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Lu=new Set(mp);function BR(n,{layout:e,layoutId:t}){return Lu.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!cg[n]||n==="opacity")}const Gn=n=>!!(n&&n.getVelocity),OU={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},UU=mp.length;function kU(n,{enableHardwareAcceleration:e=!0,allowTransformNone:t=!0},i,r){let s="";for(let o=0;o<UU;o++){const a=mp[o];if(n[a]!==void 0){const l=OU[a]||a;s+=`${l}(${n[a]}) `}}return e&&!n.z&&(s+="translateZ(0)"),s=s.trim(),r?s=r(n,i?"":s):t&&i&&(s="none"),s}const IR=n=>e=>typeof e=="string"&&e.startsWith(n),LR=IR("--"),zU=IR("var(--"),GS=n=>zU(n)?HU.test(n.split("/*")[0].trim()):!1,HU=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,GU=(n,e)=>e&&typeof n=="number"?e.transform(n):n,el=(n,e,t)=>t>e?e:t<n?n:t,kf={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},sd={...kf,transform:n=>el(0,1,n)},Zm={...kf,default:1},od=n=>Math.round(n*1e5)/1e5,VS=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu,VU=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu,WU=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu;function gp(n){return typeof n=="string"}const vp=n=>({test:e=>gp(e)&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),Sa=vp("deg"),to=vp("%"),wt=vp("px"),jU=vp("vh"),XU=vp("vw"),O4={...to,parse:n=>to.parse(n)/100,transform:n=>to.transform(n*100)},U4={...kf,transform:Math.round},DR={borderWidth:wt,borderTopWidth:wt,borderRightWidth:wt,borderBottomWidth:wt,borderLeftWidth:wt,borderRadius:wt,radius:wt,borderTopLeftRadius:wt,borderTopRightRadius:wt,borderBottomRightRadius:wt,borderBottomLeftRadius:wt,width:wt,maxWidth:wt,height:wt,maxHeight:wt,size:wt,top:wt,right:wt,bottom:wt,left:wt,padding:wt,paddingTop:wt,paddingRight:wt,paddingBottom:wt,paddingLeft:wt,margin:wt,marginTop:wt,marginRight:wt,marginBottom:wt,marginLeft:wt,rotate:Sa,rotateX:Sa,rotateY:Sa,rotateZ:Sa,scale:Zm,scaleX:Zm,scaleY:Zm,scaleZ:Zm,skew:Sa,skewX:Sa,skewY:Sa,distance:wt,translateX:wt,translateY:wt,translateZ:wt,x:wt,y:wt,z:wt,perspective:wt,transformPerspective:wt,opacity:sd,originX:O4,originY:O4,originZ:wt,zIndex:U4,backgroundPositionX:wt,backgroundPositionY:wt,fillOpacity:sd,strokeOpacity:sd,numOctaves:U4};function WS(n,e,t,i){const{style:r,vars:s,transform:o,transformOrigin:a}=n;let l=!1,u=!1,c=!0;for(const h in e){const p=e[h];if(LR(h)){s[h]=p;continue}const m=DR[h],v=GU(p,m);if(Lu.has(h)){if(l=!0,o[h]=v,!c)continue;p!==(m.default||0)&&(c=!1)}else h.startsWith("origin")?(u=!0,a[h]=v):r[h]=v}if(e.transform||(l||i?r.transform=kU(n.transform,t,c,i):r.transform&&(r.transform="none")),u){const{originX:h="50%",originY:p="50%",originZ:m=0}=a;r.transformOrigin=`${h} ${p} ${m}`}}const jS=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function FR(n,e,t){for(const i in e)!Gn(e[i])&&!BR(i,t)&&(n[i]=e[i])}function JU({transformTemplate:n},e,t){return G.useMemo(()=>{const i=jS();return WS(i,e,{enableHardwareAcceleration:!t},n),Object.assign({},i.vars,i.style)},[e])}function KU(n,e,t){const i=n.style||{},r={};return FR(r,i,n),Object.assign(r,JU(n,e,t)),r}function YU(n,e,t){const i={},r=KU(n,e,t);return n.drag&&n.dragListener!==!1&&(i.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(i.tabIndex=0),i.style=r,i}const ZU=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function fg(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||ZU.has(n)}let NR=n=>!fg(n);function qU(n){n&&(NR=e=>e.startsWith("on")?!fg(e):n(e))}try{qU(require("@emotion/is-prop-valid").default)}catch{}function OR(n,e,t){const i={};for(const r in n)r==="values"&&typeof n.values=="object"||(NR(r)||t===!0&&fg(r)||!e&&!fg(r)||n.draggable&&r.startsWith("onDrag"))&&(i[r]=n[r]);return i}function k4(n,e,t){return typeof n=="string"?n:wt.transform(e+t*n)}function QU(n,e,t){const i=k4(e,n.x,n.width),r=k4(t,n.y,n.height);return`${i} ${r}`}const $U={offset:"stroke-dashoffset",array:"stroke-dasharray"},ek={offset:"strokeDashoffset",array:"strokeDasharray"};function tk(n,e,t=1,i=0,r=!0){n.pathLength=1;const s=r?$U:ek;n[s.offset]=wt.transform(-i);const o=wt.transform(e),a=wt.transform(t);n[s.array]=`${o} ${a}`}function XS(n,{attrX:e,attrY:t,attrScale:i,originX:r,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...u},c,h,p){if(WS(n,u,c,p),h){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:m,style:v,dimensions:A}=n;m.transform&&(A&&(v.transform=m.transform),delete m.transform),A&&(r!==void 0||s!==void 0||v.transform)&&(v.transformOrigin=QU(A,r!==void 0?r:.5,s!==void 0?s:.5)),e!==void 0&&(m.x=e),t!==void 0&&(m.y=t),i!==void 0&&(m.scale=i),o!==void 0&&tk(m,o,a,l,!1)}const UR=()=>({...jS(),attrs:{}}),JS=n=>typeof n=="string"&&n.toLowerCase()==="svg";function nk(n,e,t,i){const r=G.useMemo(()=>{const s=UR();return XS(s,e,{enableHardwareAcceleration:!1},JS(i),n.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(n.style){const s={};FR(s,n.style,n),r.style={...s,...r.style}}return r}function ik(n=!1){return(t,i,r,{latestValues:s},o)=>{const l=(HS(t)?nk:YU)(i,s,o,t),u=OR(i,typeof t=="string",n),c=t!==G.Fragment?{...u,...l,ref:r}:{},{children:h}=i,p=G.useMemo(()=>Gn(h)?h.get():h,[h]);return G.createElement(t,{...c,children:p})}}function kR(n,{style:e,vars:t},i,r){Object.assign(n.style,e,r&&r.getProjectionStyles(i));for(const s in t)n.style.setProperty(s,t[s])}const zR=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function HR(n,e,t,i){kR(n,e,void 0,i);for(const r in e.attrs)n.setAttribute(zR.has(r)?r:NS(r),e.attrs[r])}function KS(n,e){const{style:t}=n,i={};for(const r in t)(Gn(t[r])||e.style&&Gn(e.style[r])||BR(r,n))&&(i[r]=t[r]);return i}function GR(n,e){const t=KS(n,e);for(const i in n)if(Gn(n[i])||Gn(e[i])){const r=mp.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;t[r]=n[i]}return t}function YS(n,e,t,i={},r={}){return typeof e=="function"&&(e=e(t!==void 0?t:n.custom,i,r)),typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"&&(e=e(t!==void 0?t:n.custom,i,r)),e}function yp(n){const e=G.useRef(null);return e.current===null&&(e.current=n()),e.current}const f3=n=>Array.isArray(n),rk=n=>!!(n&&typeof n=="object"&&n.mix&&n.toValue),sk=n=>f3(n)?n[n.length-1]||0:n;function ad(n){const e=Gn(n)?n.get():n;return rk(e)?e.toValue():e}function ok({scrapeMotionValuesFromProps:n,createRenderState:e,onMount:t},i,r,s){const o={latestValues:ak(i,r,s,n),renderState:e()};return t&&(o.mount=a=>t(i,a,o)),o}const ZS=n=>(e,t)=>{const i=G.useContext(nv),r=G.useContext(iv),s=()=>ok(n,e,i,r);return t?s():yp(s)};function ak(n,e,t,i){const r={},s=i(n,{});for(const p in s)r[p]=ad(s[p]);let{initial:o,animate:a}=n;const l=sv(n),u=bR(n);e&&u&&!l&&n.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let c=t?t.initial===!1:!1;c=c||o===!1;const h=c?a:o;return h&&typeof h!="boolean"&&!rv(h)&&(Array.isArray(h)?h:[h]).forEach(m=>{const v=YS(n,m);if(!v)return;const{transitionEnd:A,transition:_,...g}=v;for(const S in g){let x=g[S];if(Array.isArray(x)){const E=c?x.length-1:0;x=x[E]}x!==null&&(r[S]=x)}for(const S in A)r[S]=A[S]}),r}const wi=n=>n,{schedule:In,cancel:ao,state:pi,steps:R_}=TR(typeof requestAnimationFrame<"u"?requestAnimationFrame:wi,!0),lk={useVisualState:ZS({scrapeMotionValuesFromProps:GR,createRenderState:UR,onMount:(n,e,{renderState:t,latestValues:i})=>{In.read(()=>{try{t.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}}),In.render(()=>{XS(t,i,{enableHardwareAcceleration:!1},JS(e.tagName),n.transformTemplate),HR(e,t)})}})},uk={useVisualState:ZS({scrapeMotionValuesFromProps:KS,createRenderState:jS})};function ck(n,{forwardMotionProps:e=!1},t,i){return{...HS(n)?lk:uk,preloadedFeatures:t,useRender:ik(e),createVisualElement:i,Component:n}}function Uo(n,e,t,i={passive:!0}){return n.addEventListener(e,t,i),()=>n.removeEventListener(e,t)}const VR=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1;function ov(n,e="page"){return{point:{x:n[e+"X"],y:n[e+"Y"]}}}const WR=n=>e=>VR(e)&&n(e,ov(e));function Ps(n,e,t,i){return Uo(n,e,WR(t),i)}const fk=(n,e)=>t=>e(n(t)),no=(...n)=>n.reduce(fk);function jR(n){let e=null;return()=>{const t=()=>{e=null};return e===null?(e=n,t):!1}}const z4=jR("dragHorizontal"),H4=jR("dragVertical");function XR(n){let e=!1;if(n==="y")e=H4();else if(n==="x")e=z4();else{const t=z4(),i=H4();t&&i?e=()=>{t(),i()}:(t&&t(),i&&i())}return e}function qS(){const n=XR(!0);return n?(n(),!1):!0}class pl{constructor(e){this.isMounted=!1,this.node=e}update(){}}function G4(n,e){const t="pointer"+(e?"enter":"leave"),i="onHover"+(e?"Start":"End"),r=(s,o)=>{if(s.pointerType==="touch"||qS())return;const a=n.getProps();n.animationState&&a.whileHover&&n.animationState.setActive("whileHover",e),a[i]&&a[i](s,o)};return Ps(n.current,t,r,{passive:!n.getProps()[i]})}class hk extends pl{mount(){this.unmount=no(G4(this.node,!0),G4(this.node,!1))}unmount(){}}class dk extends pl{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=no(Uo(this.node.current,"focus",()=>this.onFocus()),Uo(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const JR=(n,e)=>e?n===e?!0:JR(n,e.parentElement):!1;function P_(n,e){if(!e)return;const t=new PointerEvent("pointer"+n);e(t,ov(t))}class pk extends pl{constructor(){super(...arguments),this.removeStartListeners=wi,this.removeEndListeners=wi,this.removeAccessibleListeners=wi,this.startPointerPress=(e,t)=>{if(this.isPressing)return;this.removeEndListeners();const i=this.node.getProps(),s=Ps(window,"pointerup",(a,l)=>{if(!this.checkPressEnd())return;const{onTap:u,onTapCancel:c,globalTapTarget:h}=this.node.getProps();!h&&!JR(this.node.current,a.target)?c&&c(a,l):u&&u(a,l)},{passive:!(i.onTap||i.onPointerUp)}),o=Ps(window,"pointercancel",(a,l)=>this.cancelPress(a,l),{passive:!(i.onTapCancel||i.onPointerCancel)});this.removeEndListeners=no(s,o),this.startPress(e,t)},this.startAccessiblePress=()=>{const e=s=>{if(s.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||P_("up",(l,u)=>{const{onTap:c}=this.node.getProps();c&&c(l,u)})};this.removeEndListeners(),this.removeEndListeners=Uo(this.node.current,"keyup",o),P_("down",(a,l)=>{this.startPress(a,l)})},t=Uo(this.node.current,"keydown",e),i=()=>{this.isPressing&&P_("cancel",(s,o)=>this.cancelPress(s,o))},r=Uo(this.node.current,"blur",i);this.removeAccessibleListeners=no(t,r)}}startPress(e,t){this.isPressing=!0;const{onTapStart:i,whileTap:r}=this.node.getProps();r&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),i&&i(e,t)}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!qS()}cancelPress(e,t){if(!this.checkPressEnd())return;const{onTapCancel:i}=this.node.getProps();i&&i(e,t)}mount(){const e=this.node.getProps(),t=Ps(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),i=Uo(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=no(t,i)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const h3=new WeakMap,B_=new WeakMap,mk=n=>{const e=h3.get(n.target);e&&e(n)},gk=n=>{n.forEach(mk)};function vk({root:n,...e}){const t=n||document;B_.has(t)||B_.set(t,{});const i=B_.get(t),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver(gk,{root:n,...e})),i[r]}function yk(n,e,t){const i=vk(e);return h3.set(n,t),i.observe(n),()=>{h3.delete(n),i.unobserve(n)}}const _k={some:0,all:1};class xk extends pl{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:i,amount:r="some",once:s}=e,o={root:t?t.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:_k[r]},a=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,s&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:c,onViewportLeave:h}=this.node.getProps(),p=u?c:h;p&&p(l)};return yk(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(Ak(e,t))&&this.startObserver()}unmount(){}}function Ak({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const Sk={inView:{Feature:xk},tap:{Feature:pk},focus:{Feature:dk},hover:{Feature:hk}};function KR(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let i=0;i<t;i++)if(e[i]!==n[i])return!1;return!0}function Ck(n){const e={};return n.values.forEach((t,i)=>e[i]=t.get()),e}function Ek(n){const e={};return n.values.forEach((t,i)=>e[i]=t.getVelocity()),e}function av(n,e,t){const i=n.getProps();return YS(i,e,t!==void 0?t:i.custom,Ck(n),Ek(n))}const Xa=n=>n*1e3,Vo=n=>n/1e3,Mk={type:"spring",stiffness:500,damping:25,restSpeed:10},wk=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),Tk={type:"keyframes",duration:.8},bk={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Rk=(n,{keyframes:e})=>e.length>2?Tk:Lu.has(n)?n.startsWith("scale")?wk(e[1]):Mk:bk;function Pk({when:n,delay:e,delayChildren:t,staggerChildren:i,staggerDirection:r,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:u,...c}){return!!Object.keys(c).length}function QS(n,e){return n[e]||n.default||n}const Bk=n=>n!==null;function lv(n,{repeat:e,repeatType:t="loop"},i){const r=n.filter(Bk),s=e&&t!=="loop"&&e%2===1?0:r.length-1;return!s||i===void 0?r[s]:i}let g0;function Ik(){g0=void 0}const Ja={now:()=>(g0===void 0&&Ja.set(pi.isProcessing||EU.useManualTiming?pi.timestamp:performance.now()),g0),set:n=>{g0=n,queueMicrotask(Ik)}},YR=n=>/^0[^.\s]+$/u.test(n);function Lk(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||YR(n):!0}let Dk=wi,$S=wi;const ZR=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n),Fk=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Nk(n){const e=Fk.exec(n);if(!e)return[,];const[,t,i,r]=e;return[`--${t??i}`,r]}function qR(n,e,t=1){const[i,r]=Nk(n);if(!i)return;const s=window.getComputedStyle(e).getPropertyValue(i);if(s){const o=s.trim();return ZR(o)?parseFloat(o):o}return GS(r)?qR(r,e,t+1):r}const Ok=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),V4=n=>n===kf||n===wt,W4=(n,e)=>parseFloat(n.split(", ")[e]),j4=(n,e)=>(t,{transform:i})=>{if(i==="none"||!i)return 0;const r=i.match(/^matrix3d\((.+)\)$/u);if(r)return W4(r[1],e);{const s=i.match(/^matrix\((.+)\)$/u);return s?W4(s[1],n):0}},Uk=new Set(["x","y","z"]),kk=mp.filter(n=>!Uk.has(n));function X4(n){const e=[];return kk.forEach(t=>{const i=n.getValue(t);i!==void 0&&(e.push([t,i.get()]),i.set(t.startsWith("scale")?1:0))}),e}const _f={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:j4(4,13),y:j4(5,14)};_f.translateX=_f.x;_f.translateY=_f.y;const QR=n=>e=>e.test(n),zk={test:n=>n==="auto",parse:n=>n},$R=[kf,wt,to,Sa,XU,jU,zk],J4=n=>$R.find(QR(n)),mu=new Set;let d3=!1,p3=!1;function e7(){if(p3){const n=Array.from(mu).filter(i=>i.needsMeasurement),e=new Set(n.map(i=>i.element)),t=new Map;e.forEach(i=>{X4(i).length&&(t.set(i,X4(i)),i.render())}),n.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render()}),n.forEach(i=>i.measureEndState()),n.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}p3=!1,d3=!1,mu.forEach(n=>n.complete()),mu.clear()}function t7(){mu.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(p3=!0)})}function Hk(){t7(),e7()}class eC{constructor(e,t,i,r,s,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=i,this.motionValue=r,this.element=s,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(mu.add(this),d3||(d3=!0,In.read(t7),In.resolveKeyframes(e7))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:i,motionValue:r}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const o=r==null?void 0:r.get(),a=e[e.length-1];if(o!==void 0)e[0]=o;else if(i&&t){const l=i.readValue(t,a);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=a),r&&o===void 0&&r.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),mu.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,mu.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const tC=(n,e)=>t=>!!(gp(t)&&WU.test(t)&&t.startsWith(n)||e&&Object.prototype.hasOwnProperty.call(t,e)),n7=(n,e,t)=>i=>{if(!gp(i))return i;const[r,s,o,a]=i.match(VS);return{[n]:parseFloat(r),[e]:parseFloat(s),[t]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},Gk=n=>el(0,255,n),I_={...kf,transform:n=>Math.round(Gk(n))},ru={test:tC("rgb","red"),parse:n7("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:i=1})=>"rgba("+I_.transform(n)+", "+I_.transform(e)+", "+I_.transform(t)+", "+od(sd.transform(i))+")"};function Vk(n){let e="",t="",i="",r="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),i=n.substring(5,7),r=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),i=n.substring(3,4),r=n.substring(4,5),e+=e,t+=t,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const m3={test:tC("#"),parse:Vk,transform:ru.transform},jc={test:tC("hsl","hue"),parse:n7("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:i=1})=>"hsla("+Math.round(n)+", "+to.transform(od(e))+", "+to.transform(od(t))+", "+od(sd.transform(i))+")"},Ui={test:n=>ru.test(n)||m3.test(n)||jc.test(n),parse:n=>ru.test(n)?ru.parse(n):jc.test(n)?jc.parse(n):m3.parse(n),transform:n=>gp(n)?n:n.hasOwnProperty("red")?ru.transform(n):jc.transform(n)};function Wk(n){var e,t;return isNaN(n)&&gp(n)&&(((e=n.match(VS))===null||e===void 0?void 0:e.length)||0)+(((t=n.match(VU))===null||t===void 0?void 0:t.length)||0)>0}const i7="number",r7="color",jk="var",Xk="var(",K4="${}",Jk=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function hg(n){const e=n.toString(),t=[],i={color:[],number:[],var:[]},r=[];let s=0;const a=e.replace(Jk,l=>(Ui.test(l)?(i.color.push(s),r.push(r7),t.push(Ui.parse(l))):l.startsWith(Xk)?(i.var.push(s),r.push(jk),t.push(l)):(i.number.push(s),r.push(i7),t.push(parseFloat(l))),++s,K4)).split(K4);return{values:t,split:a,indexes:i,types:r}}function s7(n){return hg(n).values}function o7(n){const{split:e,types:t}=hg(n),i=e.length;return r=>{let s="";for(let o=0;o<i;o++)if(s+=e[o],r[o]!==void 0){const a=t[o];a===i7?s+=od(r[o]):a===r7?s+=Ui.transform(r[o]):s+=r[o]}return s}}const Kk=n=>typeof n=="number"?0:n;function Yk(n){const e=s7(n);return o7(n)(e.map(Kk))}const tl={test:Wk,parse:s7,createTransformer:o7,getAnimatableNone:Yk},Zk=new Set(["brightness","contrast","saturate","opacity"]);function qk(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[i]=t.match(VS)||[];if(!i)return n;const r=t.replace(i,"");let s=Zk.has(e)?1:0;return i!==t&&(s*=100),e+"("+s+r+")"}const Qk=/\b([a-z-]*)\(.*?\)/gu,g3={...tl,getAnimatableNone:n=>{const e=n.match(Qk);return e?e.map(qk).join(" "):n}},$k={...DR,color:Ui,backgroundColor:Ui,outlineColor:Ui,fill:Ui,stroke:Ui,borderColor:Ui,borderTopColor:Ui,borderRightColor:Ui,borderBottomColor:Ui,borderLeftColor:Ui,filter:g3,WebkitFilter:g3},nC=n=>$k[n];function a7(n,e){let t=nC(n);return t!==g3&&(t=tl),t.getAnimatableNone?t.getAnimatableNone(e):void 0}function ez(n,e,t){let i=0,r;for(;i<n.length&&!r;)typeof n[i]=="string"&&n[i]!=="none"&&n[i]!=="0"&&(r=n[i]),i++;if(r&&t)for(const s of e)n[s]=a7(t,r)}class l7 extends eC{constructor(e,t,i,r){super(e,t,i,r,r==null?void 0:r.owner,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:i}=this;if(!t.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){const u=e[l];if(typeof u=="string"&&GS(u)){const c=qR(u,t.current);c!==void 0&&(e[l]=c)}}if(!Ok.has(i)||e.length!==2)return this.resolveNoneKeyframes();const[r,s]=e,o=J4(r),a=J4(s);if(o!==a)if(V4(o)&&V4(a))for(let l=0;l<e.length;l++){const u=e[l];typeof u=="string"&&(e[l]=parseFloat(u))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,i=[];for(let r=0;r<e.length;r++)Lk(e[r])&&i.push(r);i.length&&ez(e,i,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:i}=this;if(!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=_f[i](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const r=t[t.length-1];r!==void 0&&e.getValue(i,r).jump(r,!1)}measureEndState(){var e;const{element:t,name:i,unresolvedKeyframes:r}=this;if(!t.current)return;const s=t.getValue(i);s&&s.jump(this.measuredOrigin,!1);const o=r.length-1,a=r[o];r[o]=_f[i](t.measureViewportBox(),window.getComputedStyle(t.current)),a!==null&&(this.finalKeyframe=a),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,u])=>{t.getValue(l).set(u)}),this.resolveNoneKeyframes()}}function tz(n){let e;return()=>(e===void 0&&(e=n()),e)}const Y4=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(tl.test(n)||n==="0")&&!n.startsWith("url("));function nz(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function iz(n,e,t,i){const r=n[0];if(r===null)return!1;const s=n[n.length-1],o=Y4(r,e),a=Y4(s,e);return!o||!a?!1:nz(n)||t==="spring"&&i}class u7{constructor({autoplay:e=!0,delay:t=0,type:i="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:o="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.options={autoplay:e,delay:t,type:i,repeat:r,repeatDelay:s,repeatType:o,...a},this.updateFinishedPromise()}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&Hk(),this._resolved}onKeyframesResolved(e,t){this.hasAttemptedResolve=!0;const{name:i,type:r,velocity:s,delay:o,onComplete:a,onUpdate:l,isGenerator:u}=this.options;if(!u&&!iz(e,i,r,s))if(o)this.options.duration=0;else{l==null||l(lv(e,this.options,t)),a==null||a(),this.resolveFinishedPromise();return}const c=this.initPlayback(e,t);c!==!1&&(this._resolved={keyframes:e,finalKeyframe:t,...c},this.onPostResolved())}onPostResolved(){}then(e,t){return this.currentFinishedPromise.then(e,t)}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}function iC(n,e){return e?n*(1e3/e):0}const rz=5;function c7(n,e,t){const i=Math.max(e-rz,0);return iC(t-n(i),e-i)}const L_=.001,sz=.01,oz=10,az=.05,lz=1;function uz({duration:n=800,bounce:e=.25,velocity:t=0,mass:i=1}){let r,s,o=1-e;o=el(az,lz,o),n=el(sz,oz,Vo(n)),o<1?(r=u=>{const c=u*o,h=c*n,p=c-t,m=v3(u,o),v=Math.exp(-h);return L_-p/m*v},s=u=>{const h=u*o*n,p=h*t+t,m=Math.pow(o,2)*Math.pow(u,2)*n,v=Math.exp(-h),A=v3(Math.pow(u,2),o);return(-r(u)+L_>0?-1:1)*((p-m)*v)/A}):(r=u=>{const c=Math.exp(-u*n),h=(u-t)*n+1;return-L_+c*h},s=u=>{const c=Math.exp(-u*n),h=(t-u)*(n*n);return c*h});const a=5/n,l=fz(r,s,a);if(n=Xa(n),isNaN(l))return{stiffness:100,damping:10,duration:n};{const u=Math.pow(l,2)*i;return{stiffness:u,damping:o*2*Math.sqrt(i*u),duration:n}}}const cz=12;function fz(n,e,t){let i=t;for(let r=1;r<cz;r++)i=i-n(i)/e(i);return i}function v3(n,e){return n*Math.sqrt(1-e*e)}const hz=["duration","bounce"],dz=["stiffness","damping","mass"];function Z4(n,e){return e.some(t=>n[t]!==void 0)}function pz(n){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...n};if(!Z4(n,dz)&&Z4(n,hz)){const t=uz(n);e={...e,...t,mass:1},e.isResolvedFromDuration=!0}return e}function f7({keyframes:n,restDelta:e,restSpeed:t,...i}){const r=n[0],s=n[n.length-1],o={done:!1,value:r},{stiffness:a,damping:l,mass:u,duration:c,velocity:h,isResolvedFromDuration:p}=pz({...i,velocity:-Vo(i.velocity||0)}),m=h||0,v=l/(2*Math.sqrt(a*u)),A=s-r,_=Vo(Math.sqrt(a/u)),g=Math.abs(A)<5;t||(t=g?.01:2),e||(e=g?.005:.5);let S;if(v<1){const x=v3(_,v);S=E=>{const b=Math.exp(-v*_*E);return s-b*((m+v*_*A)/x*Math.sin(x*E)+A*Math.cos(x*E))}}else if(v===1)S=x=>s-Math.exp(-_*x)*(A+(m+_*A)*x);else{const x=_*Math.sqrt(v*v-1);S=E=>{const b=Math.exp(-v*_*E),T=Math.min(x*E,300);return s-b*((m+v*_*A)*Math.sinh(T)+x*A*Math.cosh(T))/x}}return{calculatedDuration:p&&c||null,next:x=>{const E=S(x);if(p)o.done=x>=c;else{let b=m;x!==0&&(v<1?b=c7(S,x,E):b=0);const T=Math.abs(b)<=t,P=Math.abs(s-E)<=e;o.done=T&&P}return o.value=o.done?s:E,o}}}function q4({keyframes:n,velocity:e=0,power:t=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:u=.5,restSpeed:c}){const h=n[0],p={done:!1,value:h},m=I=>a!==void 0&&I<a||l!==void 0&&I>l,v=I=>a===void 0?l:l===void 0||Math.abs(a-I)<Math.abs(l-I)?a:l;let A=t*e;const _=h+A,g=o===void 0?_:o(_);g!==_&&(A=g-h);const S=I=>-A*Math.exp(-I/i),x=I=>g+S(I),E=I=>{const z=S(I),w=x(I);p.done=Math.abs(z)<=u,p.value=p.done?g:w};let b,T;const P=I=>{m(p.value)&&(b=I,T=f7({keyframes:[p.value,v(p.value)],velocity:c7(x,I,p.value),damping:r,stiffness:s,restDelta:u,restSpeed:c}))};return P(0),{calculatedDuration:null,next:I=>{let z=!1;return!T&&b===void 0&&(z=!0,E(I),P(I)),b!==void 0&&I>=b?T.next(I-b):(!z&&E(I),p)}}}const h7=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,mz=1e-7,gz=12;function vz(n,e,t,i,r){let s,o,a=0;do o=e+(t-e)/2,s=h7(o,i,r)-n,s>0?t=o:e=o;while(Math.abs(s)>mz&&++a<gz);return o}function _p(n,e,t,i){if(n===e&&t===i)return wi;const r=s=>vz(s,0,1,n,t);return s=>s===0||s===1?s:h7(r(s),e,i)}const yz=_p(.42,0,1,1),_z=_p(0,0,.58,1),Hd=_p(.42,0,.58,1),xz=n=>Array.isArray(n)&&typeof n[0]!="number",d7=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,p7=n=>e=>1-n(1-e),rC=n=>1-Math.sin(Math.acos(n)),m7=p7(rC),Az=d7(rC),g7=_p(.33,1.53,.69,.99),sC=p7(g7),Sz=d7(sC),Cz=n=>(n*=2)<1?.5*sC(n):.5*(2-Math.pow(2,-10*(n-1))),Ez={linear:wi,easeIn:yz,easeInOut:Hd,easeOut:_z,circIn:rC,circInOut:Az,circOut:m7,backIn:sC,backInOut:Sz,backOut:g7,anticipate:Cz},Q4=n=>{if(Array.isArray(n)){$S(n.length===4);const[e,t,i,r]=n;return _p(e,t,i,r)}else if(typeof n=="string")return Ez[n];return n},xf=(n,e,t)=>{const i=e-n;return i===0?1:(t-n)/i},Pn=(n,e,t)=>n+(e-n)*t;function D_(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function Mz({hue:n,saturation:e,lightness:t,alpha:i}){n/=360,e/=100,t/=100;let r=0,s=0,o=0;if(!e)r=s=o=t;else{const a=t<.5?t*(1+e):t+e-t*e,l=2*t-a;r=D_(l,a,n+1/3),s=D_(l,a,n),o=D_(l,a,n-1/3)}return{red:Math.round(r*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:i}}const F_=(n,e,t)=>{const i=n*n,r=t*(e*e-i)+i;return r<0?0:Math.sqrt(r)},wz=[m3,ru,jc],Tz=n=>wz.find(e=>e.test(n));function $4(n){const e=Tz(n);let t=e.parse(n);return e===jc&&(t=Mz(t)),t}const e5=(n,e)=>{const t=$4(n),i=$4(e),r={...t};return s=>(r.red=F_(t.red,i.red,s),r.green=F_(t.green,i.green,s),r.blue=F_(t.blue,i.blue,s),r.alpha=Pn(t.alpha,i.alpha,s),ru.transform(r))};function y3(n,e){return t=>t>0?e:n}function bz(n,e){return t=>Pn(n,e,t)}function oC(n){return typeof n=="number"?bz:typeof n=="string"?GS(n)?y3:Ui.test(n)?e5:Bz:Array.isArray(n)?v7:typeof n=="object"?Ui.test(n)?e5:Rz:y3}function v7(n,e){const t=[...n],i=t.length,r=n.map((s,o)=>oC(s)(s,e[o]));return s=>{for(let o=0;o<i;o++)t[o]=r[o](s);return t}}function Rz(n,e){const t={...n,...e},i={};for(const r in t)n[r]!==void 0&&e[r]!==void 0&&(i[r]=oC(n[r])(n[r],e[r]));return r=>{for(const s in i)t[s]=i[s](r);return t}}function Pz(n,e){var t;const i=[],r={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],a=n.indexes[o][r[o]],l=(t=n.values[a])!==null&&t!==void 0?t:0;i[s]=l,r[o]++}return i}const Bz=(n,e)=>{const t=tl.createTransformer(e),i=hg(n),r=hg(e);return i.indexes.var.length===r.indexes.var.length&&i.indexes.color.length===r.indexes.color.length&&i.indexes.number.length>=r.indexes.number.length?no(v7(Pz(i,r),r.values),t):y3(n,e)};function y7(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?Pn(n,e,t):oC(n)(n,e)}function Iz(n,e,t){const i=[],r=t||y7,s=n.length-1;for(let o=0;o<s;o++){let a=r(n[o],n[o+1]);if(e){const l=Array.isArray(e)?e[o]||wi:e;a=no(l,a)}i.push(a)}return i}function aC(n,e,{clamp:t=!0,ease:i,mixer:r}={}){const s=n.length;if($S(s===e.length),s===1)return()=>e[0];if(s===2&&n[0]===n[1])return()=>e[1];n[0]>n[s-1]&&(n=[...n].reverse(),e=[...e].reverse());const o=Iz(e,i,r),a=o.length,l=u=>{let c=0;if(a>1)for(;c<n.length-2&&!(u<n[c+1]);c++);const h=xf(n[c],n[c+1],u);return o[c](h)};return t?u=>l(el(n[0],n[s-1],u)):l}function Lz(n,e){const t=n[n.length-1];for(let i=1;i<=e;i++){const r=xf(0,e,i);n.push(Pn(t,1,r))}}function _7(n){const e=[0];return Lz(e,n.length-1),e}function Dz(n,e){return n.map(t=>t*e)}function Fz(n,e){return n.map(()=>e||Hd).splice(0,n.length-1)}function dg({duration:n=300,keyframes:e,times:t,ease:i="easeInOut"}){const r=xz(i)?i.map(Q4):Q4(i),s={done:!1,value:e[0]},o=Dz(t&&t.length===e.length?t:_7(e),n),a=aC(o,e,{ease:Array.isArray(r)?r:Fz(e,r)});return{calculatedDuration:n,next:l=>(s.value=a(l),s.done=l>=n,s)}}const t5=2e4;function Nz(n){let e=0;const t=50;let i=n.next(e);for(;!i.done&&e<t5;)e+=t,i=n.next(e);return e>=t5?1/0:e}const Oz=n=>{const e=({timestamp:t})=>n(t);return{start:()=>In.update(e,!0),stop:()=>ao(e),now:()=>pi.isProcessing?pi.timestamp:Ja.now()}},Uz={decay:q4,inertia:q4,tween:dg,keyframes:dg,spring:f7},kz=n=>n/100;class lC extends u7{constructor({KeyframeResolver:e=eC,...t}){super(t),this.holdTime=null,this.startTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.state="idle";const{name:i,motionValue:r,keyframes:s}=this.options,o=(a,l)=>this.onKeyframesResolved(a,l);i&&r&&r.owner?this.resolver=r.owner.resolveKeyframes(s,o,i,r):this.resolver=new e(s,o,i,r),this.resolver.scheduleResolve()}initPlayback(e){const{type:t="keyframes",repeat:i=0,repeatDelay:r=0,repeatType:s,velocity:o=0}=this.options,a=Uz[t]||dg;let l,u;a!==dg&&typeof e[0]!="number"&&(l=no(kz,y7(e[0],e[1])),e=[0,100]);const c=a({...this.options,keyframes:e});s==="mirror"&&(u=a({...this.options,keyframes:[...e].reverse(),velocity:-o})),c.calculatedDuration===null&&(c.calculatedDuration=Nz(c));const{calculatedDuration:h}=c,p=h+r,m=p*(i+1)-r;return{generator:c,mirroredGenerator:u,mapPercentToKeyframes:l,calculatedDuration:h,resolvedDuration:p,totalDuration:m}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,t=!1){const{resolved:i}=this;if(!i){const{keyframes:I}=this.options;return{done:!0,value:I[I.length-1]}}const{finalKeyframe:r,generator:s,mirroredGenerator:o,mapPercentToKeyframes:a,keyframes:l,calculatedDuration:u,totalDuration:c,resolvedDuration:h}=i;if(this.startTime===null)return s.next(0);const{delay:p,repeat:m,repeatType:v,repeatDelay:A,onUpdate:_}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-c/this.speed,this.startTime)),t?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const g=this.currentTime-p*(this.speed>=0?1:-1),S=this.speed>=0?g<0:g>c;this.currentTime=Math.max(g,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=c);let x=this.currentTime,E=s;if(m){const I=Math.min(this.currentTime,c)/h;let z=Math.floor(I),w=I%1;!w&&I>=1&&(w=1),w===1&&z--,z=Math.min(z,m+1),!!(z%2)&&(v==="reverse"?(w=1-w,A&&(w-=A/h)):v==="mirror"&&(E=o)),x=el(0,1,w)*h}const b=S?{done:!1,value:l[0]}:E.next(x);a&&(b.value=a(b.value));let{done:T}=b;!S&&u!==null&&(T=this.speed>=0?this.currentTime>=c:this.currentTime<=0);const P=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&T);return P&&r!==void 0&&(b.value=lv(l,this.options,r)),_&&_(b.value),P&&this.finish(),b}get duration(){const{resolved:e}=this;return e?Vo(e.calculatedDuration):0}get time(){return Vo(this.currentTime)}set time(e){e=Xa(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=Vo(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=Oz,onPlay:t}=this.options;this.driver||(this.driver=e(r=>this.tick(r))),t&&t();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:(!this.startTime||this.state==="finished")&&(this.startTime=i),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:e}=this.options;e&&e()}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const x7=n=>Array.isArray(n)&&typeof n[0]=="number";function A7(n){return!!(!n||typeof n=="string"&&S7[n]||x7(n)||Array.isArray(n)&&n.every(A7))}const Jh=([n,e,t,i])=>`cubic-bezier(${n}, ${e}, ${t}, ${i})`,S7={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Jh([0,.65,.55,1]),circOut:Jh([.55,0,1,.45]),backIn:Jh([.31,.01,.66,-.59]),backOut:Jh([.33,1.53,.69,.99])};function C7(n){if(n)return x7(n)?Jh(n):Array.isArray(n)?n.map(C7):S7[n]}function zz(n,e,t,{delay:i=0,duration:r=300,repeat:s=0,repeatType:o="loop",ease:a,times:l}={}){const u={[e]:t};l&&(u.offset=l);const c=C7(a);return Array.isArray(c)&&(u.easing=c),n.animate(u,{delay:i,duration:r,easing:Array.isArray(c)?"linear":c,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}const Hz=tz(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Gz=new Set(["opacity","clipPath","filter","transform"]),pg=10,Vz=2e4;function Wz(n){return n.type==="spring"||n.name==="backgroundColor"||!A7(n.ease)}function jz(n,e){const t=new lC({...e,keyframes:n,repeat:0,delay:0,isGenerator:!0});let i={done:!1,value:n[0]};const r=[];let s=0;for(;!i.done&&s<Vz;)i=t.sample(s),r.push(i.value),s+=pg;return{times:void 0,keyframes:r,duration:s-pg,ease:"linear"}}class n5 extends u7{constructor(e){super(e);const{name:t,motionValue:i,keyframes:r}=this.options;this.resolver=new l7(r,(s,o)=>this.onKeyframesResolved(s,o),t,i),this.resolver.scheduleResolve()}initPlayback(e,t){var i;let{duration:r=300,times:s,ease:o,type:a,motionValue:l,name:u}=this.options;if(!(!((i=l.owner)===null||i===void 0)&&i.current))return!1;if(Wz(this.options)){const{onComplete:h,onUpdate:p,motionValue:m,...v}=this.options,A=jz(e,v);e=A.keyframes,e.length===1&&(e[1]=e[0]),r=A.duration,s=A.times,o=A.ease,a="keyframes"}const c=zz(l.owner.current,u,e,{...this.options,duration:r,times:s,ease:o});return c.startTime=Ja.now(),this.pendingTimeline?(c.timeline=this.pendingTimeline,this.pendingTimeline=void 0):c.onfinish=()=>{const{onComplete:h}=this.options;l.set(lv(e,this.options,t)),h&&h(),this.cancel(),this.resolveFinishedPromise()},{animation:c,duration:r,times:s,type:a,ease:o,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:t}=e;return Vo(t)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:t}=e;return Vo(t.currentTime||0)}set time(e){const{resolved:t}=this;if(!t)return;const{animation:i}=t;i.currentTime=Xa(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:t}=e;return t.playbackRate}set speed(e){const{resolved:t}=this;if(!t)return;const{animation:i}=t;i.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:t}=e;return t.playState}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:t}=this;if(!t)return wi;const{animation:i}=t;i.timeline=e,i.onfinish=null}return wi}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.playState==="finished"&&this.updateFinishedPromise(),t.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;const{resolved:e}=this;if(!e)return;const{animation:t,keyframes:i,duration:r,type:s,ease:o,times:a}=e;if(!(t.playState==="idle"||t.playState==="finished")){if(this.time){const{motionValue:l,onUpdate:u,onComplete:c,...h}=this.options,p=new lC({...h,keyframes:i,duration:r,type:s,ease:o,times:a,isGenerator:!0}),m=Xa(this.time);l.setWithVelocity(p.sample(m-pg).value,p.sample(m).value,pg)}this.cancel()}}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:t,name:i,repeatDelay:r,repeatType:s,damping:o,type:a}=e;return Hz()&&i&&Gz.has(i)&&t&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate&&!r&&s!=="mirror"&&o!==0&&a!=="inertia"}}const uC=(n,e,t,i={},r,s)=>o=>{const a=QS(i,n)||{},l=a.delay||i.delay||0;let{elapsed:u=0}=i;u=u-Xa(l);let c={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-u,onUpdate:p=>{e.set(p),a.onUpdate&&a.onUpdate(p)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:n,motionValue:e,element:s?void 0:r};Pk(a)||(c={...c,...Rk(n,c)}),c.duration&&(c.duration=Xa(c.duration)),c.repeatDelay&&(c.repeatDelay=Xa(c.repeatDelay)),c.from!==void 0&&(c.keyframes[0]=c.from);let h=!1;if(c.type===!1&&(c.duration=0,c.delay===0&&(h=!0)),h&&!s&&e.get()!==void 0){const p=lv(c.keyframes,a);if(p!==void 0){In.update(()=>{c.onUpdate(p),c.onComplete()});return}}return!s&&n5.supports(c)?new n5(c):new lC(c)};function mg(n){return!!(Gn(n)&&n.add)}function cC(n,e){n.indexOf(e)===-1&&n.push(e)}function fC(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}class hC{constructor(){this.subscriptions=[]}add(e){return cC(this.subscriptions,e),()=>fC(this.subscriptions,e)}notify(e,t,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,t,i);else for(let s=0;s<r;s++){const o=this.subscriptions[s];o&&o(e,t,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const i5=30,Xz=n=>!isNaN(parseFloat(n)),ld={current:void 0};class Jz{constructor(e,t={}){this.version="11.0.23",this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(i,r=!0)=>{const s=Ja.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.canTrackVelocity=Xz(this.current),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=Ja.now()}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new hC);const i=this.events[e].add(t);return e==="change"?()=>{i(),In.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,i){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return ld.current&&ld.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=Ja.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>i5)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,i5);return iC(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ks(n,e){return new Jz(n,e)}function Kz(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,Ks(t))}function Yz(n,e){const t=av(n,e);let{transitionEnd:i={},transition:r={},...s}=t||{};s={...s,...i};for(const o in s){const a=sk(s[o]);Kz(n,o,a)}}function Zz({protectedKeys:n,needsAnimating:e},t){const i=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,i}function E7(n,e,{delay:t=0,transitionOverride:i,type:r}={}){var s;let{transition:o=n.getDefaultTransition(),transitionEnd:a,...l}=e;const u=n.getValue("willChange");i&&(o=i);const c=[],h=r&&n.animationState&&n.animationState.getState()[r];for(const p in l){const m=n.getValue(p,(s=n.latestValues[p])!==null&&s!==void 0?s:null),v=l[p];if(v===void 0||h&&Zz(h,p))continue;const A={delay:t,elapsed:0,...QS(o||{},p)};let _=!1;if(window.HandoffAppearAnimations){const S=n.getProps()[wR];if(S){const x=window.HandoffAppearAnimations(S,p);x!==null&&(A.elapsed=x,_=!0)}}m.start(uC(p,m,v,n.shouldReduceMotion&&Lu.has(p)?{type:!1}:A,n,_));const g=m.animation;g&&(mg(u)&&(u.add(p),g.then(()=>u.remove(p))),c.push(g))}return a&&Promise.all(c).then(()=>{In.update(()=>{a&&Yz(n,a)})}),c}function _3(n,e,t={}){var i;const r=av(n,e,t.type==="exit"?(i=n.presenceContext)===null||i===void 0?void 0:i.custom:void 0);let{transition:s=n.getDefaultTransition()||{}}=r||{};t.transitionOverride&&(s=t.transitionOverride);const o=r?()=>Promise.all(E7(n,r,t)):()=>Promise.resolve(),a=n.variantChildren&&n.variantChildren.size?(u=0)=>{const{delayChildren:c=0,staggerChildren:h,staggerDirection:p}=s;return qz(n,e,c+u,h,p,t)}:()=>Promise.resolve(),{when:l}=s;if(l){const[u,c]=l==="beforeChildren"?[o,a]:[a,o];return u().then(()=>c())}else return Promise.all([o(),a(t.delay)])}function qz(n,e,t=0,i=0,r=1,s){const o=[],a=(n.variantChildren.size-1)*i,l=r===1?(u=0)=>u*i:(u=0)=>a-u*i;return Array.from(n.variantChildren).sort(Qz).forEach((u,c)=>{u.notify("AnimationStart",e),o.push(_3(u,e,{...s,delay:t+l(c)}).then(()=>u.notify("AnimationComplete",e)))}),Promise.all(o)}function Qz(n,e){return n.sortNodePosition(e)}function $z(n,e,t={}){n.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(s=>_3(n,s,t));i=Promise.all(r)}else if(typeof e=="string")i=_3(n,e,t);else{const r=typeof e=="function"?av(n,e,t.custom):e;i=Promise.all(E7(n,r,t))}return i.then(()=>{In.postRender(()=>{n.notify("AnimationComplete",e)})})}const eH=[...US].reverse(),tH=US.length;function nH(n){return e=>Promise.all(e.map(({animation:t,options:i})=>$z(n,t,i)))}function iH(n){let e=nH(n);const t=sH();let i=!0;const r=l=>(u,c)=>{var h;const p=av(n,c,l==="exit"?(h=n.presenceContext)===null||h===void 0?void 0:h.custom:void 0);if(p){const{transition:m,transitionEnd:v,...A}=p;u={...u,...A,...v}}return u};function s(l){e=l(n)}function o(l){const u=n.getProps(),c=n.getVariantContext(!0)||{},h=[],p=new Set;let m={},v=1/0;for(let _=0;_<tH;_++){const g=eH[_],S=t[g],x=u[g]!==void 0?u[g]:c[g],E=kd(x),b=g===l?S.isActive:null;b===!1&&(v=_);let T=x===c[g]&&x!==u[g]&&E;if(T&&i&&n.manuallyAnimateOnMount&&(T=!1),S.protectedKeys={...m},!S.isActive&&b===null||!x&&!S.prevProp||rv(x)||typeof x=="boolean")continue;let I=rH(S.prevProp,x)||g===l&&S.isActive&&!T&&E||_>v&&E,z=!1;const w=Array.isArray(x)?x:[x];let D=w.reduce(r(g),{});b===!1&&(D={});const{prevResolvedValues:Q={}}=S,ie={...Q,...D},j=se=>{I=!0,p.has(se)&&(z=!0,p.delete(se)),S.needsAnimating[se]=!0};for(const se in ie){const oe=D[se],pe=Q[se];if(m.hasOwnProperty(se))continue;let N=!1;f3(oe)&&f3(pe)?N=!KR(oe,pe):N=oe!==pe,N?oe!=null?j(se):p.add(se):oe!==void 0&&p.has(se)?j(se):S.protectedKeys[se]=!0}S.prevProp=x,S.prevResolvedValues=D,S.isActive&&(m={...m,...D}),i&&n.blockInitialAnimation&&(I=!1),I&&(!T||z)&&h.push(...w.map(se=>({animation:se,options:{type:g}})))}if(p.size){const _={};p.forEach(g=>{const S=n.getBaseTarget(g);_[g]=S===void 0?null:S}),h.push({animation:_})}let A=!!h.length;return i&&(u.initial===!1||u.initial===u.animate)&&!n.manuallyAnimateOnMount&&(A=!1),i=!1,A?e(h):Promise.resolve()}function a(l,u){var c;if(t[l].isActive===u)return Promise.resolve();(c=n.variantChildren)===null||c===void 0||c.forEach(p=>{var m;return(m=p.animationState)===null||m===void 0?void 0:m.setActive(l,u)}),t[l].isActive=u;const h=o(l);for(const p in t)t[p].protectedKeys={};return h}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>t}}function rH(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!KR(e,n):!1}function Rl(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function sH(){return{animate:Rl(!0),whileInView:Rl(),whileHover:Rl(),whileTap:Rl(),whileDrag:Rl(),whileFocus:Rl(),exit:Rl()}}class oH extends pl{constructor(e){super(e),e.animationState||(e.animationState=iH(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),rv(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){}}let aH=0;class lH extends pl{constructor(){super(...arguments),this.id=aH++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const r=this.node.animationState.setActive("exit",!e);t&&!e&&r.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const M7={animation:{Feature:oH},exit:{Feature:lH}},r5=(n,e)=>Math.abs(n-e);function uH(n,e){const t=r5(n.x,e.x),i=r5(n.y,e.y);return Math.sqrt(t**2+i**2)}class w7{constructor(e,t,{transformPagePoint:i,contextWindow:r,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=O_(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,m=uH(h.offset,{x:0,y:0})>=3;if(!p&&!m)return;const{point:v}=h,{timestamp:A}=pi;this.history.push({...v,timestamp:A});const{onStart:_,onMove:g}=this.handlers;p||(_&&_(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),g&&g(this.lastMoveEvent,h)},this.handlePointerMove=(h,p)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=N_(p,this.transformPagePoint),In.update(this.updatePoint,!0)},this.handlePointerUp=(h,p)=>{this.end();const{onEnd:m,onSessionEnd:v,resumeAnimation:A}=this.handlers;if(this.dragSnapToOrigin&&A&&A(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _=O_(h.type==="pointercancel"?this.lastMoveEventInfo:N_(p,this.transformPagePoint),this.history);this.startEvent&&m&&m(h,_),v&&v(h,_)},!VR(e))return;this.dragSnapToOrigin=s,this.handlers=t,this.transformPagePoint=i,this.contextWindow=r||window;const o=ov(e),a=N_(o,this.transformPagePoint),{point:l}=a,{timestamp:u}=pi;this.history=[{...l,timestamp:u}];const{onSessionStart:c}=t;c&&c(e,O_(a,this.history)),this.removeListeners=no(Ps(this.contextWindow,"pointermove",this.handlePointerMove),Ps(this.contextWindow,"pointerup",this.handlePointerUp),Ps(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),ao(this.updatePoint)}}function N_(n,e){return e?{point:e(n.point)}:n}function s5(n,e){return{x:n.x-e.x,y:n.y-e.y}}function O_({point:n},e){return{point:n,delta:s5(n,T7(e)),offset:s5(n,cH(e)),velocity:fH(e,.1)}}function cH(n){return n[0]}function T7(n){return n[n.length-1]}function fH(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,i=null;const r=T7(n);for(;t>=0&&(i=n[t],!(r.timestamp-i.timestamp>Xa(e)));)t--;if(!i)return{x:0,y:0};const s=Vo(r.timestamp-i.timestamp);if(s===0)return{x:0,y:0};const o={x:(r.x-i.x)/s,y:(r.y-i.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function Lr(n){return n.max-n.min}function x3(n,e=0,t=.01){return Math.abs(n-e)<=t}function o5(n,e,t,i=.5){n.origin=i,n.originPoint=Pn(e.min,e.max,n.origin),n.scale=Lr(t)/Lr(e),(x3(n.scale,1,1e-4)||isNaN(n.scale))&&(n.scale=1),n.translate=Pn(t.min,t.max,n.origin)-n.originPoint,(x3(n.translate)||isNaN(n.translate))&&(n.translate=0)}function ud(n,e,t,i){o5(n.x,e.x,t.x,i?i.originX:void 0),o5(n.y,e.y,t.y,i?i.originY:void 0)}function a5(n,e,t){n.min=t.min+e.min,n.max=n.min+Lr(e)}function hH(n,e,t){a5(n.x,e.x,t.x),a5(n.y,e.y,t.y)}function l5(n,e,t){n.min=e.min-t.min,n.max=n.min+Lr(e)}function cd(n,e,t){l5(n.x,e.x,t.x),l5(n.y,e.y,t.y)}function dH(n,{min:e,max:t},i){return e!==void 0&&n<e?n=i?Pn(e,n,i.min):Math.max(n,e):t!==void 0&&n>t&&(n=i?Pn(t,n,i.max):Math.min(n,t)),n}function u5(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function pH(n,{top:e,left:t,bottom:i,right:r}){return{x:u5(n.x,t,r),y:u5(n.y,e,i)}}function c5(n,e){let t=e.min-n.min,i=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,i]=[i,t]),{min:t,max:i}}function mH(n,e){return{x:c5(n.x,e.x),y:c5(n.y,e.y)}}function gH(n,e){let t=.5;const i=Lr(n),r=Lr(e);return r>i?t=xf(e.min,e.max-i,n.min):i>r&&(t=xf(n.min,n.max-r,e.min)),el(0,1,t)}function vH(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const A3=.35;function yH(n=A3){return n===!1?n=0:n===!0&&(n=A3),{x:f5(n,"left","right"),y:f5(n,"top","bottom")}}function f5(n,e,t){return{min:h5(n,e),max:h5(n,t)}}function h5(n,e){return typeof n=="number"?n:n[e]||0}const d5=()=>({translate:0,scale:1,origin:0,originPoint:0}),Xc=()=>({x:d5(),y:d5()}),p5=()=>({min:0,max:0}),Un=()=>({x:p5(),y:p5()});function Qr(n){return[n("x"),n("y")]}function b7({top:n,left:e,right:t,bottom:i}){return{x:{min:e,max:t},y:{min:n,max:i}}}function _H({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function xH(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),i=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:i.y,right:i.x}}function U_(n){return n===void 0||n===1}function S3({scale:n,scaleX:e,scaleY:t}){return!U_(n)||!U_(e)||!U_(t)}function Xl(n){return S3(n)||R7(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function R7(n){return m5(n.x)||m5(n.y)}function m5(n){return n&&n!=="0%"}function gg(n,e,t){const i=n-t,r=e*i;return t+r}function g5(n,e,t,i,r){return r!==void 0&&(n=gg(n,r,i)),gg(n,t,i)+e}function C3(n,e=0,t=1,i,r){n.min=g5(n.min,e,t,i,r),n.max=g5(n.max,e,t,i,r)}function P7(n,{x:e,y:t}){C3(n.x,e.translate,e.scale,e.originPoint),C3(n.y,t.translate,t.scale,t.originPoint)}function AH(n,e,t,i=!1){const r=t.length;if(!r)return;e.x=e.y=1;let s,o;for(let a=0;a<r;a++){s=t[a],o=s.projectionDelta;const l=s.instance;l&&l.style&&l.style.display==="contents"||(i&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Jc(n,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,P7(n,o)),i&&Xl(s.latestValues)&&Jc(n,s.latestValues))}e.x=v5(e.x),e.y=v5(e.y)}function v5(n){return Number.isInteger(n)||n>1.0000000000001||n<.999999999999?n:1}function wa(n,e){n.min=n.min+e,n.max=n.max+e}function y5(n,e,[t,i,r]){const s=e[r]!==void 0?e[r]:.5,o=Pn(n.min,n.max,s);C3(n,e[t],e[i],o,e.scale)}const SH=["x","scaleX","originX"],CH=["y","scaleY","originY"];function Jc(n,e){y5(n.x,e,SH),y5(n.y,e,CH)}function B7(n,e){return b7(xH(n.getBoundingClientRect(),e))}function EH(n,e,t){const i=B7(n,t),{scroll:r}=e;return r&&(wa(i.x,r.offset.x),wa(i.y,r.offset.y)),i}const I7=({current:n})=>n?n.ownerDocument.defaultView:null,MH=new WeakMap;class wH{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Un(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const r=c=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(ov(c,"page").point)},s=(c,h)=>{const{drag:p,dragPropagation:m,onDragStart:v}=this.getProps();if(p&&!m&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=XR(p),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Qr(_=>{let g=this.getAxisMotionValue(_).get()||0;if(to.test(g)){const{projection:S}=this.visualElement;if(S&&S.layout){const x=S.layout.layoutBox[_];x&&(g=Lr(x)*(parseFloat(g)/100))}}this.originPoint[_]=g}),v&&v(c,h);const{animationState:A}=this.visualElement;A&&A.setActive("whileDrag",!0)},o=(c,h)=>{const{dragPropagation:p,dragDirectionLock:m,onDirectionLock:v,onDrag:A}=this.getProps();if(!p&&!this.openGlobalLock)return;const{offset:_}=h;if(m&&this.currentDirection===null){this.currentDirection=TH(_),this.currentDirection!==null&&v&&v(this.currentDirection);return}this.updateAxis("x",h.point,_),this.updateAxis("y",h.point,_),this.visualElement.render(),A&&A(c,h)},a=(c,h)=>this.stop(c,h),l=()=>Qr(c=>{var h;return this.getAnimationState(c)==="paused"&&((h=this.getAxisMotionValue(c).animation)===null||h===void 0?void 0:h.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new w7(e,{onSessionStart:r,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:I7(this.visualElement)})}stop(e,t){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:r}=t;this.startAnimation(r);const{onDragEnd:s}=this.getProps();s&&s(e,t)}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,i){const{drag:r}=this.getProps();if(!i||!qm(e,r,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(o=dH(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:i}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;t&&Wc(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=pH(r.layoutBox,t):this.constraints=!1,this.elastic=yH(i),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Qr(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=vH(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Wc(e))return!1;const i=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const s=EH(i,r.root,this.visualElement.getTransformPagePoint());let o=mH(r.layout.layoutBox,s);if(t){const a=t(_H(o));this.hasMutatedConstraints=!!a,a&&(o=b7(a))}return o}startAnimation(e){const{drag:t,dragMomentum:i,dragElastic:r,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},u=Qr(c=>{if(!qm(c,t,this.currentDirection))return;let h=l&&l[c]||{};o&&(h={min:0,max:0});const p=r?200:1e6,m=r?40:1e7,v={type:"inertia",velocity:i?e[c]:0,bounceStiffness:p,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...s,...h};return this.startAxisValueAnimation(c,v)});return Promise.all(u).then(a)}startAxisValueAnimation(e,t){const i=this.getAxisMotionValue(e);return i.start(uC(e,i,0,t,this.visualElement))}stopAnimation(){Qr(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Qr(e=>{var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.state}getAxisMotionValue(e){const t="_drag"+e.toUpperCase(),i=this.visualElement.getProps(),r=i[t];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){Qr(t=>{const{drag:i}=this.getProps();if(!qm(t,i,this.currentDirection))return;const{projection:r}=this.visualElement,s=this.getAxisMotionValue(t);if(r&&r.layout){const{min:o,max:a}=r.layout.layoutBox[t];s.set(e[t]-Pn(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:i}=this.visualElement;if(!Wc(t)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};Qr(o=>{const a=this.getAxisMotionValue(o);if(a){const l=a.get();r[o]=gH({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),Qr(o=>{if(!qm(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:u}=this.constraints[o];a.set(Pn(l,u,r[o]))})}addListeners(){if(!this.visualElement.current)return;MH.set(this.visualElement,this);const e=this.visualElement.current,t=Ps(e,"pointerdown",l=>{const{drag:u,dragListener:c=!0}=this.getProps();u&&c&&this.start(l)}),i=()=>{const{dragConstraints:l}=this.getProps();Wc(l)&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,s=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),i();const o=Uo(window,"resize",()=>this.scalePositionWithinConstraints()),a=r.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(Qr(c=>{const h=this.getAxisMotionValue(c);h&&(this.originPoint[c]+=l[c].translate,h.set(h.get()+l[c].translate))}),this.visualElement.render())});return()=>{o(),t(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:s=!1,dragElastic:o=A3,dragMomentum:a=!0}=e;return{...e,drag:t,dragDirectionLock:i,dragPropagation:r,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function qm(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function TH(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class bH extends pl{constructor(e){super(e),this.removeGroupControls=wi,this.removeListeners=wi,this.controls=new wH(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||wi}unmount(){this.removeGroupControls(),this.removeListeners()}}const _5=n=>(e,t)=>{n&&n(e,t)};class RH extends pl{constructor(){super(...arguments),this.removePointerDownListener=wi}onPointerDown(e){this.session=new w7(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:I7(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:_5(e),onStart:_5(t),onMove:i,onEnd:(s,o)=>{delete this.session,r&&r(s,o)}}}mount(){this.removePointerDownListener=Ps(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function PH(){const n=G.useContext(iv);if(n===null)return[!0,null];const{isPresent:e,onExitComplete:t,register:i}=n,r=G.useId();return G.useEffect(()=>i(r),[]),!e&&t?[!1,()=>t&&t(r)]:[!0]}const v0={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function x5(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Sh={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(wt.test(n))n=parseFloat(n);else return n;const t=x5(n,e.target.x),i=x5(n,e.target.y);return`${t}% ${i}%`}},BH={correct:(n,{treeScale:e,projectionDelta:t})=>{const i=n,r=tl.parse(n);if(r.length>5)return i;const s=tl.createTransformer(n),o=typeof r[0]!="number"?1:0,a=t.x.scale*e.x,l=t.y.scale*e.y;r[0+o]/=a,r[1+o]/=l;const u=Pn(a,l,.5);return typeof r[2+o]=="number"&&(r[2+o]/=u),typeof r[3+o]=="number"&&(r[3+o]/=u),s(r)}};class IH extends Tn.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i,layoutId:r}=this.props,{projection:s}=e;NU(LH),s&&(t.group&&t.group.add(s),i&&i.register&&r&&i.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),v0.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:i,drag:r,isPresent:s}=this.props,o=i.projection;return o&&(o.isPresent=s,r||e.layoutDependency!==t||t===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||In.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),OS.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function L7(n){const[e,t]=PH(),i=G.useContext(zS);return Tn.createElement(IH,{...n,layoutGroup:i,switchLayoutGroup:G.useContext(RR),isPresent:e,safeToRemove:t})}const LH={borderRadius:{...Sh,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Sh,borderTopRightRadius:Sh,borderBottomLeftRadius:Sh,borderBottomRightRadius:Sh,boxShadow:BH},D7=["TopLeft","TopRight","BottomLeft","BottomRight"],DH=D7.length,A5=n=>typeof n=="string"?parseFloat(n):n,S5=n=>typeof n=="number"||wt.test(n);function FH(n,e,t,i,r,s){r?(n.opacity=Pn(0,t.opacity!==void 0?t.opacity:1,NH(i)),n.opacityExit=Pn(e.opacity!==void 0?e.opacity:1,0,OH(i))):s&&(n.opacity=Pn(e.opacity!==void 0?e.opacity:1,t.opacity!==void 0?t.opacity:1,i));for(let o=0;o<DH;o++){const a=`border${D7[o]}Radius`;let l=C5(e,a),u=C5(t,a);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||S5(l)===S5(u)?(n[a]=Math.max(Pn(A5(l),A5(u),i),0),(to.test(u)||to.test(l))&&(n[a]+="%")):n[a]=u}(e.rotate||t.rotate)&&(n.rotate=Pn(e.rotate||0,t.rotate||0,i))}function C5(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const NH=F7(0,.5,m7),OH=F7(.5,.95,wi);function F7(n,e,t){return i=>i<n?0:i>e?1:t(xf(n,e,i))}function E5(n,e){n.min=e.min,n.max=e.max}function Yr(n,e){E5(n.x,e.x),E5(n.y,e.y)}function M5(n,e,t,i,r){return n-=e,n=gg(n,1/t,i),r!==void 0&&(n=gg(n,1/r,i)),n}function UH(n,e=0,t=1,i=.5,r,s=n,o=n){if(to.test(e)&&(e=parseFloat(e),e=Pn(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=Pn(s.min,s.max,i);n===s&&(a-=e),n.min=M5(n.min,e,t,a,r),n.max=M5(n.max,e,t,a,r)}function w5(n,e,[t,i,r],s,o){UH(n,e[t],e[i],e[r],e.scale,s,o)}const kH=["x","scaleX","originX"],zH=["y","scaleY","originY"];function T5(n,e,t,i){w5(n.x,e,kH,t?t.x:void 0,i?i.x:void 0),w5(n.y,e,zH,t?t.y:void 0,i?i.y:void 0)}function b5(n){return n.translate===0&&n.scale===1}function N7(n){return b5(n.x)&&b5(n.y)}function HH(n,e){return n.x.min===e.x.min&&n.x.max===e.x.max&&n.y.min===e.y.min&&n.y.max===e.y.max}function O7(n,e){return Math.round(n.x.min)===Math.round(e.x.min)&&Math.round(n.x.max)===Math.round(e.x.max)&&Math.round(n.y.min)===Math.round(e.y.min)&&Math.round(n.y.max)===Math.round(e.y.max)}function R5(n){return Lr(n.x)/Lr(n.y)}class GH{constructor(){this.members=[]}add(e){cC(this.members,e),e.scheduleRender()}remove(e){if(fC(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(r=>e===r);if(t===0)return!1;let i;for(let r=t;r>=0;r--){const s=this.members[r];if(s.isPresent!==!1){i=s;break}}return i?(this.promote(i),!0):!1}promote(e,t){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,t&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:i}=e;t.onExitComplete&&t.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function P5(n,e,t){let i="";const r=n.x.translate/e.x,s=n.y.translate/e.y,o=(t==null?void 0:t.z)||0;if((r||s||o)&&(i=`translate3d(${r}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),t){const{rotate:u,rotateX:c,rotateY:h,skewX:p,skewY:m}=t;u&&(i+=`rotate(${u}deg) `),c&&(i+=`rotateX(${c}deg) `),h&&(i+=`rotateY(${h}deg) `),p&&(i+=`skewX(${p}deg) `),m&&(i+=`skewY(${m}deg) `)}const a=n.x.scale*e.x,l=n.y.scale*e.y;return(a!==1||l!==1)&&(i+=`scale(${a}, ${l})`),i||"none"}const VH=(n,e)=>n.depth-e.depth;class WH{constructor(){this.children=[],this.isDirty=!1}add(e){cC(this.children,e),this.isDirty=!0}remove(e){fC(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(VH),this.isDirty=!1,this.children.forEach(e)}}function jH(n,e){const t=Ja.now(),i=({timestamp:r})=>{const s=r-t;s>=e&&(ao(i),n(s-e))};return In.read(i,!0),()=>ao(i)}function XH(n){window.MotionDebug&&window.MotionDebug.record(n)}function JH(n){return n instanceof SVGElement&&n.tagName!=="svg"}function KH(n,e,t){const i=Gn(n)?n:Ks(n);return i.start(uC("",i,e,t)),i.animation}const k_=["","X","Y","Z"],YH={visibility:"hidden"},B5=1e3;let ZH=0;const Jl={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function z_(n,e,t,i){const{latestValues:r}=e;r[n]&&(t[n]=r[n],e.setStaticValue(n,0),i&&(i[n]=0))}function U7({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(o={},a=e==null?void 0:e()){this.id=ZH++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Jl.totalNodes=Jl.resolvedTargetDeltas=Jl.recalculatedProjection=0,this.nodes.forEach($H),this.nodes.forEach(rG),this.nodes.forEach(sG),this.nodes.forEach(eG),XH(Jl)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new WH)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new hC),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=JH(o),this.instance=o;const{layoutId:l,layout:u,visualElement:c}=this.options;if(c&&!c.current&&c.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(u||l)&&(this.isLayoutDirty=!0),n){let h;const p=()=>this.root.updateBlockedByResize=!1;n(o,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=jH(p,250),v0.hasAnimatedSinceResize&&(v0.hasAnimatedSinceResize=!1,this.nodes.forEach(L5))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&c&&(l||u)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:p,hasRelativeTargetChanged:m,layout:v})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const A=this.options.transition||c.getDefaultTransition()||cG,{onLayoutAnimationStart:_,onLayoutAnimationComplete:g}=c.getProps(),S=!this.targetLayout||!O7(this.targetLayout,v)||m,x=!p&&m;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||x||p&&(S||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,x);const E={...QS(A,"layout"),onPlay:_,onComplete:g};(c.shouldReduceMotion||this.options.layoutRoot)&&(E.delay=0,E.type=!1),this.startAnimation(E)}else p||L5(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=v})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,ao(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(oG),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let c=0;c<this.path.length;c++){const h=this.path[c];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(I5);return}this.isUpdating||this.nodes.forEach(nG),this.isUpdating=!1,window.HandoffCancelAllAnimations&&window.HandoffCancelAllAnimations(),this.nodes.forEach(iG),this.nodes.forEach(qH),this.nodes.forEach(QH),this.clearAllSnapshots();const a=Ja.now();pi.delta=el(0,1e3/60,a-pi.timestamp),pi.timestamp=a,pi.isProcessing=!0,R_.update.process(pi),R_.preRender.process(pi),R_.render.process(pi),pi.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,OS.read(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(tG),this.sharedNodes.forEach(aG)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,In.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){In.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Un(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:i(this.instance),offset:t(this.instance)})}resetTransform(){if(!r)return;const o=this.isLayoutDirty||this.shouldResetTransform,a=this.projectionDelta&&!N7(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,c=u!==this.prevTransformTemplateValue;o&&(a||Xl(this.latestValues)||c)&&(r(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),fG(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return Un();const a=o.measureViewportBox(),{scroll:l}=this.root;return l&&(wa(a.x,l.offset.x),wa(a.y,l.offset.y)),a}removeElementScroll(o){const a=Un();Yr(a,o);for(let l=0;l<this.path.length;l++){const u=this.path[l],{scroll:c,options:h}=u;if(u!==this.root&&c&&h.layoutScroll){if(c.isRoot){Yr(a,o);const{scroll:p}=this.root;p&&(wa(a.x,-p.offset.x),wa(a.y,-p.offset.y))}wa(a.x,c.offset.x),wa(a.y,c.offset.y)}}return a}applyTransform(o,a=!1){const l=Un();Yr(l,o);for(let u=0;u<this.path.length;u++){const c=this.path[u];!a&&c.options.layoutScroll&&c.scroll&&c!==c.root&&Jc(l,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),Xl(c.latestValues)&&Jc(l,c.latestValues)}return Xl(this.latestValues)&&Jc(l,this.latestValues),l}removeTransform(o){const a=Un();Yr(a,o);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!Xl(u.latestValues))continue;S3(u.latestValues)&&u.updateSnapshot();const c=Un(),h=u.measurePageBox();Yr(c,h),T5(a,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,c)}return Xl(this.latestValues)&&T5(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==pi.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==l;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:h,layoutId:p}=this.options;if(!(!this.layout||!(h||p))){if(this.resolvedRelativeTargetAt=pi.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Un(),this.relativeTargetOrigin=Un(),cd(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),Yr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Un(),this.targetWithTransforms=Un()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),hH(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Yr(this.target,this.layout.layoutBox),P7(this.target,this.targetDelta)):Yr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Un(),this.relativeTargetOrigin=Un(),cd(this.relativeTargetOrigin,this.target,m.target),Yr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Jl.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||S3(this.parent.latestValues)||R7(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let u=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(u=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===pi.timestamp&&(u=!1),u)return;const{layout:c,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||h))return;Yr(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,m=this.treeScale.y;AH(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=Un());const{target:v}=a;if(!v){this.projectionTransform&&(this.projectionDelta=Xc(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Xc(),this.projectionDeltaWithTransform=Xc());const A=this.projectionTransform;ud(this.projectionDelta,this.layoutCorrected,v,this.latestValues),this.projectionTransform=P5(this.projectionDelta,this.treeScale),(this.projectionTransform!==A||this.treeScale.x!==p||this.treeScale.y!==m)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",v)),Jl.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,a=!1){const l=this.snapshot,u=l?l.latestValues:{},c={...this.latestValues},h=Xc();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const p=Un(),m=l?l.source:void 0,v=this.layout?this.layout.source:void 0,A=m!==v,_=this.getStack(),g=!_||_.members.length<=1,S=!!(A&&!g&&this.options.crossfade===!0&&!this.path.some(uG));this.animationProgress=0;let x;this.mixTargetDelta=E=>{const b=E/1e3;D5(h.x,o.x,b),D5(h.y,o.y,b),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(cd(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),lG(this.relativeTarget,this.relativeTargetOrigin,p,b),x&&HH(this.relativeTarget,x)&&(this.isProjectionDirty=!1),x||(x=Un()),Yr(x,this.relativeTarget)),A&&(this.animationValues=c,FH(c,u,this.latestValues,b,S,g)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=b},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(ao(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=In.update(()=>{v0.hasAnimatedSinceResize=!0,this.currentAnimation=KH(0,B5,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(B5),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:u,latestValues:c}=o;if(!(!a||!l||!u)){if(this!==o&&this.layout&&u&&k7(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||Un();const h=Lr(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+h;const p=Lr(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+p}Yr(a,l),Jc(a,c),ud(this.projectionDeltaWithTransform,this.layoutCorrected,a,c)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new GH),this.sharedNodes.get(o).add(a);const u=a.options.initialPromotionConfig;a.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const u={};l.z&&z_("z",o,u,this.animationValues);for(let c=0;c<k_.length;c++)z_(`rotate${k_[c]}`,o,u,this.animationValues),z_(`skew${k_[c]}`,o,u,this.animationValues);o.render();for(const c in u)o.setStaticValue(c,u[c]),this.animationValues&&(this.animationValues[c]=u[c]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return YH;const u={visibility:""},c=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=ad(o==null?void 0:o.pointerEvents)||"",u.transform=c?c(this.latestValues,""):"none",u;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const A={};return this.options.layoutId&&(A.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,A.pointerEvents=ad(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Xl(this.latestValues)&&(A.transform=c?c({},""):"none",this.hasProjected=!1),A}const p=h.animationValues||h.latestValues;this.applyTransformsToTarget(),u.transform=P5(this.projectionDeltaWithTransform,this.treeScale,p),c&&(u.transform=c(p,u.transform));const{x:m,y:v}=this.projectionDelta;u.transformOrigin=`${m.origin*100}% ${v.origin*100}% 0`,h.animationValues?u.opacity=h===this?(l=(a=p.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:u.opacity=h===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const A in cg){if(p[A]===void 0)continue;const{correct:_,applyTo:g}=cg[A],S=u.transform==="none"?p[A]:_(p[A],h);if(g){const x=g.length;for(let E=0;E<x;E++)u[g[E]]=S}else u[A]=S}return this.options.layoutId&&(u.pointerEvents=h===this?ad(o==null?void 0:o.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(I5),this.root.sharedNodes.clear()}}}function qH(n){n.updateLayout()}function QH(n){var e;const t=((e=n.resumeFrom)===null||e===void 0?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:r}=n.layout,{animationType:s}=n.options,o=t.source!==n.layout.source;s==="size"?Qr(h=>{const p=o?t.measuredBox[h]:t.layoutBox[h],m=Lr(p);p.min=i[h].min,p.max=p.min+m}):k7(s,t.layoutBox,i)&&Qr(h=>{const p=o?t.measuredBox[h]:t.layoutBox[h],m=Lr(i[h]);p.max=p.min+m,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[h].max=n.relativeTarget[h].min+m)});const a=Xc();ud(a,i,t.layoutBox);const l=Xc();o?ud(l,n.applyTransform(r,!0),t.measuredBox):ud(l,i,t.layoutBox);const u=!N7(a);let c=!1;if(!n.resumeFrom){const h=n.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:p,layout:m}=h;if(p&&m){const v=Un();cd(v,t.layoutBox,p.layoutBox);const A=Un();cd(A,i,m.layoutBox),O7(v,A)||(c=!0),h.options.layoutRoot&&(n.relativeTarget=A,n.relativeTargetOrigin=v,n.relativeParent=h)}}}n.notifyListeners("didUpdate",{layout:i,snapshot:t,delta:l,layoutDelta:a,hasLayoutChanged:u,hasRelativeTargetChanged:c})}else if(n.isLead()){const{onExitComplete:i}=n.options;i&&i()}n.options.transition=void 0}function $H(n){Jl.totalNodes++,n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function eG(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function tG(n){n.clearSnapshot()}function I5(n){n.clearMeasurements()}function nG(n){n.isLayoutDirty=!1}function iG(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function L5(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function rG(n){n.resolveTargetDelta()}function sG(n){n.calcProjection()}function oG(n){n.resetSkewAndRotation()}function aG(n){n.removeLeadSnapshot()}function D5(n,e,t){n.translate=Pn(e.translate,0,t),n.scale=Pn(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function F5(n,e,t,i){n.min=Pn(e.min,t.min,i),n.max=Pn(e.max,t.max,i)}function lG(n,e,t,i){F5(n.x,e.x,t.x,i),F5(n.y,e.y,t.y,i)}function uG(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const cG={duration:.45,ease:[.4,0,.1,1]},N5=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),O5=N5("applewebkit/")&&!N5("chrome/")?Math.round:wi;function U5(n){n.min=O5(n.min),n.max=O5(n.max)}function fG(n){U5(n.x),U5(n.y)}function k7(n,e,t){return n==="position"||n==="preserve-aspect"&&!x3(R5(e),R5(t),.2)}const hG=U7({attachResizeListener:(n,e)=>Uo(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),H_={current:void 0},z7=U7({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!H_.current){const n=new hG({});n.mount(window),n.setOptions({layoutScroll:!0}),H_.current=n}return H_.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),dG={pan:{Feature:RH},drag:{Feature:bH,ProjectionNode:z7,MeasureLayout:L7}},E3={current:null},H7={current:!1};function pG(){if(H7.current=!0,!!FS)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>E3.current=n.matches;n.addListener(e),e()}else E3.current=!1}function mG(n,e,t){const{willChange:i}=e;for(const r in e){const s=e[r],o=t[r];if(Gn(s))n.addValue(r,s),mg(i)&&i.add(r);else if(Gn(o))n.addValue(r,Ks(s,{owner:n})),mg(i)&&i.remove(r);else if(o!==s)if(n.hasValue(r)){const a=n.getValue(r);!a.hasAnimated&&a.set(s)}else{const a=n.getStaticValue(r);n.addValue(r,Ks(a!==void 0?a:s,{owner:n}))}}for(const r in t)e[r]===void 0&&n.removeValue(r);return e}const k5=new WeakMap,gG=[...$R,Ui,tl],vG=n=>gG.find(QR(n)),G7=Object.keys(zd),yG=G7.length,z5=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],_G=kS.length;class V7{constructor({parent:e,props:t,presenceContext:i,reducedMotionConfig:r,blockInitialAnimation:s,visualState:o},a={}){this.resolveKeyframes=(p,m,v,A)=>new this.KeyframeResolver(p,m,v,A,this),this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=eC,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>In.render(this.render,!1,!0);const{latestValues:l,renderState:u}=o;this.latestValues=l,this.baseTarget={...l},this.initialValues=t.initial?{...l}:{},this.renderState=u,this.parent=e,this.props=t,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=sv(t),this.isVariantNode=bR(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:c,...h}=this.scrapeMotionValuesFromProps(t,{});for(const p in h){const m=h[p];l[p]!==void 0&&Gn(m)&&(m.set(l[p],!1),mg(c)&&c.add(p))}}scrapeMotionValuesFromProps(e,t){return{}}mount(e){this.current=e,k5.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,i)=>this.bindToMotionValue(i,t)),H7.current||pG(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:E3.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){k5.delete(this.current),this.projection&&this.projection.unmount(),ao(this.notifyUpdate),ao(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,t){const i=Lu.has(e),r=t.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&In.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0)}),s=t.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{r(),s(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...t},i,r,s){let o,a;for(let l=0;l<yG;l++){const u=G7[l],{isEnabled:c,Feature:h,ProjectionNode:p,MeasureLayout:m}=zd[u];p&&(o=p),c(t)&&(!this.features[u]&&h&&(this.features[u]=new h(this)),m&&(a=m))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:l,layout:u,drag:c,dragConstraints:h,layoutScroll:p,layoutRoot:m}=t;this.projection.setOptions({layoutId:l,layout:u,alwaysMeasureLayout:!!c||h&&Wc(h),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof u=="string"?u:"both",initialPromotionConfig:s,layoutScroll:p,layoutRoot:m})}return a}updateFeatures(){for(const e in this.features){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Un()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let i=0;i<z5.length;i++){const r=z5[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const s=e["on"+r];s&&(this.propEventSubscriptions[r]=this.on(r,s))}this.prevMotionValues=mG(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const i=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(i.initial=this.props.initial),i}const t={};for(let i=0;i<_G;i++){const r=kS[i],s=this.props[r];(kd(s)||s===!1)&&(t[r]=s)}return t}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){t!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,t)),this.values.set(e,t),this.latestValues[e]=t.get()}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&t!==void 0&&(i=Ks(t===null?void 0:t,{owner:this}),this.addValue(e,i)),i}readValue(e,t){var i;let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(i=this.getBaseTargetFromProps(this.props,e))!==null&&i!==void 0?i:this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(ZR(r)||YR(r))?r=parseFloat(r):!vG(r)&&tl.test(t)&&(r=a7(e,t)),this.setBaseTarget(e,Gn(r)?r.get():r)),Gn(r)?r.get():r}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t,i;const{initial:r}=this.props,s=typeof r=="string"||typeof r=="object"?(i=YS(this.props,r,(t=this.presenceContext)===null||t===void 0?void 0:t.custom))===null||i===void 0?void 0:i[e]:void 0;if(r&&s!==void 0)return s;const o=this.getBaseTargetFromProps(this.props,e);return o!==void 0&&!Gn(o)?o:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new hC),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class W7 extends V7{constructor(){super(...arguments),this.KeyframeResolver=l7}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:i}){delete t[e],delete i[e]}}function xG(n){return window.getComputedStyle(n)}class AG extends W7{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,t){if(Lu.has(t)){const i=nC(t);return i&&i.default||0}else{const i=xG(e),r=(LR(t)?i.getPropertyValue(t):i[t])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:t}){return B7(e,t)}build(e,t,i,r){WS(e,t,i,r.transformTemplate)}scrapeMotionValuesFromProps(e,t){return KS(e,t)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Gn(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}renderInstance(e,t,i,r){kR(e,t,i,r)}}class SG extends W7{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Lu.has(t)){const i=nC(t);return i&&i.default||0}return t=zR.has(t)?t:NS(t),e.getAttribute(t)}measureInstanceViewportBox(){return Un()}scrapeMotionValuesFromProps(e,t){return GR(e,t)}build(e,t,i,r){XS(e,t,i,this.isSVGTag,r.transformTemplate)}renderInstance(e,t,i,r){HR(e,t,i,r)}mount(e){this.isSVGTag=JS(e.tagName),super.mount(e)}}const CG=(n,e)=>HS(n)?new SG(e,{enableHardwareAcceleration:!1}):new AG(e,{enableHardwareAcceleration:!0}),EG={layout:{ProjectionNode:z7,MeasureLayout:L7}},MG={...M7,...Sk,...dG,...EG},Ci=DU((n,e)=>ck(n,e,MG,CG));function j7(){const n=G.useRef(!1);return pp(()=>(n.current=!0,()=>{n.current=!1}),[]),n}function wG(){const n=j7(),[e,t]=G.useState(0),i=G.useCallback(()=>{n.current&&t(e+1)},[e]);return[G.useCallback(()=>In.postRender(i),[i]),e]}class TG extends G.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const i=this.props.sizeRef.current;i.height=t.offsetHeight||0,i.width=t.offsetWidth||0,i.top=t.offsetTop,i.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function bG({children:n,isPresent:e}){const t=G.useId(),i=G.useRef(null),r=G.useRef({width:0,height:0,top:0,left:0}),{nonce:s}=G.useContext(tv);return G.useInsertionEffect(()=>{const{width:o,height:a,top:l,left:u}=r.current;if(e||!i.current||!o||!a)return;i.current.dataset.motionPopId=t;const c=document.createElement("style");return s&&(c.nonce=s),document.head.appendChild(c),c.sheet&&c.sheet.insertRule(`
          [data-motion-pop-id="${t}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${a}px !important;
            top: ${l}px !important;
            left: ${u}px !important;
          }
        `),()=>{document.head.removeChild(c)}},[e]),G.createElement(TG,{isPresent:e,childRef:i,sizeRef:r},G.cloneElement(n,{ref:i}))}const G_=({children:n,initial:e,isPresent:t,onExitComplete:i,custom:r,presenceAffectsLayout:s,mode:o})=>{const a=yp(RG),l=G.useId(),u=G.useMemo(()=>({id:l,initial:e,isPresent:t,custom:r,onExitComplete:c=>{a.set(c,!0);for(const h of a.values())if(!h)return;i&&i()},register:c=>(a.set(c,!1),()=>a.delete(c))}),s?void 0:[t]);return G.useMemo(()=>{a.forEach((c,h)=>a.set(h,!1))},[t]),G.useEffect(()=>{!t&&!a.size&&i&&i()},[t]),o==="popLayout"&&(n=G.createElement(bG,{isPresent:t},n)),G.createElement(iv.Provider,{value:u},n)};function RG(){return new Map}function PG(n){return G.useEffect(()=>()=>n(),[])}const Kl=n=>n.key||"";function BG(n,e){n.forEach(t=>{const i=Kl(t);e.set(i,t)})}function IG(n){const e=[];return G.Children.forEach(n,t=>{G.isValidElement(t)&&e.push(t)}),e}const dC=({children:n,custom:e,initial:t=!0,onExitComplete:i,exitBeforeEnter:r,presenceAffectsLayout:s=!0,mode:o="sync"})=>{const a=G.useContext(zS).forceRender||wG()[0],l=j7(),u=IG(n);let c=u;const h=G.useRef(new Map).current,p=G.useRef(c),m=G.useRef(new Map).current,v=G.useRef(!0);if(pp(()=>{v.current=!1,BG(u,m),p.current=c}),PG(()=>{v.current=!0,m.clear(),h.clear()}),v.current)return G.createElement(G.Fragment,null,c.map(S=>G.createElement(G_,{key:Kl(S),isPresent:!0,initial:t?void 0:!1,presenceAffectsLayout:s,mode:o},S)));c=[...c];const A=p.current.map(Kl),_=u.map(Kl),g=A.length;for(let S=0;S<g;S++){const x=A[S];_.indexOf(x)===-1&&!h.has(x)&&h.set(x,void 0)}return o==="wait"&&h.size&&(c=[]),h.forEach((S,x)=>{if(_.indexOf(x)!==-1)return;const E=m.get(x);if(!E)return;const b=A.indexOf(x);let T=S;if(!T){const P=()=>{h.delete(x);const I=Array.from(m.keys()).filter(z=>!_.includes(z));if(I.forEach(z=>m.delete(z)),p.current=u.filter(z=>{const w=Kl(z);return w===x||I.includes(w)}),!h.size){if(l.current===!1)return;a(),i&&i()}};T=G.createElement(G_,{key:Kl(E),isPresent:!1,onExitComplete:P,custom:e,presenceAffectsLayout:s,mode:o},E),h.set(x,T)}c.splice(b,0,T)}),c=c.map(S=>{const x=S.key;return h.has(x)?S:G.createElement(G_,{key:Kl(S),isPresent:!0,presenceAffectsLayout:s,mode:o},S)}),G.createElement(G.Fragment,null,h.size?c:c.map(S=>G.cloneElement(S)))};function LG(n){const e=yp(()=>Ks(n)),{isStatic:t}=G.useContext(tv);if(t){const[,i]=G.useState(n);G.useEffect(()=>e.on("change",i),[])}return e}const DG=n=>n&&typeof n=="object"&&n.mix,FG=n=>DG(n)?n.mix:void 0;function NG(...n){const e=!Array.isArray(n[0]),t=e?0:-1,i=n[0+t],r=n[1+t],s=n[2+t],o=n[3+t],a=aC(r,s,{mixer:FG(s[0]),...o});return e?a(i):a}function X7(n,e){const t=LG(e()),i=()=>t.set(e());return i(),pp(()=>{const r=()=>In.update(i,!1,!0),s=n.map(o=>o.on("change",r));return()=>{s.forEach(o=>o()),ao(i)}}),t}function OG(n){ld.current=[],n();const e=X7(ld.current,n);return ld.current=void 0,e}function Gd(n,e,t,i){if(typeof n=="function")return OG(n);const r=typeof e=="function"?e:NG(e,t,i);return Array.isArray(n)?H5(n,r):H5([n],([s])=>r(s))}function H5(n,e){const t=yp(()=>[]);return X7(n,()=>{t.length=0;const i=n.length;for(let r=0;r<i;r++)t[r]=n[r].get();return e(t)})}function UG(n,e,t){var i;if(typeof n=="string"){let r=document;e&&($S(!!e.current),r=e.current),t?((i=t[n])!==null&&i!==void 0||(t[n]=r.querySelectorAll(n)),n=t[n]):n=r.querySelectorAll(n)}else n instanceof Element&&(n=[n]);return Array.from(n||[])}const y0=new WeakMap;let Ca;function kG(n,e){if(e){const{inlineSize:t,blockSize:i}=e[0];return{width:t,height:i}}else return n instanceof SVGElement&&"getBBox"in n?n.getBBox():{width:n.offsetWidth,height:n.offsetHeight}}function zG({target:n,contentRect:e,borderBoxSize:t}){var i;(i=y0.get(n))===null||i===void 0||i.forEach(r=>{r({target:n,contentSize:e,get size(){return kG(n,t)}})})}function HG(n){n.forEach(zG)}function GG(){typeof ResizeObserver>"u"||(Ca=new ResizeObserver(HG))}function VG(n,e){Ca||GG();const t=UG(n);return t.forEach(i=>{let r=y0.get(i);r||(r=new Set,y0.set(i,r)),r.add(e),Ca==null||Ca.observe(i)}),()=>{t.forEach(i=>{const r=y0.get(i);r==null||r.delete(e),r!=null&&r.size||Ca==null||Ca.unobserve(i)})}}const _0=new Set;let fd;function WG(){fd=()=>{const n={width:window.innerWidth,height:window.innerHeight},e={target:window,size:n,contentSize:n};_0.forEach(t=>t(e))},window.addEventListener("resize",fd)}function jG(n){return _0.add(n),fd||WG(),()=>{_0.delete(n),!_0.size&&fd&&(fd=void 0)}}function XG(n,e){return typeof n=="function"?jG(n):VG(n,e)}const JG=50,G5=()=>({current:0,offset:[],progress:0,scrollLength:0,targetOffset:0,targetLength:0,containerLength:0,velocity:0}),KG=()=>({time:0,x:G5(),y:G5()}),YG={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}};function V5(n,e,t,i){const r=t[e],{length:s,position:o}=YG[e],a=r.current,l=t.time;r.current=n["scroll"+o],r.scrollLength=n["scroll"+s]-n["client"+s],r.offset.length=0,r.offset[0]=0,r.offset[1]=r.scrollLength,r.progress=xf(0,r.scrollLength,r.current);const u=i-l;r.velocity=u>JG?0:iC(r.current-a,u)}function ZG(n,e,t){V5(n,"x",e,t),V5(n,"y",e,t),e.time=t}function qG(n,e){const t={x:0,y:0};let i=n;for(;i&&i!==e;)if(i instanceof HTMLElement)t.x+=i.offsetLeft,t.y+=i.offsetTop,i=i.offsetParent;else if(i.tagName==="svg"){const r=i.getBoundingClientRect();i=i.parentElement;const s=i.getBoundingClientRect();t.x+=r.left-s.left,t.y+=r.top-s.top}else if(i instanceof SVGGraphicsElement){const{x:r,y:s}=i.getBBox();t.x+=r,t.y+=s;let o=null,a=i.parentNode;for(;!o;)a.tagName==="svg"&&(o=a),a=i.parentNode;i=o}else break;return t}const QG={Enter:[[0,1],[1,1]],Exit:[[0,0],[1,0]],Any:[[1,0],[0,1]],All:[[0,0],[1,1]]},M3={start:0,center:.5,end:1};function W5(n,e,t=0){let i=0;if(M3[n]!==void 0&&(n=M3[n]),typeof n=="string"){const r=parseFloat(n);n.endsWith("px")?i=r:n.endsWith("%")?n=r/100:n.endsWith("vw")?i=r/100*document.documentElement.clientWidth:n.endsWith("vh")?i=r/100*document.documentElement.clientHeight:n=r}return typeof n=="number"&&(i=e*n),t+i}const $G=[0,0];function eV(n,e,t,i){let r=Array.isArray(n)?n:$G,s=0,o=0;return typeof n=="number"?r=[n,n]:typeof n=="string"&&(n=n.trim(),n.includes(" ")?r=n.split(" "):r=[n,M3[n]?n:"0"]),s=W5(r[0],t,i),o=W5(r[1],e),s-o}const tV={x:0,y:0};function nV(n){return"getBBox"in n&&n.tagName!=="svg"?n.getBBox():{width:n.clientWidth,height:n.clientHeight}}function iV(n,e,t){const{offset:i=QG.All}=t,{target:r=n,axis:s="y"}=t,o=s==="y"?"height":"width",a=r!==n?qG(r,n):tV,l=r===n?{width:n.scrollWidth,height:n.scrollHeight}:nV(r),u={width:n.clientWidth,height:n.clientHeight};e[s].offset.length=0;let c=!e[s].interpolate;const h=i.length;for(let p=0;p<h;p++){const m=eV(i[p],u[o],l[o],a[s]);!c&&m!==e[s].interpolatorOffsets[p]&&(c=!0),e[s].offset[p]=m}c&&(e[s].interpolate=aC(e[s].offset,_7(i)),e[s].interpolatorOffsets=[...e[s].offset]),e[s].progress=e[s].interpolate(e[s].current)}function rV(n,e=n,t){if(t.x.targetOffset=0,t.y.targetOffset=0,e!==n){let i=e;for(;i&&i!==n;)t.x.targetOffset+=i.offsetLeft,t.y.targetOffset+=i.offsetTop,i=i.offsetParent}t.x.targetLength=e===n?e.scrollWidth:e.clientWidth,t.y.targetLength=e===n?e.scrollHeight:e.clientHeight,t.x.containerLength=n.clientWidth,t.y.containerLength=n.clientHeight}function sV(n,e,t,i={}){return{measure:()=>rV(n,i.target,t),update:r=>{ZG(n,t,r),(i.offset||i.target)&&iV(n,t,i)},notify:()=>e(t)}}const Ch=new WeakMap,j5=new WeakMap,V_=new WeakMap,X5=n=>n===document.documentElement?window:n;function oV(n,{container:e=document.documentElement,...t}={}){let i=V_.get(e);i||(i=new Set,V_.set(e,i));const r=KG(),s=sV(e,n,r,t);if(i.add(s),!Ch.has(e)){const a=()=>{for(const p of i)p.measure()},l=()=>{for(const p of i)p.update(pi.timestamp)},u=()=>{for(const p of i)p.notify()},c=()=>{In.read(a,!1,!0),In.read(l,!1,!0),In.update(u,!1,!0)};Ch.set(e,c);const h=X5(e);window.addEventListener("resize",c,{passive:!0}),e!==document.documentElement&&j5.set(e,XG(e,c)),h.addEventListener("scroll",c,{passive:!0})}const o=Ch.get(e);return In.read(o,!1,!0),()=>{var a;ao(o);const l=V_.get(e);if(!l||(l.delete(s),l.size))return;const u=Ch.get(e);Ch.delete(e),u&&(X5(e).removeEventListener("scroll",u),(a=j5.get(e))===null||a===void 0||a(),window.removeEventListener("resize",u))}}function J5(n,e){Dk(!!(!e||e.current))}const aV=()=>({scrollX:Ks(0),scrollY:Ks(0),scrollXProgress:Ks(0),scrollYProgress:Ks(0)});function pC({container:n,target:e,layoutEffect:t=!0,...i}={}){const r=yp(aV);return(t?pp:G.useEffect)(()=>(J5("target",e),J5("container",n),oV(({x:o,y:a})=>{r.scrollX.set(o.current),r.scrollXProgress.set(o.progress),r.scrollY.set(a.current),r.scrollYProgress.set(a.progress)},{...i,container:(n==null?void 0:n.current)||void 0,target:(e==null?void 0:e.current)||void 0})),[n,e,JSON.stringify(i.offset)]),r}const lV="_home_1iwpa_1",uV="_face_1iwpa_5",K5={home:lV,face:uV},cV="_about_rcx40_1",fV="_item_rcx40_7",hV="_title_rcx40_11",dV="_text_rcx40_17",Eh={about:cV,item:fV,title:hV,text:dV},pV="_title_14dpg_1",mV={title:pV};function gV({children:n}){return ce.jsx("h1",{className:mV.title,children:n})}let Qm;const vV=new Uint8Array(16);function yV(){if(!Qm&&(Qm=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Qm))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Qm(vV)}const _i=[];for(let n=0;n<256;++n)_i.push((n+256).toString(16).slice(1));function _V(n,e=0){return _i[n[e+0]]+_i[n[e+1]]+_i[n[e+2]]+_i[n[e+3]]+"-"+_i[n[e+4]]+_i[n[e+5]]+"-"+_i[n[e+6]]+_i[n[e+7]]+"-"+_i[n[e+8]]+_i[n[e+9]]+"-"+_i[n[e+10]]+_i[n[e+11]]+_i[n[e+12]]+_i[n[e+13]]+_i[n[e+14]]+_i[n[e+15]]}const xV=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Y5={randomUUID:xV};function Lo(n,e,t){if(Y5.randomUUID&&!e&&!n)return Y5.randomUUID();n=n||{};const i=n.random||(n.rng||yV)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,e){t=t||0;for(let r=0;r<16;++r)e[t+r]=i[r];return e}return _V(i)}const AV=[{id:Lo(),title:"Welcome to our store!",text:"We specialize in buying, selling, and trading-in a wide range of new and pre-owned Apple products. Whether you're looking to upgrade your current device or want to sell your gently used Apple gadget, we've got you covered."},{id:Lo(),title:"Experts",text:"Our team of expert appraisers offers competitive and fair prices for your pre-owned devices, ensuring you get the best value for your trade-in. We accept various models of iPhones, iPads, Mac computers, and Apple Watches, ensuring that we cater to a diverse range of Apple users."},{id:Lo(),title:"Pay the way you feel comfortable",text:"You can choose from various payment methods, including cash or store credit for your next purchase. We're committed to making the process as convenient and hassle-free as possible for our customers."},{id:Lo(),title:"A wide range of products",text:"In addition to buying and trading-in Apple devices, we also sell a variety of new and pre-owned Apple products at competitive prices. Our inventory is regularly updated with the latest models and releases to ensure that our customer's always have access to the newest technology."},{id:Lo(),title:"The best customer orientation in the city",text:"Our commitment to customer satisfaction is at the heart of everything we do, and we're dedicated to providing a seamless experience from start to finish. Whether you're looking to sell, buy, or trade-in an Apple product, we invite you to visit our store and see for yourself what sets us apart from the competition."}];function SV(){return ce.jsxs("div",{className:`${Eh.about} container`,children:[ce.jsx(gV,{children:"About us"}),ce.jsx("div",{className:Eh.wrapper,children:AV.map(({id:n,title:e,text:t})=>ce.jsxs("div",{className:Eh.item,children:[ce.jsx("h3",{className:Eh.title,children:e}),ce.jsx("p",{className:Eh.text,children:t})]},n))})]})}const CV="_features_18nv2_1",EV="_wrapper_18nv2_18",MV="_feature_18nv2_1",wV="_title_18nv2_28",TV="_text_18nv2_34",bV="_button_18nv2_39",nc={features:CV,wrapper:EV,feature:MV,title:wV,text:TV,button:bV},RV=[{id:Lo(),title:"High quality",text:"We only guarantee new and genuine Apple iPhones with a manufacturer's warranty. All devices are checked for quality before personal transfer to the customer."},{id:Lo(),title:"Convenient and quick problem resolution",text:"Our technical support department specializes in Apple iPhones and is ready to help with any questions and problems related to these devices."},{id:Lo(),title:"Favorable prices",text:"We offer competitive prices for new and used Apple iPhones, as well as regular promotions and discounts for regular customers."},{id:Lo(),title:"Transparent exchange and refund policy",text:"We provide nationwide delivery, a simple exchange or refund process within 30 days, and full transparency during all transactions."}],PV="/Apple-shop/assets/phone-main-jrW7hbg6.png",BV=window.innerWidth;function IV(){return ce.jsxs("div",{className:nc.features,style:{backgroundImage:`${BV>405&&`url(${PV})`}`},children:[ce.jsx("h2",{children:"Why choose us?"}),ce.jsxs("div",{className:nc.wrapper,children:[RV.map(({id:n,title:e,text:t})=>ce.jsxs("div",{className:nc.feature,children:[ce.jsx("h3",{className:nc.title,children:e}),ce.jsx("p",{className:nc.text,children:t})]},n)),ce.jsx(Ud,{className:nc.button,to:"/catalog",children:"Go to the catalog"})]})]})}const LV="_div_10y00_1",DV="_word_10y00_13",FV="_shadow_10y00_24",mC={div:LV,word:DV,shadow:FV};function NV({value:n}){const e=G.useRef(null),{scrollYProgress:t}=pC({target:e,offset:["start end","start start"]}),i=n.split(" ");return ce.jsx(Ci.div,{className:mC.div,ref:e,children:i.map((r,s)=>{const o=s/i.length,a=o+1/i.length;return ce.jsx(OV,{range:[o,a],progress:t,children:r},s)})})}const OV=({children:n,range:e,progress:t})=>{const i=n.split(""),s=(e[1]-e[0])/n.length;return ce.jsx("span",{className:mC.word,children:i.map((o,a)=>{const l=e[0]+s*a,u=e[0]+s*(a+1);return ce.jsx(UV,{range:[l,u],progress:t,children:o},a)})})},UV=({children:n,range:e,progress:t})=>{const i=Gd(t,e,[0,1]);return ce.jsxs("span",{children:[ce.jsx("span",{className:mC.shadow,children:n}),ce.jsx(Ci.span,{style:{opacity:i},children:n})]})},kV=n=>G.createElement("svg",{width:1666,height:2049,viewBox:"0 0 1666 2049",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n},G.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M643.452 8.735C642.383 21.57 643.642 80.192 645.519 105C646.414 116.825 647.521 139.55 647.98 155.5L648.813 184.5L648.477 153.5C648.293 136.45 647.349 112.375 646.379 100C645.135 84.118 644.599 66.102 644.558 38.75C644.526 17.438 644.428 0 644.34 0C644.252 0 643.852 3.931 643.452 8.735ZM842.068 0.833C841.825 5.61 852.997 26.949 861.578 38.101C877.566 58.879 896.225 72.668 940 96.056C986.36 120.824 1004.85 136.47 1017.94 162C1025.7 177.145 1029.3 190.766 1033 218.961C1036.19 243.329 1040.05 257.113 1048.23 273.438C1059.62 296.156 1072.48 312.948 1109.54 353.529C1119.6 364.545 1131.53 378.028 1136.04 383.49C1164.54 417.975 1183.11 454.594 1190.55 491C1194.62 510.942 1195.34 524.041 1194.59 565C1193.36 633.381 1197.07 651.269 1225.02 711.5C1243.12 750.523 1247.07 763.407 1247.06 783.5C1247.05 808.102 1238.97 821.092 1209.3 844.227C1194.12 856.063 1183.71 866.065 1178.32 874C1173.72 880.78 1168.85 890.781 1166.89 897.5C1164.56 905.487 1164.57 901.714 1166.91 890.392C1170.49 873.04 1178.87 855.237 1196.99 826.5C1202.54 817.7 1209.62 805.444 1212.72 799.265C1217.95 788.849 1218.39 787.427 1218.77 779.765C1219.73 760.753 1213.33 734.25 1189.01 656.5C1166.16 583.439 1158.34 547.891 1154.5 499.5C1151.25 458.589 1150.49 457.097 1116.79 424.96C1069.2 379.577 1050.7 359.261 1033.49 333.5C1018.13 310.523 1008.78 289.724 1003.01 265.733C1000.2 254.033 999.134 247.155 995.475 217.089C993.638 202.006 990.721 190.95 984.897 177.008C962.955 124.481 917.51 86.675 864 76.434C851.339 74.011 826.274 73.978 813.035 76.366C757.172 86.446 702.704 117.472 670.749 157.417C655.876 176.009 647.967 188.606 609.703 254.646C574.131 316.04 563.936 332.484 549.654 351.5C532.354 374.535 507.169 400.462 482.5 420.631C456.624 441.787 445.944 454.348 435.926 475.407C428.973 490.021 426.882 498.719 426.27 515.56C425.354 540.788 429.392 557.627 445.84 597.164C458.608 627.856 463.662 653.709 461.201 675.744C460.54 681.66 458.691 691.675 457.091 698C452.979 714.251 451.617 724.836 452.339 734.91C454.067 759.012 463.604 777.768 488.163 805.36C507.88 827.512 519.03 844.381 528.301 866.087C537.472 887.559 540.896 902.409 541.656 924C542.477 947.315 538.901 965.266 529.805 983.5C524.197 994.74 520.9 998.807 498.589 1022C475.446 1046.06 469.297 1053.84 461.763 1068.59C450.112 1091.4 445.543 1109.4 445.667 1132C445.761 1149.17 446.986 1157.53 455.258 1197.5L461.467 1227.5L461.43 1248C461.402 1263.63 460.863 1272.28 459.163 1284.4C456.728 1301.75 451.655 1328 447.273 1345.91L444.481 1357.32L440.765 1351.3C430.216 1334.21 414.971 1329.03 395.321 1335.87C390.624 1337.51 383.501 1341.14 378.589 1344.41C368.766 1350.95 351.266 1367.41 342.5 1378.37C339.2 1382.49 336.231 1385.9 335.901 1385.94C335.572 1385.97 334.279 1382.06 333.028 1377.25C326.337 1351.52 316.194 1328.16 282.547 1261C246.676 1189.41 239.115 1172.22 232.915 1148.17C227.314 1126.45 228.048 1109.57 235.575 1087.07C249.476 1045.52 281.487 1009.75 323.717 988.565C344.484 978.148 358.712 973.454 401 963.069C434.136 954.93 444.761 951.602 458.5 945.057C475.083 937.156 486.947 926.75 490.034 917.398C493.603 906.583 483.901 878.774 468.466 855.578C460.878 844.174 459.619 843.59 466.623 854.722C480.097 876.14 486.252 896.048 484.709 913.225C484.04 920.667 481.224 925.102 473.598 930.723C460.261 940.553 443.814 946.753 408 955.451C364.3 966.064 345.673 972.046 327.637 981.262C316.098 987.158 299.199 998.253 288.824 1006.74C252.704 1036.31 227 1084.64 227 1123C227 1152.77 238.279 1182.92 284.977 1278C315.597 1340.34 323.021 1357.57 329.442 1381.18L332.075 1390.86L322.711 1403.68C295.308 1441.2 277.708 1470.98 244.827 1535.45C218.234 1587.59 204.131 1610.37 181.55 1637.68C152.03 1673.38 104.818 1712.06 47.5 1747.5C29.755 1758.47 1.695 1775 0.813 1775C0.366 1775 0 1775.47 0 1776.04C0 1777.26 1.467 1776.43 34.405 1756.72C121.976 1704.31 171.394 1661.33 209.425 1604.5C222.133 1585.51 230.649 1570.37 250.48 1531.5C268.368 1496.44 280.003 1474.8 290.715 1456.65C298.704 1443.12 317.483 1414.62 326.042 1403.03C331.33 1395.88 332.408 1394.87 333.019 1396.53C336.842 1406.93 337.716 1441.34 334.593 1458.5C328.256 1493.32 310.255 1532.87 280.667 1577C276.795 1582.78 265.763 1598.53 256.152 1612C212.167 1673.67 188.664 1711.12 167.038 1754C134.105 1819.3 123.124 1866.32 130.606 1910C133.47 1926.72 139.198 1944.51 152.011 1976.5C162.536 2002.77 168.595 2019.54 172.909 2034.32C177.269 2049.26 180.274 2053.18 176.354 2038.82C171.963 2022.73 165.588 2004.37 155.233 1978C139.526 1937.99 135.205 1923.8 132.458 1903.16C126.455 1858.06 141.945 1803.62 181.014 1732.5C199.592 1698.68 219.788 1667.62 253.351 1621.24C265.792 1604.06 279.952 1584.03 284.817 1576.74C317.536 1527.76 334.721 1486.19 339.082 1445.5C340.45 1432.73 339.703 1409.48 337.541 1397.56L336.101 1389.62L343.296 1381.06C358.014 1363.55 374.069 1349.28 387 1342.22C400.525 1334.84 413.993 1333.44 424.19 1338.35C430.42 1341.35 438.562 1349.45 441.436 1355.51C443.668 1360.21 443.452 1361.3 435.329 1386.31C424.163 1420.69 414.616 1445.6 388.494 1508.5C371.609 1549.16 353.107 1595.4 345.478 1616C337.828 1636.66 324.93 1670.91 315.546 1695.5C297.441 1742.94 286.949 1783.46 283.959 1817.5C281.895 1841 285.275 1864.09 293.865 1885.18C302.345 1906 314.089 1923.91 341.933 1958.5C362.832 1984.46 374.737 2000.35 381.969 2011.92C387.297 2020.45 395.122 2035.82 398.263 2043.93C399.206 2046.36 400.241 2048.09 400.561 2047.77C401.418 2046.91 395.556 2032.77 390.297 2023C382.078 2007.74 369.524 1989.99 346.507 1961.09C305.621 1909.75 293.38 1887.82 287.947 1856.15C280.828 1814.65 292.062 1761.77 326.893 1672.82C332.346 1658.89 339.817 1639.4 343.495 1629.5C350.495 1610.66 376.384 1546.12 392.031 1508.5C419.335 1442.86 431.671 1409.43 443.884 1368C459.117 1316.32 467.343 1260.63 464.12 1231C463.492 1225.22 460.746 1209.47 458.018 1196C448.363 1148.31 446.64 1132.07 449.357 1114.37C452.335 1094.96 461.523 1071.93 472.329 1056.79C477.685 1049.29 489.271 1037.29 506.752 1021.16C520.882 1008.12 526.085 1001.3 532.923 986.862C541.527 968.694 545 951.901 545 928.468C545 904.335 541.416 887.114 531.437 863.294C522.261 841.393 510.668 824.092 492.169 804.693C467.656 778.988 460.31 766.007 456.999 742.548C455.389 731.134 456.14 721.627 460.204 702C463.178 687.638 463.417 685.032 463.457 666.5C463.494 649.363 463.176 644.997 461.234 636C457.521 618.8 449.535 592.248 443.144 575.86C433.154 550.239 429.231 530.813 430.345 512.468C431.79 488.676 441.602 465.333 458.076 446.5C467.898 435.271 474.561 429.767 510 403.613C522.256 394.567 537.234 380.086 547.181 367.662C564.662 345.83 581.136 318.087 624.475 237.5C645.044 199.254 655.611 181.743 668.528 164.5C677.048 153.126 692.979 136.896 703.567 128.803C727.764 110.306 757.173 95.691 786.5 87.586C804.899 82.501 813.043 81.5 836 81.5C854.819 81.5 858.786 81.788 867.816 83.81C888.736 88.496 907.665 96.513 924.68 107.893C941.45 119.111 960.807 139.414 971.334 156.828C984.845 179.177 988.787 195.26 994.662 252C995.876 263.723 990.932 294.709 984.85 313.5C983.07 319 978.616 329.35 974.951 336.5C971.287 343.65 964.713 356.475 960.343 365C951.432 382.383 949 390.479 949 402.767C949 412.037 950.747 417.839 955.216 423.41L958.352 427.32L955.426 426.71C953.817 426.374 947.1 424.97 940.5 423.589C925.786 420.51 900.102 415.97 898.025 416.082C897.186 416.127 903.25 417.66 911.5 419.488C939.72 425.741 963.498 432.13 971 435.474C985.653 442.006 1005.77 447.057 1058 457.32C1086.62 462.943 1093.65 465.011 1101.23 470.029C1110.2 475.968 1112.87 482.436 1117 508.133C1126.07 564.588 1130.33 578.696 1155 634C1176.77 682.805 1181.45 697.552 1181.33 717C1181.2 738.566 1172.44 763.014 1157.16 784.442C1153.9 789.013 1141.91 801.96 1128.91 814.942C1105.23 838.589 1096.24 849.467 1090.56 861.352C1085.27 872.42 1083.7 879.869 1084.29 891C1085.23 908.402 1091.44 921.629 1115.98 958.5C1147.89 1006.44 1158.15 1037.97 1152.45 1070.61C1148.03 1095.96 1135.35 1120.15 1106.1 1159C1099.68 1167.53 1084.09 1188.22 1071.45 1205C1058.82 1221.78 1041.77 1245.18 1033.57 1257C1025.37 1268.82 1013.68 1285.7 1007.58 1294.49C994.107 1313.93 969.888 1346.24 955.303 1364.22C949.382 1371.53 930.352 1394.82 913.014 1416C864.948 1474.71 850.864 1493.05 832.275 1521.14C788.515 1587.26 776.122 1643.15 791.614 1704.49C793.005 1709.99 797.953 1725.75 802.609 1739.5C817.342 1783.01 819.51 1794.6 819.444 1829.5C819.394 1856.04 819.072 1860.12 811.974 1924C806.06 1977.22 804.191 1999.55 803.329 2027.23C802.692 2047.67 802.714 2048 804.72 2048C806.675 2048 806.761 2047.39 806.861 2032.87C807.033 2007.91 809.752 1974.27 815.498 1926C825.436 1842.5 825.734 1810.55 816.898 1775.66C815.807 1771.35 811.119 1756.18 806.482 1741.94C791.791 1696.85 789.641 1685.99 789.559 1656.5C789.496 1634.07 790.167 1628.25 794.988 1609.44C802.142 1581.53 814.775 1555.23 837.465 1521C854.105 1495.9 872.524 1472.16 919.672 1415.06C944.489 1385.01 945.977 1383.72 969.5 1371.99C994.279 1359.63 1016.62 1354 1040.85 1354C1055.21 1354.01 1065.62 1355.48 1086.17 1360.43C1127.88 1370.48 1132.35 1371.44 1153.5 1374.93C1184.94 1380.12 1218.89 1381.57 1237.5 1378.52C1258.28 1375.11 1274.06 1368.54 1287.5 1357.68C1297.96 1349.23 1303.82 1341.15 1314.4 1320.63C1328.09 1294.05 1335.42 1284.21 1347.58 1276.07C1355.15 1271.01 1362.98 1268 1373.69 1266.04C1382.33 1264.45 1401.3 1261.96 1401.69 1262.36C1401.88 1262.55 1395.98 1263.92 1388.58 1265.39C1364.89 1270.12 1354.45 1274.64 1344.5 1284.5C1337 1291.93 1332.62 1300.12 1329.44 1312.66C1326.97 1322.36 1326.12 1331.2 1324.01 1369C1322.92 1388.33 1320.61 1402.27 1317.17 1410.17C1313.01 1419.74 1304.87 1426.12 1293 1429.11C1284.34 1431.3 1259.48 1430.58 1223.5 1427.12C1181.38 1423.06 1165.73 1422.02 1146.8 1422.01C1116.22 1421.99 1091.45 1425.44 1070.94 1432.56C1022.26 1449.48 960.157 1501.53 929.482 1551.12C899.565 1599.48 890.194 1651.86 901.526 1707.36C906.641 1732.42 912.714 1748.25 933.029 1789.5C963.094 1850.54 968.265 1869.99 971.987 1936C974.117 1973.78 976.966 1999.22 981.45 2020.5C985.306 2038.8 988.057 2048 989.677 2048C990.602 2048 990.94 2047.36 990.6 2046.25C983.387 2022.63 979.265 1993.59 976.517 1947C973.795 1900.86 972.221 1886.7 967.429 1865.21C962.131 1841.47 955.122 1823.69 934.22 1781C927.084 1766.43 919.189 1749.32 916.676 1743C899.113 1698.8 895.343 1652.67 905.915 1611.32C913.072 1583.33 927.819 1555.04 948.834 1529C973.554 1498.36 1019.95 1459.59 1051.21 1443.45C1073.12 1432.13 1095.28 1427.13 1131 1425.45C1148.69 1424.61 1173.24 1425.97 1223 1430.55C1243.62 1432.44 1265.81 1433.99 1272.29 1433.99C1297.75 1434.01 1311.53 1427.92 1318.48 1413.59C1323.68 1402.86 1325.61 1390.72 1327.01 1359.7C1328.27 1331.87 1329.52 1320.86 1332.66 1310.05C1335.9 1298.88 1339.7 1292.42 1347.06 1285.61C1355.46 1277.82 1364.92 1273.57 1384.33 1268.85C1406.42 1263.48 1411.17 1262.11 1420.94 1258.32C1425.58 1256.52 1429.51 1255.18 1429.68 1255.35C1429.85 1255.51 1421.55 1261.32 1411.24 1268.25C1389.77 1282.69 1384.01 1287.5 1375.79 1297.85C1366.64 1309.35 1361.33 1321.25 1358.94 1335.58C1358.24 1339.77 1357.69 1357.48 1357.56 1380.5C1357.36 1415.23 1357.16 1419.24 1355.25 1427.11C1347.98 1456.94 1330.31 1473.83 1299.07 1480.81C1287.62 1483.37 1253.41 1483.09 1227.5 1480.23C1185.47 1475.59 1164.8 1475.21 1138 1478.61C1061.07 1488.38 990.083 1537.26 957.419 1602.96C934.727 1648.6 935.948 1691.07 961.056 1729.5C974.871 1750.64 997.944 1773.11 1036 1802.48C1073.96 1831.77 1094.39 1853.17 1141.51 1913.02C1175.69 1956.42 1209.03 2002.57 1228.56 2033.5C1233.42 2041.2 1237.53 2047.69 1237.7 2047.92C1237.86 2048.15 1238.28 2048.05 1238.63 2047.71C1238.97 2047.36 1235.07 2040.43 1229.96 2032.29C1189.09 1967.22 1125.11 1883.68 1083.54 1841.09L1068.5 1825.69L1076.5 1831.59C1109.94 1856.27 1133.92 1867.17 1184 1880.5C1225.65 1891.58 1250.18 1901.96 1278.5 1920.48C1323.37 1949.82 1354.35 1985.64 1380.99 2039C1385.71 2048.47 1385.77 2048.56 1386.56 2047.77C1387.34 2046.99 1371.99 2016.59 1364.72 2004.5C1335 1955.13 1292.97 1917.7 1242 1895.21C1226.35 1888.3 1210.34 1882.93 1186 1876.43C1165.45 1870.93 1152.6 1867.05 1153.19 1866.5C1153.36 1866.34 1156.43 1866.82 1160 1867.57C1163.57 1868.32 1179.1 1870.53 1194.5 1872.49C1265.79 1881.57 1293.26 1886.23 1330.5 1895.57C1420.42 1918.11 1508.03 1955.45 1599 2009.98C1614.64 2019.36 1651.31 2043.33 1655.15 2046.69C1656.19 2047.6 1658.39 2048.01 1661.15 2047.81L1665.5 2047.5L1649.5 2036.36C1554.01 1969.9 1434.17 1914.39 1328.5 1887.68C1287.58 1877.33 1259.73 1872.72 1206.5 1867.48C1142.11 1861.15 1129.81 1857.27 1089.5 1830.53C1038.07 1796.43 1004.6 1758.2 991.519 1718.64C983.238 1693.6 983.096 1671.43 991.063 1647.65C998.001 1626.94 1008.41 1610.33 1024.39 1594.48C1044.71 1574.33 1068.92 1561.35 1101.5 1553.13C1131.41 1545.58 1159.58 1542.45 1233 1538.51C1308.9 1534.43 1338.59 1530.54 1362.49 1521.54C1381.95 1514.21 1395.83 1500.76 1403.26 1482C1411.64 1460.85 1412.89 1437.57 1407.91 1395.5C1404.98 1370.82 1404.74 1345.19 1407.33 1333C1411.78 1312.04 1416.87 1300.87 1434.47 1273.5C1441.19 1263.05 1448.5 1251.35 1450.72 1247.5C1478.33 1199.62 1486.4 1145.06 1473.89 1091C1470.99 1078.51 1468.52 1070.54 1461.32 1050.53C1450.42 1020.24 1447.32 1003.01 1448.28 978.115C1448.6 970.077 1449.59 959.675 1450.51 955C1452.78 943.337 1458.48 926.032 1463.05 916.916C1465.14 912.744 1468.42 904.869 1470.34 899.416C1472.25 893.962 1476.08 884.775 1478.84 879C1487.85 860.159 1491.4 846.048 1491.29 829.5C1491.16 809.84 1485.01 793.906 1467.59 768.099C1449.14 740.757 1446.39 731.391 1455.22 726.004C1457.56 724.578 1460.27 724.006 1464.69 724.004C1468.1 724.002 1471.15 723.571 1471.47 723.048C1471.79 722.524 1470.56 720.127 1468.72 717.721C1464.56 712.27 1457.02 697.756 1453.54 688.508C1450.93 681.576 1450.92 681.454 1452.47 674.508C1455.31 661.774 1463.36 651.232 1475.32 644.586C1478.72 642.696 1488.87 638.619 1497.87 635.527C1522.01 627.237 1531.22 622.12 1543.34 610.271C1557.24 596.677 1570.63 575.405 1585.49 543.285C1622.59 463.115 1648.15 363.453 1656.67 265.674C1658.78 241.54 1659.05 180.437 1657.15 158.5C1652.72 107.302 1643.46 61.025 1628.38 14.781C1624.3 2.267 1622.71 -1.043 1621.4 0.268C1621.14 0.526 1622.93 6.984 1625.38 14.619C1662.47 130.402 1665.5 247.967 1634.88 383.401C1611.87 485.188 1568.41 585.221 1536.19 610.534C1527.73 617.183 1519.47 621.111 1499.5 627.984C1489.6 631.391 1479.27 635.376 1476.54 636.839C1464.68 643.203 1454.05 656.846 1450.67 670.035C1449.93 672.943 1449.06 674.912 1448.76 674.411C1448.45 673.91 1447.05 667.875 1445.65 661C1438.03 623.545 1439.47 595.313 1451.13 553.516C1461.72 515.545 1464.23 502.96 1465.98 479C1467.96 451.887 1463.95 419.919 1455.94 399C1452.58 390.226 1446.17 378.035 1441.22 371C1428.31 352.62 1404.37 334.957 1381 326.555C1369.87 322.554 1363.03 321.194 1343.01 319.001C1333.05 317.91 1320.31 316.088 1314.7 314.952C1287.49 309.443 1259.63 296.359 1236.6 278.267C1225.85 269.827 1207.42 250.766 1198.63 239C1189.91 227.34 1187.04 224.019 1191.87 231.212C1205.51 251.482 1229.35 275.425 1249.24 288.812C1277.67 307.954 1303.93 317.113 1343 321.517C1366.86 324.207 1376.6 326.802 1392 334.573C1433.37 355.456 1454.32 388.328 1459.96 441.211C1463.12 470.774 1460.19 498.852 1449.46 542.018C1438.22 587.201 1436.48 599.477 1437.28 627.484C1437.86 647.734 1439.8 661.126 1444.53 677.566C1447.6 688.284 1457.23 708.609 1462.43 715.376L1466.18 720.252L1459.34 719.539C1431.58 716.646 1389.12 700.884 1346 677.461C1326.3 666.754 1321.73 664.804 1317.31 665.2C1313 665.586 1312.6 667.233 1316.6 668.053C1318.31 668.402 1330.23 673.9 1343.1 680.272C1376.82 696.968 1403.65 707.857 1430 715.549C1443.72 719.553 1442.19 719.9 1425.63 716.542C1408.33 713.037 1397.86 709.816 1378.46 702.037C1359.01 694.236 1352.06 692 1347.25 692C1343.53 692 1340.16 693.47 1338.28 695.913C1336.8 697.843 1336.64 705.265 1337.98 709.94C1338.52 711.825 1338.8 713.537 1338.59 713.744C1338.38 713.951 1334.98 709.031 1331.02 702.81C1308.28 667.057 1296.63 626.317 1298.32 588.5C1299.38 564.861 1304.53 544.834 1314.94 523.872C1322.21 509.239 1328.45 499.662 1344.76 478.132C1358.69 459.739 1363.08 452.037 1365.7 441.451C1367.12 435.69 1367.18 433.693 1366.15 427.671C1362.01 403.546 1342.13 385.098 1283.5 350.992C1231.51 320.749 1199.74 296.843 1163.96 261.048C1134.32 231.39 1112.87 205.039 1089.45 169.5C1054.9 117.061 1034.62 70.884 1021.65 15.048C1019.7 6.67 1017.74 0.414 1016.99 0.163C1015.02 -0.494 1016.3 7.664 1021.44 28.5C1033.59 77.764 1053.78 122.323 1086.48 172C1111.13 209.461 1132.05 235.193 1162.93 266.062C1198.95 302.062 1227.24 323.627 1285.68 359.629C1335.58 390.366 1354.65 408.594 1357.85 428.59C1359.99 442.004 1355.56 452.451 1336.44 479C1310.81 514.592 1300.8 534.566 1294.92 561.841C1292.24 574.308 1291.17 604.903 1292.95 618.318C1298.35 658.871 1315.69 697.085 1344.93 732.83C1354.56 744.598 1372.9 763.376 1408.12 797.514C1419.45 808.506 1430.87 820.425 1433.47 824C1452.07 849.486 1454.44 877.127 1440.39 904.659C1435.07 915.08 1430.22 921.965 1414.12 941.906C1386.59 976.002 1377.22 993.941 1375.37 1016.08C1373.8 1034.92 1380.92 1056.65 1394.5 1074.43C1396.42 1076.95 1398 1079.19 1398 1079.4C1398 1079.61 1396.34 1080.09 1394.32 1080.47C1387.05 1081.83 1372.31 1087.33 1362 1092.53C1347.46 1099.85 1337.25 1106.47 1316.42 1122.07C1283.31 1146.85 1269.43 1155.03 1236 1169.47C1215.23 1178.44 1206.7 1183.44 1197.77 1191.84C1187.25 1201.75 1184.54 1209.84 1189.05 1217.88C1193.55 1225.88 1200.16 1228.25 1224.22 1230.51C1251.76 1233.1 1268.41 1236.98 1307.5 1249.91C1323.64 1255.25 1324.42 1255.78 1333.09 1267.4C1337.63 1273.48 1336.57 1281.49 1330.05 1290.5C1324.07 1298.75 1320.61 1304.71 1312.03 1321.5C1300.44 1344.17 1293.62 1352.62 1279.29 1362.04C1253.37 1379.08 1219.66 1382.92 1165.5 1375C1148 1372.44 1124.8 1367.7 1106 1362.85C1097.47 1360.64 1085.48 1357.55 1079.34 1355.97C1062.91 1351.74 1052.68 1350.65 1036 1351.33C1019.95 1351.98 1010.37 1353.82 993.109 1359.55C981.01 1363.57 958.79 1373.98 951.266 1379.16L946.523 1382.42L949.012 1379.34C981.229 1339.38 997.921 1317.19 1015.81 1290.55C1020.59 1283.42 1027.02 1274.88 1030.1 1271.55C1033.19 1268.22 1040.47 1259.16 1046.29 1251.41C1065.66 1225.6 1076.69 1214.88 1114.99 1184.63C1160.86 1148.41 1177.04 1129.79 1186.79 1101.98C1195.1 1078.3 1193.46 1050.77 1182.04 1022.11C1174.71 1003.71 1169.85 994.86 1148.47 961C1125.5 924.62 1120.51 912.982 1120.58 896C1120.67 875.521 1127.48 861.035 1155.31 822.174C1168.02 804.428 1172.55 796.874 1177.48 785.187C1185.94 765.124 1187.97 742.882 1184.07 713C1180.61 686.559 1179.03 681.471 1157.73 628C1133.18 566.421 1127.91 549.666 1121.02 511.372C1116.16 484.379 1113.38 477.148 1105.1 469.859C1097.83 463.46 1089.26 460.078 1066 454.44C1054.18 451.574 1035.05 446.943 1023.5 444.148C971.69 431.615 961.699 427.232 955.318 414.239C952.855 409.223 952.514 407.43 952.612 400C952.763 388.604 955.858 379.49 966.03 360.5C984.531 325.959 991.127 307.386 993.906 282C994.478 276.775 995.244 269.8 995.609 266.5L996.273 260.5L997.654 266.5C1001.92 285.037 1011.8 308.678 1022.46 325.87C1038.99 352.522 1055.82 372.067 1100.93 417C1140.15 456.062 1141.98 458.306 1145.51 471.581C1146.38 474.837 1148.2 488.3 1149.55 501.5C1155.58 560.172 1160.36 581.935 1187.15 672.5C1208.08 743.263 1213.79 769.415 1211.09 782.03C1209.6 788.956 1203.45 801.881 1192.22 821.69C1167.99 864.404 1159.71 886.998 1159.67 910.5C1159.63 929.53 1163.69 943.223 1177.34 970.055C1181.38 978 1190.32 995.525 1197.19 1009C1213.79 1041.52 1219.66 1059.67 1223.05 1088.97C1226.32 1117.18 1218.78 1138.75 1198.85 1158.23C1187.34 1169.48 1172.96 1178.49 1142.5 1193.53C1127.65 1200.87 1110.77 1209.99 1105 1213.81C1092.27 1222.22 1081.94 1232.74 1076.84 1242.5C1072.02 1251.72 1065.5 1271.67 1062.62 1286C1061.35 1292.32 1059.36 1299.36 1058.2 1301.63C1050.75 1316.16 1023.3 1332.22 989.154 1342.03C977.575 1345.36 981.393 1345.29 993.867 1341.95C1026.24 1333.27 1053.45 1316.89 1061.35 1301.3C1062.75 1298.54 1065.04 1291.82 1066.44 1286.39C1069.6 1274.06 1079.02 1249.3 1083.29 1242.05C1091.36 1228.37 1106.04 1217.6 1142 1199C1154.93 1192.31 1170.12 1184.09 1175.77 1180.73C1206.3 1162.58 1222.75 1140.54 1227.14 1111.91C1229.73 1094.99 1223.22 1058.47 1212.38 1029.11C1208.58 1018.82 1196.06 992.767 1185.9 974L1179.67 962.5L1186.12 968.621C1201.27 983.023 1219.3 990.465 1242 991.691C1261.67 992.754 1279.17 986.606 1294.89 973.111C1313.5 957.136 1321.7 952.37 1342.5 945.438C1360.74 939.36 1369.1 934.985 1376.2 927.808C1386.02 917.892 1386.34 910.318 1377.14 905.788C1372.75 903.622 1371.41 903.503 1352 903.566C1321.46 903.663 1302.74 907.087 1285.59 915.71C1271.13 922.985 1261.57 936.047 1261.69 948.388C1261.77 956.713 1264.38 961.65 1273.74 971.162L1281.28 978.825L1276.39 981.283C1268.66 985.17 1259.51 987 1247.81 987C1211.38 987 1180.01 964.047 1171.3 931C1169.21 923.096 1168.99 906.792 1170.87 899C1172.99 890.186 1180.29 876.129 1186.69 868.516C1190.02 864.567 1199.51 855.961 1208.53 848.711C1228.27 832.863 1232.83 828.448 1239.04 819.215C1246.51 808.105 1249.25 798.462 1249.21 783.5C1249.16 763.201 1244.76 748.331 1226.72 707.5C1210.32 670.38 1205.37 656.429 1201 634.998C1197.31 616.907 1196.69 606.25 1197.32 571.91C1198.39 514.164 1194.73 485.946 1182.03 454.082C1167.32 417.145 1148.83 390.394 1109.4 348.954C1069.92 307.471 1050.89 280.291 1042.23 253C1038.49 241.253 1037.44 235.992 1035.49 219.5C1030.85 180.208 1024.04 161.232 1007.16 140.579C994.379 124.93 976.303 112.29 939.5 93.263C901.738 73.741 889.553 65.679 873.445 49.561C862.956 39.065 852.796 24.342 847.523 12C842.124 -0.638 842.141 -0.605 842.068 0.833ZM1141.39 12C1141.39 18.875 1141.55 21.688 1141.74 18.25C1141.94 14.813 1141.94 9.188 1141.74 5.75C1141.55 2.313 1141.39 5.125 1141.39 12ZM1142.38 45.5C1142.38 52.1 1142.55 54.67 1142.74 51.211C1142.94 47.752 1142.94 42.352 1142.74 39.211C1142.54 36.07 1142.38 38.9 1142.38 45.5ZM1143.33 66.5C1143.33 70.35 1143.51 71.802 1143.73 69.728C1143.95 67.653 1143.94 64.503 1143.72 62.728C1143.5 60.952 1143.32 62.65 1143.33 66.5ZM1144.3 80C1144.3 83.025 1144.49 84.263 1144.72 82.75C1144.94 81.237 1144.94 78.763 1144.72 77.25C1144.49 75.737 1144.3 76.975 1144.3 80ZM1145.27 90C1145.27 92.475 1145.47 93.487 1145.71 92.25C1145.94 91.013 1145.94 88.987 1145.71 87.75C1145.47 86.513 1145.27 87.525 1145.27 90ZM1146.23 99C1146.23 100.925 1146.44 101.713 1146.69 100.75C1146.94 99.787 1146.94 98.213 1146.69 97.25C1146.44 96.287 1146.23 97.075 1146.23 99ZM1147.23 107C1147.23 108.925 1147.44 109.713 1147.69 108.75C1147.94 107.787 1147.94 106.213 1147.69 105.25C1147.44 104.287 1147.23 105.075 1147.23 107ZM1148.19 113.5C1148.21 115.15 1148.44 115.704 1148.69 114.731C1148.95 113.758 1148.93 112.408 1148.66 111.731C1148.38 111.054 1148.17 111.85 1148.19 113.5ZM1149.19 119.5C1149.21 121.15 1149.44 121.704 1149.69 120.731C1149.95 119.758 1149.93 118.408 1149.66 117.731C1149.38 117.054 1149.17 117.85 1149.19 119.5ZM1150.24 125C1150.24 126.375 1150.58 128.85 1151 130.5C1151.68 133.176 1151.76 133.23 1151.76 131C1151.76 129.625 1151.42 127.15 1151 125.5C1150.32 122.824 1150.24 122.77 1150.24 125ZM1152.16 136C1152.16 137.375 1152.39 137.938 1152.66 137.25C1152.94 136.563 1152.94 135.438 1152.66 134.75C1152.39 134.063 1152.16 134.625 1152.16 136ZM1153.08 140.583C1153.13 141.748 1153.36 141.985 1153.68 141.188C1153.97 140.466 1153.94 139.603 1153.6 139.271C1153.27 138.939 1153.04 139.529 1153.08 140.583ZM1154.08 144.583C1154.13 145.748 1154.36 145.985 1154.68 145.188C1154.97 144.466 1154.94 143.603 1154.6 143.271C1154.27 142.939 1154.04 143.529 1154.08 144.583ZM1155.08 148.583C1155.13 149.748 1155.36 149.985 1155.68 149.188C1155.97 148.466 1155.94 147.603 1155.6 147.271C1155.27 146.939 1155.04 147.529 1155.08 148.583ZM1156.08 152.583C1156.13 153.748 1156.36 153.985 1156.68 153.188C1156.97 152.466 1156.94 151.603 1156.6 151.271C1156.27 150.939 1156.04 151.529 1156.08 152.583ZM1157.08 156.583C1157.13 157.748 1157.36 157.985 1157.68 157.188C1157.97 156.466 1157.94 155.603 1157.6 155.271C1157.27 154.939 1157.04 155.529 1157.08 156.583ZM1159.07 162.556C1158.97 164.054 1163.14 176.191 1163.6 175.73C1163.81 175.52 1162.9 172.232 1161.57 168.424C1160.24 164.616 1159.11 161.975 1159.07 162.556ZM855 181.048C795.308 186.736 738.104 219.272 694.781 272.174C675.715 295.456 652.148 331.542 626.974 376C581.554 456.212 573.086 468.573 533.235 512.829C516.106 531.852 506.857 545.95 498.982 565.04C480.737 609.271 482.091 668.464 502.922 737.299C511.573 765.886 517.05 779.749 544.486 842.5C551.31 858.109 557.246 876.485 560.664 892.59C563.164 904.366 563.409 907.433 563.452 927.5C563.495 947.047 563.238 950.669 561.153 959.987C555.161 986.762 547.555 999.781 522.168 1026.72C506.189 1043.68 501.325 1050.43 493.076 1067.08C476.972 1099.59 470.747 1131.06 473.937 1163.87C474.598 1170.67 477.345 1187.02 480.041 1200.2C488.358 1240.86 490.149 1259.17 488.095 1282.5C484.682 1321.26 476.073 1355.71 438.496 1481C402.895 1599.7 393.399 1636.99 383.027 1698.84C380.805 1712.09 376.529 1735.88 373.525 1751.71C362.82 1808.13 362.589 1809.88 362.572 1835C362.559 1854.73 362.838 1858.8 364.839 1868C368.146 1883.22 372.307 1894.9 379.087 1907.98C390.889 1930.74 403.835 1946.55 444.904 1988.34C473.89 2017.84 489.061 2034.96 494.213 2043.98C495.471 2046.18 496.843 2047.99 497.263 2047.99C499.227 2048.01 486.051 2029.88 474.521 2016.69C470.39 2011.96 454.745 1995.59 439.754 1980.3C401.7 1941.49 388.878 1925.43 378.377 1903.42C372.978 1892.11 369.435 1881.36 366.276 1866.73C364.863 1860.18 364.507 1853.9 364.534 1836C364.572 1810.75 365.093 1806.81 375.476 1753.5C378.475 1738.1 382.773 1715.38 385.028 1703C396.814 1638.31 407.571 1596.8 443.337 1478C482.236 1348.8 490.677 1313.46 492.647 1271.58C492.989 1264.32 492.755 1252.49 492.122 1245C490.965 1231.3 489.901 1224.48 483.629 1190.5C475.864 1148.44 476.726 1123.79 487.05 1092.69C495.224 1068.07 504.663 1052.36 524.229 1030.81C539.116 1014.42 543.433 1008.93 549.974 998.043C564.684 973.568 570.72 940.354 566.558 906.797C563.248 880.118 554.962 855.184 532.653 804.768C527.46 793.033 521.193 778.498 518.727 772.466C498.734 723.585 490.004 683.418 490.001 640.301C489.998 598.431 497.794 569.211 516.76 540C523.541 529.556 526.019 526.476 542.88 507.532C576.862 469.352 591.074 448.351 630.54 378C660.836 323.994 675.911 300.182 694.481 277C746.861 211.609 824.951 174.445 891 183.474C924.453 188.048 942.097 200.367 948.478 223.608C949.217 226.299 949.857 227.6 949.9 226.5C949.943 225.4 949.35 222.43 948.582 219.901C940.913 194.633 918.337 182.254 876.965 180.632C870.109 180.363 860.225 180.55 855 181.048ZM1165.03 180.5C1165.03 181.05 1165.47 182.175 1166 183C1166.53 183.825 1166.97 184.05 1166.97 183.5C1166.97 182.95 1166.53 181.825 1166 181C1165.47 180.175 1165.03 179.95 1165.03 180.5ZM1167.03 185.5C1167.03 186.05 1167.47 187.175 1168 188C1168.53 188.825 1168.97 189.05 1168.97 188.5C1168.97 187.95 1168.53 186.825 1168 186C1167.47 185.175 1167.03 184.95 1167.03 185.5ZM647.079 187.583C647.127 188.748 647.364 188.985 647.683 188.188C647.972 187.466 647.936 186.603 647.604 186.271C647.272 185.939 647.036 186.529 647.079 187.583ZM1169.09 190.5C1169.09 191.05 1170.18 193.525 1171.5 196C1172.82 198.475 1173.91 200.05 1173.91 199.5C1173.91 198.95 1172.82 196.475 1171.5 194C1170.18 191.525 1169.09 189.95 1169.09 190.5ZM1177.5 208C1178.89 210.75 1180.26 213 1180.53 213C1180.81 213 1179.89 210.75 1178.5 208C1177.11 205.25 1175.74 203 1175.47 203C1175.19 203 1176.11 205.25 1177.5 208ZM1182 216C1182.59 217.1 1183.29 218 1183.57 218C1183.84 218 1183.59 217.1 1183 216C1182.41 214.9 1181.71 214 1181.43 214C1181.16 214 1181.41 214.9 1182 216ZM1185 221C1185.59 222.1 1186.29 223 1186.57 223C1186.84 223 1186.59 222.1 1186 221C1185.41 219.9 1184.71 219 1184.43 219C1184.16 219 1184.41 219.9 1185 221ZM950.195 231.5C950.215 233.15 950.439 233.704 950.693 232.731C950.947 231.758 950.93 230.408 950.656 229.731C950.382 229.054 950.175 229.85 950.195 231.5ZM892.269 415.693C893.242 415.947 894.592 415.93 895.269 415.656C895.946 415.382 895.15 415.175 893.5 415.195C891.85 415.215 891.296 415.439 892.269 415.693ZM865.352 419.959C818.116 425.369 779.172 448.671 707.5 514.407C635.988 579.995 597.203 621.824 570.283 662.393C561.579 675.51 554.829 688.365 552.373 696.5C548.9 708.003 550.468 738.615 556.574 778.5C562.339 816.158 566.028 823.817 596.545 861.5C621.366 892.15 629.135 909.826 629.288 936C629.461 965.49 618.592 987.352 584.546 1026C556.378 1057.97 547.762 1071.83 541.487 1095.22C535.864 1116.19 536.174 1139.38 542.604 1179C547.248 1207.61 556.43 1257.79 558.565 1266.24C563.993 1287.7 571.891 1303.59 580.478 1310.32C588.323 1316.48 592.188 1317.5 607.5 1317.48C618.939 1317.47 623.048 1317.05 629.96 1315.17C648.654 1310.1 665.814 1301.78 704.5 1279.04C726.44 1266.15 759.934 1249.3 778 1242.07C791.158 1236.8 823.999 1225.88 862.5 1213.97C888.97 1205.78 900.189 1200.71 917.954 1188.93C962.224 1159.57 982.491 1115.1 974.057 1065.85C968.791 1035.1 953.23 1006.27 928.501 981.459C906.035 958.918 884.936 944.931 829 915.499C780.284 889.865 756.459 874.094 734.626 853.027C702.426 821.957 687.509 786.867 690.97 750.336C694.872 709.154 703.668 685.933 721.867 668.764C725.655 665.191 731.397 660.97 734.627 659.384C743.288 655.131 754.358 655.303 774.482 660.002L789.463 663.5L783.982 664.32C769.4 666.503 763.183 668.192 755.11 672.167C748.092 675.622 744.836 678.078 737.5 685.453C727.229 695.777 722.686 703.397 718.393 717.5C715.937 725.568 715.657 728.002 715.683 741C715.709 753.427 716.091 756.93 718.357 765.5C721.688 778.104 730.816 796.866 739.053 808.04C760.597 837.27 783.385 855.671 848 896.012C904.524 931.303 929.472 949.963 952.5 974.175C974.26 997.055 987.377 1021.31 992.449 1048.04C996.104 1067.31 992.575 1093.28 980.838 1133.5C961.357 1200.25 929.989 1249.26 887 1280.1C863.237 1297.16 847.254 1304.36 794.102 1321.95C749.308 1336.79 730.1 1343.72 714.744 1350.62C709.378 1353.03 704.762 1355 704.487 1355C703.884 1355 704.708 1343.52 706.102 1332.5C708.933 1310.12 718.76 1284.63 730.388 1269.5C732.079 1267.3 732.665 1266.13 731.691 1266.91C728.678 1269.3 719.193 1284.3 715.124 1293.11C710.458 1303.22 705.774 1317.62 703.613 1328.5C702.194 1335.65 700.039 1352.06 700.003 1356C699.995 1356.83 695.627 1360.08 690.245 1363.27C671.266 1374.51 657.666 1386.64 648.527 1400.47C635.726 1419.85 629.868 1437.47 617.599 1493.5C606.009 1546.43 606.126 1546.05 594.691 1568.95C566.749 1624.91 552.998 1675.84 553.001 1723.36C553.002 1739.89 554.341 1754.4 557.616 1773.37C560.05 1787.46 562.188 1796.4 578.821 1862C596.891 1933.27 605.981 1991.39 605.996 2035.75C606 2047.33 606.109 2048 608 2048C609.9 2048 610 2047.33 609.996 2034.75C609.989 2012.93 607.247 1981.42 602.924 1953.5C597.447 1918.12 589.334 1882.97 574.998 1832.5C560.141 1780.2 557.484 1764.29 557.538 1728C557.578 1700.68 558.65 1691.2 564.523 1666.27C573.128 1629.75 594.937 1575.99 613.524 1545.5C624.735 1527.11 636.339 1512.67 654.511 1494.51C665.712 1483.31 673.538 1474.52 677.426 1468.77C683.199 1460.24 683.566 1459.91 693.885 1454.27C734.923 1431.83 763.846 1399.5 779.125 1359C782.727 1349.45 784.259 1346.7 788.154 1342.78C797.433 1333.44 813.056 1324.95 842.89 1313.04C851.336 1309.67 858.496 1307.16 858.802 1307.47C859.813 1308.48 855.945 1319.35 850.96 1329.5C842.098 1347.55 823.86 1369.33 800.2 1390.11C793.215 1396.25 774 1412.12 757.5 1425.38C717.961 1457.14 702.617 1470.41 684.487 1488.5C632.344 1540.53 602.789 1596.81 592.858 1663C591.064 1674.96 590.676 1682.06 590.643 1703.5C590.588 1739.38 593.234 1761.33 605.414 1826C620.985 1908.68 627.84 1961.11 631.498 2025.5C631.811 2031 632.312 2038.31 632.613 2041.75L633.159 2048H636.588H640.017L639.515 2042.75C639.239 2039.86 638.541 2030.3 637.963 2021.5C633.825 1958.45 627.211 1908.34 613.012 1832.5C597.936 1751.97 594.334 1718.7 596.876 1683.44C602.464 1605.94 636.923 1539.59 702.5 1480.06C719.035 1465.05 728.077 1457.5 762.151 1430.24C796.426 1402.83 801.431 1398.56 816.89 1383.54C843.58 1357.6 858.533 1335.52 865.321 1312.01L867.758 1303.57L884.129 1296.47C902.499 1288.51 913.084 1282.77 927 1273.22C950.311 1257.22 974.741 1233.79 986.18 1216.48C993.267 1205.75 1013.13 1169.23 1017.09 1159.67C1019.1 1154.8 1020.75 1152.82 1027 1147.76C1055.69 1124.51 1075.5 1094.65 1084.17 1061.56C1086.85 1051.3 1087.8 1029.24 1086.02 1018.22C1082.94 999.109 1078.7 987.709 1061.43 952C1054.64 937.975 1047.72 922.393 1046.05 917.374C1036.48 888.613 1041.03 868.645 1061.89 847.938C1070.95 838.932 1079.5 832.377 1103.53 815.997C1126.68 800.214 1135.63 793.158 1145.58 782.862C1158.22 769.78 1164.69 759.108 1168.66 744.831C1171.08 736.128 1171.11 711.882 1168.72 699.924C1166.2 687.331 1161.49 673.891 1155.42 661.974C1150.16 651.643 1147.04 646.677 1131.8 624.386C1115.73 600.872 1110.96 585.87 1108.98 552.646C1106.04 503.171 1103.48 492.233 1092.52 482.12C1086.39 476.472 1080.59 473.934 1062.5 468.979C1031.79 460.568 1018.86 456.58 976.699 442.519C932.704 427.846 920.483 424.304 904.5 421.595C893.129 419.667 874.644 418.894 865.352 419.959ZM905.5 426.445C925.47 430.079 938.189 433.73 994.5 451.992C1008.25 456.452 1032.1 463.719 1047.5 468.143C1079.6 477.362 1087.37 480.807 1093.08 488.355C1100.47 498.122 1103.63 511.902 1105.01 540.5C1107.05 582.55 1108.51 591.113 1116.47 607.5C1118.87 612.45 1123.91 620.842 1127.67 626.148C1131.42 631.455 1137.54 640.078 1141.26 645.31C1158.25 669.207 1166.66 691.531 1167.7 715.501C1168.37 731.025 1167.16 739.465 1162.66 750.55C1153.48 773.142 1138.69 787.601 1089 822.569C1077.97 830.333 1070.19 836.793 1062 844.988C1045.12 861.881 1040.03 871.756 1039.22 889.144C1038.37 907.448 1041.72 918.036 1060.87 957.65C1078.56 994.244 1084 1012.32 1084 1034.52C1084 1064.02 1071.18 1093.35 1045.19 1123.28C1036.35 1133.46 1023.41 1145.3 1024.21 1142.47C1024.52 1141.39 1025.96 1136.48 1027.41 1131.57C1033.07 1112.35 1036.75 1080.78 1035.51 1062C1031.82 1006.43 1015.45 955.463 988.11 914.452C978.932 900.688 977.894 898.641 975.935 890.452C974.731 885.414 973.569 876.472 973.278 870C971.667 834.128 989.049 806.848 1022.97 792.002C1027.09 790.203 1041.71 784.949 1055.47 780.327C1091.92 768.088 1108.53 759.613 1123.82 745.456C1131.99 737.896 1138.5 728.535 1142.57 718.5C1145.15 712.163 1145.42 710.363 1145.43 699.5C1145.43 688.825 1145.14 686.753 1142.76 680.737C1137.19 666.683 1129.71 657.566 1105.95 635.87C1090.77 622.007 1087.48 615.122 1084.54 591C1083.7 584.125 1082.51 576.7 1081.9 574.5C1076.41 554.719 1060.35 534.112 1042.05 523.389C1017.86 509.213 989.899 506.29 943.514 513.088C935.806 514.218 908.35 519.354 882.5 524.502C832.932 534.373 807.327 538.995 774.5 543.998C742.558 548.866 721.908 552.818 700.844 558.094C676.53 564.183 664.619 568.002 654.41 572.982C650.062 575.103 646.468 576.762 646.422 576.669C646.282 576.38 693.952 530.662 704.5 520.969C770.476 460.346 815.113 432.576 858 425.474C868.76 423.692 893.108 424.189 905.5 426.445ZM703.353 457.517C685.308 465.768 667.264 469.797 631.506 473.559C594.333 477.47 583.794 480.665 566.756 493.187C524.871 523.973 503.608 573.696 503.763 640.5C503.875 688.724 512.434 726.805 539.05 797.5C562.085 858.684 574.231 889.037 584.467 911C595.921 935.577 596.516 937.791 596.414 955.5C596.277 979.323 591.785 992.193 577.39 1010C550.627 1043.11 540.119 1059.58 533.888 1078.18C528.477 1094.33 526.951 1104.41 526.344 1128C525.692 1153.37 527.021 1168.54 532.963 1203.5C538.623 1236.81 539.357 1243.59 539.342 1262.5C539.311 1301.34 531.874 1332.9 492.684 1460.5C463.16 1556.63 453.44 1589.19 437.615 1645C402.65 1768.3 392.187 1822.02 395.932 1859C398.936 1888.68 406.785 1910.33 423.496 1935.06C435.414 1952.69 443.464 1962.04 477.304 1997.56C497.193 2018.43 509.662 2032.78 516.142 2042.25C518.305 2045.41 520.529 2048 521.085 2048C523.457 2048 505.389 2024.92 490.421 2008.84C484.965 2002.97 473.01 1990.31 463.856 1980.7C436.325 1951.8 423.192 1934.63 413.222 1914.5C405.94 1899.8 401.661 1886.07 398.887 1868.5C397.095 1857.16 397.343 1829.04 399.366 1814C403.654 1782.12 417.503 1723.14 436.052 1657.77L441.366 1639.04L443.706 1646.77C457.355 1691.88 466.314 1708.6 480.556 1715.57C485.378 1717.93 486.915 1718.2 492.956 1717.77C501.564 1717.16 506.832 1714.25 515.935 1705.1C523.743 1697.25 531.859 1685.56 542.742 1666.5C552.353 1649.67 565.378 1625 564.657 1625C564.372 1625 560.67 1631.19 556.43 1638.75C535.1 1676.8 525.295 1691.62 514.203 1702.58C498.629 1717.96 485.383 1718.74 472.676 1705.02C463.37 1694.96 457.36 1681.33 449.961 1653.47C447.627 1644.69 445.158 1636.38 444.474 1635C443.39 1632.82 443.864 1630.31 448.154 1615.5C457.823 1582.12 469.474 1543.62 487.654 1485C534.815 1332.92 542.234 1302.45 542.317 1260.5C542.356 1240.85 541.566 1232.93 536.464 1201.8C530.874 1167.7 529.694 1153.68 530.299 1128.56C530.869 1104.89 532.34 1094.78 537.407 1079.68C542.802 1063.61 548.23 1054.69 567.06 1030.93C583.28 1010.47 588.388 1003.08 592.937 993.5C603.083 972.136 607.651 954.469 606.676 940.363C605.663 925.712 602.203 916.387 589.421 893.861C557.206 837.086 536.16 769.065 531.915 708C527.078 638.409 543.748 608.31 642.962 507.5C661.366 488.8 670.591 479.184 663.462 486.131C656.333 493.079 649.205 499.829 647.622 501.131C642.899 505.019 597.692 552.294 586.474 565.076C550.397 606.185 535.727 631.621 530.368 662.364C528.16 675.028 528.975 713.006 531.852 731.5C539.128 778.274 554.081 827.337 572.911 866.214C576.184 872.971 583.376 886.6 588.894 896.5C594.779 907.06 600.078 918.013 601.713 923C604.223 930.655 604.494 932.842 604.444 945C604.393 957.551 604.165 959.133 601.202 967.5C599.45 972.45 598.269 975.375 598.578 974C598.888 972.625 599.391 966.086 599.697 959.469C600.394 944.393 598.628 936.642 590.456 918.917C576.644 888.956 573.663 881.906 566.505 862.282C558.179 839.455 554.714 830.204 545.797 807C519.156 737.671 511.662 711.617 506.822 671.5C504.956 656.033 505.255 617.921 507.356 603.5C513.593 560.674 527.426 531.299 552.918 506.744C565.283 494.833 575.288 487.839 585.801 483.757C595.874 479.846 603.663 478.473 632.759 475.483C659.526 472.733 672.327 470.486 684.604 466.383C692.343 463.796 711.47 455.182 709.5 455.17C708.95 455.167 706.184 456.223 703.353 457.517ZM1006.5 514.116C1035.62 517.853 1060.67 535.513 1073.78 561.552C1078.08 570.092 1079.77 576.583 1081.97 593.082C1085.38 618.711 1089.73 626.592 1110.06 644.048C1128.71 660.065 1136.84 671.108 1140.94 685.98C1148.39 713.011 1135.21 738.613 1104.24 757.303C1090.99 765.294 1079.72 769.758 1044.5 780.959C1012 791.293 994.895 802.279 983.239 820.297C977.78 828.737 974.756 836.067 972.481 846.375C970.26 856.442 970.898 875.742 973.84 887.496C974.941 891.893 975.707 895.627 975.541 895.792C975.122 896.211 957.612 872.438 950.078 861.221C930.024 831.363 926.573 807.106 939.968 790.16C942.07 787.501 946.096 783.632 948.914 781.563C959.528 773.772 965.415 771.493 1015 755.976C1051.65 744.506 1079.31 730.305 1094.69 715.065C1105.58 704.28 1109.32 691.6 1104.54 681.687C1103 678.498 1102.64 676.76 1103.36 676.04C1104.08 675.32 1103.84 675 1102.59 675C1101.58 675 1088.61 663.178 1073.14 648.158C1033.16 609.34 1023.54 600.827 1007.16 589.768C997.714 583.396 983.453 576.685 974.936 574.604C960.152 570.992 938.846 573.134 908 581.335C898.925 583.747 879.575 588.9 865 592.784C850.425 596.669 828.825 602.376 817 605.467C758.52 620.75 735.208 631.45 712.023 653.647C688.365 676.299 673.56 706.565 668.934 741.738C667.115 755.572 668.27 780.67 671.362 794.5C674.172 807.07 678.448 819.604 684.093 831.822C687.111 838.355 688 841.51 688 845.685C688 854.278 684.921 856.396 669 858.758L662.5 859.722L667.701 859.861C680.262 860.197 688.255 856.173 689.718 848.776L690.534 844.646L695.017 851.568C707.197 870.376 726.2 890.292 746.426 905.445C765.299 919.583 781.092 928.757 821.5 949.055C863.363 970.083 876.366 977.433 890.5 988.059C917.581 1008.42 935.364 1034.95 941.071 1063.5C942.729 1071.79 942.507 1087.16 940.614 1095.24C934.313 1122.11 913.314 1145.77 881.666 1161.67C855.886 1174.61 821.54 1184.38 787.04 1188.57C770.045 1190.64 740.587 1190.14 731.672 1187.63C708.97 1181.23 698 1167.06 698 1144.13C698 1128.49 702.98 1109.72 716.205 1075.5C728.791 1042.93 733.534 1027.82 736.565 1010.61C742.542 976.684 736.267 942.656 719.341 917.218C709.886 903.007 696.958 890.45 669.191 868.505C660.071 861.297 658.232 859.429 659.691 858.854C661.113 858.293 660.918 858.126 658.776 858.07C656.957 858.023 653.634 855.956 648.776 851.848C616.692 824.719 600.333 799.569 591.011 763.04C584.086 735.902 583.139 700.941 588.599 674.046C590.622 664.08 597.076 644.774 600.948 637.102C610.694 617.796 626.916 599.277 644.593 587.278C652.781 581.72 667.128 574.7 675.616 572.098C682.181 570.085 687.949 567.106 685.425 567.032C682.941 566.958 668.847 572.366 660.417 576.628C610.639 601.79 583 650.827 583 713.98C583 746.806 590.077 777.78 603.089 801.903C615.048 824.075 630.368 840.201 674.391 876.959C690.875 890.722 706.244 905.614 712.755 914.132C729.638 936.218 736.802 959.487 735.65 988.5C734.688 1012.74 730.434 1028.63 712.228 1076C697.94 1113.17 694.835 1125.01 694.649 1143C694.553 1152.35 694.95 1155.84 696.774 1161.69C701.494 1176.8 712.884 1186.79 731.535 1192.19C738.907 1194.33 741.362 1194.5 764.5 1194.5C784.097 1194.5 791.877 1194.1 800.5 1192.66C814.576 1190.31 834.604 1185.18 848 1180.49C862.233 1175.5 886.444 1163.57 897.936 1155.87C909.11 1148.38 923.431 1135.06 929.619 1126.39C939.356 1112.74 944.981 1095.53 944.993 1079.34C945.022 1041.21 921.618 1003.69 881.018 976.788C871.12 970.23 856.252 962.252 825.5 947C780.039 924.452 768.33 917.823 750.365 904.463C710.799 875.041 685.233 836.896 675.992 793.5C672.683 777.96 672.166 753.001 674.832 737.5C680.419 705.014 692.398 680.899 713.196 660.272C740.714 632.979 767.277 621.921 862.5 598.119C942.739 578.063 956.939 576.084 975.156 582.42C989.67 587.467 1001.15 595.754 1037.12 627.162C1059.12 646.363 1076.76 660.836 1087.8 668.735C1091.26 671.214 1093.86 673.473 1093.58 673.757C1092.72 674.613 1081.7 672.116 1070.05 668.429C1064.01 666.517 1047.08 660.017 1032.42 653.986C1000.74 640.95 990.271 637.466 978.092 635.904C966.357 634.399 958.584 635.39 930.759 641.939C891.222 651.244 867.238 654.276 833.5 654.233C809.921 654.203 799.645 653.354 774.5 649.359C750.332 645.519 742.204 646.751 729.667 656.157C717.024 665.642 701.657 688.703 695.6 707.282C694.204 711.561 691.474 723.125 689.531 732.979C685.484 753.512 684.901 767.986 687.557 781.989C692.177 806.342 707.182 832.349 729.345 854.418C751.932 876.909 775.997 893.062 827 919.969C876.348 946.002 895.463 957.987 916.679 976.2C962.13 1015.22 981.743 1069.32 968.446 1119C959.542 1152.27 935.891 1178.74 898.5 1197.27C884.776 1204.07 881.132 1205.41 840.5 1218.58C776.223 1239.41 752.639 1249.35 703.582 1276.27C651.786 1304.69 625.6 1314.11 602.163 1312.77C581.228 1311.57 571.455 1300.68 563.465 1269.66C558.77 1251.42 544.198 1172.47 541.488 1150.58C537.209 1116.02 541.728 1089.83 555.996 1066.5C561.917 1056.82 566.6 1050.91 582.559 1033C604.986 1007.83 614.26 995.402 621.748 980.492C633.175 957.742 635.469 933.279 628.307 910.561C623.234 894.471 615.975 882.734 594.686 856.196C565.074 819.285 563.046 814.433 556.453 764.699C550.4 719.047 550.742 702.377 558.029 687.943C568.796 666.613 594.333 632.59 623.695 600.454C650.503 571.114 668.196 564.664 760.971 550.404C797.691 544.761 825.822 539.665 860 532.468C929.541 517.824 949.37 514.394 972 513.095C985.751 512.305 994.381 512.561 1006.5 514.116ZM979.549 647.07C989.652 648.475 996.466 650.634 1020.55 660.057C1055.6 673.77 1071.28 677.945 1089.46 678.407L1099.42 678.66L1100.66 681.58C1102.85 686.696 1102.26 688.461 1096.62 693.794C1089.11 700.898 1077.94 707.981 1060.92 716.427C1035.23 729.176 1012.29 735.729 957 746.108C920.917 752.882 911.185 755.447 899.5 761.269C887.136 767.429 881.194 774.453 878.563 786.024C876.589 794.703 876.599 799.31 878.618 811.074C883.226 837.922 896.521 862.347 934.098 913C955.803 942.259 961.287 950.064 968.425 961.858C983.901 987.43 991.141 1008.2 993.982 1035.17C995.492 1049.5 994.993 1052.65 993.013 1041.28C988.535 1015.56 978.287 995.168 958.692 973C938.935 950.648 911.677 930.436 853.5 894.998C801.588 863.377 779.381 847.418 759.5 827.445C736.565 804.404 723.37 781.013 718.932 755.531C717.165 745.387 718.226 725.246 720.987 716.5C727.432 696.089 740.385 680.874 758.5 672.438C771.979 666.161 784.722 664.942 815.73 666.963C841.011 668.611 845.586 668.771 843.5 667.939C842.163 667.405 843.57 667.117 847.741 667.07C868.089 666.841 903.214 661.436 935.87 653.51C948.441 650.459 961.376 647.576 964.613 647.103C967.851 646.631 970.805 646.189 971.178 646.122C971.55 646.055 975.318 646.482 979.549 647.07ZM810.5 673.632C830.175 692.129 860.201 707.757 891 715.532C937.102 727.169 993.725 723.877 1040.39 706.845C1051.66 702.731 1070.44 693.559 1075 689.939C1076.38 688.848 1072.32 690.622 1066 693.883C1013.28 721.063 942.135 725.425 875.149 705.585C849.316 697.933 830.821 688.923 814.5 676.037C808.171 671.039 806.984 670.326 810.5 673.632ZM1100.44 702.115C1094.59 713.66 1078.82 726.293 1057.54 736.482C1043.68 743.116 1030.85 747.807 1000.5 757.334C987.3 761.479 972.531 766.532 967.681 768.564C937.504 781.205 924.905 800.495 930.474 825.529C933.913 840.986 941.424 855.44 959.558 881.5C987.321 921.395 991.334 927.742 1000.97 947C1013.93 972.884 1022.08 999.331 1027.94 1034.5C1034.47 1073.66 1032.03 1107.05 1020.23 1139.87C1016.05 1151.49 1015.2 1152.37 1001.44 1159.28C993.172 1163.44 976.206 1169.54 975.335 1168.67C975.003 1168.34 975.671 1165.46 976.819 1162.28C984.326 1141.48 994.067 1101.59 996.911 1080C1002.48 1037.7 994.494 1000.43 971.188 960C963.611 946.855 958.242 939.026 938.623 912.513C901.279 862.048 888.991 840.459 883.404 815.5C881.034 804.914 880.975 790.127 883.277 783.468C889.412 765.717 906.34 758.561 966 748.497C1009.27 741.198 1034.48 734.002 1060.79 721.44C1074.91 714.697 1090.58 704.932 1098 698.248C1103.41 693.372 1104.22 694.656 1100.44 702.115ZM1355.92 695.479C1359.06 696.292 1368.12 699.621 1376.06 702.876C1384 706.13 1395.63 710.412 1401.9 712.39C1413.78 716.142 1435.11 721 1439.69 721H1442.35L1440.24 723.25C1437.26 726.438 1436 730.324 1436 736.384C1436 744.676 1438.4 750.93 1451.01 775.5C1457.5 788.15 1464.01 801.875 1465.48 806C1474.43 831.161 1475.9 859.376 1469.56 884.384C1463.41 908.608 1451.44 929.07 1424.92 960.665C1398.77 991.813 1393.8 999.12 1388.66 1013.95C1385.12 1024.18 1384.68 1035.91 1387.47 1045.57C1389.83 1053.76 1396.08 1065.46 1402.02 1072.83C1406.51 1078.41 1406.78 1079 1404.75 1078.98C1398.76 1078.94 1386.21 1054.42 1383.05 1036.57C1378.07 1008.47 1387.63 985.712 1421.51 945C1441.54 920.926 1449.11 908.781 1454.55 892C1456.93 884.672 1457.32 881.776 1457.39 871C1457.49 856.087 1456.01 849.569 1449.54 836.5C1442.08 821.41 1434.41 812.546 1398.38 777.376C1349.41 729.572 1343.18 722.121 1339.89 707.413C1338.43 700.889 1339.26 697.464 1342.76 695.565C1346.26 693.667 1348.86 693.65 1355.92 695.479ZM1453.38 722.004L1456.5 722.007L1453.19 724.026C1442.75 730.393 1446.44 743.778 1467.66 776.5C1478.04 792.508 1481.33 798.692 1484.62 808.358C1491.18 827.629 1489.46 848.851 1479.28 874.277C1475.56 883.581 1474.06 884.778 1476.01 876.89C1476.61 874.476 1477.36 865.3 1477.68 856.5C1478.83 824.549 1474.01 807.453 1454.23 773.464C1438.71 746.785 1435.69 737.472 1439.54 728.254C1441.92 722.542 1443.98 720.746 1447.35 721.42C1448.95 721.739 1451.66 722.002 1453.38 722.004ZM1182.55 755.97C1180.53 769.512 1174.91 785.989 1168.49 797.196C1165.6 802.255 1157.73 813.724 1151.01 822.683C1130.27 850.355 1122.03 866.159 1118.27 885.5C1116.99 892.105 1116.91 895.07 1117.83 902.5C1119.89 919.151 1126.36 933.343 1144.96 962C1172.71 1004.77 1182.4 1024.68 1187.51 1049.5C1189.48 1059.06 1189.77 1078.06 1188.08 1086.5C1182.14 1116.04 1165.19 1139.64 1129.77 1167.66C1122.93 1173.07 1110.19 1183.12 1101.46 1190C1083.58 1204.08 1064.1 1222.43 1054.25 1234.44C1050.62 1238.87 1046.98 1243.18 1046.16 1244C1041.92 1248.26 1065.51 1216.7 1081.98 1196.06C1131.28 1134.31 1147.93 1106.51 1154.59 1074.8C1156.84 1064.08 1156.85 1045.47 1154.61 1033.76C1150.43 1011.9 1138.63 987.061 1116.02 952.5C1094.97 920.346 1089.22 908.719 1086.88 893.685C1086.12 888.742 1086.14 885.042 1086.95 880.346C1090.12 862.145 1097.15 851.962 1128.98 819.464C1144.27 803.855 1155.89 791.052 1159.85 785.464C1171.06 769.621 1179.98 748.077 1182.3 731.198L1183.5 722.5L1183.78 734.186C1183.94 741.015 1183.44 750.069 1182.55 755.97ZM1376.75 910.295C1379.25 911.644 1380 912.712 1380 914.905V917.759L1366.25 918.428C1331.62 920.113 1314.42 922.684 1301.32 928.137C1288.9 933.311 1281.3 940.455 1278.95 949.177C1277.34 955.154 1279.02 955.849 1280.99 950.022C1285.35 937.156 1299.4 929.679 1327 925.534C1338.6 923.792 1378.27 920.002 1378.89 920.577C1379.1 920.777 1376.6 923.557 1373.33 926.755C1366.28 933.659 1358.04 937.927 1339.01 944.533C1318.85 951.531 1310.39 956.221 1293.65 969.686C1289.33 973.159 1285.45 976 1285.02 976C1283.4 976 1272.21 963.073 1270.16 958.824C1260.68 939.244 1275.94 920.409 1306.94 913.425C1329.93 908.247 1369.66 906.466 1376.75 910.295ZM1448.86 946C1444.04 964.679 1442.8 986.796 1445.51 1005.88C1447.51 1019.92 1449.77 1029.05 1456.88 1051.73C1460.2 1062.3 1464.27 1076.47 1465.93 1083.23C1478.64 1135.03 1475.34 1188.73 1457.07 1227.5C1450.84 1240.71 1444.55 1250.69 1431.67 1267.77C1413.35 1292.08 1406.57 1304.12 1401.67 1321.01C1395.91 1340.9 1395.76 1359.04 1401.02 1399.5C1403.73 1420.36 1404.08 1425.66 1403.7 1440C1403.18 1459.47 1401.37 1467.73 1394.57 1481.54C1387.05 1496.82 1375.54 1507.59 1359.76 1514.1C1338.27 1522.96 1308.55 1526.86 1234.5 1530.54C1155.53 1534.45 1119.68 1539.18 1086.8 1550.01C1036.86 1566.45 1001.9 1598.84 986.426 1643C983.42 1651.58 983.424 1648.88 986.436 1636.5C995.009 1601.27 1011.02 1572.69 1035.19 1549.46C1055.68 1529.77 1077.74 1518.2 1104 1513.38C1116.29 1511.13 1140.82 1511.1 1159 1513.31C1166.43 1514.22 1181.95 1516.13 1193.5 1517.56C1208.48 1519.42 1221.56 1520.32 1239.15 1520.72C1295.23 1521.98 1331.64 1513.79 1357.82 1494.03C1375.52 1480.66 1386.79 1461.79 1391.66 1437.37C1394.09 1425.16 1394.08 1397.95 1391.63 1375.12C1389.24 1352.86 1389.74 1330.98 1392.87 1320.5C1395.95 1310.22 1401.7 1299.24 1412.19 1283.68C1425.59 1263.8 1428.04 1260 1427.49 1260C1426.6 1260 1403.59 1291.27 1398.79 1299C1393.46 1307.56 1388.8 1318.65 1386.32 1328.64C1383.94 1338.21 1383.97 1363.6 1386.39 1385.29C1387.79 1397.9 1388.12 1406.24 1387.74 1418.79C1387.11 1438.97 1385.31 1446.87 1377.87 1461.95C1373.42 1470.98 1371.48 1473.66 1363.61 1481.56C1343.14 1502.1 1317.43 1511.07 1270.37 1514.06C1246.39 1515.59 1226.63 1514.63 1184.5 1509.92C1142.81 1505.26 1123.31 1504.78 1104.85 1507.95C1075.32 1513.02 1051.14 1526.46 1028.09 1550.6C1007.03 1572.66 990.731 1603.67 984.09 1634.32C981.798 1644.9 979.01 1672.16 979.004 1684.07C978.995 1700.64 984.38 1721.61 993.493 1740.5C1002.87 1759.93 1012.87 1773.76 1031.43 1792.95C1042.72 1804.64 1042.27 1804.4 1022 1788.09C969.317 1745.71 948.679 1716.44 943.984 1677.45C938.367 1630.81 966.865 1574.41 1016.03 1534.88C1052.76 1505.35 1091.91 1488.47 1139 1481.84C1155.1 1479.57 1194.01 1480.23 1224 1483.28C1268.6 1487.81 1282.93 1487.75 1303 1482.97C1327.67 1477.1 1345.89 1461.28 1353.64 1439C1358.94 1423.74 1359.34 1419.49 1359.45 1377.5C1359.53 1343.21 1359.77 1337.59 1361.38 1331C1366.44 1310.41 1379.3 1292.73 1399.61 1278.46C1429.35 1257.55 1444.91 1244.9 1450.05 1237.43C1455.14 1230.03 1457.33 1224.08 1457.41 1217.5C1457.49 1209.39 1454.78 1204.14 1444.88 1193.31C1440.52 1188.53 1436.68 1183.59 1436.37 1182.34C1435.78 1179.97 1438.6 1174.39 1441.69 1171.86C1445.03 1169.12 1451.12 1158.4 1453.16 1151.69C1454.97 1145.72 1455.19 1143.08 1454.74 1132.15C1454.16 1117.91 1452.14 1109.98 1446.24 1098.67C1439.57 1085.92 1431 1079.55 1418.94 1078.39C1410.67 1077.6 1406.47 1074.92 1400.57 1066.66C1391.8 1054.36 1387.35 1040.51 1388.4 1028.78C1389.91 1012.05 1398.64 997.911 1425 969.5C1435.24 958.463 1444.4 947.332 1447.93 941.614C1449.19 939.569 1450.35 938.031 1450.51 938.197C1450.67 938.364 1449.92 941.875 1448.86 946ZM1429.09 1085.07C1437.81 1089.46 1446.77 1102.65 1450.46 1116.5C1452.8 1125.32 1453.52 1138.64 1452 1145.09C1450.12 1153.07 1445.95 1160.62 1439.08 1168.5C1432.77 1175.74 1430.87 1179.85 1431.73 1184.39C1432.01 1185.85 1436.01 1191.19 1440.62 1196.27C1450.78 1207.45 1453 1211.61 1453 1219.44C1453 1235.08 1435.51 1253.02 1414.07 1259.39C1406.22 1261.72 1405.51 1261.28 1412.67 1258.53C1430.73 1251.57 1437.26 1241.85 1433.48 1227.51C1432.61 1224.21 1428.24 1214.2 1423.76 1205.27C1416.87 1191.51 1415.56 1188.09 1415.19 1182.93L1414.75 1176.84L1424.74 1167.16C1439.04 1153.29 1442.39 1145.57 1442.35 1126.5C1442.31 1105.2 1435.79 1090.34 1423.5 1083.58C1420.89 1082.14 1420.83 1082.01 1423 1082.59C1424.38 1082.96 1427.12 1084.07 1429.09 1085.07ZM1422.24 1089.71C1426.61 1092.26 1429.61 1096.96 1432.28 1105.44C1435.21 1114.77 1435.46 1136.35 1432.74 1145.18C1429.42 1155.94 1417.51 1165.81 1403.42 1169.48C1399.4 1170.53 1388.68 1171.34 1370 1172C1287.53 1174.93 1245.92 1182.37 1205.59 1201.4C1199.21 1204.4 1194 1206.42 1194 1205.87C1194 1204.11 1204.34 1193.86 1210 1190.01C1217.75 1184.74 1227.24 1180.14 1244 1173.55C1275.76 1161.05 1290.58 1152.44 1321.58 1128.51C1331.44 1120.9 1343.2 1112.25 1347.73 1109.29C1363.51 1098.96 1382.87 1090.89 1398.92 1087.95C1406.28 1086.6 1418.5 1087.52 1422.24 1089.71ZM1009.48 1165.03C1004.88 1174.18 988.647 1203.28 983.006 1212.5C968.615 1236.03 950.103 1254.52 927.773 1267.67C918.647 1273.05 866 1299.36 866 1298.55C866 1298.37 870.802 1295.6 876.67 1292.38C904.836 1276.96 925.687 1257.58 944.321 1229.5C952.181 1217.66 965.122 1192.59 970.903 1178.01L973.874 1170.51L979.897 1169.3C988.059 1167.64 999.894 1163.59 1006.8 1160.09C1009.94 1158.5 1012.64 1157.33 1012.81 1157.5C1012.99 1157.66 1011.49 1161.05 1009.48 1165.03ZM1411.69 1171.59C1403.76 1179.52 1405.88 1192.01 1418.65 1212.5C1421.39 1216.9 1424.39 1222.42 1425.32 1224.77C1427.37 1229.98 1427.49 1237.16 1425.59 1240.8C1419.97 1251.55 1401.05 1257.96 1374.85 1257.99C1353.12 1258.01 1339.18 1255.02 1293 1240.42C1265.67 1231.78 1255.49 1229.67 1218.85 1225.05C1206.5 1223.48 1200.17 1221.37 1196.3 1217.5C1194.49 1215.69 1193 1213.45 1193 1212.54C1193 1209.37 1218.69 1198.58 1241.56 1192.14C1274.61 1182.83 1308.98 1178.3 1367.76 1175.51C1396.92 1174.13 1406.97 1172.87 1411.87 1170.01C1414.48 1168.49 1414.44 1168.83 1411.69 1171.59ZM1338 1259.35C1346.13 1261.67 1359.4 1263.77 1369 1264.27L1373.5 1264.5L1366.09 1266.4C1356.43 1268.87 1346.8 1273.78 1340.18 1279.6L1334.86 1284.28L1336.43 1280.52C1339.4 1273.42 1338.62 1270.88 1330.64 1261.61C1327.19 1257.61 1326.2 1255.92 1327.53 1256.32C1328.61 1256.65 1333.32 1258.01 1338 1259.35ZM1405.73 1261.6C1405.4 1261.94 1404.53 1261.97 1403.81 1261.68C1403.02 1261.36 1403.25 1261.13 1404.42 1261.08C1405.47 1261.04 1406.06 1261.27 1405.73 1261.6ZM823.852 1318.25C787.333 1336.64 778.686 1343.9 772.982 1361C763.975 1387.99 740.079 1419.16 712.784 1439.52C701.735 1447.76 686.178 1457.51 685.372 1456.71C685.096 1456.43 686.191 1453.57 687.807 1450.35C697.556 1430.94 703.199 1402.26 704.306 1366.5L704.553 1358.5L711.027 1355.34C724.976 1348.53 745.476 1340.91 793 1324.86C820.225 1315.66 842.885 1308.11 843.355 1308.07C843.826 1308.03 835.049 1312.61 823.852 1318.25ZM977.5 1346C976.181 1346.57 976.011 1346.88 977 1346.91C977.825 1346.94 979.175 1346.53 980 1346C981.828 1344.82 980.249 1344.82 977.5 1346ZM699.543 1372.75C697.47 1407.7 691.976 1432.35 681.843 1452.17C675.04 1465.47 668.868 1473.26 652.666 1489C637.908 1503.33 625.675 1517.78 615.814 1532.5C612.499 1537.45 609.64 1541.66 609.46 1541.85C609.281 1542.04 609.728 1539.79 610.453 1536.85C615.518 1516.31 617.713 1506.81 622.091 1486.5C632.736 1437.11 638.895 1418.97 651.298 1400.5C656.149 1393.28 668.231 1381.18 676.759 1375C682.284 1371 698.762 1361 699.829 1361C700.055 1361 699.926 1366.29 699.543 1372.75ZM566 1622C565.411 1623.1 565.155 1624 565.43 1624C565.705 1624 566.411 1623.1 567 1622C567.589 1620.9 567.845 1620 567.57 1620C567.295 1620 566.589 1620.9 566 1622Z",fill:"black"})),zV="_slideIn_v71ac_1",HV="_slideOut_v71ac_1",Z5={slideIn:zV,slideOut:HV};function Du({children:n}){return ce.jsxs(ce.Fragment,{children:[n,ce.jsx(Ci.div,{className:Z5.slideIn,initial:{scaleY:0},animate:{scaleY:0},exit:{scaleY:1},transition:{duration:1,ease:[.22,1,.36,1]}}),ce.jsx(Ci.div,{className:Z5.slideOut,initial:{scaleY:1},animate:{scaleY:0},exit:{scaleY:0},transition:{duration:1,ease:[.22,1,.36,1]}})]})}const GV="_iphone_atghi_1",VV="_canvas_atghi_11",q5={iphone:GV,canvas:VV};/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const zf="162",Yl={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Zl={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},J7=0,w3=1,K7=2,WV=3,Y7=0,uv=1,hd=2,Ss=3,lo=0,tr=1,rs=2,Wo=0,gu=1,T3=2,b3=3,R3=4,Z7=5,Pa=100,q7=101,Q7=102,P3=103,B3=104,$7=200,eP=201,tP=202,nP=203,vg=204,yg=205,iP=206,rP=207,sP=208,oP=209,aP=210,lP=211,uP=212,cP=213,fP=214,hP=0,dP=1,pP=2,Vd=3,mP=4,gP=5,vP=6,yP=7,xp=0,_P=1,xP=2,io=0,AP=1,SP=2,CP=3,gC=4,EP=5,MP=6,wP=7,I3="attached",TP="detached",cv=300,uo=301,nl=302,Af=303,Wd=304,Hf=306,il=1e3,Ei=1001,Sf=1002,zn=1003,jd=1004,jV=1004,Ba=1005,XV=1005,rn=1006,lf=1007,JV=1007,as=1008,KV=1008,ro=1009,bP=1010,RP=1011,fv=1012,vC=1013,ko=1014,ei=1015,Hi=1016,yC=1017,_C=1018,Ka=1020,PP=1021,zi=1023,BP=1024,IP=1025,Ya=1026,wu=1027,hv=1028,xC=1029,LP=1030,AC=1031,SC=1033,x0=33776,A0=33777,S0=33778,C0=33779,L3=35840,D3=35841,F3=35842,N3=35843,CC=36196,O3=37492,U3=37496,k3=37808,z3=37809,H3=37810,G3=37811,V3=37812,W3=37813,j3=37814,X3=37815,J3=37816,K3=37817,Y3=37818,Z3=37819,q3=37820,Q3=37821,E0=36492,$3=36494,eA=36495,DP=36283,tA=36284,nA=36285,iA=36286,FP=2200,NP=2201,OP=2202,Cf=2300,Tu=2301,M0=2302,su=2400,ou=2401,Xd=2402,dv=2500,EC=2501,UP=0,MC=1,_g=2,kP=3200,zP=3201,ml=0,HP=1,Do="",ts="srgb",ea="srgb-linear",pv="display-p3",Ap="display-p3-linear",Jd="linear",pn="srgb",Kd="rec709",Yd="p3",YV=0,ql=7680,ZV=7681,qV=7682,QV=7683,$V=34055,eW=34056,tW=5386,nW=512,iW=513,rW=514,sW=515,oW=516,aW=517,lW=518,rA=519,GP=512,VP=513,WP=514,wC=515,jP=516,XP=517,JP=518,KP=519,Zd=35044,uW=35048,cW=35040,fW=35045,hW=35049,dW=35041,pW=35046,mW=35050,gW=35042,vW="100",sA="300 es",xg=1035,Ys=2e3,qd=2001;class fo{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}const Fi=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let Q5=1234567;const vu=Math.PI/180,Ef=180/Math.PI;function Br(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Fi[n&255]+Fi[n>>8&255]+Fi[n>>16&255]+Fi[n>>24&255]+"-"+Fi[e&255]+Fi[e>>8&255]+"-"+Fi[e>>16&15|64]+Fi[e>>24&255]+"-"+Fi[t&63|128]+Fi[t>>8&255]+"-"+Fi[t>>16&255]+Fi[t>>24&255]+Fi[i&255]+Fi[i>>8&255]+Fi[i>>16&255]+Fi[i>>24&255]).toLowerCase()}function Hn(n,e,t){return Math.max(e,Math.min(t,n))}function TC(n,e){return(n%e+e)%e}function yW(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)}function _W(n,e,t){return n!==e?(t-n)/(e-n):0}function dd(n,e,t){return(1-t)*n+t*e}function xW(n,e,t,i){return dd(n,e,1-Math.exp(-t*i))}function AW(n,e=1){return e-Math.abs(TC(n,e*2)-e)}function SW(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function CW(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function EW(n,e){return n+Math.floor(Math.random()*(e-n+1))}function MW(n,e){return n+Math.random()*(e-n)}function wW(n){return n*(.5-Math.random())}function TW(n){n!==void 0&&(Q5=n);let e=Q5+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function bW(n){return n*vu}function RW(n){return n*Ef}function oA(n){return(n&n-1)===0&&n!==0}function PW(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function Ag(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function BW(n,e,t,i,r){const s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),u=s((e+i)/2),c=o((e+i)/2),h=s((e-i)/2),p=o((e-i)/2),m=s((i-e)/2),v=o((i-e)/2);switch(r){case"XYX":n.set(a*c,l*h,l*p,a*u);break;case"YZY":n.set(l*p,a*c,l*h,a*u);break;case"ZXZ":n.set(l*h,l*p,a*c,a*u);break;case"XZX":n.set(a*c,l*v,l*m,a*u);break;case"YXY":n.set(l*m,a*c,l*v,a*u);break;case"ZYZ":n.set(l*v,l*m,a*c,a*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function $i(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function Nt(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const bC={DEG2RAD:vu,RAD2DEG:Ef,generateUUID:Br,clamp:Hn,euclideanModulo:TC,mapLinear:yW,inverseLerp:_W,lerp:dd,damp:xW,pingpong:AW,smoothstep:SW,smootherstep:CW,randInt:EW,randFloat:MW,randFloatSpread:wW,seededRandom:TW,degToRad:bW,radToDeg:RW,isPowerOfTwo:oA,ceilPowerOfTwo:PW,floorPowerOfTwo:Ag,setQuaternionFromProperEuler:BW,normalize:Nt,denormalize:$i};class be{constructor(e=0,t=0){be.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Hn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Ft{constructor(e,t,i,r,s,o,a,l,u){Ft.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,o,a,l,u)}set(e,t,i,r,s,o,a,l,u){const c=this.elements;return c[0]=e,c[1]=r,c[2]=a,c[3]=t,c[4]=s,c[5]=l,c[6]=i,c[7]=o,c[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[3],l=i[6],u=i[1],c=i[4],h=i[7],p=i[2],m=i[5],v=i[8],A=r[0],_=r[3],g=r[6],S=r[1],x=r[4],E=r[7],b=r[2],T=r[5],P=r[8];return s[0]=o*A+a*S+l*b,s[3]=o*_+a*x+l*T,s[6]=o*g+a*E+l*P,s[1]=u*A+c*S+h*b,s[4]=u*_+c*x+h*T,s[7]=u*g+c*E+h*P,s[2]=p*A+m*S+v*b,s[5]=p*_+m*x+v*T,s[8]=p*g+m*E+v*P,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],c=e[8];return t*o*c-t*a*u-i*s*c+i*a*l+r*s*u-r*o*l}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],c=e[8],h=c*o-a*u,p=a*l-c*s,m=u*s-o*l,v=t*h+i*p+r*m;if(v===0)return this.set(0,0,0,0,0,0,0,0,0);const A=1/v;return e[0]=h*A,e[1]=(r*u-c*i)*A,e[2]=(a*i-r*o)*A,e[3]=p*A,e[4]=(c*t-r*l)*A,e[5]=(r*s-a*t)*A,e[6]=m*A,e[7]=(i*l-u*t)*A,e[8]=(o*t-i*s)*A,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,o,a){const l=Math.cos(s),u=Math.sin(s);return this.set(i*l,i*u,-i*(l*o+u*a)+o+e,-r*u,r*l,-r*(-u*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(W_.makeScale(e,t)),this}rotate(e){return this.premultiply(W_.makeRotation(-e)),this}translate(e,t){return this.premultiply(W_.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const W_=new Ft;function YP(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const IW={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Kc(n,e){return new IW[n](e)}function Qd(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function ZP(){const n=Qd("canvas");return n.style.display="block",n}const $5={};function qP(n){n in $5||($5[n]=!0,console.warn(n))}const eT=new Ft().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),tT=new Ft().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),$m={[ea]:{transfer:Jd,primaries:Kd,toReference:n=>n,fromReference:n=>n},[ts]:{transfer:pn,primaries:Kd,toReference:n=>n.convertSRGBToLinear(),fromReference:n=>n.convertLinearToSRGB()},[Ap]:{transfer:Jd,primaries:Yd,toReference:n=>n.applyMatrix3(tT),fromReference:n=>n.applyMatrix3(eT)},[pv]:{transfer:pn,primaries:Yd,toReference:n=>n.convertSRGBToLinear().applyMatrix3(tT),fromReference:n=>n.applyMatrix3(eT).convertLinearToSRGB()}},LW=new Set([ea,Ap]),an={enabled:!0,_workingColorSpace:ea,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(n){if(!LW.has(n))throw new Error(`Unsupported working color space, "${n}".`);this._workingColorSpace=n},convert:function(n,e,t){if(this.enabled===!1||e===t||!e||!t)return n;const i=$m[e].toReference,r=$m[t].fromReference;return r(i(n))},fromWorkingColorSpace:function(n,e){return this.convert(n,this._workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this._workingColorSpace)},getPrimaries:function(n){return $m[n].primaries},getTransfer:function(n){return n===Do?Jd:$m[n].transfer}};function uf(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function j_(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let ic;class RC{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{ic===void 0&&(ic=Qd("canvas")),ic.width=e.width,ic.height=e.height;const i=ic.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=ic}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Qd("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=uf(s[o]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(uf(t[i]/255)*255):t[i]=uf(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let DW=0;class au{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:DW++}),this.uuid=Br(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)r[o].isDataTexture?s.push(X_(r[o].image)):s.push(X_(r[o]))}else s=X_(r);i.url=s}return t||(e.images[this.uuid]=i),i}}function X_(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?RC.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let FW=0;class gn extends fo{constructor(e=gn.DEFAULT_IMAGE,t=gn.DEFAULT_MAPPING,i=Ei,r=Ei,s=rn,o=as,a=zi,l=ro,u=gn.DEFAULT_ANISOTROPY,c=Do){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:FW++}),this.uuid=Br(),this.name="",this.source=new au(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=o,this.anisotropy=u,this.format=a,this.internalFormat=null,this.type=l,this.offset=new be(0,0),this.repeat=new be(1,1),this.center=new be(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Ft,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=c,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==cv)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case il:e.x=e.x-Math.floor(e.x);break;case Ei:e.x=e.x<0?0:1;break;case Sf:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case il:e.y=e.y-Math.floor(e.y);break;case Ei:e.y=e.y<0?0:1;break;case Sf:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}}gn.DEFAULT_IMAGE=null;gn.DEFAULT_MAPPING=cv;gn.DEFAULT_ANISOTROPY=1;class ln{constructor(e=0,t=0,i=0,r=1){ln.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*i+o[11]*r+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const l=e.elements,u=l[0],c=l[4],h=l[8],p=l[1],m=l[5],v=l[9],A=l[2],_=l[6],g=l[10];if(Math.abs(c-p)<.01&&Math.abs(h-A)<.01&&Math.abs(v-_)<.01){if(Math.abs(c+p)<.1&&Math.abs(h+A)<.1&&Math.abs(v+_)<.1&&Math.abs(u+m+g-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const x=(u+1)/2,E=(m+1)/2,b=(g+1)/2,T=(c+p)/4,P=(h+A)/4,I=(v+_)/4;return x>E&&x>b?x<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(x),r=T/i,s=P/i):E>b?E<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(E),i=T/r,s=I/r):b<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(b),i=P/s,r=I/s),this.set(i,r,s,t),this}let S=Math.sqrt((_-v)*(_-v)+(h-A)*(h-A)+(p-c)*(p-c));return Math.abs(S)<.001&&(S=1),this.x=(_-v)/S,this.y=(h-A)/S,this.z=(p-c)/S,this.w=Math.acos((u+m+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class QP extends fo{constructor(e=1,t=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new ln(0,0,e,t),this.scissorTest=!1,this.viewport=new ln(0,0,e,t);const r={width:e,height:t,depth:1};i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:rn,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0,count:1},i);const s=new gn(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace);s.flipY=!1,s.generateMipmaps=i.generateMipmaps,s.internalFormat=i.internalFormat,this.textures=[];const o=i.count;for(let a=0;a<o;a++)this.textures[a]=s.clone(),this.textures[a].isRenderTargetTexture=!0;this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.depthTexture=i.depthTexture,this.samples=i.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,s=this.textures.length;r<s;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=i;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let i=0,r=e.textures.length;i<r;i++)this.textures[i]=e.textures[i].clone(),this.textures[i].isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new au(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class hs extends QP{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class mv extends gn{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=zn,this.minFilter=zn,this.wrapR=Ei,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class NW extends hs{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new mv(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class PC extends gn{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=zn,this.minFilter=zn,this.wrapR=Ei,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class OW extends hs{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new PC(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class vi{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,s,o,a){let l=i[r+0],u=i[r+1],c=i[r+2],h=i[r+3];const p=s[o+0],m=s[o+1],v=s[o+2],A=s[o+3];if(a===0){e[t+0]=l,e[t+1]=u,e[t+2]=c,e[t+3]=h;return}if(a===1){e[t+0]=p,e[t+1]=m,e[t+2]=v,e[t+3]=A;return}if(h!==A||l!==p||u!==m||c!==v){let _=1-a;const g=l*p+u*m+c*v+h*A,S=g>=0?1:-1,x=1-g*g;if(x>Number.EPSILON){const b=Math.sqrt(x),T=Math.atan2(b,g*S);_=Math.sin(_*T)/b,a=Math.sin(a*T)/b}const E=a*S;if(l=l*_+p*E,u=u*_+m*E,c=c*_+v*E,h=h*_+A*E,_===1-a){const b=1/Math.sqrt(l*l+u*u+c*c+h*h);l*=b,u*=b,c*=b,h*=b}}e[t]=l,e[t+1]=u,e[t+2]=c,e[t+3]=h}static multiplyQuaternionsFlat(e,t,i,r,s,o){const a=i[r],l=i[r+1],u=i[r+2],c=i[r+3],h=s[o],p=s[o+1],m=s[o+2],v=s[o+3];return e[t]=a*v+c*h+l*m-u*p,e[t+1]=l*v+c*p+u*h-a*m,e[t+2]=u*v+c*m+a*p-l*h,e[t+3]=c*v-a*h-l*p-u*m,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const i=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,u=a(i/2),c=a(r/2),h=a(s/2),p=l(i/2),m=l(r/2),v=l(s/2);switch(o){case"XYZ":this._x=p*c*h+u*m*v,this._y=u*m*h-p*c*v,this._z=u*c*v+p*m*h,this._w=u*c*h-p*m*v;break;case"YXZ":this._x=p*c*h+u*m*v,this._y=u*m*h-p*c*v,this._z=u*c*v-p*m*h,this._w=u*c*h+p*m*v;break;case"ZXY":this._x=p*c*h-u*m*v,this._y=u*m*h+p*c*v,this._z=u*c*v+p*m*h,this._w=u*c*h-p*m*v;break;case"ZYX":this._x=p*c*h-u*m*v,this._y=u*m*h+p*c*v,this._z=u*c*v-p*m*h,this._w=u*c*h+p*m*v;break;case"YZX":this._x=p*c*h+u*m*v,this._y=u*m*h+p*c*v,this._z=u*c*v-p*m*h,this._w=u*c*h-p*m*v;break;case"XZY":this._x=p*c*h-u*m*v,this._y=u*m*h-p*c*v,this._z=u*c*v+p*m*h,this._w=u*c*h+p*m*v;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],o=t[1],a=t[5],l=t[9],u=t[2],c=t[6],h=t[10],p=i+a+h;if(p>0){const m=.5/Math.sqrt(p+1);this._w=.25/m,this._x=(c-l)*m,this._y=(s-u)*m,this._z=(o-r)*m}else if(i>a&&i>h){const m=2*Math.sqrt(1+i-a-h);this._w=(c-l)/m,this._x=.25*m,this._y=(r+o)/m,this._z=(s+u)/m}else if(a>h){const m=2*Math.sqrt(1+a-i-h);this._w=(s-u)/m,this._x=(r+o)/m,this._y=.25*m,this._z=(l+c)/m}else{const m=2*Math.sqrt(1+h-i-a);this._w=(o-r)/m,this._x=(s+u)/m,this._y=(l+c)/m,this._z=.25*m}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Hn(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,o=e._w,a=t._x,l=t._y,u=t._z,c=t._w;return this._x=i*c+o*a+r*u-s*l,this._y=r*c+o*l+s*a-i*u,this._z=s*c+o*u+i*l-r*a,this._w=o*c-i*a-r*l-s*u,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,r=this._y,s=this._z,o=this._w;let a=o*e._w+i*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const m=1-t;return this._w=m*o+t*this._w,this._x=m*i+t*this._x,this._y=m*r+t*this._y,this._z=m*s+t*this._z,this.normalize(),this}const u=Math.sqrt(l),c=Math.atan2(u,a),h=Math.sin((1-t)*c)/u,p=Math.sin(t*c)/u;return this._w=o*h+this._w*p,this._x=i*h+this._x*p,this._y=r*h+this._y*p,this._z=s*h+this._z*p,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),s=Math.sqrt(i);return this.set(r*Math.sin(e),r*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class H{constructor(e=0,t=0,i=0){H.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(nT.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(nT.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z,l=e.w,u=2*(o*r-a*i),c=2*(a*t-s*r),h=2*(s*i-o*t);return this.x=t+l*u+o*h-a*c,this.y=i+l*c+a*u-s*h,this.z=r+l*h+s*c-o*u,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=r*l-s*a,this.y=s*o-i*l,this.z=i*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return J_.copy(this).projectOnVector(e),this.sub(J_)}reflect(e){return this.sub(J_.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Hn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const J_=new H,nT=new vi;class Gi{constructor(e=new H(1/0,1/0,1/0),t=new H(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(vs.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(vs.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=vs.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const s=i.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,a=s.count;o<a;o++)e.isMesh===!0?e.getVertexPosition(o,vs):vs.fromBufferAttribute(s,o),vs.applyMatrix4(e.matrixWorld),this.expandByPoint(vs);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),e1.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),e1.copy(i.boundingBox)),e1.applyMatrix4(e.matrixWorld),this.union(e1)}const r=e.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,vs),vs.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Mh),t1.subVectors(this.max,Mh),rc.subVectors(e.a,Mh),sc.subVectors(e.b,Mh),oc.subVectors(e.c,Mh),ca.subVectors(sc,rc),fa.subVectors(oc,sc),Pl.subVectors(rc,oc);let t=[0,-ca.z,ca.y,0,-fa.z,fa.y,0,-Pl.z,Pl.y,ca.z,0,-ca.x,fa.z,0,-fa.x,Pl.z,0,-Pl.x,-ca.y,ca.x,0,-fa.y,fa.x,0,-Pl.y,Pl.x,0];return!K_(t,rc,sc,oc,t1)||(t=[1,0,0,0,1,0,0,0,1],!K_(t,rc,sc,oc,t1))?!1:(n1.crossVectors(ca,fa),t=[n1.x,n1.y,n1.z],K_(t,rc,sc,oc,t1))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,vs).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(vs).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Ao[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Ao[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Ao[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Ao[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Ao[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Ao[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Ao[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Ao[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Ao),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Ao=[new H,new H,new H,new H,new H,new H,new H,new H],vs=new H,e1=new Gi,rc=new H,sc=new H,oc=new H,ca=new H,fa=new H,Pl=new H,Mh=new H,t1=new H,n1=new H,Bl=new H;function K_(n,e,t,i,r){for(let s=0,o=n.length-3;s<=o;s+=3){Bl.fromArray(n,s);const a=r.x*Math.abs(Bl.x)+r.y*Math.abs(Bl.y)+r.z*Math.abs(Bl.z),l=e.dot(Bl),u=t.dot(Bl),c=i.dot(Bl);if(Math.max(-Math.max(l,u,c),Math.min(l,u,c))>a)return!1}return!0}const UW=new Gi,wh=new H,Y_=new H;class Ti{constructor(e=new H,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):UW.setFromPoints(e).getCenter(i);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;wh.subVectors(e,this.center);const t=wh.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.addScaledVector(wh,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(Y_.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(wh.copy(e.center).add(Y_)),this.expandByPoint(wh.copy(e.center).sub(Y_))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const So=new H,Z_=new H,i1=new H,ha=new H,q_=new H,r1=new H,Q_=new H;class Fu{constructor(e=new H,t=new H(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,So)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=So.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(So.copy(this.origin).addScaledVector(this.direction,t),So.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){Z_.copy(e).add(t).multiplyScalar(.5),i1.copy(t).sub(e).normalize(),ha.copy(this.origin).sub(Z_);const s=e.distanceTo(t)*.5,o=-this.direction.dot(i1),a=ha.dot(this.direction),l=-ha.dot(i1),u=ha.lengthSq(),c=Math.abs(1-o*o);let h,p,m,v;if(c>0)if(h=o*l-a,p=o*a-l,v=s*c,h>=0)if(p>=-v)if(p<=v){const A=1/c;h*=A,p*=A,m=h*(h+o*p+2*a)+p*(o*h+p+2*l)+u}else p=s,h=Math.max(0,-(o*p+a)),m=-h*h+p*(p+2*l)+u;else p=-s,h=Math.max(0,-(o*p+a)),m=-h*h+p*(p+2*l)+u;else p<=-v?(h=Math.max(0,-(-o*s+a)),p=h>0?-s:Math.min(Math.max(-s,-l),s),m=-h*h+p*(p+2*l)+u):p<=v?(h=0,p=Math.min(Math.max(-s,-l),s),m=p*(p+2*l)+u):(h=Math.max(0,-(o*s+a)),p=h>0?s:Math.min(Math.max(-s,-l),s),m=-h*h+p*(p+2*l)+u);else p=o>0?-s:s,h=Math.max(0,-(o*p+a)),m=-h*h+p*(p+2*l)+u;return i&&i.copy(this.origin).addScaledVector(this.direction,h),r&&r.copy(Z_).addScaledVector(i1,p),m}intersectSphere(e,t){So.subVectors(e.center,this.origin);const i=So.dot(this.direction),r=So.dot(So)-i*i,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=i-o,l=i+o;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,o,a,l;const u=1/this.direction.x,c=1/this.direction.y,h=1/this.direction.z,p=this.origin;return u>=0?(i=(e.min.x-p.x)*u,r=(e.max.x-p.x)*u):(i=(e.max.x-p.x)*u,r=(e.min.x-p.x)*u),c>=0?(s=(e.min.y-p.y)*c,o=(e.max.y-p.y)*c):(s=(e.max.y-p.y)*c,o=(e.min.y-p.y)*c),i>o||s>r||((s>i||isNaN(i))&&(i=s),(o<r||isNaN(r))&&(r=o),h>=0?(a=(e.min.z-p.z)*h,l=(e.max.z-p.z)*h):(a=(e.max.z-p.z)*h,l=(e.min.z-p.z)*h),i>l||a>r)||((a>i||i!==i)&&(i=a),(l<r||r!==r)&&(r=l),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,So)!==null}intersectTriangle(e,t,i,r,s){q_.subVectors(t,e),r1.subVectors(i,e),Q_.crossVectors(q_,r1);let o=this.direction.dot(Q_),a;if(o>0){if(r)return null;a=1}else if(o<0)a=-1,o=-o;else return null;ha.subVectors(this.origin,e);const l=a*this.direction.dot(r1.crossVectors(ha,r1));if(l<0)return null;const u=a*this.direction.dot(q_.cross(ha));if(u<0||l+u>o)return null;const c=-a*ha.dot(Q_);return c<0?null:this.at(c/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class xt{constructor(e,t,i,r,s,o,a,l,u,c,h,p,m,v,A,_){xt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,o,a,l,u,c,h,p,m,v,A,_)}set(e,t,i,r,s,o,a,l,u,c,h,p,m,v,A,_){const g=this.elements;return g[0]=e,g[4]=t,g[8]=i,g[12]=r,g[1]=s,g[5]=o,g[9]=a,g[13]=l,g[2]=u,g[6]=c,g[10]=h,g[14]=p,g[3]=m,g[7]=v,g[11]=A,g[15]=_,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new xt().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/ac.setFromMatrixColumn(e,0).length(),s=1/ac.setFromMatrixColumn(e,1).length(),o=1/ac.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,s=e.z,o=Math.cos(i),a=Math.sin(i),l=Math.cos(r),u=Math.sin(r),c=Math.cos(s),h=Math.sin(s);if(e.order==="XYZ"){const p=o*c,m=o*h,v=a*c,A=a*h;t[0]=l*c,t[4]=-l*h,t[8]=u,t[1]=m+v*u,t[5]=p-A*u,t[9]=-a*l,t[2]=A-p*u,t[6]=v+m*u,t[10]=o*l}else if(e.order==="YXZ"){const p=l*c,m=l*h,v=u*c,A=u*h;t[0]=p+A*a,t[4]=v*a-m,t[8]=o*u,t[1]=o*h,t[5]=o*c,t[9]=-a,t[2]=m*a-v,t[6]=A+p*a,t[10]=o*l}else if(e.order==="ZXY"){const p=l*c,m=l*h,v=u*c,A=u*h;t[0]=p-A*a,t[4]=-o*h,t[8]=v+m*a,t[1]=m+v*a,t[5]=o*c,t[9]=A-p*a,t[2]=-o*u,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const p=o*c,m=o*h,v=a*c,A=a*h;t[0]=l*c,t[4]=v*u-m,t[8]=p*u+A,t[1]=l*h,t[5]=A*u+p,t[9]=m*u-v,t[2]=-u,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const p=o*l,m=o*u,v=a*l,A=a*u;t[0]=l*c,t[4]=A-p*h,t[8]=v*h+m,t[1]=h,t[5]=o*c,t[9]=-a*c,t[2]=-u*c,t[6]=m*h+v,t[10]=p-A*h}else if(e.order==="XZY"){const p=o*l,m=o*u,v=a*l,A=a*u;t[0]=l*c,t[4]=-h,t[8]=u*c,t[1]=p*h+A,t[5]=o*c,t[9]=m*h-v,t[2]=v*h-m,t[6]=a*c,t[10]=A*h+p}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(kW,e,zW)}lookAt(e,t,i){const r=this.elements;return Cr.subVectors(e,t),Cr.lengthSq()===0&&(Cr.z=1),Cr.normalize(),da.crossVectors(i,Cr),da.lengthSq()===0&&(Math.abs(i.z)===1?Cr.x+=1e-4:Cr.z+=1e-4,Cr.normalize(),da.crossVectors(i,Cr)),da.normalize(),s1.crossVectors(Cr,da),r[0]=da.x,r[4]=s1.x,r[8]=Cr.x,r[1]=da.y,r[5]=s1.y,r[9]=Cr.y,r[2]=da.z,r[6]=s1.z,r[10]=Cr.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[4],l=i[8],u=i[12],c=i[1],h=i[5],p=i[9],m=i[13],v=i[2],A=i[6],_=i[10],g=i[14],S=i[3],x=i[7],E=i[11],b=i[15],T=r[0],P=r[4],I=r[8],z=r[12],w=r[1],D=r[5],Q=r[9],ie=r[13],j=r[2],se=r[6],oe=r[10],pe=r[14],N=r[3],X=r[7],J=r[11],ae=r[15];return s[0]=o*T+a*w+l*j+u*N,s[4]=o*P+a*D+l*se+u*X,s[8]=o*I+a*Q+l*oe+u*J,s[12]=o*z+a*ie+l*pe+u*ae,s[1]=c*T+h*w+p*j+m*N,s[5]=c*P+h*D+p*se+m*X,s[9]=c*I+h*Q+p*oe+m*J,s[13]=c*z+h*ie+p*pe+m*ae,s[2]=v*T+A*w+_*j+g*N,s[6]=v*P+A*D+_*se+g*X,s[10]=v*I+A*Q+_*oe+g*J,s[14]=v*z+A*ie+_*pe+g*ae,s[3]=S*T+x*w+E*j+b*N,s[7]=S*P+x*D+E*se+b*X,s[11]=S*I+x*Q+E*oe+b*J,s[15]=S*z+x*ie+E*pe+b*ae,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],o=e[1],a=e[5],l=e[9],u=e[13],c=e[2],h=e[6],p=e[10],m=e[14],v=e[3],A=e[7],_=e[11],g=e[15];return v*(+s*l*h-r*u*h-s*a*p+i*u*p+r*a*m-i*l*m)+A*(+t*l*m-t*u*p+s*o*p-r*o*m+r*u*c-s*l*c)+_*(+t*u*h-t*a*m-s*o*h+i*o*m+s*a*c-i*u*c)+g*(-r*a*c-t*l*h+t*a*p+r*o*h-i*o*p+i*l*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],c=e[8],h=e[9],p=e[10],m=e[11],v=e[12],A=e[13],_=e[14],g=e[15],S=h*_*u-A*p*u+A*l*m-a*_*m-h*l*g+a*p*g,x=v*p*u-c*_*u-v*l*m+o*_*m+c*l*g-o*p*g,E=c*A*u-v*h*u+v*a*m-o*A*m-c*a*g+o*h*g,b=v*h*l-c*A*l-v*a*p+o*A*p+c*a*_-o*h*_,T=t*S+i*x+r*E+s*b;if(T===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const P=1/T;return e[0]=S*P,e[1]=(A*p*s-h*_*s-A*r*m+i*_*m+h*r*g-i*p*g)*P,e[2]=(a*_*s-A*l*s+A*r*u-i*_*u-a*r*g+i*l*g)*P,e[3]=(h*l*s-a*p*s-h*r*u+i*p*u+a*r*m-i*l*m)*P,e[4]=x*P,e[5]=(c*_*s-v*p*s+v*r*m-t*_*m-c*r*g+t*p*g)*P,e[6]=(v*l*s-o*_*s-v*r*u+t*_*u+o*r*g-t*l*g)*P,e[7]=(o*p*s-c*l*s+c*r*u-t*p*u-o*r*m+t*l*m)*P,e[8]=E*P,e[9]=(v*h*s-c*A*s-v*i*m+t*A*m+c*i*g-t*h*g)*P,e[10]=(o*A*s-v*a*s+v*i*u-t*A*u-o*i*g+t*a*g)*P,e[11]=(c*a*s-o*h*s-c*i*u+t*h*u+o*i*m-t*a*m)*P,e[12]=b*P,e[13]=(c*A*r-v*h*r+v*i*p-t*A*p-c*i*_+t*h*_)*P,e[14]=(v*a*r-o*A*r-v*i*l+t*A*l+o*i*_-t*a*_)*P,e[15]=(o*h*r-c*a*r+c*i*l-t*h*l-o*i*p+t*a*p)*P,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,o=e.x,a=e.y,l=e.z,u=s*o,c=s*a;return this.set(u*o+i,u*a-r*l,u*l+r*a,0,u*a+r*l,c*a+i,c*l-r*o,0,u*l-r*a,c*l+r*o,s*l*l+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,o){return this.set(1,i,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,u=s+s,c=o+o,h=a+a,p=s*u,m=s*c,v=s*h,A=o*c,_=o*h,g=a*h,S=l*u,x=l*c,E=l*h,b=i.x,T=i.y,P=i.z;return r[0]=(1-(A+g))*b,r[1]=(m+E)*b,r[2]=(v-x)*b,r[3]=0,r[4]=(m-E)*T,r[5]=(1-(p+g))*T,r[6]=(_+S)*T,r[7]=0,r[8]=(v+x)*P,r[9]=(_-S)*P,r[10]=(1-(p+A))*P,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=ac.set(r[0],r[1],r[2]).length();const o=ac.set(r[4],r[5],r[6]).length(),a=ac.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],ys.copy(this);const u=1/s,c=1/o,h=1/a;return ys.elements[0]*=u,ys.elements[1]*=u,ys.elements[2]*=u,ys.elements[4]*=c,ys.elements[5]*=c,ys.elements[6]*=c,ys.elements[8]*=h,ys.elements[9]*=h,ys.elements[10]*=h,t.setFromRotationMatrix(ys),i.x=s,i.y=o,i.z=a,this}makePerspective(e,t,i,r,s,o,a=Ys){const l=this.elements,u=2*s/(t-e),c=2*s/(i-r),h=(t+e)/(t-e),p=(i+r)/(i-r);let m,v;if(a===Ys)m=-(o+s)/(o-s),v=-2*o*s/(o-s);else if(a===qd)m=-o/(o-s),v=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=u,l[4]=0,l[8]=h,l[12]=0,l[1]=0,l[5]=c,l[9]=p,l[13]=0,l[2]=0,l[6]=0,l[10]=m,l[14]=v,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,i,r,s,o,a=Ys){const l=this.elements,u=1/(t-e),c=1/(i-r),h=1/(o-s),p=(t+e)*u,m=(i+r)*c;let v,A;if(a===Ys)v=(o+s)*h,A=-2*h;else if(a===qd)v=s*h,A=-1*h;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*u,l[4]=0,l[8]=0,l[12]=-p,l[1]=0,l[5]=2*c,l[9]=0,l[13]=-m,l[2]=0,l[6]=0,l[10]=A,l[14]=-v,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const ac=new H,ys=new xt,kW=new H(0,0,0),zW=new H(1,1,1),da=new H,s1=new H,Cr=new H,iT=new xt,rT=new vi;class yr{constructor(e=0,t=0,i=0,r=yr.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const r=e.elements,s=r[0],o=r[4],a=r[8],l=r[1],u=r[5],c=r[9],h=r[2],p=r[6],m=r[10];switch(t){case"XYZ":this._y=Math.asin(Hn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-c,m),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(p,u),this._z=0);break;case"YXZ":this._x=Math.asin(-Hn(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(a,m),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-h,s),this._z=0);break;case"ZXY":this._x=Math.asin(Hn(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(-h,m),this._z=Math.atan2(-o,u)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-Hn(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(p,m),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,u));break;case"YZX":this._z=Math.asin(Hn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-c,u),this._y=Math.atan2(-h,s)):(this._x=0,this._y=Math.atan2(a,m));break;case"XZY":this._z=Math.asin(-Hn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(p,u),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-c,m),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return iT.makeRotationFromQuaternion(e),this.setFromRotationMatrix(iT,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return rT.setFromEuler(this),this.setFromQuaternion(rT,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}yr.DEFAULT_ORDER="XYZ";class yu{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let HW=0;const sT=new H,lc=new vi,Co=new xt,o1=new H,Th=new H,GW=new H,VW=new vi,oT=new H(1,0,0),aT=new H(0,1,0),lT=new H(0,0,1),WW={type:"added"},jW={type:"removed"},$_={type:"childadded",child:null},ex={type:"childremoved",child:null};class qt extends fo{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:HW++}),this.uuid=Br(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=qt.DEFAULT_UP.clone();const e=new H,t=new yr,i=new vi,r=new H(1,1,1);function s(){i.setFromEuler(t,!1)}function o(){t.setFromQuaternion(i,void 0,!1)}t._onChange(s),i._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new xt},normalMatrix:{value:new Ft}}),this.matrix=new xt,this.matrixWorld=new xt,this.matrixAutoUpdate=qt.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=qt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new yu,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return lc.setFromAxisAngle(e,t),this.quaternion.multiply(lc),this}rotateOnWorldAxis(e,t){return lc.setFromAxisAngle(e,t),this.quaternion.premultiply(lc),this}rotateX(e){return this.rotateOnAxis(oT,e)}rotateY(e){return this.rotateOnAxis(aT,e)}rotateZ(e){return this.rotateOnAxis(lT,e)}translateOnAxis(e,t){return sT.copy(e).applyQuaternion(this.quaternion),this.position.add(sT.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(oT,e)}translateY(e){return this.translateOnAxis(aT,e)}translateZ(e){return this.translateOnAxis(lT,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Co.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?o1.copy(e):o1.set(e,t,i);const r=this.parent;this.updateWorldMatrix(!0,!1),Th.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Co.lookAt(Th,o1,this.up):Co.lookAt(o1,Th,this.up),this.quaternion.setFromRotationMatrix(Co),r&&(Co.extractRotation(r.matrixWorld),lc.setFromRotationMatrix(Co),this.quaternion.premultiply(lc.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(WW),$_.child=e,this.dispatchEvent($_),$_.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(jW),ex.child=e,this.dispatchEvent(ex),ex.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Co.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Co.multiply(e.parent.matrixWorld)),e.applyMatrix4(Co),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i<r;i++){const o=this.children[i].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t,i=[]){this[e]===t&&i.push(this);const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].getObjectsByProperty(e,t,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Th,e,GW),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Th,VW,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,r=t.length;i<r;i++){const s=t[i];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.matrixWorldAutoUpdate===!0&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const r=this.children;for(let s=0,o=r.length;s<o;s++){const a=r[s];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.visibility=this._visibility,r.active=this._active,r.bounds=this._bounds.map(a=>({boxInitialized:a.boxInitialized,boxMin:a.box.min.toArray(),boxMax:a.box.max.toArray(),sphereInitialized:a.sphereInitialized,sphereRadius:a.sphere.radius,sphereCenter:a.sphere.center.toArray()})),r.maxGeometryCount=this._maxGeometryCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.geometryCount=this._geometryCount,r.matricesTexture=this._matricesTexture.toJSON(e),this.boundingSphere!==null&&(r.boundingSphere={center:r.boundingSphere.center.toArray(),radius:r.boundingSphere.radius}),this.boundingBox!==null&&(r.boundingBox={min:r.boundingBox.min.toArray(),max:r.boundingBox.max.toArray()}));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let u=0,c=l.length;u<c;u++){const h=l[u];s(e.shapes,h)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,u=this.material.length;l<u;l++)a.push(s(e.materials,this.material[l]));r.material=a}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let a=0;a<this.children.length;a++)r.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];r.animations.push(s(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),u=o(e.textures),c=o(e.images),h=o(e.shapes),p=o(e.skeletons),m=o(e.animations),v=o(e.nodes);a.length>0&&(i.geometries=a),l.length>0&&(i.materials=l),u.length>0&&(i.textures=u),c.length>0&&(i.images=c),h.length>0&&(i.shapes=h),p.length>0&&(i.skeletons=p),m.length>0&&(i.animations=m),v.length>0&&(i.nodes=v)}return i.object=r,i;function o(a){const l=[];for(const u in a){const c=a[u];delete c.metadata,l.push(c)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}qt.DEFAULT_UP=new H(0,1,0);qt.DEFAULT_MATRIX_AUTO_UPDATE=!0;qt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const _s=new H,Eo=new H,tx=new H,Mo=new H,uc=new H,cc=new H,uT=new H,nx=new H,ix=new H,rx=new H;class wr{constructor(e=new H,t=new H,i=new H){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),_s.subVectors(e,t),r.cross(_s);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){_s.subVectors(r,t),Eo.subVectors(i,t),tx.subVectors(e,t);const o=_s.dot(_s),a=_s.dot(Eo),l=_s.dot(tx),u=Eo.dot(Eo),c=Eo.dot(tx),h=o*u-a*a;if(h===0)return s.set(0,0,0),null;const p=1/h,m=(u*l-a*c)*p,v=(o*c-a*l)*p;return s.set(1-m-v,v,m)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,Mo)===null?!1:Mo.x>=0&&Mo.y>=0&&Mo.x+Mo.y<=1}static getInterpolation(e,t,i,r,s,o,a,l){return this.getBarycoord(e,t,i,r,Mo)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,Mo.x),l.addScaledVector(o,Mo.y),l.addScaledVector(a,Mo.z),l)}static isFrontFacing(e,t,i,r){return _s.subVectors(i,t),Eo.subVectors(e,t),_s.cross(Eo).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return _s.subVectors(this.c,this.b),Eo.subVectors(this.a,this.b),_s.cross(Eo).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return wr.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return wr.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,r,s){return wr.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return wr.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return wr.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let o,a;uc.subVectors(r,i),cc.subVectors(s,i),nx.subVectors(e,i);const l=uc.dot(nx),u=cc.dot(nx);if(l<=0&&u<=0)return t.copy(i);ix.subVectors(e,r);const c=uc.dot(ix),h=cc.dot(ix);if(c>=0&&h<=c)return t.copy(r);const p=l*h-c*u;if(p<=0&&l>=0&&c<=0)return o=l/(l-c),t.copy(i).addScaledVector(uc,o);rx.subVectors(e,s);const m=uc.dot(rx),v=cc.dot(rx);if(v>=0&&m<=v)return t.copy(s);const A=m*u-l*v;if(A<=0&&u>=0&&v<=0)return a=u/(u-v),t.copy(i).addScaledVector(cc,a);const _=c*v-m*h;if(_<=0&&h-c>=0&&m-v>=0)return uT.subVectors(s,r),a=(h-c)/(h-c+(m-v)),t.copy(r).addScaledVector(uT,a);const g=1/(_+A+p);return o=A*g,a=p*g,t.copy(i).addScaledVector(uc,o).addScaledVector(cc,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const $P={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},pa={h:0,s:0,l:0},a1={h:0,s:0,l:0};function sx(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class qe{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=ts){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,an.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=an.workingColorSpace){return this.r=e,this.g=t,this.b=i,an.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=an.workingColorSpace){if(e=TC(e,1),t=Hn(t,0,1),i=Hn(i,0,1),t===0)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+t):i+t-i*t,o=2*i-s;this.r=sx(o,s,e+1/3),this.g=sx(o,s,e),this.b=sx(o,s,e-1/3)}return an.toWorkingColorSpace(this,r),this}setStyle(e,t=ts){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=r[1],a=r[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=ts){const i=$P[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=uf(e.r),this.g=uf(e.g),this.b=uf(e.b),this}copyLinearToSRGB(e){return this.r=j_(e.r),this.g=j_(e.g),this.b=j_(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=ts){return an.fromWorkingColorSpace(Ni.copy(this),e),Math.round(Hn(Ni.r*255,0,255))*65536+Math.round(Hn(Ni.g*255,0,255))*256+Math.round(Hn(Ni.b*255,0,255))}getHexString(e=ts){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=an.workingColorSpace){an.fromWorkingColorSpace(Ni.copy(this),t);const i=Ni.r,r=Ni.g,s=Ni.b,o=Math.max(i,r,s),a=Math.min(i,r,s);let l,u;const c=(a+o)/2;if(a===o)l=0,u=0;else{const h=o-a;switch(u=c<=.5?h/(o+a):h/(2-o-a),o){case i:l=(r-s)/h+(r<s?6:0);break;case r:l=(s-i)/h+2;break;case s:l=(i-r)/h+4;break}l/=6}return e.h=l,e.s=u,e.l=c,e}getRGB(e,t=an.workingColorSpace){return an.fromWorkingColorSpace(Ni.copy(this),t),e.r=Ni.r,e.g=Ni.g,e.b=Ni.b,e}getStyle(e=ts){an.fromWorkingColorSpace(Ni.copy(this),e);const t=Ni.r,i=Ni.g,r=Ni.b;return e!==ts?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,t,i){return this.getHSL(pa),this.setHSL(pa.h+e,pa.s+t,pa.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(pa),e.getHSL(a1);const i=dd(pa.h,a1.h,t),r=dd(pa.s,a1.s,t),s=dd(pa.l,a1.l,t);return this.setHSL(i,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*i+s[6]*r,this.g=s[1]*t+s[4]*i+s[7]*r,this.b=s[2]*t+s[5]*i+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Ni=new qe;qe.NAMES=$P;let XW=0;class ti extends fo{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:XW++}),this.uuid=Br(),this.name="",this.type="Material",this.blending=gu,this.side=lo,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=vg,this.blendDst=yg,this.blendEquation=Pa,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new qe(0,0,0),this.blendAlpha=0,this.depthFunc=Vd,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=rA,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=ql,this.stencilZFail=ql,this.stencilZPass=ql,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==gu&&(i.blending=this.blending),this.side!==lo&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==vg&&(i.blendSrc=this.blendSrc),this.blendDst!==yg&&(i.blendDst=this.blendDst),this.blendEquation!==Pa&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==Vd&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==rA&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==ql&&(i.stencilFail=this.stencilFail),this.stencilZFail!==ql&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==ql&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(t){const s=r(e.textures),o=r(e.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class br extends ti{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new qe(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new yr,this.combine=xp,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Fo=JW();function JW(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),r=new Uint32Array(512);for(let l=0;l<256;++l){const u=l-127;u<-27?(i[l]=0,i[l|256]=32768,r[l]=24,r[l|256]=24):u<-14?(i[l]=1024>>-u-14,i[l|256]=1024>>-u-14|32768,r[l]=-u-1,r[l|256]=-u-1):u<=15?(i[l]=u+15<<10,i[l|256]=u+15<<10|32768,r[l]=13,r[l|256]=13):u<128?(i[l]=31744,i[l|256]=64512,r[l]=24,r[l|256]=24):(i[l]=31744,i[l|256]=64512,r[l]=13,r[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let u=l<<13,c=0;for(;!(u&8388608);)u<<=1,c-=8388608;u&=-8388609,c+=947912704,s[l]=u|c}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:r,mantissaTable:s,exponentTable:o,offsetTable:a}}function ur(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=Hn(n,-65504,65504),Fo.floatView[0]=n;const e=Fo.uint32View[0],t=e>>23&511;return Fo.baseTable[t]+((e&8388607)>>Fo.shiftTable[t])}function Kh(n){const e=n>>10;return Fo.uint32View[0]=Fo.mantissaTable[Fo.offsetTable[e]+(n&1023)]+Fo.exponentTable[e],Fo.floatView[0]}const lu={toHalfFloat:ur,fromHalfFloat:Kh},Qn=new H,l1=new be;class $t{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=Zd,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=ei,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return qP("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)l1.fromBufferAttribute(this,t),l1.applyMatrix3(e),this.setXY(t,l1.x,l1.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)Qn.fromBufferAttribute(this,t),Qn.applyMatrix3(e),this.setXYZ(t,Qn.x,Qn.y,Qn.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)Qn.fromBufferAttribute(this,t),Qn.applyMatrix4(e),this.setXYZ(t,Qn.x,Qn.y,Qn.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Qn.fromBufferAttribute(this,t),Qn.applyNormalMatrix(e),this.setXYZ(t,Qn.x,Qn.y,Qn.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Qn.fromBufferAttribute(this,t),Qn.transformDirection(e),this.setXYZ(t,Qn.x,Qn.y,Qn.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=$i(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=Nt(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=$i(t,this.array)),t}setX(e,t){return this.normalized&&(t=Nt(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=$i(t,this.array)),t}setY(e,t){return this.normalized&&(t=Nt(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=$i(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Nt(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=$i(t,this.array)),t}setW(e,t){return this.normalized&&(t=Nt(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=Nt(t,this.array),i=Nt(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=Nt(t,this.array),i=Nt(i,this.array),r=Nt(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=Nt(t,this.array),i=Nt(i,this.array),r=Nt(r,this.array),s=Nt(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Zd&&(e.usage=this.usage),e}}class KW extends $t{constructor(e,t,i){super(new Int8Array(e),t,i)}}class YW extends $t{constructor(e,t,i){super(new Uint8Array(e),t,i)}}class ZW extends $t{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}}class qW extends $t{constructor(e,t,i){super(new Int16Array(e),t,i)}}class BC extends $t{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class QW extends $t{constructor(e,t,i){super(new Int32Array(e),t,i)}}class IC extends $t{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class $W extends $t{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}getX(e){let t=Kh(this.array[e*this.itemSize]);return this.normalized&&(t=$i(t,this.array)),t}setX(e,t){return this.normalized&&(t=Nt(t,this.array)),this.array[e*this.itemSize]=ur(t),this}getY(e){let t=Kh(this.array[e*this.itemSize+1]);return this.normalized&&(t=$i(t,this.array)),t}setY(e,t){return this.normalized&&(t=Nt(t,this.array)),this.array[e*this.itemSize+1]=ur(t),this}getZ(e){let t=Kh(this.array[e*this.itemSize+2]);return this.normalized&&(t=$i(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Nt(t,this.array)),this.array[e*this.itemSize+2]=ur(t),this}getW(e){let t=Kh(this.array[e*this.itemSize+3]);return this.normalized&&(t=$i(t,this.array)),t}setW(e,t){return this.normalized&&(t=Nt(t,this.array)),this.array[e*this.itemSize+3]=ur(t),this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=Nt(t,this.array),i=Nt(i,this.array)),this.array[e+0]=ur(t),this.array[e+1]=ur(i),this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=Nt(t,this.array),i=Nt(i,this.array),r=Nt(r,this.array)),this.array[e+0]=ur(t),this.array[e+1]=ur(i),this.array[e+2]=ur(r),this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=Nt(t,this.array),i=Nt(i,this.array),r=Nt(r,this.array),s=Nt(s,this.array)),this.array[e+0]=ur(t),this.array[e+1]=ur(i),this.array[e+2]=ur(r),this.array[e+3]=ur(s),this}}class pt extends $t{constructor(e,t,i){super(new Float32Array(e),t,i)}}let ej=0;const Zr=new xt,ox=new qt,fc=new H,Er=new Gi,bh=new Gi,hi=new H;class It extends fo{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:ej++}),this.uuid=Br(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(YP(e)?IC:BC)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new Ft().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Zr.makeRotationFromQuaternion(e),this.applyMatrix4(Zr),this}rotateX(e){return Zr.makeRotationX(e),this.applyMatrix4(Zr),this}rotateY(e){return Zr.makeRotationY(e),this.applyMatrix4(Zr),this}rotateZ(e){return Zr.makeRotationZ(e),this.applyMatrix4(Zr),this}translate(e,t,i){return Zr.makeTranslation(e,t,i),this.applyMatrix4(Zr),this}scale(e,t,i){return Zr.makeScale(e,t,i),this.applyMatrix4(Zr),this}lookAt(e){return ox.lookAt(e),ox.updateMatrix(),this.applyMatrix4(ox.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(fc).negate(),this.translate(fc.x,fc.y,fc.z),this}setFromPoints(e){const t=[];for(let i=0,r=e.length;i<r;i++){const s=e[i];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new pt(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Gi);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new H(-1/0,-1/0,-1/0),new H(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){const s=t[i];Er.setFromBufferAttribute(s),this.morphTargetsRelative?(hi.addVectors(this.boundingBox.min,Er.min),this.boundingBox.expandByPoint(hi),hi.addVectors(this.boundingBox.max,Er.max),this.boundingBox.expandByPoint(hi)):(this.boundingBox.expandByPoint(Er.min),this.boundingBox.expandByPoint(Er.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Ti);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new H,1/0);return}if(e){const i=this.boundingSphere.center;if(Er.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];bh.setFromBufferAttribute(a),this.morphTargetsRelative?(hi.addVectors(Er.min,bh.min),Er.expandByPoint(hi),hi.addVectors(Er.max,bh.max),Er.expandByPoint(hi)):(Er.expandByPoint(bh.min),Er.expandByPoint(bh.max))}Er.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)hi.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(hi));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let u=0,c=a.count;u<c;u++)hi.fromBufferAttribute(a,u),l&&(fc.fromBufferAttribute(e,u),hi.add(fc)),r=Math.max(r,i.distanceToSquared(hi))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=t.position,r=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new $t(new Float32Array(4*i.count),4));const o=this.getAttribute("tangent"),a=[],l=[];for(let I=0;I<i.count;I++)a[I]=new H,l[I]=new H;const u=new H,c=new H,h=new H,p=new be,m=new be,v=new be,A=new H,_=new H;function g(I,z,w){u.fromBufferAttribute(i,I),c.fromBufferAttribute(i,z),h.fromBufferAttribute(i,w),p.fromBufferAttribute(s,I),m.fromBufferAttribute(s,z),v.fromBufferAttribute(s,w),c.sub(u),h.sub(u),m.sub(p),v.sub(p);const D=1/(m.x*v.y-v.x*m.y);isFinite(D)&&(A.copy(c).multiplyScalar(v.y).addScaledVector(h,-m.y).multiplyScalar(D),_.copy(h).multiplyScalar(m.x).addScaledVector(c,-v.x).multiplyScalar(D),a[I].add(A),a[z].add(A),a[w].add(A),l[I].add(_),l[z].add(_),l[w].add(_))}let S=this.groups;S.length===0&&(S=[{start:0,count:e.count}]);for(let I=0,z=S.length;I<z;++I){const w=S[I],D=w.start,Q=w.count;for(let ie=D,j=D+Q;ie<j;ie+=3)g(e.getX(ie+0),e.getX(ie+1),e.getX(ie+2))}const x=new H,E=new H,b=new H,T=new H;function P(I){b.fromBufferAttribute(r,I),T.copy(b);const z=a[I];x.copy(z),x.sub(b.multiplyScalar(b.dot(z))).normalize(),E.crossVectors(T,z);const D=E.dot(l[I])<0?-1:1;o.setXYZW(I,x.x,x.y,x.z,D)}for(let I=0,z=S.length;I<z;++I){const w=S[I],D=w.start,Q=w.count;for(let ie=D,j=D+Q;ie<j;ie+=3)P(e.getX(ie+0)),P(e.getX(ie+1)),P(e.getX(ie+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new $t(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let p=0,m=i.count;p<m;p++)i.setXYZ(p,0,0,0);const r=new H,s=new H,o=new H,a=new H,l=new H,u=new H,c=new H,h=new H;if(e)for(let p=0,m=e.count;p<m;p+=3){const v=e.getX(p+0),A=e.getX(p+1),_=e.getX(p+2);r.fromBufferAttribute(t,v),s.fromBufferAttribute(t,A),o.fromBufferAttribute(t,_),c.subVectors(o,s),h.subVectors(r,s),c.cross(h),a.fromBufferAttribute(i,v),l.fromBufferAttribute(i,A),u.fromBufferAttribute(i,_),a.add(c),l.add(c),u.add(c),i.setXYZ(v,a.x,a.y,a.z),i.setXYZ(A,l.x,l.y,l.z),i.setXYZ(_,u.x,u.y,u.z)}else for(let p=0,m=t.count;p<m;p+=3)r.fromBufferAttribute(t,p+0),s.fromBufferAttribute(t,p+1),o.fromBufferAttribute(t,p+2),c.subVectors(o,s),h.subVectors(r,s),c.cross(h),i.setXYZ(p+0,c.x,c.y,c.z),i.setXYZ(p+1,c.x,c.y,c.z),i.setXYZ(p+2,c.x,c.y,c.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)hi.fromBufferAttribute(e,t),hi.normalize(),e.setXYZ(t,hi.x,hi.y,hi.z)}toNonIndexed(){function e(a,l){const u=a.array,c=a.itemSize,h=a.normalized,p=new u.constructor(l.length*c);let m=0,v=0;for(let A=0,_=l.length;A<_;A++){a.isInterleavedBufferAttribute?m=l[A]*a.data.stride+a.offset:m=l[A]*c;for(let g=0;g<c;g++)p[v++]=u[m++]}return new $t(p,c,h)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new It,i=this.index.array,r=this.attributes;for(const a in r){const l=r[a],u=e(l,i);t.setAttribute(a,u)}const s=this.morphAttributes;for(const a in s){const l=[],u=s[a];for(let c=0,h=u.length;c<h;c++){const p=u[c],m=e(p,i);l.push(m)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const u=o[a];t.addGroup(u.start,u.count,u.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const u in l)l[u]!==void 0&&(e[u]=l[u]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const l in i){const u=i[l];e.data.attributes[l]=u.toJSON(e.data)}const r={};let s=!1;for(const l in this.morphAttributes){const u=this.morphAttributes[l],c=[];for(let h=0,p=u.length;h<p;h++){const m=u[h];c.push(m.toJSON(e.data))}c.length>0&&(r[l]=c,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(t));const r=e.attributes;for(const u in r){const c=r[u];this.setAttribute(u,c.clone(t))}const s=e.morphAttributes;for(const u in s){const c=[],h=s[u];for(let p=0,m=h.length;p<m;p++)c.push(h[p].clone(t));this.morphAttributes[u]=c}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let u=0,c=o.length;u<c;u++){const h=o[u];this.addGroup(h.start,h.count,h.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const cT=new xt,Il=new Fu,u1=new Ti,fT=new H,hc=new H,dc=new H,pc=new H,ax=new H,c1=new H,f1=new be,h1=new be,d1=new be,hT=new H,dT=new H,pT=new H,p1=new H,m1=new H;class Vn extends qt{constructor(e=new It,t=new br){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const i=this.geometry,r=i.attributes.position,s=i.morphAttributes.position,o=i.morphTargetsRelative;t.fromBufferAttribute(r,e);const a=this.morphTargetInfluences;if(s&&a){c1.set(0,0,0);for(let l=0,u=s.length;l<u;l++){const c=a[l],h=s[l];c!==0&&(ax.fromBufferAttribute(h,e),o?c1.addScaledVector(ax,c):c1.addScaledVector(ax.sub(t),c))}t.add(c1)}return t}raycast(e,t){const i=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),u1.copy(i.boundingSphere),u1.applyMatrix4(s),Il.copy(e.ray).recast(e.near),!(u1.containsPoint(Il.origin)===!1&&(Il.intersectSphere(u1,fT)===null||Il.origin.distanceToSquared(fT)>(e.far-e.near)**2))&&(cT.copy(s).invert(),Il.copy(e.ray).applyMatrix4(cT),!(i.boundingBox!==null&&Il.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,Il)))}_computeIntersections(e,t,i){let r;const s=this.geometry,o=this.material,a=s.index,l=s.attributes.position,u=s.attributes.uv,c=s.attributes.uv1,h=s.attributes.normal,p=s.groups,m=s.drawRange;if(a!==null)if(Array.isArray(o))for(let v=0,A=p.length;v<A;v++){const _=p[v],g=o[_.materialIndex],S=Math.max(_.start,m.start),x=Math.min(a.count,Math.min(_.start+_.count,m.start+m.count));for(let E=S,b=x;E<b;E+=3){const T=a.getX(E),P=a.getX(E+1),I=a.getX(E+2);r=g1(this,g,e,i,u,c,h,T,P,I),r&&(r.faceIndex=Math.floor(E/3),r.face.materialIndex=_.materialIndex,t.push(r))}}else{const v=Math.max(0,m.start),A=Math.min(a.count,m.start+m.count);for(let _=v,g=A;_<g;_+=3){const S=a.getX(_),x=a.getX(_+1),E=a.getX(_+2);r=g1(this,o,e,i,u,c,h,S,x,E),r&&(r.faceIndex=Math.floor(_/3),t.push(r))}}else if(l!==void 0)if(Array.isArray(o))for(let v=0,A=p.length;v<A;v++){const _=p[v],g=o[_.materialIndex],S=Math.max(_.start,m.start),x=Math.min(l.count,Math.min(_.start+_.count,m.start+m.count));for(let E=S,b=x;E<b;E+=3){const T=E,P=E+1,I=E+2;r=g1(this,g,e,i,u,c,h,T,P,I),r&&(r.faceIndex=Math.floor(E/3),r.face.materialIndex=_.materialIndex,t.push(r))}}else{const v=Math.max(0,m.start),A=Math.min(l.count,m.start+m.count);for(let _=v,g=A;_<g;_+=3){const S=_,x=_+1,E=_+2;r=g1(this,o,e,i,u,c,h,S,x,E),r&&(r.faceIndex=Math.floor(_/3),t.push(r))}}}}function tj(n,e,t,i,r,s,o,a){let l;if(e.side===tr?l=i.intersectTriangle(o,s,r,!0,a):l=i.intersectTriangle(r,s,o,e.side===lo,a),l===null)return null;m1.copy(a),m1.applyMatrix4(n.matrixWorld);const u=t.ray.origin.distanceTo(m1);return u<t.near||u>t.far?null:{distance:u,point:m1.clone(),object:n}}function g1(n,e,t,i,r,s,o,a,l,u){n.getVertexPosition(a,hc),n.getVertexPosition(l,dc),n.getVertexPosition(u,pc);const c=tj(n,e,t,i,hc,dc,pc,p1);if(c){r&&(f1.fromBufferAttribute(r,a),h1.fromBufferAttribute(r,l),d1.fromBufferAttribute(r,u),c.uv=wr.getInterpolation(p1,hc,dc,pc,f1,h1,d1,new be)),s&&(f1.fromBufferAttribute(s,a),h1.fromBufferAttribute(s,l),d1.fromBufferAttribute(s,u),c.uv1=wr.getInterpolation(p1,hc,dc,pc,f1,h1,d1,new be)),o&&(hT.fromBufferAttribute(o,a),dT.fromBufferAttribute(o,l),pT.fromBufferAttribute(o,u),c.normal=wr.getInterpolation(p1,hc,dc,pc,hT,dT,pT,new H),c.normal.dot(i.direction)>0&&c.normal.multiplyScalar(-1));const h={a,b:l,c:u,normal:new H,materialIndex:0};wr.getNormal(hc,dc,pc,h.normal),c.face=h}return c}class Nu extends It{constructor(e=1,t=1,i=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const l=[],u=[],c=[],h=[];let p=0,m=0;v("z","y","x",-1,-1,i,t,e,o,s,0),v("z","y","x",1,-1,i,t,-e,o,s,1),v("x","z","y",1,1,e,i,t,r,o,2),v("x","z","y",1,-1,e,i,-t,r,o,3),v("x","y","z",1,-1,e,t,i,r,s,4),v("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(l),this.setAttribute("position",new pt(u,3)),this.setAttribute("normal",new pt(c,3)),this.setAttribute("uv",new pt(h,2));function v(A,_,g,S,x,E,b,T,P,I,z){const w=E/P,D=b/I,Q=E/2,ie=b/2,j=T/2,se=P+1,oe=I+1;let pe=0,N=0;const X=new H;for(let J=0;J<oe;J++){const ae=J*D-ie;for(let me=0;me<se;me++){const Ue=me*w-Q;X[A]=Ue*S,X[_]=ae*x,X[g]=j,u.push(X.x,X.y,X.z),X[A]=0,X[_]=0,X[g]=T>0?1:-1,c.push(X.x,X.y,X.z),h.push(me/P),h.push(1-J/I),pe+=1}}for(let J=0;J<I;J++)for(let ae=0;ae<P;ae++){const me=p+ae+se*J,Ue=p+ae+se*(J+1),he=p+(ae+1)+se*(J+1),Te=p+(ae+1)+se*J;l.push(me,Ue,Te),l.push(Ue,he,Te),N+=6}a.addGroup(m,N,z),m+=N,p+=pe}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Nu(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Mf(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function Zi(n){const e={};for(let t=0;t<n.length;t++){const i=Mf(n[t]);for(const r in i)e[r]=i[r]}return e}function nj(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function eB(n){return n.getRenderTarget()===null?n.outputColorSpace:an.workingColorSpace}const tB={clone:Mf,merge:Zi};var ij=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,rj=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class ds extends ti{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=ij,this.fragmentShader=rj,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1,clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Mf(e.uniforms),this.uniformsGroups=nj(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;o&&o.isTexture?t.uniforms[r]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[r]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[r]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[r]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[r]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[r]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[r]={type:"m4",value:o.toArray()}:t.uniforms[r]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class Sp extends qt{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new xt,this.projectionMatrix=new xt,this.projectionMatrixInverse=new xt,this.coordinateSystem=Ys}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const ma=new H,mT=new be,gT=new be;let Rn=class extends Sp{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Ef*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(vu*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Ef*2*Math.atan(Math.tan(vu*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){ma.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(ma.x,ma.y).multiplyScalar(-e/ma.z),ma.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(ma.x,ma.y).multiplyScalar(-e/ma.z)}getViewSize(e,t){return this.getViewBounds(e,mT,gT),t.subVectors(gT,mT)}setViewOffset(e,t,i,r,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(vu*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,u=o.fullHeight;s+=o.offsetX*r/l,t-=o.offsetY*i/u,r*=o.width/l,i*=o.height/u}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}};const mc=-90,gc=1;class nB extends qt{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new Rn(mc,gc,e,t);r.layers=this.layers,this.add(r);const s=new Rn(mc,gc,e,t);s.layers=this.layers,this.add(s);const o=new Rn(mc,gc,e,t);o.layers=this.layers,this.add(o);const a=new Rn(mc,gc,e,t);a.layers=this.layers,this.add(a);const l=new Rn(mc,gc,e,t);l.layers=this.layers,this.add(l);const u=new Rn(mc,gc,e,t);u.layers=this.layers,this.add(u)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,r,s,o,a,l]=t;for(const u of t)this.remove(u);if(e===Ys)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===qd)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const u of t)this.add(u),u.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,a,l,u,c]=this.children,h=e.getRenderTarget(),p=e.getActiveCubeFace(),m=e.getActiveMipmapLevel(),v=e.xr.enabled;e.xr.enabled=!1;const A=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(t,s),e.setRenderTarget(i,1,r),e.render(t,o),e.setRenderTarget(i,2,r),e.render(t,a),e.setRenderTarget(i,3,r),e.render(t,l),e.setRenderTarget(i,4,r),e.render(t,u),i.texture.generateMipmaps=A,e.setRenderTarget(i,5,r),e.render(t,c),e.setRenderTarget(h,p,m),e.xr.enabled=v,i.texture.needsPMREMUpdate=!0}}class Cp extends gn{constructor(e,t,i,r,s,o,a,l,u,c){e=e!==void 0?e:[],t=t!==void 0?t:uo,super(e,t,i,r,s,o,a,l,u,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class LC extends hs{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new Cp(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:rn}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new Nu(5,5,5),s=new ds({name:"CubemapFromEquirect",uniforms:Mf(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:tr,blending:Wo});s.uniforms.tEquirect.value=t;const o=new Vn(r,s),a=t.minFilter;return t.minFilter===as&&(t.minFilter=rn),new nB(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,i,r){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,i,r);e.setRenderTarget(s)}}const lx=new H,sj=new H,oj=new Ft;class Bo{constructor(e=new H(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=lx.subVectors(i,t).cross(sj.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(lx),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(i,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||oj.getNormalMatrix(e),r=this.coplanarPoint(lx).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Ll=new Ti,v1=new H;class Ep{constructor(e=new Bo,t=new Bo,i=new Bo,r=new Bo,s=new Bo,o=new Bo){this.planes=[e,t,i,r,s,o]}set(e,t,i,r,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=Ys){const i=this.planes,r=e.elements,s=r[0],o=r[1],a=r[2],l=r[3],u=r[4],c=r[5],h=r[6],p=r[7],m=r[8],v=r[9],A=r[10],_=r[11],g=r[12],S=r[13],x=r[14],E=r[15];if(i[0].setComponents(l-s,p-u,_-m,E-g).normalize(),i[1].setComponents(l+s,p+u,_+m,E+g).normalize(),i[2].setComponents(l+o,p+c,_+v,E+S).normalize(),i[3].setComponents(l-o,p-c,_-v,E-S).normalize(),i[4].setComponents(l-a,p-h,_-A,E-x).normalize(),t===Ys)i[5].setComponents(l+a,p+h,_+A,E+x).normalize();else if(t===qd)i[5].setComponents(a,h,A,x).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Ll.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Ll.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Ll)}intersectsSprite(e){return Ll.center.set(0,0,0),Ll.radius=.7071067811865476,Ll.applyMatrix4(e.matrixWorld),this.intersectsSphere(Ll)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(v1.x=r.normal.x>0?e.max.x:e.min.x,v1.y=r.normal.y>0?e.max.y:e.min.y,v1.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(v1)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function iB(){let n=null,e=!1,t=null,i=null;function r(s,o){t(s,o),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function aj(n,e){const t=e.isWebGL2,i=new WeakMap;function r(u,c){const h=u.array,p=u.usage,m=h.byteLength,v=n.createBuffer();n.bindBuffer(c,v),n.bufferData(c,h,p),u.onUploadCallback();let A;if(h instanceof Float32Array)A=n.FLOAT;else if(h instanceof Uint16Array)if(u.isFloat16BufferAttribute)if(t)A=n.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else A=n.UNSIGNED_SHORT;else if(h instanceof Int16Array)A=n.SHORT;else if(h instanceof Uint32Array)A=n.UNSIGNED_INT;else if(h instanceof Int32Array)A=n.INT;else if(h instanceof Int8Array)A=n.BYTE;else if(h instanceof Uint8Array)A=n.UNSIGNED_BYTE;else if(h instanceof Uint8ClampedArray)A=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+h);return{buffer:v,type:A,bytesPerElement:h.BYTES_PER_ELEMENT,version:u.version,size:m}}function s(u,c,h){const p=c.array,m=c._updateRange,v=c.updateRanges;if(n.bindBuffer(h,u),m.count===-1&&v.length===0&&n.bufferSubData(h,0,p),v.length!==0){for(let A=0,_=v.length;A<_;A++){const g=v[A];t?n.bufferSubData(h,g.start*p.BYTES_PER_ELEMENT,p,g.start,g.count):n.bufferSubData(h,g.start*p.BYTES_PER_ELEMENT,p.subarray(g.start,g.start+g.count))}c.clearUpdateRanges()}m.count!==-1&&(t?n.bufferSubData(h,m.offset*p.BYTES_PER_ELEMENT,p,m.offset,m.count):n.bufferSubData(h,m.offset*p.BYTES_PER_ELEMENT,p.subarray(m.offset,m.offset+m.count)),m.count=-1),c.onUploadCallback()}function o(u){return u.isInterleavedBufferAttribute&&(u=u.data),i.get(u)}function a(u){u.isInterleavedBufferAttribute&&(u=u.data);const c=i.get(u);c&&(n.deleteBuffer(c.buffer),i.delete(u))}function l(u,c){if(u.isGLBufferAttribute){const p=i.get(u);(!p||p.version<u.version)&&i.set(u,{buffer:u.buffer,type:u.type,bytesPerElement:u.elementSize,version:u.version});return}u.isInterleavedBufferAttribute&&(u=u.data);const h=i.get(u);if(h===void 0)i.set(u,r(u,c));else if(h.version<u.version){if(h.size!==u.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");s(h.buffer,u,c),h.version=u.version}}return{get:o,remove:a,update:l}}class Gf extends It{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,o=t/2,a=Math.floor(i),l=Math.floor(r),u=a+1,c=l+1,h=e/a,p=t/l,m=[],v=[],A=[],_=[];for(let g=0;g<c;g++){const S=g*p-o;for(let x=0;x<u;x++){const E=x*h-s;v.push(E,-S,0),A.push(0,0,1),_.push(x/a),_.push(1-g/l)}}for(let g=0;g<l;g++)for(let S=0;S<a;S++){const x=S+u*g,E=S+u*(g+1),b=S+1+u*(g+1),T=S+1+u*g;m.push(x,E,T),m.push(E,b,T)}this.setIndex(m),this.setAttribute("position",new pt(v,3)),this.setAttribute("normal",new pt(A,3)),this.setAttribute("uv",new pt(_,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Gf(e.width,e.height,e.widthSegments,e.heightSegments)}}var lj=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,uj=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,cj=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,fj=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,hj=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,dj=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,pj=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,mj=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,gj=`#ifdef USE_BATCHING
	attribute float batchId;
	uniform highp sampler2D batchingTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,vj=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( batchId );
#endif`,yj=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,_j=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,xj=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,Aj=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Sj=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Cj=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,Ej=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Mj=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,wj=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,Tj=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,bj=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,Rj=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,Pj=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,Bj=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,Ij=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,Lj=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Dj=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,Fj=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,Nj=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,Oj=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,Uj="gl_FragColor = linearToOutputTexel( gl_FragColor );",kj=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,zj=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,Hj=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,Gj=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,Vj=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,Wj=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,jj=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,Xj=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,Jj=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,Kj=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,Yj=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,Zj=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,qj=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,Qj=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,$j=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,eX=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,tX=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,nX=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,iX=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,rX=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,sX=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,oX=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,aX=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,lX=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,uX=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,cX=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,fX=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,hX=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,dX=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,pX=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,mX=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,gX=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,vX=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,yX=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,_X=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,xX=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,AX=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[MORPHTARGETS_COUNT];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,SX=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,CX=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,EX=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
	#endif
	#ifdef MORPHTARGETS_TEXTURE
		#ifndef USE_INSTANCING_MORPH
			uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		#endif
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,MX=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,wX=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,TX=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,bX=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,RX=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,PX=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,BX=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,IX=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,LX=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,DX=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,FX=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,NX=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,OX=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,UX=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,kX=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,zX=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,HX=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,GX=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,VX=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,WX=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,jX=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,XX=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,JX=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,KX=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,YX=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,ZX=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,qX=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,QX=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,$X=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,eJ=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,tJ=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	float startCompression = 0.8 - 0.04;
	float desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min(color.r, min(color.g, color.b));
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max(color.r, max(color.g, color.b));
	if (peak < startCompression) return color;
	float d = 1. - startCompression;
	float newPeak = 1. - d * d / (peak + d - startCompression);
	color *= newPeak / peak;
	float g = 1. - 1. / (desaturation * (peak - newPeak) + 1.);
	return mix(color, vec3(1, 1, 1), g);
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,nJ=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,iJ=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,rJ=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,sJ=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,oJ=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,aJ=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const lJ=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,uJ=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,cJ=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,fJ=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,hJ=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,dJ=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,pJ=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,mJ=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,gJ=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,vJ=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,yJ=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,_J=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,xJ=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,AJ=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,SJ=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,CJ=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,EJ=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,MJ=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,wJ=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,TJ=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,bJ=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,RJ=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,PJ=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,BJ=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,IJ=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,LJ=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,DJ=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,FJ=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,NJ=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,OJ=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,UJ=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,kJ=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,zJ=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,HJ=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Ot={alphahash_fragment:lj,alphahash_pars_fragment:uj,alphamap_fragment:cj,alphamap_pars_fragment:fj,alphatest_fragment:hj,alphatest_pars_fragment:dj,aomap_fragment:pj,aomap_pars_fragment:mj,batching_pars_vertex:gj,batching_vertex:vj,begin_vertex:yj,beginnormal_vertex:_j,bsdfs:xj,iridescence_fragment:Aj,bumpmap_pars_fragment:Sj,clipping_planes_fragment:Cj,clipping_planes_pars_fragment:Ej,clipping_planes_pars_vertex:Mj,clipping_planes_vertex:wj,color_fragment:Tj,color_pars_fragment:bj,color_pars_vertex:Rj,color_vertex:Pj,common:Bj,cube_uv_reflection_fragment:Ij,defaultnormal_vertex:Lj,displacementmap_pars_vertex:Dj,displacementmap_vertex:Fj,emissivemap_fragment:Nj,emissivemap_pars_fragment:Oj,colorspace_fragment:Uj,colorspace_pars_fragment:kj,envmap_fragment:zj,envmap_common_pars_fragment:Hj,envmap_pars_fragment:Gj,envmap_pars_vertex:Vj,envmap_physical_pars_fragment:tX,envmap_vertex:Wj,fog_vertex:jj,fog_pars_vertex:Xj,fog_fragment:Jj,fog_pars_fragment:Kj,gradientmap_pars_fragment:Yj,lightmap_fragment:Zj,lightmap_pars_fragment:qj,lights_lambert_fragment:Qj,lights_lambert_pars_fragment:$j,lights_pars_begin:eX,lights_toon_fragment:nX,lights_toon_pars_fragment:iX,lights_phong_fragment:rX,lights_phong_pars_fragment:sX,lights_physical_fragment:oX,lights_physical_pars_fragment:aX,lights_fragment_begin:lX,lights_fragment_maps:uX,lights_fragment_end:cX,logdepthbuf_fragment:fX,logdepthbuf_pars_fragment:hX,logdepthbuf_pars_vertex:dX,logdepthbuf_vertex:pX,map_fragment:mX,map_pars_fragment:gX,map_particle_fragment:vX,map_particle_pars_fragment:yX,metalnessmap_fragment:_X,metalnessmap_pars_fragment:xX,morphinstance_vertex:AX,morphcolor_vertex:SX,morphnormal_vertex:CX,morphtarget_pars_vertex:EX,morphtarget_vertex:MX,normal_fragment_begin:wX,normal_fragment_maps:TX,normal_pars_fragment:bX,normal_pars_vertex:RX,normal_vertex:PX,normalmap_pars_fragment:BX,clearcoat_normal_fragment_begin:IX,clearcoat_normal_fragment_maps:LX,clearcoat_pars_fragment:DX,iridescence_pars_fragment:FX,opaque_fragment:NX,packing:OX,premultiplied_alpha_fragment:UX,project_vertex:kX,dithering_fragment:zX,dithering_pars_fragment:HX,roughnessmap_fragment:GX,roughnessmap_pars_fragment:VX,shadowmap_pars_fragment:WX,shadowmap_pars_vertex:jX,shadowmap_vertex:XX,shadowmask_pars_fragment:JX,skinbase_vertex:KX,skinning_pars_vertex:YX,skinning_vertex:ZX,skinnormal_vertex:qX,specularmap_fragment:QX,specularmap_pars_fragment:$X,tonemapping_fragment:eJ,tonemapping_pars_fragment:tJ,transmission_fragment:nJ,transmission_pars_fragment:iJ,uv_pars_fragment:rJ,uv_pars_vertex:sJ,uv_vertex:oJ,worldpos_vertex:aJ,background_vert:lJ,background_frag:uJ,backgroundCube_vert:cJ,backgroundCube_frag:fJ,cube_vert:hJ,cube_frag:dJ,depth_vert:pJ,depth_frag:mJ,distanceRGBA_vert:gJ,distanceRGBA_frag:vJ,equirect_vert:yJ,equirect_frag:_J,linedashed_vert:xJ,linedashed_frag:AJ,meshbasic_vert:SJ,meshbasic_frag:CJ,meshlambert_vert:EJ,meshlambert_frag:MJ,meshmatcap_vert:wJ,meshmatcap_frag:TJ,meshnormal_vert:bJ,meshnormal_frag:RJ,meshphong_vert:PJ,meshphong_frag:BJ,meshphysical_vert:IJ,meshphysical_frag:LJ,meshtoon_vert:DJ,meshtoon_frag:FJ,points_vert:NJ,points_frag:OJ,shadow_vert:UJ,shadow_frag:kJ,sprite_vert:zJ,sprite_frag:HJ},Ze={common:{diffuse:{value:new qe(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Ft},alphaMap:{value:null},alphaMapTransform:{value:new Ft},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Ft}},envmap:{envMap:{value:null},envMapRotation:{value:new Ft},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Ft}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Ft}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Ft},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Ft},normalScale:{value:new be(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Ft},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Ft}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Ft}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Ft}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new qe(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new qe(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Ft},alphaTest:{value:0},uvTransform:{value:new Ft}},sprite:{diffuse:{value:new qe(16777215)},opacity:{value:1},center:{value:new be(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Ft},alphaMap:{value:null},alphaMapTransform:{value:new Ft},alphaTest:{value:0}}},Ms={basic:{uniforms:Zi([Ze.common,Ze.specularmap,Ze.envmap,Ze.aomap,Ze.lightmap,Ze.fog]),vertexShader:Ot.meshbasic_vert,fragmentShader:Ot.meshbasic_frag},lambert:{uniforms:Zi([Ze.common,Ze.specularmap,Ze.envmap,Ze.aomap,Ze.lightmap,Ze.emissivemap,Ze.bumpmap,Ze.normalmap,Ze.displacementmap,Ze.fog,Ze.lights,{emissive:{value:new qe(0)}}]),vertexShader:Ot.meshlambert_vert,fragmentShader:Ot.meshlambert_frag},phong:{uniforms:Zi([Ze.common,Ze.specularmap,Ze.envmap,Ze.aomap,Ze.lightmap,Ze.emissivemap,Ze.bumpmap,Ze.normalmap,Ze.displacementmap,Ze.fog,Ze.lights,{emissive:{value:new qe(0)},specular:{value:new qe(1118481)},shininess:{value:30}}]),vertexShader:Ot.meshphong_vert,fragmentShader:Ot.meshphong_frag},standard:{uniforms:Zi([Ze.common,Ze.envmap,Ze.aomap,Ze.lightmap,Ze.emissivemap,Ze.bumpmap,Ze.normalmap,Ze.displacementmap,Ze.roughnessmap,Ze.metalnessmap,Ze.fog,Ze.lights,{emissive:{value:new qe(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Ot.meshphysical_vert,fragmentShader:Ot.meshphysical_frag},toon:{uniforms:Zi([Ze.common,Ze.aomap,Ze.lightmap,Ze.emissivemap,Ze.bumpmap,Ze.normalmap,Ze.displacementmap,Ze.gradientmap,Ze.fog,Ze.lights,{emissive:{value:new qe(0)}}]),vertexShader:Ot.meshtoon_vert,fragmentShader:Ot.meshtoon_frag},matcap:{uniforms:Zi([Ze.common,Ze.bumpmap,Ze.normalmap,Ze.displacementmap,Ze.fog,{matcap:{value:null}}]),vertexShader:Ot.meshmatcap_vert,fragmentShader:Ot.meshmatcap_frag},points:{uniforms:Zi([Ze.points,Ze.fog]),vertexShader:Ot.points_vert,fragmentShader:Ot.points_frag},dashed:{uniforms:Zi([Ze.common,Ze.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Ot.linedashed_vert,fragmentShader:Ot.linedashed_frag},depth:{uniforms:Zi([Ze.common,Ze.displacementmap]),vertexShader:Ot.depth_vert,fragmentShader:Ot.depth_frag},normal:{uniforms:Zi([Ze.common,Ze.bumpmap,Ze.normalmap,Ze.displacementmap,{opacity:{value:1}}]),vertexShader:Ot.meshnormal_vert,fragmentShader:Ot.meshnormal_frag},sprite:{uniforms:Zi([Ze.sprite,Ze.fog]),vertexShader:Ot.sprite_vert,fragmentShader:Ot.sprite_frag},background:{uniforms:{uvTransform:{value:new Ft},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Ot.background_vert,fragmentShader:Ot.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Ft}},vertexShader:Ot.backgroundCube_vert,fragmentShader:Ot.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Ot.cube_vert,fragmentShader:Ot.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Ot.equirect_vert,fragmentShader:Ot.equirect_frag},distanceRGBA:{uniforms:Zi([Ze.common,Ze.displacementmap,{referencePosition:{value:new H},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Ot.distanceRGBA_vert,fragmentShader:Ot.distanceRGBA_frag},shadow:{uniforms:Zi([Ze.lights,Ze.fog,{color:{value:new qe(0)},opacity:{value:1}}]),vertexShader:Ot.shadow_vert,fragmentShader:Ot.shadow_frag}};Ms.physical={uniforms:Zi([Ms.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Ft},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Ft},clearcoatNormalScale:{value:new be(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Ft},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Ft},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Ft},sheen:{value:0},sheenColor:{value:new qe(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Ft},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Ft},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Ft},transmissionSamplerSize:{value:new be},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Ft},attenuationDistance:{value:0},attenuationColor:{value:new qe(0)},specularColor:{value:new qe(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Ft},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Ft},anisotropyVector:{value:new be},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Ft}}]),vertexShader:Ot.meshphysical_vert,fragmentShader:Ot.meshphysical_frag};const y1={r:0,b:0,g:0},Dl=new yr,GJ=new xt;function VJ(n,e,t,i,r,s,o){const a=new qe(0);let l=s===!0?0:1,u,c,h=null,p=0,m=null;function v(_,g){let S=!1,x=g.isScene===!0?g.background:null;x&&x.isTexture&&(x=(g.backgroundBlurriness>0?t:e).get(x)),x===null?A(a,l):x&&x.isColor&&(A(x,1),S=!0);const E=n.xr.getEnvironmentBlendMode();E==="additive"?i.buffers.color.setClear(0,0,0,1,o):E==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,o),(n.autoClear||S)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),x&&(x.isCubeTexture||x.mapping===Hf)?(c===void 0&&(c=new Vn(new Nu(1,1,1),new ds({name:"BackgroundCubeMaterial",uniforms:Mf(Ms.backgroundCube.uniforms),vertexShader:Ms.backgroundCube.vertexShader,fragmentShader:Ms.backgroundCube.fragmentShader,side:tr,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(b,T,P){this.matrixWorld.copyPosition(P.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(c)),Dl.copy(g.backgroundRotation),Dl.x*=-1,Dl.y*=-1,Dl.z*=-1,x.isCubeTexture&&x.isRenderTargetTexture===!1&&(Dl.y*=-1,Dl.z*=-1),c.material.uniforms.envMap.value=x,c.material.uniforms.flipEnvMap.value=x.isCubeTexture&&x.isRenderTargetTexture===!1?-1:1,c.material.uniforms.backgroundBlurriness.value=g.backgroundBlurriness,c.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,c.material.uniforms.backgroundRotation.value.setFromMatrix4(GJ.makeRotationFromEuler(Dl)),c.material.toneMapped=an.getTransfer(x.colorSpace)!==pn,(h!==x||p!==x.version||m!==n.toneMapping)&&(c.material.needsUpdate=!0,h=x,p=x.version,m=n.toneMapping),c.layers.enableAll(),_.unshift(c,c.geometry,c.material,0,0,null)):x&&x.isTexture&&(u===void 0&&(u=new Vn(new Gf(2,2),new ds({name:"BackgroundMaterial",uniforms:Mf(Ms.background.uniforms),vertexShader:Ms.background.vertexShader,fragmentShader:Ms.background.fragmentShader,side:lo,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(u)),u.material.uniforms.t2D.value=x,u.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,u.material.toneMapped=an.getTransfer(x.colorSpace)!==pn,x.matrixAutoUpdate===!0&&x.updateMatrix(),u.material.uniforms.uvTransform.value.copy(x.matrix),(h!==x||p!==x.version||m!==n.toneMapping)&&(u.material.needsUpdate=!0,h=x,p=x.version,m=n.toneMapping),u.layers.enableAll(),_.unshift(u,u.geometry,u.material,0,0,null))}function A(_,g){_.getRGB(y1,eB(n)),i.buffers.color.setClear(y1.r,y1.g,y1.b,g,o)}return{getClearColor:function(){return a},setClearColor:function(_,g=1){a.set(_),l=g,A(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(_){l=_,A(a,l)},render:v}}function WJ(n,e,t,i){const r=n.getParameter(n.MAX_VERTEX_ATTRIBS),s=i.isWebGL2?null:e.get("OES_vertex_array_object"),o=i.isWebGL2||s!==null,a={},l=_(null);let u=l,c=!1;function h(j,se,oe,pe,N){let X=!1;if(o){const J=A(pe,oe,se);u!==J&&(u=J,m(u.object)),X=g(j,pe,oe,N),X&&S(j,pe,oe,N)}else{const J=se.wireframe===!0;(u.geometry!==pe.id||u.program!==oe.id||u.wireframe!==J)&&(u.geometry=pe.id,u.program=oe.id,u.wireframe=J,X=!0)}N!==null&&t.update(N,n.ELEMENT_ARRAY_BUFFER),(X||c)&&(c=!1,I(j,se,oe,pe),N!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.get(N).buffer))}function p(){return i.isWebGL2?n.createVertexArray():s.createVertexArrayOES()}function m(j){return i.isWebGL2?n.bindVertexArray(j):s.bindVertexArrayOES(j)}function v(j){return i.isWebGL2?n.deleteVertexArray(j):s.deleteVertexArrayOES(j)}function A(j,se,oe){const pe=oe.wireframe===!0;let N=a[j.id];N===void 0&&(N={},a[j.id]=N);let X=N[se.id];X===void 0&&(X={},N[se.id]=X);let J=X[pe];return J===void 0&&(J=_(p()),X[pe]=J),J}function _(j){const se=[],oe=[],pe=[];for(let N=0;N<r;N++)se[N]=0,oe[N]=0,pe[N]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:se,enabledAttributes:oe,attributeDivisors:pe,object:j,attributes:{},index:null}}function g(j,se,oe,pe){const N=u.attributes,X=se.attributes;let J=0;const ae=oe.getAttributes();for(const me in ae)if(ae[me].location>=0){const he=N[me];let Te=X[me];if(Te===void 0&&(me==="instanceMatrix"&&j.instanceMatrix&&(Te=j.instanceMatrix),me==="instanceColor"&&j.instanceColor&&(Te=j.instanceColor)),he===void 0||he.attribute!==Te||Te&&he.data!==Te.data)return!0;J++}return u.attributesNum!==J||u.index!==pe}function S(j,se,oe,pe){const N={},X=se.attributes;let J=0;const ae=oe.getAttributes();for(const me in ae)if(ae[me].location>=0){let he=X[me];he===void 0&&(me==="instanceMatrix"&&j.instanceMatrix&&(he=j.instanceMatrix),me==="instanceColor"&&j.instanceColor&&(he=j.instanceColor));const Te={};Te.attribute=he,he&&he.data&&(Te.data=he.data),N[me]=Te,J++}u.attributes=N,u.attributesNum=J,u.index=pe}function x(){const j=u.newAttributes;for(let se=0,oe=j.length;se<oe;se++)j[se]=0}function E(j){b(j,0)}function b(j,se){const oe=u.newAttributes,pe=u.enabledAttributes,N=u.attributeDivisors;oe[j]=1,pe[j]===0&&(n.enableVertexAttribArray(j),pe[j]=1),N[j]!==se&&((i.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](j,se),N[j]=se)}function T(){const j=u.newAttributes,se=u.enabledAttributes;for(let oe=0,pe=se.length;oe<pe;oe++)se[oe]!==j[oe]&&(n.disableVertexAttribArray(oe),se[oe]=0)}function P(j,se,oe,pe,N,X,J){J===!0?n.vertexAttribIPointer(j,se,oe,N,X):n.vertexAttribPointer(j,se,oe,pe,N,X)}function I(j,se,oe,pe){if(i.isWebGL2===!1&&(j.isInstancedMesh||pe.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;x();const N=pe.attributes,X=oe.getAttributes(),J=se.defaultAttributeValues;for(const ae in X){const me=X[ae];if(me.location>=0){let Ue=N[ae];if(Ue===void 0&&(ae==="instanceMatrix"&&j.instanceMatrix&&(Ue=j.instanceMatrix),ae==="instanceColor"&&j.instanceColor&&(Ue=j.instanceColor)),Ue!==void 0){const he=Ue.normalized,Te=Ue.itemSize,we=t.get(Ue);if(we===void 0)continue;const je=we.buffer,$e=we.type,nt=we.bytesPerElement,Et=i.isWebGL2===!0&&($e===n.INT||$e===n.UNSIGNED_INT||Ue.gpuType===vC);if(Ue.isInterleavedBufferAttribute){const et=Ue.data,Z=et.stride,De=Ue.offset;if(et.isInstancedInterleavedBuffer){for(let Re=0;Re<me.locationSize;Re++)b(me.location+Re,et.meshPerAttribute);j.isInstancedMesh!==!0&&pe._maxInstanceCount===void 0&&(pe._maxInstanceCount=et.meshPerAttribute*et.count)}else for(let Re=0;Re<me.locationSize;Re++)E(me.location+Re);n.bindBuffer(n.ARRAY_BUFFER,je);for(let Re=0;Re<me.locationSize;Re++)P(me.location+Re,Te/me.locationSize,$e,he,Z*nt,(De+Te/me.locationSize*Re)*nt,Et)}else{if(Ue.isInstancedBufferAttribute){for(let et=0;et<me.locationSize;et++)b(me.location+et,Ue.meshPerAttribute);j.isInstancedMesh!==!0&&pe._maxInstanceCount===void 0&&(pe._maxInstanceCount=Ue.meshPerAttribute*Ue.count)}else for(let et=0;et<me.locationSize;et++)E(me.location+et);n.bindBuffer(n.ARRAY_BUFFER,je);for(let et=0;et<me.locationSize;et++)P(me.location+et,Te/me.locationSize,$e,he,Te*nt,Te/me.locationSize*et*nt,Et)}}else if(J!==void 0){const he=J[ae];if(he!==void 0)switch(he.length){case 2:n.vertexAttrib2fv(me.location,he);break;case 3:n.vertexAttrib3fv(me.location,he);break;case 4:n.vertexAttrib4fv(me.location,he);break;default:n.vertexAttrib1fv(me.location,he)}}}}T()}function z(){Q();for(const j in a){const se=a[j];for(const oe in se){const pe=se[oe];for(const N in pe)v(pe[N].object),delete pe[N];delete se[oe]}delete a[j]}}function w(j){if(a[j.id]===void 0)return;const se=a[j.id];for(const oe in se){const pe=se[oe];for(const N in pe)v(pe[N].object),delete pe[N];delete se[oe]}delete a[j.id]}function D(j){for(const se in a){const oe=a[se];if(oe[j.id]===void 0)continue;const pe=oe[j.id];for(const N in pe)v(pe[N].object),delete pe[N];delete oe[j.id]}}function Q(){ie(),c=!0,u!==l&&(u=l,m(u.object))}function ie(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:h,reset:Q,resetDefaultState:ie,dispose:z,releaseStatesOfGeometry:w,releaseStatesOfProgram:D,initAttributes:x,enableAttribute:E,disableUnusedAttributes:T}}function jJ(n,e,t,i){const r=i.isWebGL2;let s;function o(c){s=c}function a(c,h){n.drawArrays(s,c,h),t.update(h,s,1)}function l(c,h,p){if(p===0)return;let m,v;if(r)m=n,v="drawArraysInstanced";else if(m=e.get("ANGLE_instanced_arrays"),v="drawArraysInstancedANGLE",m===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}m[v](s,c,h,p),t.update(h,s,p)}function u(c,h,p){if(p===0)return;const m=e.get("WEBGL_multi_draw");if(m===null)for(let v=0;v<p;v++)this.render(c[v],h[v]);else{m.multiDrawArraysWEBGL(s,c,0,h,0,p);let v=0;for(let A=0;A<p;A++)v+=h[A];t.update(v,s,1)}}this.setMode=o,this.render=a,this.renderInstances=l,this.renderMultiDraw=u}function XJ(n,e,t){let i;function r(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const P=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(P.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function s(P){if(P==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";P="mediump"}return P==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&n.constructor.name==="WebGL2RenderingContext";let a=t.precision!==void 0?t.precision:"highp";const l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const u=o||e.has("WEBGL_draw_buffers"),c=t.logarithmicDepthBuffer===!0,h=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),p=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),m=n.getParameter(n.MAX_TEXTURE_SIZE),v=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),A=n.getParameter(n.MAX_VERTEX_ATTRIBS),_=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),g=n.getParameter(n.MAX_VARYING_VECTORS),S=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),x=p>0,E=o||e.has("OES_texture_float"),b=x&&E,T=o?n.getParameter(n.MAX_SAMPLES):0;return{isWebGL2:o,drawBuffers:u,getMaxAnisotropy:r,getMaxPrecision:s,precision:a,logarithmicDepthBuffer:c,maxTextures:h,maxVertexTextures:p,maxTextureSize:m,maxCubemapSize:v,maxAttributes:A,maxVertexUniforms:_,maxVaryings:g,maxFragmentUniforms:S,vertexTextures:x,floatFragmentTextures:E,floatVertexTextures:b,maxSamples:T}}function JJ(n){const e=this;let t=null,i=0,r=!1,s=!1;const o=new Bo,a=new Ft,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(h,p){const m=h.length!==0||p||i!==0||r;return r=p,i=h.length,m},this.beginShadows=function(){s=!0,c(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(h,p){t=c(h,p,0)},this.setState=function(h,p,m){const v=h.clippingPlanes,A=h.clipIntersection,_=h.clipShadows,g=n.get(h);if(!r||v===null||v.length===0||s&&!_)s?c(null):u();else{const S=s?0:i,x=S*4;let E=g.clippingState||null;l.value=E,E=c(v,p,x,m);for(let b=0;b!==x;++b)E[b]=t[b];g.clippingState=E,this.numIntersection=A?this.numPlanes:0,this.numPlanes+=S}};function u(){l.value!==t&&(l.value=t,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function c(h,p,m,v){const A=h!==null?h.length:0;let _=null;if(A!==0){if(_=l.value,v!==!0||_===null){const g=m+A*4,S=p.matrixWorldInverse;a.getNormalMatrix(S),(_===null||_.length<g)&&(_=new Float32Array(g));for(let x=0,E=m;x!==A;++x,E+=4)o.copy(h[x]).applyMatrix4(S,a),o.normal.toArray(_,E),_[E+3]=o.constant}l.value=_,l.needsUpdate=!0}return e.numPlanes=A,e.numIntersection=0,_}}function KJ(n){let e=new WeakMap;function t(o,a){return a===Af?o.mapping=uo:a===Wd&&(o.mapping=nl),o}function i(o){if(o&&o.isTexture){const a=o.mapping;if(a===Af||a===Wd)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const u=new LC(l.height);return u.fromEquirectangularTexture(n,o),e.set(o,u),o.addEventListener("dispose",r),t(u.texture,o.mapping)}else return null}}return o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}class Zs extends Sp{constructor(e=-1,t=1,i=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,o=i+e,a=r+t,l=r-t;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,c=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=u*this.view.offsetX,o=s+u*this.view.width,a-=c*this.view.offsetY,l=a-c*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const Yc=4,vT=[.125,.215,.35,.446,.526,.582],eu=20,ux=new Zs,yT=new qe;let cx=null,fx=0,hx=0;const Ql=(1+Math.sqrt(5))/2,vc=1/Ql,_T=[new H(1,1,1),new H(-1,1,1),new H(1,1,-1),new H(-1,1,-1),new H(0,Ql,vc),new H(0,Ql,-vc),new H(vc,0,Ql),new H(-vc,0,Ql),new H(Ql,vc,0),new H(-Ql,vc,0)];class aA{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){cx=this._renderer.getRenderTarget(),fx=this._renderer.getActiveCubeFace(),hx=this._renderer.getActiveMipmapLevel(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=ST(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=AT(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(cx,fx,hx),e.scissorTest=!1,_1(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===uo||e.mapping===nl?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),cx=this._renderer.getRenderTarget(),fx=this._renderer.getActiveCubeFace(),hx=this._renderer.getActiveMipmapLevel();const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:rn,minFilter:rn,generateMipmaps:!1,type:Hi,format:zi,colorSpace:ea,depthBuffer:!1},r=xT(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=xT(e,t,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=YJ(s)),this._blurMaterial=ZJ(s,e,t)}return r}_compileMaterial(e){const t=new Vn(this._lodPlanes[0],e);this._renderer.compile(t,ux)}_sceneToCubeUV(e,t,i,r){const a=new Rn(90,1,t,i),l=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],c=this._renderer,h=c.autoClear,p=c.toneMapping;c.getClearColor(yT),c.toneMapping=io,c.autoClear=!1;const m=new br({name:"PMREM.Background",side:tr,depthWrite:!1,depthTest:!1}),v=new Vn(new Nu,m);let A=!1;const _=e.background;_?_.isColor&&(m.color.copy(_),e.background=null,A=!0):(m.color.copy(yT),A=!0);for(let g=0;g<6;g++){const S=g%3;S===0?(a.up.set(0,l[g],0),a.lookAt(u[g],0,0)):S===1?(a.up.set(0,0,l[g]),a.lookAt(0,u[g],0)):(a.up.set(0,l[g],0),a.lookAt(0,0,u[g]));const x=this._cubeSize;_1(r,S*x,g>2?x:0,x,x),c.setRenderTarget(r),A&&c.render(v,a),c.render(e,a)}v.geometry.dispose(),v.material.dispose(),c.toneMapping=p,c.autoClear=h,e.background=_}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===uo||e.mapping===nl;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=ST()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=AT());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new Vn(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;_1(t,0,0,3*l,2*l),i.setRenderTarget(t),i.render(o,ux)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const s=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),o=_T[(r-1)%_T.length];this._blur(e,r-1,r,s,o)}t.autoClear=i}_blur(e,t,i,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,i,r,"latitudinal",s),this._halfBlur(o,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,o,a){const l=this._renderer,u=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const c=3,h=new Vn(this._lodPlanes[r],u),p=u.uniforms,m=this._sizeLods[i]-1,v=isFinite(s)?Math.PI/(2*m):2*Math.PI/(2*eu-1),A=s/v,_=isFinite(s)?1+Math.floor(c*A):eu;_>eu&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${_} samples when the maximum is set to ${eu}`);const g=[];let S=0;for(let P=0;P<eu;++P){const I=P/A,z=Math.exp(-I*I/2);g.push(z),P===0?S+=z:P<_&&(S+=2*z)}for(let P=0;P<g.length;P++)g[P]=g[P]/S;p.envMap.value=e.texture,p.samples.value=_,p.weights.value=g,p.latitudinal.value=o==="latitudinal",a&&(p.poleAxis.value=a);const{_lodMax:x}=this;p.dTheta.value=v,p.mipInt.value=x-i;const E=this._sizeLods[r],b=3*E*(r>x-Yc?r-x+Yc:0),T=4*(this._cubeSize-E);_1(t,b,T,3*E,2*E),l.setRenderTarget(t),l.render(h,ux)}}function YJ(n){const e=[],t=[],i=[];let r=n;const s=n-Yc+1+vT.length;for(let o=0;o<s;o++){const a=Math.pow(2,r);t.push(a);let l=1/a;o>n-Yc?l=vT[o-n+Yc-1]:o===0&&(l=0),i.push(l);const u=1/(a-2),c=-u,h=1+u,p=[c,c,h,c,h,h,c,c,h,h,c,h],m=6,v=6,A=3,_=2,g=1,S=new Float32Array(A*v*m),x=new Float32Array(_*v*m),E=new Float32Array(g*v*m);for(let T=0;T<m;T++){const P=T%3*2/3-1,I=T>2?0:-1,z=[P,I,0,P+2/3,I,0,P+2/3,I+1,0,P,I,0,P+2/3,I+1,0,P,I+1,0];S.set(z,A*v*T),x.set(p,_*v*T);const w=[T,T,T,T,T,T];E.set(w,g*v*T)}const b=new It;b.setAttribute("position",new $t(S,A)),b.setAttribute("uv",new $t(x,_)),b.setAttribute("faceIndex",new $t(E,g)),e.push(b),r>Yc&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function xT(n,e,t){const i=new hs(n,e,t);return i.texture.mapping=Hf,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function _1(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function ZJ(n,e,t){const i=new Float32Array(eu),r=new H(0,1,0);return new ds({name:"SphericalGaussianBlur",defines:{n:eu,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:DC(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Wo,depthTest:!1,depthWrite:!1})}function AT(){return new ds({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:DC(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Wo,depthTest:!1,depthWrite:!1})}function ST(){return new ds({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:DC(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Wo,depthTest:!1,depthWrite:!1})}function DC(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function qJ(n){let e=new WeakMap,t=null;function i(a){if(a&&a.isTexture){const l=a.mapping,u=l===Af||l===Wd,c=l===uo||l===nl;if(u||c)if(a.isRenderTargetTexture&&a.needsPMREMUpdate===!0){a.needsPMREMUpdate=!1;let h=e.get(a);return t===null&&(t=new aA(n)),h=u?t.fromEquirectangular(a,h):t.fromCubemap(a,h),e.set(a,h),h.texture}else{if(e.has(a))return e.get(a).texture;{const h=a.image;if(u&&h&&h.height>0||c&&h&&r(h)){t===null&&(t=new aA(n));const p=u?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,p),a.addEventListener("dispose",s),p.texture}else return null}}}return a}function r(a){let l=0;const u=6;for(let c=0;c<u;c++)a[c]!==void 0&&l++;return l===u}function s(a){const l=a.target;l.removeEventListener("dispose",s);const u=e.get(l);u!==void 0&&(e.delete(l),u.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:o}}function QJ(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(i){i.isWebGL2?(t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance")):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(i){const r=t(i);return r===null&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function $J(n,e,t,i){const r={},s=new WeakMap;function o(h){const p=h.target;p.index!==null&&e.remove(p.index);for(const v in p.attributes)e.remove(p.attributes[v]);for(const v in p.morphAttributes){const A=p.morphAttributes[v];for(let _=0,g=A.length;_<g;_++)e.remove(A[_])}p.removeEventListener("dispose",o),delete r[p.id];const m=s.get(p);m&&(e.remove(m),s.delete(p)),i.releaseStatesOfGeometry(p),p.isInstancedBufferGeometry===!0&&delete p._maxInstanceCount,t.memory.geometries--}function a(h,p){return r[p.id]===!0||(p.addEventListener("dispose",o),r[p.id]=!0,t.memory.geometries++),p}function l(h){const p=h.attributes;for(const v in p)e.update(p[v],n.ARRAY_BUFFER);const m=h.morphAttributes;for(const v in m){const A=m[v];for(let _=0,g=A.length;_<g;_++)e.update(A[_],n.ARRAY_BUFFER)}}function u(h){const p=[],m=h.index,v=h.attributes.position;let A=0;if(m!==null){const S=m.array;A=m.version;for(let x=0,E=S.length;x<E;x+=3){const b=S[x+0],T=S[x+1],P=S[x+2];p.push(b,T,T,P,P,b)}}else if(v!==void 0){const S=v.array;A=v.version;for(let x=0,E=S.length/3-1;x<E;x+=3){const b=x+0,T=x+1,P=x+2;p.push(b,T,T,P,P,b)}}else return;const _=new(YP(p)?IC:BC)(p,1);_.version=A;const g=s.get(h);g&&e.remove(g),s.set(h,_)}function c(h){const p=s.get(h);if(p){const m=h.index;m!==null&&p.version<m.version&&u(h)}else u(h);return s.get(h)}return{get:a,update:l,getWireframeAttribute:c}}function eK(n,e,t,i){const r=i.isWebGL2;let s;function o(m){s=m}let a,l;function u(m){a=m.type,l=m.bytesPerElement}function c(m,v){n.drawElements(s,v,a,m*l),t.update(v,s,1)}function h(m,v,A){if(A===0)return;let _,g;if(r)_=n,g="drawElementsInstanced";else if(_=e.get("ANGLE_instanced_arrays"),g="drawElementsInstancedANGLE",_===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}_[g](s,v,a,m*l,A),t.update(v,s,A)}function p(m,v,A){if(A===0)return;const _=e.get("WEBGL_multi_draw");if(_===null)for(let g=0;g<A;g++)this.render(m[g]/l,v[g]);else{_.multiDrawElementsWEBGL(s,v,0,a,m,0,A);let g=0;for(let S=0;S<A;S++)g+=v[S];t.update(g,s,1)}}this.setMode=o,this.setIndex=u,this.render=c,this.renderInstances=h,this.renderMultiDraw=p}function tK(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,o,a){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=a*(s/3);break;case n.LINES:t.lines+=a*(s/2);break;case n.LINE_STRIP:t.lines+=a*(s-1);break;case n.LINE_LOOP:t.lines+=a*s;break;case n.POINTS:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function nK(n,e){return n[0]-e[0]}function iK(n,e){return Math.abs(e[1])-Math.abs(n[1])}function rK(n,e,t){const i={},r=new Float32Array(8),s=new WeakMap,o=new ln,a=[];for(let u=0;u<8;u++)a[u]=[u,0];function l(u,c,h){const p=u.morphTargetInfluences;if(e.isWebGL2===!0){const v=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,A=v!==void 0?v.length:0;let _=s.get(c);if(_===void 0||_.count!==A){let ie=function(){D.dispose(),s.delete(c),c.removeEventListener("dispose",ie)};var m=ie;_!==void 0&&_.texture.dispose();const g=c.morphAttributes.position!==void 0,S=c.morphAttributes.normal!==void 0,x=c.morphAttributes.color!==void 0,E=c.morphAttributes.position||[],b=c.morphAttributes.normal||[],T=c.morphAttributes.color||[];let P=0;g===!0&&(P=1),S===!0&&(P=2),x===!0&&(P=3);let I=c.attributes.position.count*P,z=1;I>e.maxTextureSize&&(z=Math.ceil(I/e.maxTextureSize),I=e.maxTextureSize);const w=new Float32Array(I*z*4*A),D=new mv(w,I,z,A);D.type=ei,D.needsUpdate=!0;const Q=P*4;for(let j=0;j<A;j++){const se=E[j],oe=b[j],pe=T[j],N=I*z*4*j;for(let X=0;X<se.count;X++){const J=X*Q;g===!0&&(o.fromBufferAttribute(se,X),w[N+J+0]=o.x,w[N+J+1]=o.y,w[N+J+2]=o.z,w[N+J+3]=0),S===!0&&(o.fromBufferAttribute(oe,X),w[N+J+4]=o.x,w[N+J+5]=o.y,w[N+J+6]=o.z,w[N+J+7]=0),x===!0&&(o.fromBufferAttribute(pe,X),w[N+J+8]=o.x,w[N+J+9]=o.y,w[N+J+10]=o.z,w[N+J+11]=pe.itemSize===4?o.w:1)}}_={count:A,texture:D,size:new be(I,z)},s.set(c,_),c.addEventListener("dispose",ie)}if(u.isInstancedMesh===!0&&u.morphTexture!==null)h.getUniforms().setValue(n,"morphTexture",u.morphTexture,t);else{let g=0;for(let x=0;x<p.length;x++)g+=p[x];const S=c.morphTargetsRelative?1:1-g;h.getUniforms().setValue(n,"morphTargetBaseInfluence",S),h.getUniforms().setValue(n,"morphTargetInfluences",p)}h.getUniforms().setValue(n,"morphTargetsTexture",_.texture,t),h.getUniforms().setValue(n,"morphTargetsTextureSize",_.size)}else{const v=p===void 0?0:p.length;let A=i[c.id];if(A===void 0||A.length!==v){A=[];for(let E=0;E<v;E++)A[E]=[E,0];i[c.id]=A}for(let E=0;E<v;E++){const b=A[E];b[0]=E,b[1]=p[E]}A.sort(iK);for(let E=0;E<8;E++)E<v&&A[E][1]?(a[E][0]=A[E][0],a[E][1]=A[E][1]):(a[E][0]=Number.MAX_SAFE_INTEGER,a[E][1]=0);a.sort(nK);const _=c.morphAttributes.position,g=c.morphAttributes.normal;let S=0;for(let E=0;E<8;E++){const b=a[E],T=b[0],P=b[1];T!==Number.MAX_SAFE_INTEGER&&P?(_&&c.getAttribute("morphTarget"+E)!==_[T]&&c.setAttribute("morphTarget"+E,_[T]),g&&c.getAttribute("morphNormal"+E)!==g[T]&&c.setAttribute("morphNormal"+E,g[T]),r[E]=P,S+=P):(_&&c.hasAttribute("morphTarget"+E)===!0&&c.deleteAttribute("morphTarget"+E),g&&c.hasAttribute("morphNormal"+E)===!0&&c.deleteAttribute("morphNormal"+E),r[E]=0)}const x=c.morphTargetsRelative?1:1-S;h.getUniforms().setValue(n,"morphTargetBaseInfluence",x),h.getUniforms().setValue(n,"morphTargetInfluences",r)}}return{update:l}}function sK(n,e,t,i){let r=new WeakMap;function s(l){const u=i.render.frame,c=l.geometry,h=e.get(l,c);if(r.get(h)!==u&&(e.update(h),r.set(h,u)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),r.get(l)!==u&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER),r.set(l,u))),l.isSkinnedMesh){const p=l.skeleton;r.get(p)!==u&&(p.update(),r.set(p,u))}return h}function o(){r=new WeakMap}function a(l){const u=l.target;u.removeEventListener("dispose",a),t.remove(u.instanceMatrix),u.instanceColor!==null&&t.remove(u.instanceColor)}return{update:s,dispose:o}}class gv extends gn{constructor(e,t,i,r,s,o,a,l,u,c){if(c=c!==void 0?c:Ya,c!==Ya&&c!==wu)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&c===Ya&&(i=ko),i===void 0&&c===wu&&(i=Ka),super(null,r,s,o,a,l,c,i,u),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:zn,this.minFilter=l!==void 0?l:zn,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}const rB=new gn,sB=new gv(1,1);sB.compareFunction=wC;const oB=new mv,aB=new PC,lB=new Cp,CT=[],ET=[],MT=new Float32Array(16),wT=new Float32Array(9),TT=new Float32Array(4);function Vf(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=CT[r];if(s===void 0&&(s=new Float32Array(r),CT[r]=s),e!==0){i.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function oi(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function ai(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function vv(n,e){let t=ET[e];t===void 0&&(t=new Int32Array(e),ET[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function oK(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function aK(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(oi(t,e))return;n.uniform2fv(this.addr,e),ai(t,e)}}function lK(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(oi(t,e))return;n.uniform3fv(this.addr,e),ai(t,e)}}function uK(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(oi(t,e))return;n.uniform4fv(this.addr,e),ai(t,e)}}function cK(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(oi(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),ai(t,e)}else{if(oi(t,i))return;TT.set(i),n.uniformMatrix2fv(this.addr,!1,TT),ai(t,i)}}function fK(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(oi(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),ai(t,e)}else{if(oi(t,i))return;wT.set(i),n.uniformMatrix3fv(this.addr,!1,wT),ai(t,i)}}function hK(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(oi(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),ai(t,e)}else{if(oi(t,i))return;MT.set(i),n.uniformMatrix4fv(this.addr,!1,MT),ai(t,i)}}function dK(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function pK(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(oi(t,e))return;n.uniform2iv(this.addr,e),ai(t,e)}}function mK(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(oi(t,e))return;n.uniform3iv(this.addr,e),ai(t,e)}}function gK(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(oi(t,e))return;n.uniform4iv(this.addr,e),ai(t,e)}}function vK(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function yK(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(oi(t,e))return;n.uniform2uiv(this.addr,e),ai(t,e)}}function _K(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(oi(t,e))return;n.uniform3uiv(this.addr,e),ai(t,e)}}function xK(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(oi(t,e))return;n.uniform4uiv(this.addr,e),ai(t,e)}}function AK(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r);const s=this.type===n.SAMPLER_2D_SHADOW?sB:rB;t.setTexture2D(e||s,r)}function SK(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||aB,r)}function CK(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||lB,r)}function EK(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||oB,r)}function MK(n){switch(n){case 5126:return oK;case 35664:return aK;case 35665:return lK;case 35666:return uK;case 35674:return cK;case 35675:return fK;case 35676:return hK;case 5124:case 35670:return dK;case 35667:case 35671:return pK;case 35668:case 35672:return mK;case 35669:case 35673:return gK;case 5125:return vK;case 36294:return yK;case 36295:return _K;case 36296:return xK;case 35678:case 36198:case 36298:case 36306:case 35682:return AK;case 35679:case 36299:case 36307:return SK;case 35680:case 36300:case 36308:case 36293:return CK;case 36289:case 36303:case 36311:case 36292:return EK}}function wK(n,e){n.uniform1fv(this.addr,e)}function TK(n,e){const t=Vf(e,this.size,2);n.uniform2fv(this.addr,t)}function bK(n,e){const t=Vf(e,this.size,3);n.uniform3fv(this.addr,t)}function RK(n,e){const t=Vf(e,this.size,4);n.uniform4fv(this.addr,t)}function PK(n,e){const t=Vf(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function BK(n,e){const t=Vf(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function IK(n,e){const t=Vf(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function LK(n,e){n.uniform1iv(this.addr,e)}function DK(n,e){n.uniform2iv(this.addr,e)}function FK(n,e){n.uniform3iv(this.addr,e)}function NK(n,e){n.uniform4iv(this.addr,e)}function OK(n,e){n.uniform1uiv(this.addr,e)}function UK(n,e){n.uniform2uiv(this.addr,e)}function kK(n,e){n.uniform3uiv(this.addr,e)}function zK(n,e){n.uniform4uiv(this.addr,e)}function HK(n,e,t){const i=this.cache,r=e.length,s=vv(t,r);oi(i,s)||(n.uniform1iv(this.addr,s),ai(i,s));for(let o=0;o!==r;++o)t.setTexture2D(e[o]||rB,s[o])}function GK(n,e,t){const i=this.cache,r=e.length,s=vv(t,r);oi(i,s)||(n.uniform1iv(this.addr,s),ai(i,s));for(let o=0;o!==r;++o)t.setTexture3D(e[o]||aB,s[o])}function VK(n,e,t){const i=this.cache,r=e.length,s=vv(t,r);oi(i,s)||(n.uniform1iv(this.addr,s),ai(i,s));for(let o=0;o!==r;++o)t.setTextureCube(e[o]||lB,s[o])}function WK(n,e,t){const i=this.cache,r=e.length,s=vv(t,r);oi(i,s)||(n.uniform1iv(this.addr,s),ai(i,s));for(let o=0;o!==r;++o)t.setTexture2DArray(e[o]||oB,s[o])}function jK(n){switch(n){case 5126:return wK;case 35664:return TK;case 35665:return bK;case 35666:return RK;case 35674:return PK;case 35675:return BK;case 35676:return IK;case 5124:case 35670:return LK;case 35667:case 35671:return DK;case 35668:case 35672:return FK;case 35669:case 35673:return NK;case 5125:return OK;case 36294:return UK;case 36295:return kK;case 36296:return zK;case 35678:case 36198:case 36298:case 36306:case 35682:return HK;case 35679:case 36299:case 36307:return GK;case 35680:case 36300:case 36308:case 36293:return VK;case 36289:case 36303:case 36311:case 36292:return WK}}class XK{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=MK(t.type)}}class JK{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=jK(t.type)}}class KK{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const a=r[s];a.setValue(e,t[a.id],i)}}}const dx=/(\w+)(\])?(\[|\.)?/g;function bT(n,e){n.seq.push(e),n.map[e.id]=e}function YK(n,e,t){const i=n.name,r=i.length;for(dx.lastIndex=0;;){const s=dx.exec(i),o=dx.lastIndex;let a=s[1];const l=s[2]==="]",u=s[3];if(l&&(a=a|0),u===void 0||u==="["&&o+2===r){bT(t,u===void 0?new XK(a,n,e):new JK(a,n,e));break}else{let h=t.map[a];h===void 0&&(h=new KK(a),bT(t,h)),t=h}}}class w0{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){const s=e.getActiveUniform(t,r),o=e.getUniformLocation(t,s.name);YK(s,o,this)}}setValue(e,t,i,r){const s=this.map[t];s!==void 0&&s.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=i[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in t&&i.push(o)}return i}}function RT(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}const ZK=37297;let qK=0;function QK(n,e){const t=n.split(`
`),i=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=r;o<s;o++){const a=o+1;i.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return i.join(`
`)}function $K(n){const e=an.getPrimaries(an.workingColorSpace),t=an.getPrimaries(n);let i;switch(e===t?i="":e===Yd&&t===Kd?i="LinearDisplayP3ToLinearSRGB":e===Kd&&t===Yd&&(i="LinearSRGBToLinearDisplayP3"),n){case ea:case Ap:return[i,"LinearTransferOETF"];case ts:case pv:return[i,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",n),[i,"LinearTransferOETF"]}}function PT(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),r=n.getShaderInfoLog(e).trim();if(i&&r==="")return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+r+`

`+QK(n.getShaderSource(e),o)}else return r}function eY(n,e){const t=$K(e);return`vec4 ${n}( vec4 value ) { return ${t[0]}( ${t[1]}( value ) ); }`}function tY(n,e){let t;switch(e){case AP:t="Linear";break;case SP:t="Reinhard";break;case CP:t="OptimizedCineon";break;case gC:t="ACESFilmic";break;case MP:t="AgX";break;case wP:t="Neutral";break;case EP:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function nY(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.normalMapTangentSpace||n.clearcoatNormalMap||n.flatShading||n.alphaToCoverage||n.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Zc).join(`
`)}function iY(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Zc).join(`
`)}function rY(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function sY(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const s=n.getActiveAttrib(e,r),o=s.name;let a=1;s.type===n.FLOAT_MAT2&&(a=2),s.type===n.FLOAT_MAT3&&(a=3),s.type===n.FLOAT_MAT4&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}function Zc(n){return n!==""}function BT(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function IT(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const oY=/^[ \t]*#include +<([\w\d./]+)>/gm;function lA(n){return n.replace(oY,lY)}const aY=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function lY(n,e){let t=Ot[e];if(t===void 0){const i=aY.get(e);if(i!==void 0)t=Ot[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return lA(t)}const uY=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function LT(n){return n.replace(uY,cY)}function cY(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function DT(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	`;return n.isWebGL2&&(e+=`precision ${n.precision} sampler3D;
		precision ${n.precision} sampler2DArray;
		precision ${n.precision} sampler2DShadow;
		precision ${n.precision} samplerCubeShadow;
		precision ${n.precision} sampler2DArrayShadow;
		precision ${n.precision} isampler2D;
		precision ${n.precision} isampler3D;
		precision ${n.precision} isamplerCube;
		precision ${n.precision} isampler2DArray;
		precision ${n.precision} usampler2D;
		precision ${n.precision} usampler3D;
		precision ${n.precision} usamplerCube;
		precision ${n.precision} usampler2DArray;
		`),n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function fY(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===uv?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===hd?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===Ss&&(e="SHADOWMAP_TYPE_VSM"),e}function hY(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case uo:case nl:e="ENVMAP_TYPE_CUBE";break;case Hf:e="ENVMAP_TYPE_CUBE_UV";break}return e}function dY(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case nl:e="ENVMAP_MODE_REFRACTION";break}return e}function pY(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case xp:e="ENVMAP_BLENDING_MULTIPLY";break;case _P:e="ENVMAP_BLENDING_MIX";break;case xP:e="ENVMAP_BLENDING_ADD";break}return e}function mY(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}}function gY(n,e,t,i){const r=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=fY(t),u=hY(t),c=dY(t),h=pY(t),p=mY(t),m=t.isWebGL2?"":nY(t),v=iY(t),A=rY(s),_=r.createProgram();let g,S,x=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(g=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,A].filter(Zc).join(`
`),g.length>0&&(g+=`
`),S=[m,"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,A].filter(Zc).join(`
`),S.length>0&&(S+=`
`)):(g=[DT(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,A,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Zc).join(`
`),S=[m,DT(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,A,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.envMap?"#define "+c:"",t.envMap?"#define "+h:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==io?"#define TONE_MAPPING":"",t.toneMapping!==io?Ot.tonemapping_pars_fragment:"",t.toneMapping!==io?tY("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Ot.colorspace_pars_fragment,eY("linearToOutputTexel",t.outputColorSpace),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Zc).join(`
`)),o=lA(o),o=BT(o,t),o=IT(o,t),a=lA(a),a=BT(a,t),a=IT(a,t),o=LT(o),a=LT(a),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(x=`#version 300 es
`,g=[v,"precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+g,S=["precision mediump sampler2DArray;","#define varying in",t.glslVersion===sA?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===sA?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+S);const E=x+g+o,b=x+S+a,T=RT(r,r.VERTEX_SHADER,E),P=RT(r,r.FRAGMENT_SHADER,b);r.attachShader(_,T),r.attachShader(_,P),t.index0AttributeName!==void 0?r.bindAttribLocation(_,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(_,0,"position"),r.linkProgram(_);function I(Q){if(n.debug.checkShaderErrors){const ie=r.getProgramInfoLog(_).trim(),j=r.getShaderInfoLog(T).trim(),se=r.getShaderInfoLog(P).trim();let oe=!0,pe=!0;if(r.getProgramParameter(_,r.LINK_STATUS)===!1)if(oe=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(r,_,T,P);else{const N=PT(r,T,"vertex"),X=PT(r,P,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(_,r.VALIDATE_STATUS)+`

Material Name: `+Q.name+`
Material Type: `+Q.type+`

Program Info Log: `+ie+`
`+N+`
`+X)}else ie!==""?console.warn("THREE.WebGLProgram: Program Info Log:",ie):(j===""||se==="")&&(pe=!1);pe&&(Q.diagnostics={runnable:oe,programLog:ie,vertexShader:{log:j,prefix:g},fragmentShader:{log:se,prefix:S}})}r.deleteShader(T),r.deleteShader(P),z=new w0(r,_),w=sY(r,_)}let z;this.getUniforms=function(){return z===void 0&&I(this),z};let w;this.getAttributes=function(){return w===void 0&&I(this),w};let D=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return D===!1&&(D=r.getProgramParameter(_,ZK)),D},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(_),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=qK++,this.cacheKey=e,this.usedTimes=1,this.program=_,this.vertexShader=T,this.fragmentShader=P,this}let vY=0;class yY{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return o.has(r)===!1&&(o.add(r),r.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new _Y(e),t.set(e,i)),i}}class _Y{constructor(e){this.id=vY++,this.code=e,this.usedTimes=0}}function xY(n,e,t,i,r,s,o){const a=new yu,l=new yY,u=new Set,c=[],h=r.isWebGL2,p=r.logarithmicDepthBuffer,m=r.vertexTextures;let v=r.precision;const A={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function _(w){return u.add(w),w===0?"uv":`uv${w}`}function g(w,D,Q,ie,j){const se=ie.fog,oe=j.geometry,pe=w.isMeshStandardMaterial?ie.environment:null,N=(w.isMeshStandardMaterial?t:e).get(w.envMap||pe),X=N&&N.mapping===Hf?N.image.height:null,J=A[w.type];w.precision!==null&&(v=r.getMaxPrecision(w.precision),v!==w.precision&&console.warn("THREE.WebGLProgram.getParameters:",w.precision,"not supported, using",v,"instead."));const ae=oe.morphAttributes.position||oe.morphAttributes.normal||oe.morphAttributes.color,me=ae!==void 0?ae.length:0;let Ue=0;oe.morphAttributes.position!==void 0&&(Ue=1),oe.morphAttributes.normal!==void 0&&(Ue=2),oe.morphAttributes.color!==void 0&&(Ue=3);let he,Te,we,je;if(J){const Gt=Ms[J];he=Gt.vertexShader,Te=Gt.fragmentShader}else he=w.vertexShader,Te=w.fragmentShader,l.update(w),we=l.getVertexShaderID(w),je=l.getFragmentShaderID(w);const $e=n.getRenderTarget(),nt=j.isInstancedMesh===!0,Et=j.isBatchedMesh===!0,et=!!w.map,Z=!!w.matcap,De=!!N,Re=!!w.aoMap,ze=!!w.lightMap,Ie=!!w.bumpMap,it=!!w.normalMap,V=!!w.displacementMap,ne=!!w.emissiveMap,de=!!w.metalnessMap,O=!!w.roughnessMap,L=w.anisotropy>0,ee=w.clearcoat>0,ue=w.iridescence>0,Ce=w.sheen>0,Pe=w.transmission>0,ft=L&&!!w.anisotropyMap,ht=ee&&!!w.clearcoatMap,He=ee&&!!w.clearcoatNormalMap,Ke=ee&&!!w.clearcoatRoughnessMap,_t=ue&&!!w.iridescenceMap,Ge=ue&&!!w.iridescenceThicknessMap,Jt=Ce&&!!w.sheenColorMap,mt=Ce&&!!w.sheenRoughnessMap,dt=!!w.specularMap,q=!!w.specularColorMap,ve=!!w.specularIntensityMap,Ne=Pe&&!!w.transmissionMap,Qe=Pe&&!!w.thicknessMap,Le=!!w.gradientMap,re=!!w.alphaMap,Xe=w.alphaTest>0,_e=!!w.alphaHash,Ve=!!w.extensions;let Je=io;w.toneMapped&&($e===null||$e.isXRRenderTarget===!0)&&(Je=n.toneMapping);const Mt={isWebGL2:h,shaderID:J,shaderType:w.type,shaderName:w.name,vertexShader:he,fragmentShader:Te,defines:w.defines,customVertexShaderID:we,customFragmentShaderID:je,isRawShaderMaterial:w.isRawShaderMaterial===!0,glslVersion:w.glslVersion,precision:v,batching:Et,instancing:nt,instancingColor:nt&&j.instanceColor!==null,instancingMorph:nt&&j.morphTexture!==null,supportsVertexTextures:m,outputColorSpace:$e===null?n.outputColorSpace:$e.isXRRenderTarget===!0?$e.texture.colorSpace:ea,alphaToCoverage:!!w.alphaToCoverage,map:et,matcap:Z,envMap:De,envMapMode:De&&N.mapping,envMapCubeUVHeight:X,aoMap:Re,lightMap:ze,bumpMap:Ie,normalMap:it,displacementMap:m&&V,emissiveMap:ne,normalMapObjectSpace:it&&w.normalMapType===HP,normalMapTangentSpace:it&&w.normalMapType===ml,metalnessMap:de,roughnessMap:O,anisotropy:L,anisotropyMap:ft,clearcoat:ee,clearcoatMap:ht,clearcoatNormalMap:He,clearcoatRoughnessMap:Ke,iridescence:ue,iridescenceMap:_t,iridescenceThicknessMap:Ge,sheen:Ce,sheenColorMap:Jt,sheenRoughnessMap:mt,specularMap:dt,specularColorMap:q,specularIntensityMap:ve,transmission:Pe,transmissionMap:Ne,thicknessMap:Qe,gradientMap:Le,opaque:w.transparent===!1&&w.blending===gu&&w.alphaToCoverage===!1,alphaMap:re,alphaTest:Xe,alphaHash:_e,combine:w.combine,mapUv:et&&_(w.map.channel),aoMapUv:Re&&_(w.aoMap.channel),lightMapUv:ze&&_(w.lightMap.channel),bumpMapUv:Ie&&_(w.bumpMap.channel),normalMapUv:it&&_(w.normalMap.channel),displacementMapUv:V&&_(w.displacementMap.channel),emissiveMapUv:ne&&_(w.emissiveMap.channel),metalnessMapUv:de&&_(w.metalnessMap.channel),roughnessMapUv:O&&_(w.roughnessMap.channel),anisotropyMapUv:ft&&_(w.anisotropyMap.channel),clearcoatMapUv:ht&&_(w.clearcoatMap.channel),clearcoatNormalMapUv:He&&_(w.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Ke&&_(w.clearcoatRoughnessMap.channel),iridescenceMapUv:_t&&_(w.iridescenceMap.channel),iridescenceThicknessMapUv:Ge&&_(w.iridescenceThicknessMap.channel),sheenColorMapUv:Jt&&_(w.sheenColorMap.channel),sheenRoughnessMapUv:mt&&_(w.sheenRoughnessMap.channel),specularMapUv:dt&&_(w.specularMap.channel),specularColorMapUv:q&&_(w.specularColorMap.channel),specularIntensityMapUv:ve&&_(w.specularIntensityMap.channel),transmissionMapUv:Ne&&_(w.transmissionMap.channel),thicknessMapUv:Qe&&_(w.thicknessMap.channel),alphaMapUv:re&&_(w.alphaMap.channel),vertexTangents:!!oe.attributes.tangent&&(it||L),vertexColors:w.vertexColors,vertexAlphas:w.vertexColors===!0&&!!oe.attributes.color&&oe.attributes.color.itemSize===4,pointsUvs:j.isPoints===!0&&!!oe.attributes.uv&&(et||re),fog:!!se,useFog:w.fog===!0,fogExp2:!!se&&se.isFogExp2,flatShading:w.flatShading===!0,sizeAttenuation:w.sizeAttenuation===!0,logarithmicDepthBuffer:p,skinning:j.isSkinnedMesh===!0,morphTargets:oe.morphAttributes.position!==void 0,morphNormals:oe.morphAttributes.normal!==void 0,morphColors:oe.morphAttributes.color!==void 0,morphTargetsCount:me,morphTextureStride:Ue,numDirLights:D.directional.length,numPointLights:D.point.length,numSpotLights:D.spot.length,numSpotLightMaps:D.spotLightMap.length,numRectAreaLights:D.rectArea.length,numHemiLights:D.hemi.length,numDirLightShadows:D.directionalShadowMap.length,numPointLightShadows:D.pointShadowMap.length,numSpotLightShadows:D.spotShadowMap.length,numSpotLightShadowsWithMaps:D.numSpotLightShadowsWithMaps,numLightProbes:D.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:w.dithering,shadowMapEnabled:n.shadowMap.enabled&&Q.length>0,shadowMapType:n.shadowMap.type,toneMapping:Je,useLegacyLights:n._useLegacyLights,decodeVideoTexture:et&&w.map.isVideoTexture===!0&&an.getTransfer(w.map.colorSpace)===pn,premultipliedAlpha:w.premultipliedAlpha,doubleSided:w.side===rs,flipSided:w.side===tr,useDepthPacking:w.depthPacking>=0,depthPacking:w.depthPacking||0,index0AttributeName:w.index0AttributeName,extensionDerivatives:Ve&&w.extensions.derivatives===!0,extensionFragDepth:Ve&&w.extensions.fragDepth===!0,extensionDrawBuffers:Ve&&w.extensions.drawBuffers===!0,extensionShaderTextureLOD:Ve&&w.extensions.shaderTextureLOD===!0,extensionClipCullDistance:Ve&&w.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:Ve&&w.extensions.multiDraw===!0&&i.has("WEBGL_multi_draw"),rendererExtensionFragDepth:h||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:h||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:h||i.has("EXT_shader_texture_lod"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:w.customProgramCacheKey()};return Mt.vertexUv1s=u.has(1),Mt.vertexUv2s=u.has(2),Mt.vertexUv3s=u.has(3),u.clear(),Mt}function S(w){const D=[];if(w.shaderID?D.push(w.shaderID):(D.push(w.customVertexShaderID),D.push(w.customFragmentShaderID)),w.defines!==void 0)for(const Q in w.defines)D.push(Q),D.push(w.defines[Q]);return w.isRawShaderMaterial===!1&&(x(D,w),E(D,w),D.push(n.outputColorSpace)),D.push(w.customProgramCacheKey),D.join()}function x(w,D){w.push(D.precision),w.push(D.outputColorSpace),w.push(D.envMapMode),w.push(D.envMapCubeUVHeight),w.push(D.mapUv),w.push(D.alphaMapUv),w.push(D.lightMapUv),w.push(D.aoMapUv),w.push(D.bumpMapUv),w.push(D.normalMapUv),w.push(D.displacementMapUv),w.push(D.emissiveMapUv),w.push(D.metalnessMapUv),w.push(D.roughnessMapUv),w.push(D.anisotropyMapUv),w.push(D.clearcoatMapUv),w.push(D.clearcoatNormalMapUv),w.push(D.clearcoatRoughnessMapUv),w.push(D.iridescenceMapUv),w.push(D.iridescenceThicknessMapUv),w.push(D.sheenColorMapUv),w.push(D.sheenRoughnessMapUv),w.push(D.specularMapUv),w.push(D.specularColorMapUv),w.push(D.specularIntensityMapUv),w.push(D.transmissionMapUv),w.push(D.thicknessMapUv),w.push(D.combine),w.push(D.fogExp2),w.push(D.sizeAttenuation),w.push(D.morphTargetsCount),w.push(D.morphAttributeCount),w.push(D.numDirLights),w.push(D.numPointLights),w.push(D.numSpotLights),w.push(D.numSpotLightMaps),w.push(D.numHemiLights),w.push(D.numRectAreaLights),w.push(D.numDirLightShadows),w.push(D.numPointLightShadows),w.push(D.numSpotLightShadows),w.push(D.numSpotLightShadowsWithMaps),w.push(D.numLightProbes),w.push(D.shadowMapType),w.push(D.toneMapping),w.push(D.numClippingPlanes),w.push(D.numClipIntersection),w.push(D.depthPacking)}function E(w,D){a.disableAll(),D.isWebGL2&&a.enable(0),D.supportsVertexTextures&&a.enable(1),D.instancing&&a.enable(2),D.instancingColor&&a.enable(3),D.instancingMorph&&a.enable(4),D.matcap&&a.enable(5),D.envMap&&a.enable(6),D.normalMapObjectSpace&&a.enable(7),D.normalMapTangentSpace&&a.enable(8),D.clearcoat&&a.enable(9),D.iridescence&&a.enable(10),D.alphaTest&&a.enable(11),D.vertexColors&&a.enable(12),D.vertexAlphas&&a.enable(13),D.vertexUv1s&&a.enable(14),D.vertexUv2s&&a.enable(15),D.vertexUv3s&&a.enable(16),D.vertexTangents&&a.enable(17),D.anisotropy&&a.enable(18),D.alphaHash&&a.enable(19),D.batching&&a.enable(20),w.push(a.mask),a.disableAll(),D.fog&&a.enable(0),D.useFog&&a.enable(1),D.flatShading&&a.enable(2),D.logarithmicDepthBuffer&&a.enable(3),D.skinning&&a.enable(4),D.morphTargets&&a.enable(5),D.morphNormals&&a.enable(6),D.morphColors&&a.enable(7),D.premultipliedAlpha&&a.enable(8),D.shadowMapEnabled&&a.enable(9),D.useLegacyLights&&a.enable(10),D.doubleSided&&a.enable(11),D.flipSided&&a.enable(12),D.useDepthPacking&&a.enable(13),D.dithering&&a.enable(14),D.transmission&&a.enable(15),D.sheen&&a.enable(16),D.opaque&&a.enable(17),D.pointsUvs&&a.enable(18),D.decodeVideoTexture&&a.enable(19),D.alphaToCoverage&&a.enable(20),w.push(a.mask)}function b(w){const D=A[w.type];let Q;if(D){const ie=Ms[D];Q=tB.clone(ie.uniforms)}else Q=w.uniforms;return Q}function T(w,D){let Q;for(let ie=0,j=c.length;ie<j;ie++){const se=c[ie];if(se.cacheKey===D){Q=se,++Q.usedTimes;break}}return Q===void 0&&(Q=new gY(n,D,w,s),c.push(Q)),Q}function P(w){if(--w.usedTimes===0){const D=c.indexOf(w);c[D]=c[c.length-1],c.pop(),w.destroy()}}function I(w){l.remove(w)}function z(){l.dispose()}return{getParameters:g,getProgramCacheKey:S,getUniforms:b,acquireProgram:T,releaseProgram:P,releaseShaderCache:I,programs:c,dispose:z}}function AY(){let n=new WeakMap;function e(s){let o=n.get(s);return o===void 0&&(o={},n.set(s,o)),o}function t(s){n.delete(s)}function i(s,o,a){n.get(s)[o]=a}function r(){n=new WeakMap}return{get:e,remove:t,update:i,dispose:r}}function SY(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function FT(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function NT(){const n=[];let e=0;const t=[],i=[],r=[];function s(){e=0,t.length=0,i.length=0,r.length=0}function o(h,p,m,v,A,_){let g=n[e];return g===void 0?(g={id:h.id,object:h,geometry:p,material:m,groupOrder:v,renderOrder:h.renderOrder,z:A,group:_},n[e]=g):(g.id=h.id,g.object=h,g.geometry=p,g.material=m,g.groupOrder=v,g.renderOrder=h.renderOrder,g.z=A,g.group=_),e++,g}function a(h,p,m,v,A,_){const g=o(h,p,m,v,A,_);m.transmission>0?i.push(g):m.transparent===!0?r.push(g):t.push(g)}function l(h,p,m,v,A,_){const g=o(h,p,m,v,A,_);m.transmission>0?i.unshift(g):m.transparent===!0?r.unshift(g):t.unshift(g)}function u(h,p){t.length>1&&t.sort(h||SY),i.length>1&&i.sort(p||FT),r.length>1&&r.sort(p||FT)}function c(){for(let h=e,p=n.length;h<p;h++){const m=n[h];if(m.id===null)break;m.id=null,m.object=null,m.geometry=null,m.material=null,m.group=null}}return{opaque:t,transmissive:i,transparent:r,init:s,push:a,unshift:l,finish:c,sort:u}}function CY(){let n=new WeakMap;function e(i,r){const s=n.get(i);let o;return s===void 0?(o=new NT,n.set(i,[o])):r>=s.length?(o=new NT,s.push(o)):o=s[r],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function EY(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new H,color:new qe};break;case"SpotLight":t={position:new H,direction:new H,color:new qe,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new H,color:new qe,distance:0,decay:0};break;case"HemisphereLight":t={direction:new H,skyColor:new qe,groundColor:new qe};break;case"RectAreaLight":t={color:new qe,position:new H,halfWidth:new H,halfHeight:new H};break}return n[e.id]=t,t}}}function MY(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new be};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new be};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new be,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let wY=0;function TY(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function bY(n,e){const t=new EY,i=MY(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let c=0;c<9;c++)r.probe.push(new H);const s=new H,o=new xt,a=new xt;function l(c,h){let p=0,m=0,v=0;for(let Q=0;Q<9;Q++)r.probe[Q].set(0,0,0);let A=0,_=0,g=0,S=0,x=0,E=0,b=0,T=0,P=0,I=0,z=0;c.sort(TY);const w=h===!0?Math.PI:1;for(let Q=0,ie=c.length;Q<ie;Q++){const j=c[Q],se=j.color,oe=j.intensity,pe=j.distance,N=j.shadow&&j.shadow.map?j.shadow.map.texture:null;if(j.isAmbientLight)p+=se.r*oe*w,m+=se.g*oe*w,v+=se.b*oe*w;else if(j.isLightProbe){for(let X=0;X<9;X++)r.probe[X].addScaledVector(j.sh.coefficients[X],oe);z++}else if(j.isDirectionalLight){const X=t.get(j);if(X.color.copy(j.color).multiplyScalar(j.intensity*w),j.castShadow){const J=j.shadow,ae=i.get(j);ae.shadowBias=J.bias,ae.shadowNormalBias=J.normalBias,ae.shadowRadius=J.radius,ae.shadowMapSize=J.mapSize,r.directionalShadow[A]=ae,r.directionalShadowMap[A]=N,r.directionalShadowMatrix[A]=j.shadow.matrix,E++}r.directional[A]=X,A++}else if(j.isSpotLight){const X=t.get(j);X.position.setFromMatrixPosition(j.matrixWorld),X.color.copy(se).multiplyScalar(oe*w),X.distance=pe,X.coneCos=Math.cos(j.angle),X.penumbraCos=Math.cos(j.angle*(1-j.penumbra)),X.decay=j.decay,r.spot[g]=X;const J=j.shadow;if(j.map&&(r.spotLightMap[P]=j.map,P++,J.updateMatrices(j),j.castShadow&&I++),r.spotLightMatrix[g]=J.matrix,j.castShadow){const ae=i.get(j);ae.shadowBias=J.bias,ae.shadowNormalBias=J.normalBias,ae.shadowRadius=J.radius,ae.shadowMapSize=J.mapSize,r.spotShadow[g]=ae,r.spotShadowMap[g]=N,T++}g++}else if(j.isRectAreaLight){const X=t.get(j);X.color.copy(se).multiplyScalar(oe),X.halfWidth.set(j.width*.5,0,0),X.halfHeight.set(0,j.height*.5,0),r.rectArea[S]=X,S++}else if(j.isPointLight){const X=t.get(j);if(X.color.copy(j.color).multiplyScalar(j.intensity*w),X.distance=j.distance,X.decay=j.decay,j.castShadow){const J=j.shadow,ae=i.get(j);ae.shadowBias=J.bias,ae.shadowNormalBias=J.normalBias,ae.shadowRadius=J.radius,ae.shadowMapSize=J.mapSize,ae.shadowCameraNear=J.camera.near,ae.shadowCameraFar=J.camera.far,r.pointShadow[_]=ae,r.pointShadowMap[_]=N,r.pointShadowMatrix[_]=j.shadow.matrix,b++}r.point[_]=X,_++}else if(j.isHemisphereLight){const X=t.get(j);X.skyColor.copy(j.color).multiplyScalar(oe*w),X.groundColor.copy(j.groundColor).multiplyScalar(oe*w),r.hemi[x]=X,x++}}S>0&&(e.isWebGL2?n.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=Ze.LTC_FLOAT_1,r.rectAreaLTC2=Ze.LTC_FLOAT_2):(r.rectAreaLTC1=Ze.LTC_HALF_1,r.rectAreaLTC2=Ze.LTC_HALF_2):n.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=Ze.LTC_FLOAT_1,r.rectAreaLTC2=Ze.LTC_FLOAT_2):n.has("OES_texture_half_float_linear")===!0?(r.rectAreaLTC1=Ze.LTC_HALF_1,r.rectAreaLTC2=Ze.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=p,r.ambient[1]=m,r.ambient[2]=v;const D=r.hash;(D.directionalLength!==A||D.pointLength!==_||D.spotLength!==g||D.rectAreaLength!==S||D.hemiLength!==x||D.numDirectionalShadows!==E||D.numPointShadows!==b||D.numSpotShadows!==T||D.numSpotMaps!==P||D.numLightProbes!==z)&&(r.directional.length=A,r.spot.length=g,r.rectArea.length=S,r.point.length=_,r.hemi.length=x,r.directionalShadow.length=E,r.directionalShadowMap.length=E,r.pointShadow.length=b,r.pointShadowMap.length=b,r.spotShadow.length=T,r.spotShadowMap.length=T,r.directionalShadowMatrix.length=E,r.pointShadowMatrix.length=b,r.spotLightMatrix.length=T+P-I,r.spotLightMap.length=P,r.numSpotLightShadowsWithMaps=I,r.numLightProbes=z,D.directionalLength=A,D.pointLength=_,D.spotLength=g,D.rectAreaLength=S,D.hemiLength=x,D.numDirectionalShadows=E,D.numPointShadows=b,D.numSpotShadows=T,D.numSpotMaps=P,D.numLightProbes=z,r.version=wY++)}function u(c,h){let p=0,m=0,v=0,A=0,_=0;const g=h.matrixWorldInverse;for(let S=0,x=c.length;S<x;S++){const E=c[S];if(E.isDirectionalLight){const b=r.directional[p];b.direction.setFromMatrixPosition(E.matrixWorld),s.setFromMatrixPosition(E.target.matrixWorld),b.direction.sub(s),b.direction.transformDirection(g),p++}else if(E.isSpotLight){const b=r.spot[v];b.position.setFromMatrixPosition(E.matrixWorld),b.position.applyMatrix4(g),b.direction.setFromMatrixPosition(E.matrixWorld),s.setFromMatrixPosition(E.target.matrixWorld),b.direction.sub(s),b.direction.transformDirection(g),v++}else if(E.isRectAreaLight){const b=r.rectArea[A];b.position.setFromMatrixPosition(E.matrixWorld),b.position.applyMatrix4(g),a.identity(),o.copy(E.matrixWorld),o.premultiply(g),a.extractRotation(o),b.halfWidth.set(E.width*.5,0,0),b.halfHeight.set(0,E.height*.5,0),b.halfWidth.applyMatrix4(a),b.halfHeight.applyMatrix4(a),A++}else if(E.isPointLight){const b=r.point[m];b.position.setFromMatrixPosition(E.matrixWorld),b.position.applyMatrix4(g),m++}else if(E.isHemisphereLight){const b=r.hemi[_];b.direction.setFromMatrixPosition(E.matrixWorld),b.direction.transformDirection(g),_++}}}return{setup:l,setupView:u,state:r}}function OT(n,e){const t=new bY(n,e),i=[],r=[];function s(){i.length=0,r.length=0}function o(h){i.push(h)}function a(h){r.push(h)}function l(h){t.setup(i,h)}function u(h){t.setupView(i,h)}return{init:s,state:{lightsArray:i,shadowsArray:r,lights:t},setupLights:l,setupLightsView:u,pushLight:o,pushShadow:a}}function RY(n,e){let t=new WeakMap;function i(s,o=0){const a=t.get(s);let l;return a===void 0?(l=new OT(n,e),t.set(s,[l])):o>=a.length?(l=new OT(n,e),a.push(l)):l=a[o],l}function r(){t=new WeakMap}return{get:i,dispose:r}}class FC extends ti{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=kP,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class NC extends ti{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const PY=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,BY=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function IY(n,e,t){let i=new Ep;const r=new be,s=new be,o=new ln,a=new FC({depthPacking:zP}),l=new NC,u={},c=t.maxTextureSize,h={[lo]:tr,[tr]:lo,[rs]:rs},p=new ds({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new be},radius:{value:4}},vertexShader:PY,fragmentShader:BY}),m=p.clone();m.defines.HORIZONTAL_PASS=1;const v=new It;v.setAttribute("position",new $t(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const A=new Vn(v,p),_=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=uv;let g=this.type;this.render=function(T,P,I){if(_.enabled===!1||_.autoUpdate===!1&&_.needsUpdate===!1||T.length===0)return;const z=n.getRenderTarget(),w=n.getActiveCubeFace(),D=n.getActiveMipmapLevel(),Q=n.state;Q.setBlending(Wo),Q.buffers.color.setClear(1,1,1,1),Q.buffers.depth.setTest(!0),Q.setScissorTest(!1);const ie=g!==Ss&&this.type===Ss,j=g===Ss&&this.type!==Ss;for(let se=0,oe=T.length;se<oe;se++){const pe=T[se],N=pe.shadow;if(N===void 0){console.warn("THREE.WebGLShadowMap:",pe,"has no shadow.");continue}if(N.autoUpdate===!1&&N.needsUpdate===!1)continue;r.copy(N.mapSize);const X=N.getFrameExtents();if(r.multiply(X),s.copy(N.mapSize),(r.x>c||r.y>c)&&(r.x>c&&(s.x=Math.floor(c/X.x),r.x=s.x*X.x,N.mapSize.x=s.x),r.y>c&&(s.y=Math.floor(c/X.y),r.y=s.y*X.y,N.mapSize.y=s.y)),N.map===null||ie===!0||j===!0){const ae=this.type!==Ss?{minFilter:zn,magFilter:zn}:{};N.map!==null&&N.map.dispose(),N.map=new hs(r.x,r.y,ae),N.map.texture.name=pe.name+".shadowMap",N.camera.updateProjectionMatrix()}n.setRenderTarget(N.map),n.clear();const J=N.getViewportCount();for(let ae=0;ae<J;ae++){const me=N.getViewport(ae);o.set(s.x*me.x,s.y*me.y,s.x*me.z,s.y*me.w),Q.viewport(o),N.updateMatrices(pe,ae),i=N.getFrustum(),E(P,I,N.camera,pe,this.type)}N.isPointLightShadow!==!0&&this.type===Ss&&S(N,I),N.needsUpdate=!1}g=this.type,_.needsUpdate=!1,n.setRenderTarget(z,w,D)};function S(T,P){const I=e.update(A);p.defines.VSM_SAMPLES!==T.blurSamples&&(p.defines.VSM_SAMPLES=T.blurSamples,m.defines.VSM_SAMPLES=T.blurSamples,p.needsUpdate=!0,m.needsUpdate=!0),T.mapPass===null&&(T.mapPass=new hs(r.x,r.y)),p.uniforms.shadow_pass.value=T.map.texture,p.uniforms.resolution.value=T.mapSize,p.uniforms.radius.value=T.radius,n.setRenderTarget(T.mapPass),n.clear(),n.renderBufferDirect(P,null,I,p,A,null),m.uniforms.shadow_pass.value=T.mapPass.texture,m.uniforms.resolution.value=T.mapSize,m.uniforms.radius.value=T.radius,n.setRenderTarget(T.map),n.clear(),n.renderBufferDirect(P,null,I,m,A,null)}function x(T,P,I,z){let w=null;const D=I.isPointLight===!0?T.customDistanceMaterial:T.customDepthMaterial;if(D!==void 0)w=D;else if(w=I.isPointLight===!0?l:a,n.localClippingEnabled&&P.clipShadows===!0&&Array.isArray(P.clippingPlanes)&&P.clippingPlanes.length!==0||P.displacementMap&&P.displacementScale!==0||P.alphaMap&&P.alphaTest>0||P.map&&P.alphaTest>0){const Q=w.uuid,ie=P.uuid;let j=u[Q];j===void 0&&(j={},u[Q]=j);let se=j[ie];se===void 0&&(se=w.clone(),j[ie]=se,P.addEventListener("dispose",b)),w=se}if(w.visible=P.visible,w.wireframe=P.wireframe,z===Ss?w.side=P.shadowSide!==null?P.shadowSide:P.side:w.side=P.shadowSide!==null?P.shadowSide:h[P.side],w.alphaMap=P.alphaMap,w.alphaTest=P.alphaTest,w.map=P.map,w.clipShadows=P.clipShadows,w.clippingPlanes=P.clippingPlanes,w.clipIntersection=P.clipIntersection,w.displacementMap=P.displacementMap,w.displacementScale=P.displacementScale,w.displacementBias=P.displacementBias,w.wireframeLinewidth=P.wireframeLinewidth,w.linewidth=P.linewidth,I.isPointLight===!0&&w.isMeshDistanceMaterial===!0){const Q=n.properties.get(w);Q.light=I}return w}function E(T,P,I,z,w){if(T.visible===!1)return;if(T.layers.test(P.layers)&&(T.isMesh||T.isLine||T.isPoints)&&(T.castShadow||T.receiveShadow&&w===Ss)&&(!T.frustumCulled||i.intersectsObject(T))){T.modelViewMatrix.multiplyMatrices(I.matrixWorldInverse,T.matrixWorld);const ie=e.update(T),j=T.material;if(Array.isArray(j)){const se=ie.groups;for(let oe=0,pe=se.length;oe<pe;oe++){const N=se[oe],X=j[N.materialIndex];if(X&&X.visible){const J=x(T,X,z,w);T.onBeforeShadow(n,T,P,I,ie,J,N),n.renderBufferDirect(I,null,ie,J,T,N),T.onAfterShadow(n,T,P,I,ie,J,N)}}}else if(j.visible){const se=x(T,j,z,w);T.onBeforeShadow(n,T,P,I,ie,se,null),n.renderBufferDirect(I,null,ie,se,T,null),T.onAfterShadow(n,T,P,I,ie,se,null)}}const Q=T.children;for(let ie=0,j=Q.length;ie<j;ie++)E(Q[ie],P,I,z,w)}function b(T){T.target.removeEventListener("dispose",b);for(const I in u){const z=u[I],w=T.target.uuid;w in z&&(z[w].dispose(),delete z[w])}}}function LY(n,e,t){const i=t.isWebGL2;function r(){let re=!1;const Xe=new ln;let _e=null;const Ve=new ln(0,0,0,0);return{setMask:function(Je){_e!==Je&&!re&&(n.colorMask(Je,Je,Je,Je),_e=Je)},setLocked:function(Je){re=Je},setClear:function(Je,Mt,Gt,cn,En){En===!0&&(Je*=cn,Mt*=cn,Gt*=cn),Xe.set(Je,Mt,Gt,cn),Ve.equals(Xe)===!1&&(n.clearColor(Je,Mt,Gt,cn),Ve.copy(Xe))},reset:function(){re=!1,_e=null,Ve.set(-1,0,0,0)}}}function s(){let re=!1,Xe=null,_e=null,Ve=null;return{setTest:function(Je){Je?nt(n.DEPTH_TEST):Et(n.DEPTH_TEST)},setMask:function(Je){Xe!==Je&&!re&&(n.depthMask(Je),Xe=Je)},setFunc:function(Je){if(_e!==Je){switch(Je){case hP:n.depthFunc(n.NEVER);break;case dP:n.depthFunc(n.ALWAYS);break;case pP:n.depthFunc(n.LESS);break;case Vd:n.depthFunc(n.LEQUAL);break;case mP:n.depthFunc(n.EQUAL);break;case gP:n.depthFunc(n.GEQUAL);break;case vP:n.depthFunc(n.GREATER);break;case yP:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}_e=Je}},setLocked:function(Je){re=Je},setClear:function(Je){Ve!==Je&&(n.clearDepth(Je),Ve=Je)},reset:function(){re=!1,Xe=null,_e=null,Ve=null}}}function o(){let re=!1,Xe=null,_e=null,Ve=null,Je=null,Mt=null,Gt=null,cn=null,En=null;return{setTest:function(jt){re||(jt?nt(n.STENCIL_TEST):Et(n.STENCIL_TEST))},setMask:function(jt){Xe!==jt&&!re&&(n.stencilMask(jt),Xe=jt)},setFunc:function(jt,ni,rr){(_e!==jt||Ve!==ni||Je!==rr)&&(n.stencilFunc(jt,ni,rr),_e=jt,Ve=ni,Je=rr)},setOp:function(jt,ni,rr){(Mt!==jt||Gt!==ni||cn!==rr)&&(n.stencilOp(jt,ni,rr),Mt=jt,Gt=ni,cn=rr)},setLocked:function(jt){re=jt},setClear:function(jt){En!==jt&&(n.clearStencil(jt),En=jt)},reset:function(){re=!1,Xe=null,_e=null,Ve=null,Je=null,Mt=null,Gt=null,cn=null,En=null}}}const a=new r,l=new s,u=new o,c=new WeakMap,h=new WeakMap;let p={},m={},v=new WeakMap,A=[],_=null,g=!1,S=null,x=null,E=null,b=null,T=null,P=null,I=null,z=new qe(0,0,0),w=0,D=!1,Q=null,ie=null,j=null,se=null,oe=null;const pe=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let N=!1,X=0;const J=n.getParameter(n.VERSION);J.indexOf("WebGL")!==-1?(X=parseFloat(/^WebGL (\d)/.exec(J)[1]),N=X>=1):J.indexOf("OpenGL ES")!==-1&&(X=parseFloat(/^OpenGL ES (\d)/.exec(J)[1]),N=X>=2);let ae=null,me={};const Ue=n.getParameter(n.SCISSOR_BOX),he=n.getParameter(n.VIEWPORT),Te=new ln().fromArray(Ue),we=new ln().fromArray(he);function je(re,Xe,_e,Ve){const Je=new Uint8Array(4),Mt=n.createTexture();n.bindTexture(re,Mt),n.texParameteri(re,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(re,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let Gt=0;Gt<_e;Gt++)i&&(re===n.TEXTURE_3D||re===n.TEXTURE_2D_ARRAY)?n.texImage3D(Xe,0,n.RGBA,1,1,Ve,0,n.RGBA,n.UNSIGNED_BYTE,Je):n.texImage2D(Xe+Gt,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,Je);return Mt}const $e={};$e[n.TEXTURE_2D]=je(n.TEXTURE_2D,n.TEXTURE_2D,1),$e[n.TEXTURE_CUBE_MAP]=je(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),i&&($e[n.TEXTURE_2D_ARRAY]=je(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),$e[n.TEXTURE_3D]=je(n.TEXTURE_3D,n.TEXTURE_3D,1,1)),a.setClear(0,0,0,1),l.setClear(1),u.setClear(0),nt(n.DEPTH_TEST),l.setFunc(Vd),V(!1),ne(w3),nt(n.CULL_FACE),Ie(Wo);function nt(re){p[re]!==!0&&(n.enable(re),p[re]=!0)}function Et(re){p[re]!==!1&&(n.disable(re),p[re]=!1)}function et(re,Xe){return m[re]!==Xe?(n.bindFramebuffer(re,Xe),m[re]=Xe,i&&(re===n.DRAW_FRAMEBUFFER&&(m[n.FRAMEBUFFER]=Xe),re===n.FRAMEBUFFER&&(m[n.DRAW_FRAMEBUFFER]=Xe)),!0):!1}function Z(re,Xe){let _e=A,Ve=!1;if(re){_e=v.get(Xe),_e===void 0&&(_e=[],v.set(Xe,_e));const Je=re.textures;if(_e.length!==Je.length||_e[0]!==n.COLOR_ATTACHMENT0){for(let Mt=0,Gt=Je.length;Mt<Gt;Mt++)_e[Mt]=n.COLOR_ATTACHMENT0+Mt;_e.length=Je.length,Ve=!0}}else _e[0]!==n.BACK&&(_e[0]=n.BACK,Ve=!0);if(Ve)if(t.isWebGL2)n.drawBuffers(_e);else if(e.has("WEBGL_draw_buffers")===!0)e.get("WEBGL_draw_buffers").drawBuffersWEBGL(_e);else throw new Error("THREE.WebGLState: Usage of gl.drawBuffers() require WebGL2 or WEBGL_draw_buffers extension")}function De(re){return _!==re?(n.useProgram(re),_=re,!0):!1}const Re={[Pa]:n.FUNC_ADD,[q7]:n.FUNC_SUBTRACT,[Q7]:n.FUNC_REVERSE_SUBTRACT};if(i)Re[P3]=n.MIN,Re[B3]=n.MAX;else{const re=e.get("EXT_blend_minmax");re!==null&&(Re[P3]=re.MIN_EXT,Re[B3]=re.MAX_EXT)}const ze={[$7]:n.ZERO,[eP]:n.ONE,[tP]:n.SRC_COLOR,[vg]:n.SRC_ALPHA,[aP]:n.SRC_ALPHA_SATURATE,[sP]:n.DST_COLOR,[iP]:n.DST_ALPHA,[nP]:n.ONE_MINUS_SRC_COLOR,[yg]:n.ONE_MINUS_SRC_ALPHA,[oP]:n.ONE_MINUS_DST_COLOR,[rP]:n.ONE_MINUS_DST_ALPHA,[lP]:n.CONSTANT_COLOR,[uP]:n.ONE_MINUS_CONSTANT_COLOR,[cP]:n.CONSTANT_ALPHA,[fP]:n.ONE_MINUS_CONSTANT_ALPHA};function Ie(re,Xe,_e,Ve,Je,Mt,Gt,cn,En,jt){if(re===Wo){g===!0&&(Et(n.BLEND),g=!1);return}if(g===!1&&(nt(n.BLEND),g=!0),re!==Z7){if(re!==S||jt!==D){if((x!==Pa||T!==Pa)&&(n.blendEquation(n.FUNC_ADD),x=Pa,T=Pa),jt)switch(re){case gu:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case T3:n.blendFunc(n.ONE,n.ONE);break;case b3:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case R3:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",re);break}else switch(re){case gu:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case T3:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case b3:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case R3:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",re);break}E=null,b=null,P=null,I=null,z.set(0,0,0),w=0,S=re,D=jt}return}Je=Je||Xe,Mt=Mt||_e,Gt=Gt||Ve,(Xe!==x||Je!==T)&&(n.blendEquationSeparate(Re[Xe],Re[Je]),x=Xe,T=Je),(_e!==E||Ve!==b||Mt!==P||Gt!==I)&&(n.blendFuncSeparate(ze[_e],ze[Ve],ze[Mt],ze[Gt]),E=_e,b=Ve,P=Mt,I=Gt),(cn.equals(z)===!1||En!==w)&&(n.blendColor(cn.r,cn.g,cn.b,En),z.copy(cn),w=En),S=re,D=!1}function it(re,Xe){re.side===rs?Et(n.CULL_FACE):nt(n.CULL_FACE);let _e=re.side===tr;Xe&&(_e=!_e),V(_e),re.blending===gu&&re.transparent===!1?Ie(Wo):Ie(re.blending,re.blendEquation,re.blendSrc,re.blendDst,re.blendEquationAlpha,re.blendSrcAlpha,re.blendDstAlpha,re.blendColor,re.blendAlpha,re.premultipliedAlpha),l.setFunc(re.depthFunc),l.setTest(re.depthTest),l.setMask(re.depthWrite),a.setMask(re.colorWrite);const Ve=re.stencilWrite;u.setTest(Ve),Ve&&(u.setMask(re.stencilWriteMask),u.setFunc(re.stencilFunc,re.stencilRef,re.stencilFuncMask),u.setOp(re.stencilFail,re.stencilZFail,re.stencilZPass)),O(re.polygonOffset,re.polygonOffsetFactor,re.polygonOffsetUnits),re.alphaToCoverage===!0?nt(n.SAMPLE_ALPHA_TO_COVERAGE):Et(n.SAMPLE_ALPHA_TO_COVERAGE)}function V(re){Q!==re&&(re?n.frontFace(n.CW):n.frontFace(n.CCW),Q=re)}function ne(re){re!==J7?(nt(n.CULL_FACE),re!==ie&&(re===w3?n.cullFace(n.BACK):re===K7?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):Et(n.CULL_FACE),ie=re}function de(re){re!==j&&(N&&n.lineWidth(re),j=re)}function O(re,Xe,_e){re?(nt(n.POLYGON_OFFSET_FILL),(se!==Xe||oe!==_e)&&(n.polygonOffset(Xe,_e),se=Xe,oe=_e)):Et(n.POLYGON_OFFSET_FILL)}function L(re){re?nt(n.SCISSOR_TEST):Et(n.SCISSOR_TEST)}function ee(re){re===void 0&&(re=n.TEXTURE0+pe-1),ae!==re&&(n.activeTexture(re),ae=re)}function ue(re,Xe,_e){_e===void 0&&(ae===null?_e=n.TEXTURE0+pe-1:_e=ae);let Ve=me[_e];Ve===void 0&&(Ve={type:void 0,texture:void 0},me[_e]=Ve),(Ve.type!==re||Ve.texture!==Xe)&&(ae!==_e&&(n.activeTexture(_e),ae=_e),n.bindTexture(re,Xe||$e[re]),Ve.type=re,Ve.texture=Xe)}function Ce(){const re=me[ae];re!==void 0&&re.type!==void 0&&(n.bindTexture(re.type,null),re.type=void 0,re.texture=void 0)}function Pe(){try{n.compressedTexImage2D.apply(n,arguments)}catch(re){console.error("THREE.WebGLState:",re)}}function ft(){try{n.compressedTexImage3D.apply(n,arguments)}catch(re){console.error("THREE.WebGLState:",re)}}function ht(){try{n.texSubImage2D.apply(n,arguments)}catch(re){console.error("THREE.WebGLState:",re)}}function He(){try{n.texSubImage3D.apply(n,arguments)}catch(re){console.error("THREE.WebGLState:",re)}}function Ke(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(re){console.error("THREE.WebGLState:",re)}}function _t(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(re){console.error("THREE.WebGLState:",re)}}function Ge(){try{n.texStorage2D.apply(n,arguments)}catch(re){console.error("THREE.WebGLState:",re)}}function Jt(){try{n.texStorage3D.apply(n,arguments)}catch(re){console.error("THREE.WebGLState:",re)}}function mt(){try{n.texImage2D.apply(n,arguments)}catch(re){console.error("THREE.WebGLState:",re)}}function dt(){try{n.texImage3D.apply(n,arguments)}catch(re){console.error("THREE.WebGLState:",re)}}function q(re){Te.equals(re)===!1&&(n.scissor(re.x,re.y,re.z,re.w),Te.copy(re))}function ve(re){we.equals(re)===!1&&(n.viewport(re.x,re.y,re.z,re.w),we.copy(re))}function Ne(re,Xe){let _e=h.get(Xe);_e===void 0&&(_e=new WeakMap,h.set(Xe,_e));let Ve=_e.get(re);Ve===void 0&&(Ve=n.getUniformBlockIndex(Xe,re.name),_e.set(re,Ve))}function Qe(re,Xe){const Ve=h.get(Xe).get(re);c.get(Xe)!==Ve&&(n.uniformBlockBinding(Xe,Ve,re.__bindingPointIndex),c.set(Xe,Ve))}function Le(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),i===!0&&(n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),p={},ae=null,me={},m={},v=new WeakMap,A=[],_=null,g=!1,S=null,x=null,E=null,b=null,T=null,P=null,I=null,z=new qe(0,0,0),w=0,D=!1,Q=null,ie=null,j=null,se=null,oe=null,Te.set(0,0,n.canvas.width,n.canvas.height),we.set(0,0,n.canvas.width,n.canvas.height),a.reset(),l.reset(),u.reset()}return{buffers:{color:a,depth:l,stencil:u},enable:nt,disable:Et,bindFramebuffer:et,drawBuffers:Z,useProgram:De,setBlending:Ie,setMaterial:it,setFlipSided:V,setCullFace:ne,setLineWidth:de,setPolygonOffset:O,setScissorTest:L,activeTexture:ee,bindTexture:ue,unbindTexture:Ce,compressedTexImage2D:Pe,compressedTexImage3D:ft,texImage2D:mt,texImage3D:dt,updateUBOMapping:Ne,uniformBlockBinding:Qe,texStorage2D:Ge,texStorage3D:Jt,texSubImage2D:ht,texSubImage3D:He,compressedTexSubImage2D:Ke,compressedTexSubImage3D:_t,scissor:q,viewport:ve,reset:Le}}function DY(n,e,t,i,r,s,o){const a=r.isWebGL2,l=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,u=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),c=new be,h=new WeakMap;let p;const m=new WeakMap;let v=!1;try{v=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function A(O,L){return v?new OffscreenCanvas(O,L):Qd("canvas")}function _(O,L,ee,ue){let Ce=1;const Pe=de(O);if((Pe.width>ue||Pe.height>ue)&&(Ce=ue/Math.max(Pe.width,Pe.height)),Ce<1||L===!0)if(typeof HTMLImageElement<"u"&&O instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&O instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&O instanceof ImageBitmap||typeof VideoFrame<"u"&&O instanceof VideoFrame){const ft=L?Ag:Math.floor,ht=ft(Ce*Pe.width),He=ft(Ce*Pe.height);p===void 0&&(p=A(ht,He));const Ke=ee?A(ht,He):p;return Ke.width=ht,Ke.height=He,Ke.getContext("2d").drawImage(O,0,0,ht,He),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Pe.width+"x"+Pe.height+") to ("+ht+"x"+He+")."),Ke}else return"data"in O&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Pe.width+"x"+Pe.height+")."),O;return O}function g(O){const L=de(O);return oA(L.width)&&oA(L.height)}function S(O){return a?!1:O.wrapS!==Ei||O.wrapT!==Ei||O.minFilter!==zn&&O.minFilter!==rn}function x(O,L){return O.generateMipmaps&&L&&O.minFilter!==zn&&O.minFilter!==rn}function E(O){n.generateMipmap(O)}function b(O,L,ee,ue,Ce=!1){if(a===!1)return L;if(O!==null){if(n[O]!==void 0)return n[O];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+O+"'")}let Pe=L;if(L===n.RED&&(ee===n.FLOAT&&(Pe=n.R32F),ee===n.HALF_FLOAT&&(Pe=n.R16F),ee===n.UNSIGNED_BYTE&&(Pe=n.R8)),L===n.RED_INTEGER&&(ee===n.UNSIGNED_BYTE&&(Pe=n.R8UI),ee===n.UNSIGNED_SHORT&&(Pe=n.R16UI),ee===n.UNSIGNED_INT&&(Pe=n.R32UI),ee===n.BYTE&&(Pe=n.R8I),ee===n.SHORT&&(Pe=n.R16I),ee===n.INT&&(Pe=n.R32I)),L===n.RG&&(ee===n.FLOAT&&(Pe=n.RG32F),ee===n.HALF_FLOAT&&(Pe=n.RG16F),ee===n.UNSIGNED_BYTE&&(Pe=n.RG8)),L===n.RG_INTEGER&&(ee===n.UNSIGNED_BYTE&&(Pe=n.RG8UI),ee===n.UNSIGNED_SHORT&&(Pe=n.RG16UI),ee===n.UNSIGNED_INT&&(Pe=n.RG32UI),ee===n.BYTE&&(Pe=n.RG8I),ee===n.SHORT&&(Pe=n.RG16I),ee===n.INT&&(Pe=n.RG32I)),L===n.RGBA){const ft=Ce?Jd:an.getTransfer(ue);ee===n.FLOAT&&(Pe=n.RGBA32F),ee===n.HALF_FLOAT&&(Pe=n.RGBA16F),ee===n.UNSIGNED_BYTE&&(Pe=ft===pn?n.SRGB8_ALPHA8:n.RGBA8),ee===n.UNSIGNED_SHORT_4_4_4_4&&(Pe=n.RGBA4),ee===n.UNSIGNED_SHORT_5_5_5_1&&(Pe=n.RGB5_A1)}return(Pe===n.R16F||Pe===n.R32F||Pe===n.RG16F||Pe===n.RG32F||Pe===n.RGBA16F||Pe===n.RGBA32F)&&e.get("EXT_color_buffer_float"),Pe}function T(O,L,ee){return x(O,ee)===!0||O.isFramebufferTexture&&O.minFilter!==zn&&O.minFilter!==rn?Math.log2(Math.max(L.width,L.height))+1:O.mipmaps!==void 0&&O.mipmaps.length>0?O.mipmaps.length:O.isCompressedTexture&&Array.isArray(O.image)?L.mipmaps.length:1}function P(O){return O===zn||O===jd||O===Ba?n.NEAREST:n.LINEAR}function I(O){const L=O.target;L.removeEventListener("dispose",I),w(L),L.isVideoTexture&&h.delete(L)}function z(O){const L=O.target;L.removeEventListener("dispose",z),Q(L)}function w(O){const L=i.get(O);if(L.__webglInit===void 0)return;const ee=O.source,ue=m.get(ee);if(ue){const Ce=ue[L.__cacheKey];Ce.usedTimes--,Ce.usedTimes===0&&D(O),Object.keys(ue).length===0&&m.delete(ee)}i.remove(O)}function D(O){const L=i.get(O);n.deleteTexture(L.__webglTexture);const ee=O.source,ue=m.get(ee);delete ue[L.__cacheKey],o.memory.textures--}function Q(O){const L=i.get(O);if(O.depthTexture&&O.depthTexture.dispose(),O.isWebGLCubeRenderTarget)for(let ue=0;ue<6;ue++){if(Array.isArray(L.__webglFramebuffer[ue]))for(let Ce=0;Ce<L.__webglFramebuffer[ue].length;Ce++)n.deleteFramebuffer(L.__webglFramebuffer[ue][Ce]);else n.deleteFramebuffer(L.__webglFramebuffer[ue]);L.__webglDepthbuffer&&n.deleteRenderbuffer(L.__webglDepthbuffer[ue])}else{if(Array.isArray(L.__webglFramebuffer))for(let ue=0;ue<L.__webglFramebuffer.length;ue++)n.deleteFramebuffer(L.__webglFramebuffer[ue]);else n.deleteFramebuffer(L.__webglFramebuffer);if(L.__webglDepthbuffer&&n.deleteRenderbuffer(L.__webglDepthbuffer),L.__webglMultisampledFramebuffer&&n.deleteFramebuffer(L.__webglMultisampledFramebuffer),L.__webglColorRenderbuffer)for(let ue=0;ue<L.__webglColorRenderbuffer.length;ue++)L.__webglColorRenderbuffer[ue]&&n.deleteRenderbuffer(L.__webglColorRenderbuffer[ue]);L.__webglDepthRenderbuffer&&n.deleteRenderbuffer(L.__webglDepthRenderbuffer)}const ee=O.textures;for(let ue=0,Ce=ee.length;ue<Ce;ue++){const Pe=i.get(ee[ue]);Pe.__webglTexture&&(n.deleteTexture(Pe.__webglTexture),o.memory.textures--),i.remove(ee[ue])}i.remove(O)}let ie=0;function j(){ie=0}function se(){const O=ie;return O>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+O+" texture units while this GPU supports only "+r.maxTextures),ie+=1,O}function oe(O){const L=[];return L.push(O.wrapS),L.push(O.wrapT),L.push(O.wrapR||0),L.push(O.magFilter),L.push(O.minFilter),L.push(O.anisotropy),L.push(O.internalFormat),L.push(O.format),L.push(O.type),L.push(O.generateMipmaps),L.push(O.premultiplyAlpha),L.push(O.flipY),L.push(O.unpackAlignment),L.push(O.colorSpace),L.join()}function pe(O,L){const ee=i.get(O);if(O.isVideoTexture&&V(O),O.isRenderTargetTexture===!1&&O.version>0&&ee.__version!==O.version){const ue=O.image;if(ue===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(ue.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{we(ee,O,L);return}}t.bindTexture(n.TEXTURE_2D,ee.__webglTexture,n.TEXTURE0+L)}function N(O,L){const ee=i.get(O);if(O.version>0&&ee.__version!==O.version){we(ee,O,L);return}t.bindTexture(n.TEXTURE_2D_ARRAY,ee.__webglTexture,n.TEXTURE0+L)}function X(O,L){const ee=i.get(O);if(O.version>0&&ee.__version!==O.version){we(ee,O,L);return}t.bindTexture(n.TEXTURE_3D,ee.__webglTexture,n.TEXTURE0+L)}function J(O,L){const ee=i.get(O);if(O.version>0&&ee.__version!==O.version){je(ee,O,L);return}t.bindTexture(n.TEXTURE_CUBE_MAP,ee.__webglTexture,n.TEXTURE0+L)}const ae={[il]:n.REPEAT,[Ei]:n.CLAMP_TO_EDGE,[Sf]:n.MIRRORED_REPEAT},me={[zn]:n.NEAREST,[jd]:n.NEAREST_MIPMAP_NEAREST,[Ba]:n.NEAREST_MIPMAP_LINEAR,[rn]:n.LINEAR,[lf]:n.LINEAR_MIPMAP_NEAREST,[as]:n.LINEAR_MIPMAP_LINEAR},Ue={[GP]:n.NEVER,[KP]:n.ALWAYS,[VP]:n.LESS,[wC]:n.LEQUAL,[WP]:n.EQUAL,[JP]:n.GEQUAL,[jP]:n.GREATER,[XP]:n.NOTEQUAL};function he(O,L,ee){if(L.type===ei&&e.has("OES_texture_float_linear")===!1&&(L.magFilter===rn||L.magFilter===lf||L.magFilter===Ba||L.magFilter===as||L.minFilter===rn||L.minFilter===lf||L.minFilter===Ba||L.minFilter===as)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),ee?(n.texParameteri(O,n.TEXTURE_WRAP_S,ae[L.wrapS]),n.texParameteri(O,n.TEXTURE_WRAP_T,ae[L.wrapT]),(O===n.TEXTURE_3D||O===n.TEXTURE_2D_ARRAY)&&n.texParameteri(O,n.TEXTURE_WRAP_R,ae[L.wrapR]),n.texParameteri(O,n.TEXTURE_MAG_FILTER,me[L.magFilter]),n.texParameteri(O,n.TEXTURE_MIN_FILTER,me[L.minFilter])):(n.texParameteri(O,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(O,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),(O===n.TEXTURE_3D||O===n.TEXTURE_2D_ARRAY)&&n.texParameteri(O,n.TEXTURE_WRAP_R,n.CLAMP_TO_EDGE),(L.wrapS!==Ei||L.wrapT!==Ei)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(O,n.TEXTURE_MAG_FILTER,P(L.magFilter)),n.texParameteri(O,n.TEXTURE_MIN_FILTER,P(L.minFilter)),L.minFilter!==zn&&L.minFilter!==rn&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),L.compareFunction&&(n.texParameteri(O,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(O,n.TEXTURE_COMPARE_FUNC,Ue[L.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(L.magFilter===zn||L.minFilter!==Ba&&L.minFilter!==as||L.type===ei&&e.has("OES_texture_float_linear")===!1||a===!1&&L.type===Hi&&e.has("OES_texture_half_float_linear")===!1)return;if(L.anisotropy>1||i.get(L).__currentAnisotropy){const ue=e.get("EXT_texture_filter_anisotropic");n.texParameterf(O,ue.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(L.anisotropy,r.getMaxAnisotropy())),i.get(L).__currentAnisotropy=L.anisotropy}}}function Te(O,L){let ee=!1;O.__webglInit===void 0&&(O.__webglInit=!0,L.addEventListener("dispose",I));const ue=L.source;let Ce=m.get(ue);Ce===void 0&&(Ce={},m.set(ue,Ce));const Pe=oe(L);if(Pe!==O.__cacheKey){Ce[Pe]===void 0&&(Ce[Pe]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,ee=!0),Ce[Pe].usedTimes++;const ft=Ce[O.__cacheKey];ft!==void 0&&(Ce[O.__cacheKey].usedTimes--,ft.usedTimes===0&&D(L)),O.__cacheKey=Pe,O.__webglTexture=Ce[Pe].texture}return ee}function we(O,L,ee){let ue=n.TEXTURE_2D;(L.isDataArrayTexture||L.isCompressedArrayTexture)&&(ue=n.TEXTURE_2D_ARRAY),L.isData3DTexture&&(ue=n.TEXTURE_3D);const Ce=Te(O,L),Pe=L.source;t.bindTexture(ue,O.__webglTexture,n.TEXTURE0+ee);const ft=i.get(Pe);if(Pe.version!==ft.__version||Ce===!0){t.activeTexture(n.TEXTURE0+ee);const ht=an.getPrimaries(an.workingColorSpace),He=L.colorSpace===Do?null:an.getPrimaries(L.colorSpace),Ke=L.colorSpace===Do||ht===He?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,L.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,L.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,L.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Ke);const _t=S(L)&&g(L.image)===!1;let Ge=_(L.image,_t,!1,r.maxTextureSize);Ge=ne(L,Ge);const Jt=g(Ge)||a,mt=s.convert(L.format,L.colorSpace);let dt=s.convert(L.type),q=b(L.internalFormat,mt,dt,L.colorSpace,L.isVideoTexture);he(ue,L,Jt);let ve;const Ne=L.mipmaps,Qe=a&&L.isVideoTexture!==!0&&q!==CC,Le=ft.__version===void 0||Ce===!0,re=Pe.dataReady,Xe=T(L,Ge,Jt);if(L.isDepthTexture)q=n.DEPTH_COMPONENT,a?L.type===ei?q=n.DEPTH_COMPONENT32F:L.type===ko?q=n.DEPTH_COMPONENT24:L.type===Ka?q=n.DEPTH24_STENCIL8:q=n.DEPTH_COMPONENT16:L.type===ei&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),L.format===Ya&&q===n.DEPTH_COMPONENT&&L.type!==fv&&L.type!==ko&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),L.type=ko,dt=s.convert(L.type)),L.format===wu&&q===n.DEPTH_COMPONENT&&(q=n.DEPTH_STENCIL,L.type!==Ka&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),L.type=Ka,dt=s.convert(L.type))),Le&&(Qe?t.texStorage2D(n.TEXTURE_2D,1,q,Ge.width,Ge.height):t.texImage2D(n.TEXTURE_2D,0,q,Ge.width,Ge.height,0,mt,dt,null));else if(L.isDataTexture)if(Ne.length>0&&Jt){Qe&&Le&&t.texStorage2D(n.TEXTURE_2D,Xe,q,Ne[0].width,Ne[0].height);for(let _e=0,Ve=Ne.length;_e<Ve;_e++)ve=Ne[_e],Qe?re&&t.texSubImage2D(n.TEXTURE_2D,_e,0,0,ve.width,ve.height,mt,dt,ve.data):t.texImage2D(n.TEXTURE_2D,_e,q,ve.width,ve.height,0,mt,dt,ve.data);L.generateMipmaps=!1}else Qe?(Le&&t.texStorage2D(n.TEXTURE_2D,Xe,q,Ge.width,Ge.height),re&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,Ge.width,Ge.height,mt,dt,Ge.data)):t.texImage2D(n.TEXTURE_2D,0,q,Ge.width,Ge.height,0,mt,dt,Ge.data);else if(L.isCompressedTexture)if(L.isCompressedArrayTexture){Qe&&Le&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Xe,q,Ne[0].width,Ne[0].height,Ge.depth);for(let _e=0,Ve=Ne.length;_e<Ve;_e++)ve=Ne[_e],L.format!==zi?mt!==null?Qe?re&&t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,_e,0,0,0,ve.width,ve.height,Ge.depth,mt,ve.data,0,0):t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,_e,q,ve.width,ve.height,Ge.depth,0,ve.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Qe?re&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,_e,0,0,0,ve.width,ve.height,Ge.depth,mt,dt,ve.data):t.texImage3D(n.TEXTURE_2D_ARRAY,_e,q,ve.width,ve.height,Ge.depth,0,mt,dt,ve.data)}else{Qe&&Le&&t.texStorage2D(n.TEXTURE_2D,Xe,q,Ne[0].width,Ne[0].height);for(let _e=0,Ve=Ne.length;_e<Ve;_e++)ve=Ne[_e],L.format!==zi?mt!==null?Qe?re&&t.compressedTexSubImage2D(n.TEXTURE_2D,_e,0,0,ve.width,ve.height,mt,ve.data):t.compressedTexImage2D(n.TEXTURE_2D,_e,q,ve.width,ve.height,0,ve.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Qe?re&&t.texSubImage2D(n.TEXTURE_2D,_e,0,0,ve.width,ve.height,mt,dt,ve.data):t.texImage2D(n.TEXTURE_2D,_e,q,ve.width,ve.height,0,mt,dt,ve.data)}else if(L.isDataArrayTexture)Qe?(Le&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Xe,q,Ge.width,Ge.height,Ge.depth),re&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,Ge.width,Ge.height,Ge.depth,mt,dt,Ge.data)):t.texImage3D(n.TEXTURE_2D_ARRAY,0,q,Ge.width,Ge.height,Ge.depth,0,mt,dt,Ge.data);else if(L.isData3DTexture)Qe?(Le&&t.texStorage3D(n.TEXTURE_3D,Xe,q,Ge.width,Ge.height,Ge.depth),re&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,Ge.width,Ge.height,Ge.depth,mt,dt,Ge.data)):t.texImage3D(n.TEXTURE_3D,0,q,Ge.width,Ge.height,Ge.depth,0,mt,dt,Ge.data);else if(L.isFramebufferTexture){if(Le)if(Qe)t.texStorage2D(n.TEXTURE_2D,Xe,q,Ge.width,Ge.height);else{let _e=Ge.width,Ve=Ge.height;for(let Je=0;Je<Xe;Je++)t.texImage2D(n.TEXTURE_2D,Je,q,_e,Ve,0,mt,dt,null),_e>>=1,Ve>>=1}}else if(Ne.length>0&&Jt){if(Qe&&Le){const _e=de(Ne[0]);t.texStorage2D(n.TEXTURE_2D,Xe,q,_e.width,_e.height)}for(let _e=0,Ve=Ne.length;_e<Ve;_e++)ve=Ne[_e],Qe?re&&t.texSubImage2D(n.TEXTURE_2D,_e,0,0,mt,dt,ve):t.texImage2D(n.TEXTURE_2D,_e,q,mt,dt,ve);L.generateMipmaps=!1}else if(Qe){if(Le){const _e=de(Ge);t.texStorage2D(n.TEXTURE_2D,Xe,q,_e.width,_e.height)}re&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,mt,dt,Ge)}else t.texImage2D(n.TEXTURE_2D,0,q,mt,dt,Ge);x(L,Jt)&&E(ue),ft.__version=Pe.version,L.onUpdate&&L.onUpdate(L)}O.__version=L.version}function je(O,L,ee){if(L.image.length!==6)return;const ue=Te(O,L),Ce=L.source;t.bindTexture(n.TEXTURE_CUBE_MAP,O.__webglTexture,n.TEXTURE0+ee);const Pe=i.get(Ce);if(Ce.version!==Pe.__version||ue===!0){t.activeTexture(n.TEXTURE0+ee);const ft=an.getPrimaries(an.workingColorSpace),ht=L.colorSpace===Do?null:an.getPrimaries(L.colorSpace),He=L.colorSpace===Do||ft===ht?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,L.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,L.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,L.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,He);const Ke=L.isCompressedTexture||L.image[0].isCompressedTexture,_t=L.image[0]&&L.image[0].isDataTexture,Ge=[];for(let _e=0;_e<6;_e++)!Ke&&!_t?Ge[_e]=_(L.image[_e],!1,!0,r.maxCubemapSize):Ge[_e]=_t?L.image[_e].image:L.image[_e],Ge[_e]=ne(L,Ge[_e]);const Jt=Ge[0],mt=g(Jt)||a,dt=s.convert(L.format,L.colorSpace),q=s.convert(L.type),ve=b(L.internalFormat,dt,q,L.colorSpace),Ne=a&&L.isVideoTexture!==!0,Qe=Pe.__version===void 0||ue===!0,Le=Ce.dataReady;let re=T(L,Jt,mt);he(n.TEXTURE_CUBE_MAP,L,mt);let Xe;if(Ke){Ne&&Qe&&t.texStorage2D(n.TEXTURE_CUBE_MAP,re,ve,Jt.width,Jt.height);for(let _e=0;_e<6;_e++){Xe=Ge[_e].mipmaps;for(let Ve=0;Ve<Xe.length;Ve++){const Je=Xe[Ve];L.format!==zi?dt!==null?Ne?Le&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+_e,Ve,0,0,Je.width,Je.height,dt,Je.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+_e,Ve,ve,Je.width,Je.height,0,Je.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Ne?Le&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+_e,Ve,0,0,Je.width,Je.height,dt,q,Je.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+_e,Ve,ve,Je.width,Je.height,0,dt,q,Je.data)}}}else{if(Xe=L.mipmaps,Ne&&Qe){Xe.length>0&&re++;const _e=de(Ge[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,re,ve,_e.width,_e.height)}for(let _e=0;_e<6;_e++)if(_t){Ne?Le&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+_e,0,0,0,Ge[_e].width,Ge[_e].height,dt,q,Ge[_e].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+_e,0,ve,Ge[_e].width,Ge[_e].height,0,dt,q,Ge[_e].data);for(let Ve=0;Ve<Xe.length;Ve++){const Mt=Xe[Ve].image[_e].image;Ne?Le&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+_e,Ve+1,0,0,Mt.width,Mt.height,dt,q,Mt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+_e,Ve+1,ve,Mt.width,Mt.height,0,dt,q,Mt.data)}}else{Ne?Le&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+_e,0,0,0,dt,q,Ge[_e]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+_e,0,ve,dt,q,Ge[_e]);for(let Ve=0;Ve<Xe.length;Ve++){const Je=Xe[Ve];Ne?Le&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+_e,Ve+1,0,0,dt,q,Je.image[_e]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+_e,Ve+1,ve,dt,q,Je.image[_e])}}}x(L,mt)&&E(n.TEXTURE_CUBE_MAP),Pe.__version=Ce.version,L.onUpdate&&L.onUpdate(L)}O.__version=L.version}function $e(O,L,ee,ue,Ce,Pe){const ft=s.convert(ee.format,ee.colorSpace),ht=s.convert(ee.type),He=b(ee.internalFormat,ft,ht,ee.colorSpace);if(!i.get(L).__hasExternalTextures){const _t=Math.max(1,L.width>>Pe),Ge=Math.max(1,L.height>>Pe);Ce===n.TEXTURE_3D||Ce===n.TEXTURE_2D_ARRAY?t.texImage3D(Ce,Pe,He,_t,Ge,L.depth,0,ft,ht,null):t.texImage2D(Ce,Pe,He,_t,Ge,0,ft,ht,null)}t.bindFramebuffer(n.FRAMEBUFFER,O),it(L)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,ue,Ce,i.get(ee).__webglTexture,0,Ie(L)):(Ce===n.TEXTURE_2D||Ce>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&Ce<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,ue,Ce,i.get(ee).__webglTexture,Pe),t.bindFramebuffer(n.FRAMEBUFFER,null)}function nt(O,L,ee){if(n.bindRenderbuffer(n.RENDERBUFFER,O),L.depthBuffer&&!L.stencilBuffer){let ue=a===!0?n.DEPTH_COMPONENT24:n.DEPTH_COMPONENT16;if(ee||it(L)){const Ce=L.depthTexture;Ce&&Ce.isDepthTexture&&(Ce.type===ei?ue=n.DEPTH_COMPONENT32F:Ce.type===ko&&(ue=n.DEPTH_COMPONENT24));const Pe=Ie(L);it(L)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Pe,ue,L.width,L.height):n.renderbufferStorageMultisample(n.RENDERBUFFER,Pe,ue,L.width,L.height)}else n.renderbufferStorage(n.RENDERBUFFER,ue,L.width,L.height);n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,O)}else if(L.depthBuffer&&L.stencilBuffer){const ue=Ie(L);ee&&it(L)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,ue,n.DEPTH24_STENCIL8,L.width,L.height):it(L)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,ue,n.DEPTH24_STENCIL8,L.width,L.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,L.width,L.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,O)}else{const ue=L.textures;for(let Ce=0;Ce<ue.length;Ce++){const Pe=ue[Ce],ft=s.convert(Pe.format,Pe.colorSpace),ht=s.convert(Pe.type),He=b(Pe.internalFormat,ft,ht,Pe.colorSpace),Ke=Ie(L);ee&&it(L)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,Ke,He,L.width,L.height):it(L)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Ke,He,L.width,L.height):n.renderbufferStorage(n.RENDERBUFFER,He,L.width,L.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function Et(O,L){if(L&&L.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,O),!(L.depthTexture&&L.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(L.depthTexture).__webglTexture||L.depthTexture.image.width!==L.width||L.depthTexture.image.height!==L.height)&&(L.depthTexture.image.width=L.width,L.depthTexture.image.height=L.height,L.depthTexture.needsUpdate=!0),pe(L.depthTexture,0);const ue=i.get(L.depthTexture).__webglTexture,Ce=Ie(L);if(L.depthTexture.format===Ya)it(L)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,ue,0,Ce):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,ue,0);else if(L.depthTexture.format===wu)it(L)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,ue,0,Ce):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,ue,0);else throw new Error("Unknown depthTexture format")}function et(O){const L=i.get(O),ee=O.isWebGLCubeRenderTarget===!0;if(O.depthTexture&&!L.__autoAllocateDepthBuffer){if(ee)throw new Error("target.depthTexture not supported in Cube render targets");Et(L.__webglFramebuffer,O)}else if(ee){L.__webglDepthbuffer=[];for(let ue=0;ue<6;ue++)t.bindFramebuffer(n.FRAMEBUFFER,L.__webglFramebuffer[ue]),L.__webglDepthbuffer[ue]=n.createRenderbuffer(),nt(L.__webglDepthbuffer[ue],O,!1)}else t.bindFramebuffer(n.FRAMEBUFFER,L.__webglFramebuffer),L.__webglDepthbuffer=n.createRenderbuffer(),nt(L.__webglDepthbuffer,O,!1);t.bindFramebuffer(n.FRAMEBUFFER,null)}function Z(O,L,ee){const ue=i.get(O);L!==void 0&&$e(ue.__webglFramebuffer,O,O.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),ee!==void 0&&et(O)}function De(O){const L=O.texture,ee=i.get(O),ue=i.get(L);O.addEventListener("dispose",z);const Ce=O.textures,Pe=O.isWebGLCubeRenderTarget===!0,ft=Ce.length>1,ht=g(O)||a;if(ft||(ue.__webglTexture===void 0&&(ue.__webglTexture=n.createTexture()),ue.__version=L.version,o.memory.textures++),Pe){ee.__webglFramebuffer=[];for(let He=0;He<6;He++)if(a&&L.mipmaps&&L.mipmaps.length>0){ee.__webglFramebuffer[He]=[];for(let Ke=0;Ke<L.mipmaps.length;Ke++)ee.__webglFramebuffer[He][Ke]=n.createFramebuffer()}else ee.__webglFramebuffer[He]=n.createFramebuffer()}else{if(a&&L.mipmaps&&L.mipmaps.length>0){ee.__webglFramebuffer=[];for(let He=0;He<L.mipmaps.length;He++)ee.__webglFramebuffer[He]=n.createFramebuffer()}else ee.__webglFramebuffer=n.createFramebuffer();if(ft)if(r.drawBuffers)for(let He=0,Ke=Ce.length;He<Ke;He++){const _t=i.get(Ce[He]);_t.__webglTexture===void 0&&(_t.__webglTexture=n.createTexture(),o.memory.textures++)}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&O.samples>0&&it(O)===!1){ee.__webglMultisampledFramebuffer=n.createFramebuffer(),ee.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,ee.__webglMultisampledFramebuffer);for(let He=0;He<Ce.length;He++){const Ke=Ce[He];ee.__webglColorRenderbuffer[He]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,ee.__webglColorRenderbuffer[He]);const _t=s.convert(Ke.format,Ke.colorSpace),Ge=s.convert(Ke.type),Jt=b(Ke.internalFormat,_t,Ge,Ke.colorSpace,O.isXRRenderTarget===!0),mt=Ie(O);n.renderbufferStorageMultisample(n.RENDERBUFFER,mt,Jt,O.width,O.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+He,n.RENDERBUFFER,ee.__webglColorRenderbuffer[He])}n.bindRenderbuffer(n.RENDERBUFFER,null),O.depthBuffer&&(ee.__webglDepthRenderbuffer=n.createRenderbuffer(),nt(ee.__webglDepthRenderbuffer,O,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(Pe){t.bindTexture(n.TEXTURE_CUBE_MAP,ue.__webglTexture),he(n.TEXTURE_CUBE_MAP,L,ht);for(let He=0;He<6;He++)if(a&&L.mipmaps&&L.mipmaps.length>0)for(let Ke=0;Ke<L.mipmaps.length;Ke++)$e(ee.__webglFramebuffer[He][Ke],O,L,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+He,Ke);else $e(ee.__webglFramebuffer[He],O,L,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+He,0);x(L,ht)&&E(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(ft){for(let He=0,Ke=Ce.length;He<Ke;He++){const _t=Ce[He],Ge=i.get(_t);t.bindTexture(n.TEXTURE_2D,Ge.__webglTexture),he(n.TEXTURE_2D,_t,ht),$e(ee.__webglFramebuffer,O,_t,n.COLOR_ATTACHMENT0+He,n.TEXTURE_2D,0),x(_t,ht)&&E(n.TEXTURE_2D)}t.unbindTexture()}else{let He=n.TEXTURE_2D;if((O.isWebGL3DRenderTarget||O.isWebGLArrayRenderTarget)&&(a?He=O.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(He,ue.__webglTexture),he(He,L,ht),a&&L.mipmaps&&L.mipmaps.length>0)for(let Ke=0;Ke<L.mipmaps.length;Ke++)$e(ee.__webglFramebuffer[Ke],O,L,n.COLOR_ATTACHMENT0,He,Ke);else $e(ee.__webglFramebuffer,O,L,n.COLOR_ATTACHMENT0,He,0);x(L,ht)&&E(He),t.unbindTexture()}O.depthBuffer&&et(O)}function Re(O){const L=g(O)||a,ee=O.textures;for(let ue=0,Ce=ee.length;ue<Ce;ue++){const Pe=ee[ue];if(x(Pe,L)){const ft=O.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:n.TEXTURE_2D,ht=i.get(Pe).__webglTexture;t.bindTexture(ft,ht),E(ft),t.unbindTexture()}}}function ze(O){if(a&&O.samples>0&&it(O)===!1){const L=O.textures,ee=O.width,ue=O.height;let Ce=n.COLOR_BUFFER_BIT;const Pe=[],ft=O.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,ht=i.get(O),He=L.length>1;if(He)for(let Ke=0;Ke<L.length;Ke++)t.bindFramebuffer(n.FRAMEBUFFER,ht.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ke,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,ht.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ke,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,ht.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,ht.__webglFramebuffer);for(let Ke=0;Ke<L.length;Ke++){Pe.push(n.COLOR_ATTACHMENT0+Ke),O.depthBuffer&&Pe.push(ft);const _t=ht.__ignoreDepthValues!==void 0?ht.__ignoreDepthValues:!1;if(_t===!1&&(O.depthBuffer&&(Ce|=n.DEPTH_BUFFER_BIT),O.stencilBuffer&&(Ce|=n.STENCIL_BUFFER_BIT)),He&&n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,ht.__webglColorRenderbuffer[Ke]),_t===!0&&(n.invalidateFramebuffer(n.READ_FRAMEBUFFER,[ft]),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[ft])),He){const Ge=i.get(L[Ke]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,Ge,0)}n.blitFramebuffer(0,0,ee,ue,0,0,ee,ue,Ce,n.NEAREST),u&&n.invalidateFramebuffer(n.READ_FRAMEBUFFER,Pe)}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),He)for(let Ke=0;Ke<L.length;Ke++){t.bindFramebuffer(n.FRAMEBUFFER,ht.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ke,n.RENDERBUFFER,ht.__webglColorRenderbuffer[Ke]);const _t=i.get(L[Ke]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,ht.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ke,n.TEXTURE_2D,_t,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,ht.__webglMultisampledFramebuffer)}}function Ie(O){return Math.min(r.maxSamples,O.samples)}function it(O){const L=i.get(O);return a&&O.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&L.__useRenderToTexture!==!1}function V(O){const L=o.render.frame;h.get(O)!==L&&(h.set(O,L),O.update())}function ne(O,L){const ee=O.colorSpace,ue=O.format,Ce=O.type;return O.isCompressedTexture===!0||O.isVideoTexture===!0||O.format===xg||ee!==ea&&ee!==Do&&(an.getTransfer(ee)===pn?a===!1?e.has("EXT_sRGB")===!0&&ue===zi?(O.format=xg,O.minFilter=rn,O.generateMipmaps=!1):L=RC.sRGBToLinear(L):(ue!==zi||Ce!==ro)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",ee)),L}function de(O){return typeof HTMLImageElement<"u"&&O instanceof HTMLImageElement?(c.width=O.naturalWidth||O.width,c.height=O.naturalHeight||O.height):typeof VideoFrame<"u"&&O instanceof VideoFrame?(c.width=O.displayWidth,c.height=O.displayHeight):(c.width=O.width,c.height=O.height),c}this.allocateTextureUnit=se,this.resetTextureUnits=j,this.setTexture2D=pe,this.setTexture2DArray=N,this.setTexture3D=X,this.setTextureCube=J,this.rebindTextures=Z,this.setupRenderTarget=De,this.updateRenderTargetMipmap=Re,this.updateMultisampleRenderTarget=ze,this.setupDepthRenderbuffer=et,this.setupFrameBufferTexture=$e,this.useMultisampledRTT=it}function uB(n,e,t){const i=t.isWebGL2;function r(s,o=Do){let a;const l=an.getTransfer(o);if(s===ro)return n.UNSIGNED_BYTE;if(s===yC)return n.UNSIGNED_SHORT_4_4_4_4;if(s===_C)return n.UNSIGNED_SHORT_5_5_5_1;if(s===bP)return n.BYTE;if(s===RP)return n.SHORT;if(s===fv)return n.UNSIGNED_SHORT;if(s===vC)return n.INT;if(s===ko)return n.UNSIGNED_INT;if(s===ei)return n.FLOAT;if(s===Hi)return i?n.HALF_FLOAT:(a=e.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(s===PP)return n.ALPHA;if(s===zi)return n.RGBA;if(s===BP)return n.LUMINANCE;if(s===IP)return n.LUMINANCE_ALPHA;if(s===Ya)return n.DEPTH_COMPONENT;if(s===wu)return n.DEPTH_STENCIL;if(s===xg)return a=e.get("EXT_sRGB"),a!==null?a.SRGB_ALPHA_EXT:null;if(s===hv)return n.RED;if(s===xC)return n.RED_INTEGER;if(s===LP)return n.RG;if(s===AC)return n.RG_INTEGER;if(s===SC)return n.RGBA_INTEGER;if(s===x0||s===A0||s===S0||s===C0)if(l===pn)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(s===x0)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===A0)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===S0)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===C0)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(s===x0)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===A0)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===S0)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===C0)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===L3||s===D3||s===F3||s===N3)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(s===L3)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===D3)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===F3)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===N3)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===CC)return a=e.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===O3||s===U3)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(s===O3)return l===pn?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(s===U3)return l===pn?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===k3||s===z3||s===H3||s===G3||s===V3||s===W3||s===j3||s===X3||s===J3||s===K3||s===Y3||s===Z3||s===q3||s===Q3)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(s===k3)return l===pn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===z3)return l===pn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===H3)return l===pn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===G3)return l===pn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===V3)return l===pn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===W3)return l===pn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===j3)return l===pn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===X3)return l===pn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===J3)return l===pn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===K3)return l===pn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===Y3)return l===pn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===Z3)return l===pn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===q3)return l===pn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===Q3)return l===pn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===E0||s===$3||s===eA)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(s===E0)return l===pn?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(s===$3)return a.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(s===eA)return a.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(s===DP||s===tA||s===nA||s===iA)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(s===E0)return a.COMPRESSED_RED_RGTC1_EXT;if(s===tA)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(s===nA)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(s===iA)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return s===Ka?i?n.UNSIGNED_INT_24_8:(a=e.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null):n[s]!==void 0?n[s]:null}return{convert:r}}class cB extends Rn{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class zo extends qt{constructor(){super(),this.isGroup=!0,this.type="Group"}}const FY={type:"move"};class px{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new zo,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new zo,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new H,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new H),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new zo,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new H,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new H),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,o=null;const a=this._targetRay,l=this._grip,u=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(u&&e.hand){o=!0;for(const A of e.hand.values()){const _=t.getJointPose(A,i),g=this._getHandJoint(u,A);_!==null&&(g.matrix.fromArray(_.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.matrixWorldNeedsUpdate=!0,g.jointRadius=_.radius),g.visible=_!==null}const c=u.joints["index-finger-tip"],h=u.joints["thumb-tip"],p=c.position.distanceTo(h.position),m=.02,v=.005;u.inputState.pinching&&p>m+v?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&p<=m-v&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&s!==null&&(r=s),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(FY)))}return a!==null&&(a.visible=r!==null),l!==null&&(l.visible=s!==null),u!==null&&(u.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new zo;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}const NY=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,OY=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepthEXT = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepthEXT = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class UY{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,i){if(this.texture===null){const r=new gn,s=e.properties.get(r);s.__webglTexture=t.texture,(t.depthNear!=i.depthNear||t.depthFar!=i.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=r}}render(e,t){if(this.texture!==null){if(this.mesh===null){const i=t.cameras[0].viewport,r=new ds({extensions:{fragDepth:!0},vertexShader:NY,fragmentShader:OY,uniforms:{depthColor:{value:this.texture},depthWidth:{value:i.z},depthHeight:{value:i.w}}});this.mesh=new Vn(new Gf(20,20),r)}e.render(this.mesh,t)}}reset(){this.texture=null,this.mesh=null}}class kY extends fo{constructor(e,t){super();const i=this;let r=null,s=1,o=null,a="local-floor",l=1,u=null,c=null,h=null,p=null,m=null,v=null;const A=new UY,_=t.getContextAttributes();let g=null,S=null;const x=[],E=[],b=new be;let T=null;const P=new Rn;P.layers.enable(1),P.viewport=new ln;const I=new Rn;I.layers.enable(2),I.viewport=new ln;const z=[P,I],w=new cB;w.layers.enable(1),w.layers.enable(2);let D=null,Q=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(he){let Te=x[he];return Te===void 0&&(Te=new px,x[he]=Te),Te.getTargetRaySpace()},this.getControllerGrip=function(he){let Te=x[he];return Te===void 0&&(Te=new px,x[he]=Te),Te.getGripSpace()},this.getHand=function(he){let Te=x[he];return Te===void 0&&(Te=new px,x[he]=Te),Te.getHandSpace()};function ie(he){const Te=E.indexOf(he.inputSource);if(Te===-1)return;const we=x[Te];we!==void 0&&(we.update(he.inputSource,he.frame,u||o),we.dispatchEvent({type:he.type,data:he.inputSource}))}function j(){r.removeEventListener("select",ie),r.removeEventListener("selectstart",ie),r.removeEventListener("selectend",ie),r.removeEventListener("squeeze",ie),r.removeEventListener("squeezestart",ie),r.removeEventListener("squeezeend",ie),r.removeEventListener("end",j),r.removeEventListener("inputsourceschange",se);for(let he=0;he<x.length;he++){const Te=E[he];Te!==null&&(E[he]=null,x[he].disconnect(Te))}D=null,Q=null,A.reset(),e.setRenderTarget(g),m=null,p=null,h=null,r=null,S=null,Ue.stop(),i.isPresenting=!1,e.setPixelRatio(T),e.setSize(b.width,b.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(he){s=he,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(he){a=he,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||o},this.setReferenceSpace=function(he){u=he},this.getBaseLayer=function(){return p!==null?p:m},this.getBinding=function(){return h},this.getFrame=function(){return v},this.getSession=function(){return r},this.setSession=async function(he){if(r=he,r!==null){if(g=e.getRenderTarget(),r.addEventListener("select",ie),r.addEventListener("selectstart",ie),r.addEventListener("selectend",ie),r.addEventListener("squeeze",ie),r.addEventListener("squeezestart",ie),r.addEventListener("squeezeend",ie),r.addEventListener("end",j),r.addEventListener("inputsourceschange",se),_.xrCompatible!==!0&&await t.makeXRCompatible(),T=e.getPixelRatio(),e.getSize(b),r.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const Te={antialias:r.renderState.layers===void 0?_.antialias:!0,alpha:!0,depth:_.depth,stencil:_.stencil,framebufferScaleFactor:s};m=new XRWebGLLayer(r,t,Te),r.updateRenderState({baseLayer:m}),e.setPixelRatio(1),e.setSize(m.framebufferWidth,m.framebufferHeight,!1),S=new hs(m.framebufferWidth,m.framebufferHeight,{format:zi,type:ro,colorSpace:e.outputColorSpace,stencilBuffer:_.stencil})}else{let Te=null,we=null,je=null;_.depth&&(je=_.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,Te=_.stencil?wu:Ya,we=_.stencil?Ka:ko);const $e={colorFormat:t.RGBA8,depthFormat:je,scaleFactor:s};h=new XRWebGLBinding(r,t),p=h.createProjectionLayer($e),r.updateRenderState({layers:[p]}),e.setPixelRatio(1),e.setSize(p.textureWidth,p.textureHeight,!1),S=new hs(p.textureWidth,p.textureHeight,{format:zi,type:ro,depthTexture:new gv(p.textureWidth,p.textureHeight,we,void 0,void 0,void 0,void 0,void 0,void 0,Te),stencilBuffer:_.stencil,colorSpace:e.outputColorSpace,samples:_.antialias?4:0});const nt=e.properties.get(S);nt.__ignoreDepthValues=p.ignoreDepthValues}S.isXRRenderTarget=!0,this.setFoveation(l),u=null,o=await r.requestReferenceSpace(a),Ue.setContext(r),Ue.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode};function se(he){for(let Te=0;Te<he.removed.length;Te++){const we=he.removed[Te],je=E.indexOf(we);je>=0&&(E[je]=null,x[je].disconnect(we))}for(let Te=0;Te<he.added.length;Te++){const we=he.added[Te];let je=E.indexOf(we);if(je===-1){for(let nt=0;nt<x.length;nt++)if(nt>=E.length){E.push(we),je=nt;break}else if(E[nt]===null){E[nt]=we,je=nt;break}if(je===-1)break}const $e=x[je];$e&&$e.connect(we)}}const oe=new H,pe=new H;function N(he,Te,we){oe.setFromMatrixPosition(Te.matrixWorld),pe.setFromMatrixPosition(we.matrixWorld);const je=oe.distanceTo(pe),$e=Te.projectionMatrix.elements,nt=we.projectionMatrix.elements,Et=$e[14]/($e[10]-1),et=$e[14]/($e[10]+1),Z=($e[9]+1)/$e[5],De=($e[9]-1)/$e[5],Re=($e[8]-1)/$e[0],ze=(nt[8]+1)/nt[0],Ie=Et*Re,it=Et*ze,V=je/(-Re+ze),ne=V*-Re;Te.matrixWorld.decompose(he.position,he.quaternion,he.scale),he.translateX(ne),he.translateZ(V),he.matrixWorld.compose(he.position,he.quaternion,he.scale),he.matrixWorldInverse.copy(he.matrixWorld).invert();const de=Et+V,O=et+V,L=Ie-ne,ee=it+(je-ne),ue=Z*et/O*de,Ce=De*et/O*de;he.projectionMatrix.makePerspective(L,ee,ue,Ce,de,O),he.projectionMatrixInverse.copy(he.projectionMatrix).invert()}function X(he,Te){Te===null?he.matrixWorld.copy(he.matrix):he.matrixWorld.multiplyMatrices(Te.matrixWorld,he.matrix),he.matrixWorldInverse.copy(he.matrixWorld).invert()}this.updateCamera=function(he){if(r===null)return;A.texture!==null&&(he.near=A.depthNear,he.far=A.depthFar),w.near=I.near=P.near=he.near,w.far=I.far=P.far=he.far,(D!==w.near||Q!==w.far)&&(r.updateRenderState({depthNear:w.near,depthFar:w.far}),D=w.near,Q=w.far,P.near=D,P.far=Q,I.near=D,I.far=Q,P.updateProjectionMatrix(),I.updateProjectionMatrix(),he.updateProjectionMatrix());const Te=he.parent,we=w.cameras;X(w,Te);for(let je=0;je<we.length;je++)X(we[je],Te);we.length===2?N(w,P,I):w.projectionMatrix.copy(P.projectionMatrix),J(he,w,Te)};function J(he,Te,we){we===null?he.matrix.copy(Te.matrixWorld):(he.matrix.copy(we.matrixWorld),he.matrix.invert(),he.matrix.multiply(Te.matrixWorld)),he.matrix.decompose(he.position,he.quaternion,he.scale),he.updateMatrixWorld(!0),he.projectionMatrix.copy(Te.projectionMatrix),he.projectionMatrixInverse.copy(Te.projectionMatrixInverse),he.isPerspectiveCamera&&(he.fov=Ef*2*Math.atan(1/he.projectionMatrix.elements[5]),he.zoom=1)}this.getCamera=function(){return w},this.getFoveation=function(){if(!(p===null&&m===null))return l},this.setFoveation=function(he){l=he,p!==null&&(p.fixedFoveation=he),m!==null&&m.fixedFoveation!==void 0&&(m.fixedFoveation=he)},this.hasDepthSensing=function(){return A.texture!==null};let ae=null;function me(he,Te){if(c=Te.getViewerPose(u||o),v=Te,c!==null){const we=c.views;m!==null&&(e.setRenderTargetFramebuffer(S,m.framebuffer),e.setRenderTarget(S));let je=!1;we.length!==w.cameras.length&&(w.cameras.length=0,je=!0);for(let nt=0;nt<we.length;nt++){const Et=we[nt];let et=null;if(m!==null)et=m.getViewport(Et);else{const De=h.getViewSubImage(p,Et);et=De.viewport,nt===0&&(e.setRenderTargetTextures(S,De.colorTexture,p.ignoreDepthValues?void 0:De.depthStencilTexture),e.setRenderTarget(S))}let Z=z[nt];Z===void 0&&(Z=new Rn,Z.layers.enable(nt),Z.viewport=new ln,z[nt]=Z),Z.matrix.fromArray(Et.transform.matrix),Z.matrix.decompose(Z.position,Z.quaternion,Z.scale),Z.projectionMatrix.fromArray(Et.projectionMatrix),Z.projectionMatrixInverse.copy(Z.projectionMatrix).invert(),Z.viewport.set(et.x,et.y,et.width,et.height),nt===0&&(w.matrix.copy(Z.matrix),w.matrix.decompose(w.position,w.quaternion,w.scale)),je===!0&&w.cameras.push(Z)}const $e=r.enabledFeatures;if($e&&$e.includes("depth-sensing")){const nt=h.getDepthInformation(we[0]);nt&&nt.isValid&&nt.texture&&A.init(e,nt,r.renderState)}}for(let we=0;we<x.length;we++){const je=E[we],$e=x[we];je!==null&&$e!==void 0&&$e.update(je,Te,u||o)}A.render(e,w),ae&&ae(he,Te),Te.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:Te}),v=null}const Ue=new iB;Ue.setAnimationLoop(me),this.setAnimationLoop=function(he){ae=he},this.dispose=function(){}}}const Fl=new yr,zY=new xt;function HY(n,e){function t(_,g){_.matrixAutoUpdate===!0&&_.updateMatrix(),g.value.copy(_.matrix)}function i(_,g){g.color.getRGB(_.fogColor.value,eB(n)),g.isFog?(_.fogNear.value=g.near,_.fogFar.value=g.far):g.isFogExp2&&(_.fogDensity.value=g.density)}function r(_,g,S,x,E){g.isMeshBasicMaterial||g.isMeshLambertMaterial?s(_,g):g.isMeshToonMaterial?(s(_,g),h(_,g)):g.isMeshPhongMaterial?(s(_,g),c(_,g)):g.isMeshStandardMaterial?(s(_,g),p(_,g),g.isMeshPhysicalMaterial&&m(_,g,E)):g.isMeshMatcapMaterial?(s(_,g),v(_,g)):g.isMeshDepthMaterial?s(_,g):g.isMeshDistanceMaterial?(s(_,g),A(_,g)):g.isMeshNormalMaterial?s(_,g):g.isLineBasicMaterial?(o(_,g),g.isLineDashedMaterial&&a(_,g)):g.isPointsMaterial?l(_,g,S,x):g.isSpriteMaterial?u(_,g):g.isShadowMaterial?(_.color.value.copy(g.color),_.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}function s(_,g){_.opacity.value=g.opacity,g.color&&_.diffuse.value.copy(g.color),g.emissive&&_.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(_.map.value=g.map,t(g.map,_.mapTransform)),g.alphaMap&&(_.alphaMap.value=g.alphaMap,t(g.alphaMap,_.alphaMapTransform)),g.bumpMap&&(_.bumpMap.value=g.bumpMap,t(g.bumpMap,_.bumpMapTransform),_.bumpScale.value=g.bumpScale,g.side===tr&&(_.bumpScale.value*=-1)),g.normalMap&&(_.normalMap.value=g.normalMap,t(g.normalMap,_.normalMapTransform),_.normalScale.value.copy(g.normalScale),g.side===tr&&_.normalScale.value.negate()),g.displacementMap&&(_.displacementMap.value=g.displacementMap,t(g.displacementMap,_.displacementMapTransform),_.displacementScale.value=g.displacementScale,_.displacementBias.value=g.displacementBias),g.emissiveMap&&(_.emissiveMap.value=g.emissiveMap,t(g.emissiveMap,_.emissiveMapTransform)),g.specularMap&&(_.specularMap.value=g.specularMap,t(g.specularMap,_.specularMapTransform)),g.alphaTest>0&&(_.alphaTest.value=g.alphaTest);const S=e.get(g),x=S.envMap,E=S.envMapRotation;if(x&&(_.envMap.value=x,Fl.copy(E),Fl.x*=-1,Fl.y*=-1,Fl.z*=-1,x.isCubeTexture&&x.isRenderTargetTexture===!1&&(Fl.y*=-1,Fl.z*=-1),_.envMapRotation.value.setFromMatrix4(zY.makeRotationFromEuler(Fl)),_.flipEnvMap.value=x.isCubeTexture&&x.isRenderTargetTexture===!1?-1:1,_.reflectivity.value=g.reflectivity,_.ior.value=g.ior,_.refractionRatio.value=g.refractionRatio),g.lightMap){_.lightMap.value=g.lightMap;const b=n._useLegacyLights===!0?Math.PI:1;_.lightMapIntensity.value=g.lightMapIntensity*b,t(g.lightMap,_.lightMapTransform)}g.aoMap&&(_.aoMap.value=g.aoMap,_.aoMapIntensity.value=g.aoMapIntensity,t(g.aoMap,_.aoMapTransform))}function o(_,g){_.diffuse.value.copy(g.color),_.opacity.value=g.opacity,g.map&&(_.map.value=g.map,t(g.map,_.mapTransform))}function a(_,g){_.dashSize.value=g.dashSize,_.totalSize.value=g.dashSize+g.gapSize,_.scale.value=g.scale}function l(_,g,S,x){_.diffuse.value.copy(g.color),_.opacity.value=g.opacity,_.size.value=g.size*S,_.scale.value=x*.5,g.map&&(_.map.value=g.map,t(g.map,_.uvTransform)),g.alphaMap&&(_.alphaMap.value=g.alphaMap,t(g.alphaMap,_.alphaMapTransform)),g.alphaTest>0&&(_.alphaTest.value=g.alphaTest)}function u(_,g){_.diffuse.value.copy(g.color),_.opacity.value=g.opacity,_.rotation.value=g.rotation,g.map&&(_.map.value=g.map,t(g.map,_.mapTransform)),g.alphaMap&&(_.alphaMap.value=g.alphaMap,t(g.alphaMap,_.alphaMapTransform)),g.alphaTest>0&&(_.alphaTest.value=g.alphaTest)}function c(_,g){_.specular.value.copy(g.specular),_.shininess.value=Math.max(g.shininess,1e-4)}function h(_,g){g.gradientMap&&(_.gradientMap.value=g.gradientMap)}function p(_,g){_.metalness.value=g.metalness,g.metalnessMap&&(_.metalnessMap.value=g.metalnessMap,t(g.metalnessMap,_.metalnessMapTransform)),_.roughness.value=g.roughness,g.roughnessMap&&(_.roughnessMap.value=g.roughnessMap,t(g.roughnessMap,_.roughnessMapTransform)),e.get(g).envMap&&(_.envMapIntensity.value=g.envMapIntensity)}function m(_,g,S){_.ior.value=g.ior,g.sheen>0&&(_.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),_.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(_.sheenColorMap.value=g.sheenColorMap,t(g.sheenColorMap,_.sheenColorMapTransform)),g.sheenRoughnessMap&&(_.sheenRoughnessMap.value=g.sheenRoughnessMap,t(g.sheenRoughnessMap,_.sheenRoughnessMapTransform))),g.clearcoat>0&&(_.clearcoat.value=g.clearcoat,_.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(_.clearcoatMap.value=g.clearcoatMap,t(g.clearcoatMap,_.clearcoatMapTransform)),g.clearcoatRoughnessMap&&(_.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap,t(g.clearcoatRoughnessMap,_.clearcoatRoughnessMapTransform)),g.clearcoatNormalMap&&(_.clearcoatNormalMap.value=g.clearcoatNormalMap,t(g.clearcoatNormalMap,_.clearcoatNormalMapTransform),_.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),g.side===tr&&_.clearcoatNormalScale.value.negate())),g.iridescence>0&&(_.iridescence.value=g.iridescence,_.iridescenceIOR.value=g.iridescenceIOR,_.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],_.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(_.iridescenceMap.value=g.iridescenceMap,t(g.iridescenceMap,_.iridescenceMapTransform)),g.iridescenceThicknessMap&&(_.iridescenceThicknessMap.value=g.iridescenceThicknessMap,t(g.iridescenceThicknessMap,_.iridescenceThicknessMapTransform))),g.transmission>0&&(_.transmission.value=g.transmission,_.transmissionSamplerMap.value=S.texture,_.transmissionSamplerSize.value.set(S.width,S.height),g.transmissionMap&&(_.transmissionMap.value=g.transmissionMap,t(g.transmissionMap,_.transmissionMapTransform)),_.thickness.value=g.thickness,g.thicknessMap&&(_.thicknessMap.value=g.thicknessMap,t(g.thicknessMap,_.thicknessMapTransform)),_.attenuationDistance.value=g.attenuationDistance,_.attenuationColor.value.copy(g.attenuationColor)),g.anisotropy>0&&(_.anisotropyVector.value.set(g.anisotropy*Math.cos(g.anisotropyRotation),g.anisotropy*Math.sin(g.anisotropyRotation)),g.anisotropyMap&&(_.anisotropyMap.value=g.anisotropyMap,t(g.anisotropyMap,_.anisotropyMapTransform))),_.specularIntensity.value=g.specularIntensity,_.specularColor.value.copy(g.specularColor),g.specularColorMap&&(_.specularColorMap.value=g.specularColorMap,t(g.specularColorMap,_.specularColorMapTransform)),g.specularIntensityMap&&(_.specularIntensityMap.value=g.specularIntensityMap,t(g.specularIntensityMap,_.specularIntensityMapTransform))}function v(_,g){g.matcap&&(_.matcap.value=g.matcap)}function A(_,g){const S=e.get(g).light;_.referencePosition.value.setFromMatrixPosition(S.matrixWorld),_.nearDistance.value=S.shadow.camera.near,_.farDistance.value=S.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function GY(n,e,t,i){let r={},s={},o=[];const a=t.isWebGL2?n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(S,x){const E=x.program;i.uniformBlockBinding(S,E)}function u(S,x){let E=r[S.id];E===void 0&&(v(S),E=c(S),r[S.id]=E,S.addEventListener("dispose",_));const b=x.program;i.updateUBOMapping(S,b);const T=e.render.frame;s[S.id]!==T&&(p(S),s[S.id]=T)}function c(S){const x=h();S.__bindingPointIndex=x;const E=n.createBuffer(),b=S.__size,T=S.usage;return n.bindBuffer(n.UNIFORM_BUFFER,E),n.bufferData(n.UNIFORM_BUFFER,b,T),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,x,E),E}function h(){for(let S=0;S<a;S++)if(o.indexOf(S)===-1)return o.push(S),S;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function p(S){const x=r[S.id],E=S.uniforms,b=S.__cache;n.bindBuffer(n.UNIFORM_BUFFER,x);for(let T=0,P=E.length;T<P;T++){const I=Array.isArray(E[T])?E[T]:[E[T]];for(let z=0,w=I.length;z<w;z++){const D=I[z];if(m(D,T,z,b)===!0){const Q=D.__offset,ie=Array.isArray(D.value)?D.value:[D.value];let j=0;for(let se=0;se<ie.length;se++){const oe=ie[se],pe=A(oe);typeof oe=="number"||typeof oe=="boolean"?(D.__data[0]=oe,n.bufferSubData(n.UNIFORM_BUFFER,Q+j,D.__data)):oe.isMatrix3?(D.__data[0]=oe.elements[0],D.__data[1]=oe.elements[1],D.__data[2]=oe.elements[2],D.__data[3]=0,D.__data[4]=oe.elements[3],D.__data[5]=oe.elements[4],D.__data[6]=oe.elements[5],D.__data[7]=0,D.__data[8]=oe.elements[6],D.__data[9]=oe.elements[7],D.__data[10]=oe.elements[8],D.__data[11]=0):(oe.toArray(D.__data,j),j+=pe.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,Q,D.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function m(S,x,E,b){const T=S.value,P=x+"_"+E;if(b[P]===void 0)return typeof T=="number"||typeof T=="boolean"?b[P]=T:b[P]=T.clone(),!0;{const I=b[P];if(typeof T=="number"||typeof T=="boolean"){if(I!==T)return b[P]=T,!0}else if(I.equals(T)===!1)return I.copy(T),!0}return!1}function v(S){const x=S.uniforms;let E=0;const b=16;for(let P=0,I=x.length;P<I;P++){const z=Array.isArray(x[P])?x[P]:[x[P]];for(let w=0,D=z.length;w<D;w++){const Q=z[w],ie=Array.isArray(Q.value)?Q.value:[Q.value];for(let j=0,se=ie.length;j<se;j++){const oe=ie[j],pe=A(oe),N=E%b;N!==0&&b-N<pe.boundary&&(E+=b-N),Q.__data=new Float32Array(pe.storage/Float32Array.BYTES_PER_ELEMENT),Q.__offset=E,E+=pe.storage}}}const T=E%b;return T>0&&(E+=b-T),S.__size=E,S.__cache={},this}function A(S){const x={boundary:0,storage:0};return typeof S=="number"||typeof S=="boolean"?(x.boundary=4,x.storage=4):S.isVector2?(x.boundary=8,x.storage=8):S.isVector3||S.isColor?(x.boundary=16,x.storage=12):S.isVector4?(x.boundary=16,x.storage=16):S.isMatrix3?(x.boundary=48,x.storage=48):S.isMatrix4?(x.boundary=64,x.storage=64):S.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",S),x}function _(S){const x=S.target;x.removeEventListener("dispose",_);const E=o.indexOf(x.__bindingPointIndex);o.splice(E,1),n.deleteBuffer(r[x.id]),delete r[x.id],delete s[x.id]}function g(){for(const S in r)n.deleteBuffer(r[S]);o=[],r={},s={}}return{bind:l,update:u,dispose:g}}class OC{constructor(e={}){const{canvas:t=ZP(),context:i=null,depth:r=!0,stencil:s=!0,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:u=!1,powerPreference:c="default",failIfMajorPerformanceCaveat:h=!1}=e;this.isWebGLRenderer=!0;let p;i!==null?p=i.getContextAttributes().alpha:p=o;const m=new Uint32Array(4),v=new Int32Array(4);let A=null,_=null;const g=[],S=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=ts,this._useLegacyLights=!1,this.toneMapping=io,this.toneMappingExposure=1;const x=this;let E=!1,b=0,T=0,P=null,I=-1,z=null;const w=new ln,D=new ln;let Q=null;const ie=new qe(0);let j=0,se=t.width,oe=t.height,pe=1,N=null,X=null;const J=new ln(0,0,se,oe),ae=new ln(0,0,se,oe);let me=!1;const Ue=new Ep;let he=!1,Te=!1,we=null;const je=new xt,$e=new be,nt=new H,Et={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function et(){return P===null?pe:1}let Z=i;function De(B,k){for(let W=0;W<B.length;W++){const $=B[W],Y=t.getContext($,k);if(Y!==null)return Y}return null}try{const B={alpha:!0,depth:r,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:u,powerPreference:c,failIfMajorPerformanceCaveat:h};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${zf}`),t.addEventListener("webglcontextlost",Le,!1),t.addEventListener("webglcontextrestored",re,!1),t.addEventListener("webglcontextcreationerror",Xe,!1),Z===null){const k=["webgl2","webgl","experimental-webgl"];if(x.isWebGL1Renderer===!0&&k.shift(),Z=De(k,B),Z===null)throw De(k)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&Z instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),Z.getShaderPrecisionFormat===void 0&&(Z.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(B){throw console.error("THREE.WebGLRenderer: "+B.message),B}let Re,ze,Ie,it,V,ne,de,O,L,ee,ue,Ce,Pe,ft,ht,He,Ke,_t,Ge,Jt,mt,dt,q,ve;function Ne(){Re=new QJ(Z),ze=new XJ(Z,Re,e),Re.init(ze),dt=new uB(Z,Re,ze),Ie=new LY(Z,Re,ze),it=new tK(Z),V=new AY,ne=new DY(Z,Re,Ie,V,ze,dt,it),de=new KJ(x),O=new qJ(x),L=new aj(Z,ze),q=new WJ(Z,Re,L,ze),ee=new $J(Z,L,it,q),ue=new sK(Z,ee,L,it),Ge=new rK(Z,ze,ne),He=new JJ(V),Ce=new xY(x,de,O,Re,ze,q,He),Pe=new HY(x,V),ft=new CY,ht=new RY(Re,ze),_t=new VJ(x,de,O,Ie,ue,p,l),Ke=new IY(x,ue,ze),ve=new GY(Z,it,ze,Ie),Jt=new jJ(Z,Re,it,ze),mt=new eK(Z,Re,it,ze),it.programs=Ce.programs,x.capabilities=ze,x.extensions=Re,x.properties=V,x.renderLists=ft,x.shadowMap=Ke,x.state=Ie,x.info=it}Ne();const Qe=new kY(x,Z);this.xr=Qe,this.getContext=function(){return Z},this.getContextAttributes=function(){return Z.getContextAttributes()},this.forceContextLoss=function(){const B=Re.get("WEBGL_lose_context");B&&B.loseContext()},this.forceContextRestore=function(){const B=Re.get("WEBGL_lose_context");B&&B.restoreContext()},this.getPixelRatio=function(){return pe},this.setPixelRatio=function(B){B!==void 0&&(pe=B,this.setSize(se,oe,!1))},this.getSize=function(B){return B.set(se,oe)},this.setSize=function(B,k,W=!0){if(Qe.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}se=B,oe=k,t.width=Math.floor(B*pe),t.height=Math.floor(k*pe),W===!0&&(t.style.width=B+"px",t.style.height=k+"px"),this.setViewport(0,0,B,k)},this.getDrawingBufferSize=function(B){return B.set(se*pe,oe*pe).floor()},this.setDrawingBufferSize=function(B,k,W){se=B,oe=k,pe=W,t.width=Math.floor(B*W),t.height=Math.floor(k*W),this.setViewport(0,0,B,k)},this.getCurrentViewport=function(B){return B.copy(w)},this.getViewport=function(B){return B.copy(J)},this.setViewport=function(B,k,W,$){B.isVector4?J.set(B.x,B.y,B.z,B.w):J.set(B,k,W,$),Ie.viewport(w.copy(J).multiplyScalar(pe).round())},this.getScissor=function(B){return B.copy(ae)},this.setScissor=function(B,k,W,$){B.isVector4?ae.set(B.x,B.y,B.z,B.w):ae.set(B,k,W,$),Ie.scissor(D.copy(ae).multiplyScalar(pe).round())},this.getScissorTest=function(){return me},this.setScissorTest=function(B){Ie.setScissorTest(me=B)},this.setOpaqueSort=function(B){N=B},this.setTransparentSort=function(B){X=B},this.getClearColor=function(B){return B.copy(_t.getClearColor())},this.setClearColor=function(){_t.setClearColor.apply(_t,arguments)},this.getClearAlpha=function(){return _t.getClearAlpha()},this.setClearAlpha=function(){_t.setClearAlpha.apply(_t,arguments)},this.clear=function(B=!0,k=!0,W=!0){let $=0;if(B){let Y=!1;if(P!==null){const ye=P.texture.format;Y=ye===SC||ye===AC||ye===xC}if(Y){const ye=P.texture.type,xe=ye===ro||ye===ko||ye===fv||ye===Ka||ye===yC||ye===_C,Ee=_t.getClearColor(),Se=_t.getClearAlpha(),st=Ee.r,Fe=Ee.g,Oe=Ee.b;xe?(m[0]=st,m[1]=Fe,m[2]=Oe,m[3]=Se,Z.clearBufferuiv(Z.COLOR,0,m)):(v[0]=st,v[1]=Fe,v[2]=Oe,v[3]=Se,Z.clearBufferiv(Z.COLOR,0,v))}else $|=Z.COLOR_BUFFER_BIT}k&&($|=Z.DEPTH_BUFFER_BIT),W&&($|=Z.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),Z.clear($)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Le,!1),t.removeEventListener("webglcontextrestored",re,!1),t.removeEventListener("webglcontextcreationerror",Xe,!1),ft.dispose(),ht.dispose(),V.dispose(),de.dispose(),O.dispose(),ue.dispose(),q.dispose(),ve.dispose(),Ce.dispose(),Qe.dispose(),Qe.removeEventListener("sessionstart",En),Qe.removeEventListener("sessionend",jt),we&&(we.dispose(),we=null),ni.stop()};function Le(B){B.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),E=!0}function re(){console.log("THREE.WebGLRenderer: Context Restored."),E=!1;const B=it.autoReset,k=Ke.enabled,W=Ke.autoUpdate,$=Ke.needsUpdate,Y=Ke.type;Ne(),it.autoReset=B,Ke.enabled=k,Ke.autoUpdate=W,Ke.needsUpdate=$,Ke.type=Y}function Xe(B){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",B.statusMessage)}function _e(B){const k=B.target;k.removeEventListener("dispose",_e),Ve(k)}function Ve(B){Je(B),V.remove(B)}function Je(B){const k=V.get(B).programs;k!==void 0&&(k.forEach(function(W){Ce.releaseProgram(W)}),B.isShaderMaterial&&Ce.releaseShaderCache(B))}this.renderBufferDirect=function(B,k,W,$,Y,ye){k===null&&(k=Et);const xe=Y.isMesh&&Y.matrixWorld.determinant()<0,Ee=F(B,k,W,$,Y);Ie.setMaterial($,xe);let Se=W.index,st=1;if($.wireframe===!0){if(Se=ee.getWireframeAttribute(W),Se===void 0)return;st=2}const Fe=W.drawRange,Oe=W.attributes.position;let at=Fe.start*st,yt=(Fe.start+Fe.count)*st;ye!==null&&(at=Math.max(at,ye.start*st),yt=Math.min(yt,(ye.start+ye.count)*st)),Se!==null?(at=Math.max(at,0),yt=Math.min(yt,Se.count)):Oe!=null&&(at=Math.max(at,0),yt=Math.min(yt,Oe.count));const At=yt-at;if(At<0||At===1/0)return;q.setup(Y,$,Ee,W,Se);let Rt,ot=Jt;if(Se!==null&&(Rt=L.get(Se),ot=mt,ot.setIndex(Rt)),Y.isMesh)$.wireframe===!0?(Ie.setLineWidth($.wireframeLinewidth*et()),ot.setMode(Z.LINES)):ot.setMode(Z.TRIANGLES);else if(Y.isLine){let Ye=$.linewidth;Ye===void 0&&(Ye=1),Ie.setLineWidth(Ye*et()),Y.isLineSegments?ot.setMode(Z.LINES):Y.isLineLoop?ot.setMode(Z.LINE_LOOP):ot.setMode(Z.LINE_STRIP)}else Y.isPoints?ot.setMode(Z.POINTS):Y.isSprite&&ot.setMode(Z.TRIANGLES);if(Y.isBatchedMesh)ot.renderMultiDraw(Y._multiDrawStarts,Y._multiDrawCounts,Y._multiDrawCount);else if(Y.isInstancedMesh)ot.renderInstances(at,At,Y.count);else if(W.isInstancedBufferGeometry){const Ye=W._maxInstanceCount!==void 0?W._maxInstanceCount:1/0,kt=Math.min(W.instanceCount,Ye);ot.renderInstances(at,At,kt)}else ot.render(at,At)};function Mt(B,k,W){B.transparent===!0&&B.side===rs&&B.forceSinglePass===!1?(B.side=tr,B.needsUpdate=!0,Lt(B,k,W),B.side=lo,B.needsUpdate=!0,Lt(B,k,W),B.side=rs):Lt(B,k,W)}this.compile=function(B,k,W=null){W===null&&(W=B),_=ht.get(W),_.init(),S.push(_),W.traverseVisible(function(Y){Y.isLight&&Y.layers.test(k.layers)&&(_.pushLight(Y),Y.castShadow&&_.pushShadow(Y))}),B!==W&&B.traverseVisible(function(Y){Y.isLight&&Y.layers.test(k.layers)&&(_.pushLight(Y),Y.castShadow&&_.pushShadow(Y))}),_.setupLights(x._useLegacyLights);const $=new Set;return B.traverse(function(Y){const ye=Y.material;if(ye)if(Array.isArray(ye))for(let xe=0;xe<ye.length;xe++){const Ee=ye[xe];Mt(Ee,W,Y),$.add(Ee)}else Mt(ye,W,Y),$.add(ye)}),S.pop(),_=null,$},this.compileAsync=function(B,k,W=null){const $=this.compile(B,k,W);return new Promise(Y=>{function ye(){if($.forEach(function(xe){V.get(xe).currentProgram.isReady()&&$.delete(xe)}),$.size===0){Y(B);return}setTimeout(ye,10)}Re.get("KHR_parallel_shader_compile")!==null?ye():setTimeout(ye,10)})};let Gt=null;function cn(B){Gt&&Gt(B)}function En(){ni.stop()}function jt(){ni.start()}const ni=new iB;ni.setAnimationLoop(cn),typeof self<"u"&&ni.setContext(self),this.setAnimationLoop=function(B){Gt=B,Qe.setAnimationLoop(B),B===null?ni.stop():ni.start()},Qe.addEventListener("sessionstart",En),Qe.addEventListener("sessionend",jt),this.render=function(B,k){if(k!==void 0&&k.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(E===!0)return;B.matrixWorldAutoUpdate===!0&&B.updateMatrixWorld(),k.parent===null&&k.matrixWorldAutoUpdate===!0&&k.updateMatrixWorld(),Qe.enabled===!0&&Qe.isPresenting===!0&&(Qe.cameraAutoUpdate===!0&&Qe.updateCamera(k),k=Qe.getCamera()),B.isScene===!0&&B.onBeforeRender(x,B,k,P),_=ht.get(B,S.length),_.init(),S.push(_),je.multiplyMatrices(k.projectionMatrix,k.matrixWorldInverse),Ue.setFromProjectionMatrix(je),Te=this.localClippingEnabled,he=He.init(this.clippingPlanes,Te),A=ft.get(B,g.length),A.init(),g.push(A),rr(B,k,0,x.sortObjects),A.finish(),x.sortObjects===!0&&A.sort(N,X),this.info.render.frame++,he===!0&&He.beginShadows();const W=_.state.shadowsArray;if(Ke.render(W,B,k),he===!0&&He.endShadows(),this.info.autoReset===!0&&this.info.reset(),(Qe.enabled===!1||Qe.isPresenting===!1||Qe.hasDepthSensing()===!1)&&_t.render(A,B),_.setupLights(x._useLegacyLights),k.isArrayCamera){const $=k.cameras;for(let Y=0,ye=$.length;Y<ye;Y++){const xe=$[Y];Fs(A,B,xe,xe.viewport)}}else Fs(A,B,k);P!==null&&(ne.updateMultisampleRenderTarget(P),ne.updateRenderTargetMipmap(P)),B.isScene===!0&&B.onAfterRender(x,B,k),q.resetDefaultState(),I=-1,z=null,S.pop(),S.length>0?_=S[S.length-1]:_=null,g.pop(),g.length>0?A=g[g.length-1]:A=null};function rr(B,k,W,$){if(B.visible===!1)return;if(B.layers.test(k.layers)){if(B.isGroup)W=B.renderOrder;else if(B.isLOD)B.autoUpdate===!0&&B.update(k);else if(B.isLight)_.pushLight(B),B.castShadow&&_.pushShadow(B);else if(B.isSprite){if(!B.frustumCulled||Ue.intersectsSprite(B)){$&&nt.setFromMatrixPosition(B.matrixWorld).applyMatrix4(je);const xe=ue.update(B),Ee=B.material;Ee.visible&&A.push(B,xe,Ee,W,nt.z,null)}}else if((B.isMesh||B.isLine||B.isPoints)&&(!B.frustumCulled||Ue.intersectsObject(B))){const xe=ue.update(B),Ee=B.material;if($&&(B.boundingSphere!==void 0?(B.boundingSphere===null&&B.computeBoundingSphere(),nt.copy(B.boundingSphere.center)):(xe.boundingSphere===null&&xe.computeBoundingSphere(),nt.copy(xe.boundingSphere.center)),nt.applyMatrix4(B.matrixWorld).applyMatrix4(je)),Array.isArray(Ee)){const Se=xe.groups;for(let st=0,Fe=Se.length;st<Fe;st++){const Oe=Se[st],at=Ee[Oe.materialIndex];at&&at.visible&&A.push(B,xe,at,W,nt.z,Oe)}}else Ee.visible&&A.push(B,xe,Ee,W,nt.z,null)}}const ye=B.children;for(let xe=0,Ee=ye.length;xe<Ee;xe++)rr(ye[xe],k,W,$)}function Fs(B,k,W,$){const Y=B.opaque,ye=B.transmissive,xe=B.transparent;_.setupLightsView(W),he===!0&&He.setGlobalState(x.clippingPlanes,W),ye.length>0&&yl(Y,ye,k,W),$&&Ie.viewport(w.copy($)),Y.length>0&&kr(Y,k,W),ye.length>0&&kr(ye,k,W),xe.length>0&&kr(xe,k,W),Ie.buffers.depth.setTest(!0),Ie.buffers.depth.setMask(!0),Ie.buffers.color.setMask(!0),Ie.setPolygonOffset(!1)}function yl(B,k,W,$){if((W.isScene===!0?W.overrideMaterial:null)!==null)return;const ye=ze.isWebGL2;we===null&&(we=new hs(1,1,{generateMipmaps:!0,type:Re.has("EXT_color_buffer_half_float")?Hi:ro,minFilter:as,samples:ye?4:0})),x.getDrawingBufferSize($e),ye?we.setSize($e.x,$e.y):we.setSize(Ag($e.x),Ag($e.y));const xe=x.getRenderTarget();x.setRenderTarget(we),x.getClearColor(ie),j=x.getClearAlpha(),j<1&&x.setClearColor(16777215,.5),x.clear();const Ee=x.toneMapping;x.toneMapping=io,kr(B,W,$),ne.updateMultisampleRenderTarget(we),ne.updateRenderTargetMipmap(we);let Se=!1;for(let st=0,Fe=k.length;st<Fe;st++){const Oe=k[st],at=Oe.object,yt=Oe.geometry,At=Oe.material,Rt=Oe.group;if(At.side===rs&&at.layers.test($.layers)){const ot=At.side;At.side=tr,At.needsUpdate=!0,sr(at,W,$,yt,At,Rt),At.side=ot,At.needsUpdate=!0,Se=!0}}Se===!0&&(ne.updateMultisampleRenderTarget(we),ne.updateRenderTargetMipmap(we)),x.setRenderTarget(xe),x.setClearColor(ie,j),x.toneMapping=Ee}function kr(B,k,W){const $=k.isScene===!0?k.overrideMaterial:null;for(let Y=0,ye=B.length;Y<ye;Y++){const xe=B[Y],Ee=xe.object,Se=xe.geometry,st=$===null?xe.material:$,Fe=xe.group;Ee.layers.test(W.layers)&&sr(Ee,k,W,Se,st,Fe)}}function sr(B,k,W,$,Y,ye){B.onBeforeRender(x,k,W,$,Y,ye),B.modelViewMatrix.multiplyMatrices(W.matrixWorldInverse,B.matrixWorld),B.normalMatrix.getNormalMatrix(B.modelViewMatrix),Y.onBeforeRender(x,k,W,$,B,ye),Y.transparent===!0&&Y.side===rs&&Y.forceSinglePass===!1?(Y.side=tr,Y.needsUpdate=!0,x.renderBufferDirect(W,k,$,Y,B,ye),Y.side=lo,Y.needsUpdate=!0,x.renderBufferDirect(W,k,$,Y,B,ye),Y.side=rs):x.renderBufferDirect(W,k,$,Y,B,ye),B.onAfterRender(x,k,W,$,Y,ye)}function Lt(B,k,W){k.isScene!==!0&&(k=Et);const $=V.get(B),Y=_.state.lights,ye=_.state.shadowsArray,xe=Y.state.version,Ee=Ce.getParameters(B,Y.state,ye,k,W),Se=Ce.getProgramCacheKey(Ee);let st=$.programs;$.environment=B.isMeshStandardMaterial?k.environment:null,$.fog=k.fog,$.envMap=(B.isMeshStandardMaterial?O:de).get(B.envMap||$.environment),$.envMapRotation=$.environment!==null&&B.envMap===null?k.environmentRotation:B.envMapRotation,st===void 0&&(B.addEventListener("dispose",_e),st=new Map,$.programs=st);let Fe=st.get(Se);if(Fe!==void 0){if($.currentProgram===Fe&&$.lightsStateVersion===xe)return Gu(B,Ee),Fe}else Ee.uniforms=Ce.getUniforms(B),B.onBuild(W,Ee,x),B.onBeforeCompile(Ee,x),Fe=Ce.acquireProgram(Ee,Se),st.set(Se,Fe),$.uniforms=Ee.uniforms;const Oe=$.uniforms;return(!B.isShaderMaterial&&!B.isRawShaderMaterial||B.clipping===!0)&&(Oe.clippingPlanes=He.uniform),Gu(B,Ee),$.needsLights=te(B),$.lightsStateVersion=xe,$.needsLights&&(Oe.ambientLightColor.value=Y.state.ambient,Oe.lightProbe.value=Y.state.probe,Oe.directionalLights.value=Y.state.directional,Oe.directionalLightShadows.value=Y.state.directionalShadow,Oe.spotLights.value=Y.state.spot,Oe.spotLightShadows.value=Y.state.spotShadow,Oe.rectAreaLights.value=Y.state.rectArea,Oe.ltc_1.value=Y.state.rectAreaLTC1,Oe.ltc_2.value=Y.state.rectAreaLTC2,Oe.pointLights.value=Y.state.point,Oe.pointLightShadows.value=Y.state.pointShadow,Oe.hemisphereLights.value=Y.state.hemi,Oe.directionalShadowMap.value=Y.state.directionalShadowMap,Oe.directionalShadowMatrix.value=Y.state.directionalShadowMatrix,Oe.spotShadowMap.value=Y.state.spotShadowMap,Oe.spotLightMatrix.value=Y.state.spotLightMatrix,Oe.spotLightMap.value=Y.state.spotLightMap,Oe.pointShadowMap.value=Y.state.pointShadowMap,Oe.pointShadowMatrix.value=Y.state.pointShadowMatrix),$.currentProgram=Fe,$.uniformsList=null,Fe}function _l(B){if(B.uniformsList===null){const k=B.currentProgram.getUniforms();B.uniformsList=w0.seqWithValue(k.seq,B.uniforms)}return B.uniformsList}function Gu(B,k){const W=V.get(B);W.outputColorSpace=k.outputColorSpace,W.batching=k.batching,W.instancing=k.instancing,W.instancingColor=k.instancingColor,W.instancingMorph=k.instancingMorph,W.skinning=k.skinning,W.morphTargets=k.morphTargets,W.morphNormals=k.morphNormals,W.morphColors=k.morphColors,W.morphTargetsCount=k.morphTargetsCount,W.numClippingPlanes=k.numClippingPlanes,W.numIntersection=k.numClipIntersection,W.vertexAlphas=k.vertexAlphas,W.vertexTangents=k.vertexTangents,W.toneMapping=k.toneMapping}function F(B,k,W,$,Y){k.isScene!==!0&&(k=Et),ne.resetTextureUnits();const ye=k.fog,xe=$.isMeshStandardMaterial?k.environment:null,Ee=P===null?x.outputColorSpace:P.isXRRenderTarget===!0?P.texture.colorSpace:ea,Se=($.isMeshStandardMaterial?O:de).get($.envMap||xe),st=$.vertexColors===!0&&!!W.attributes.color&&W.attributes.color.itemSize===4,Fe=!!W.attributes.tangent&&(!!$.normalMap||$.anisotropy>0),Oe=!!W.morphAttributes.position,at=!!W.morphAttributes.normal,yt=!!W.morphAttributes.color;let At=io;$.toneMapped&&(P===null||P.isXRRenderTarget===!0)&&(At=x.toneMapping);const Rt=W.morphAttributes.position||W.morphAttributes.normal||W.morphAttributes.color,ot=Rt!==void 0?Rt.length:0,Ye=V.get($),kt=_.state.lights;if(he===!0&&(Te===!0||B!==z)){const Dt=B===z&&$.id===I;He.setState($,B,Dt)}let St=!1;$.version===Ye.__version?(Ye.needsLights&&Ye.lightsStateVersion!==kt.state.version||Ye.outputColorSpace!==Ee||Y.isBatchedMesh&&Ye.batching===!1||!Y.isBatchedMesh&&Ye.batching===!0||Y.isInstancedMesh&&Ye.instancing===!1||!Y.isInstancedMesh&&Ye.instancing===!0||Y.isSkinnedMesh&&Ye.skinning===!1||!Y.isSkinnedMesh&&Ye.skinning===!0||Y.isInstancedMesh&&Ye.instancingColor===!0&&Y.instanceColor===null||Y.isInstancedMesh&&Ye.instancingColor===!1&&Y.instanceColor!==null||Y.isInstancedMesh&&Ye.instancingMorph===!0&&Y.morphTexture===null||Y.isInstancedMesh&&Ye.instancingMorph===!1&&Y.morphTexture!==null||Ye.envMap!==Se||$.fog===!0&&Ye.fog!==ye||Ye.numClippingPlanes!==void 0&&(Ye.numClippingPlanes!==He.numPlanes||Ye.numIntersection!==He.numIntersection)||Ye.vertexAlphas!==st||Ye.vertexTangents!==Fe||Ye.morphTargets!==Oe||Ye.morphNormals!==at||Ye.morphColors!==yt||Ye.toneMapping!==At||ze.isWebGL2===!0&&Ye.morphTargetsCount!==ot)&&(St=!0):(St=!0,Ye.__version=$.version);let Tt=Ye.currentProgram;St===!0&&(Tt=Lt($,k,Y));let on=!1,Fn=!1,An=!1;const Kt=Tt.getUniforms(),Ht=Ye.uniforms;if(Ie.useProgram(Tt.program)&&(on=!0,Fn=!0,An=!0),$.id!==I&&(I=$.id,Fn=!0),on||z!==B){Kt.setValue(Z,"projectionMatrix",B.projectionMatrix),Kt.setValue(Z,"viewMatrix",B.matrixWorldInverse);const Dt=Kt.map.cameraPosition;Dt!==void 0&&Dt.setValue(Z,nt.setFromMatrixPosition(B.matrixWorld)),ze.logarithmicDepthBuffer&&Kt.setValue(Z,"logDepthBufFC",2/(Math.log(B.far+1)/Math.LN2)),($.isMeshPhongMaterial||$.isMeshToonMaterial||$.isMeshLambertMaterial||$.isMeshBasicMaterial||$.isMeshStandardMaterial||$.isShaderMaterial)&&Kt.setValue(Z,"isOrthographic",B.isOrthographicCamera===!0),z!==B&&(z=B,Fn=!0,An=!0)}if(Y.isSkinnedMesh){Kt.setOptional(Z,Y,"bindMatrix"),Kt.setOptional(Z,Y,"bindMatrixInverse");const Dt=Y.skeleton;Dt&&(ze.floatVertexTextures?(Dt.boneTexture===null&&Dt.computeBoneTexture(),Kt.setValue(Z,"boneTexture",Dt.boneTexture,ne)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}Y.isBatchedMesh&&(Kt.setOptional(Z,Y,"batchingTexture"),Kt.setValue(Z,"batchingTexture",Y._matricesTexture,ne));const Mn=W.morphAttributes;if((Mn.position!==void 0||Mn.normal!==void 0||Mn.color!==void 0&&ze.isWebGL2===!0)&&Ge.update(Y,W,Tt),(Fn||Ye.receiveShadow!==Y.receiveShadow)&&(Ye.receiveShadow=Y.receiveShadow,Kt.setValue(Z,"receiveShadow",Y.receiveShadow)),$.isMeshGouraudMaterial&&$.envMap!==null&&(Ht.envMap.value=Se,Ht.flipEnvMap.value=Se.isCubeTexture&&Se.isRenderTargetTexture===!1?-1:1),Fn&&(Kt.setValue(Z,"toneMappingExposure",x.toneMappingExposure),Ye.needsLights&&U(Ht,An),ye&&$.fog===!0&&Pe.refreshFogUniforms(Ht,ye),Pe.refreshMaterialUniforms(Ht,$,pe,oe,we),w0.upload(Z,_l(Ye),Ht,ne)),$.isShaderMaterial&&$.uniformsNeedUpdate===!0&&(w0.upload(Z,_l(Ye),Ht,ne),$.uniformsNeedUpdate=!1),$.isSpriteMaterial&&Kt.setValue(Z,"center",Y.center),Kt.setValue(Z,"modelViewMatrix",Y.modelViewMatrix),Kt.setValue(Z,"normalMatrix",Y.normalMatrix),Kt.setValue(Z,"modelMatrix",Y.matrixWorld),$.isShaderMaterial||$.isRawShaderMaterial){const Dt=$.uniformsGroups;for(let Vt=0,dn=Dt.length;Vt<dn;Vt++)if(ze.isWebGL2){const zr=Dt[Vt];ve.update(zr,Tt),ve.bind(zr,Tt)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Tt}function U(B,k){B.ambientLightColor.needsUpdate=k,B.lightProbe.needsUpdate=k,B.directionalLights.needsUpdate=k,B.directionalLightShadows.needsUpdate=k,B.pointLights.needsUpdate=k,B.pointLightShadows.needsUpdate=k,B.spotLights.needsUpdate=k,B.spotLightShadows.needsUpdate=k,B.rectAreaLights.needsUpdate=k,B.hemisphereLights.needsUpdate=k}function te(B){return B.isMeshLambertMaterial||B.isMeshToonMaterial||B.isMeshPhongMaterial||B.isMeshStandardMaterial||B.isShadowMaterial||B.isShaderMaterial&&B.lights===!0}this.getActiveCubeFace=function(){return b},this.getActiveMipmapLevel=function(){return T},this.getRenderTarget=function(){return P},this.setRenderTargetTextures=function(B,k,W){V.get(B.texture).__webglTexture=k,V.get(B.depthTexture).__webglTexture=W;const $=V.get(B);$.__hasExternalTextures=!0,$.__autoAllocateDepthBuffer=W===void 0,$.__autoAllocateDepthBuffer||Re.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),$.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(B,k){const W=V.get(B);W.__webglFramebuffer=k,W.__useDefaultFramebuffer=k===void 0},this.setRenderTarget=function(B,k=0,W=0){P=B,b=k,T=W;let $=!0,Y=null,ye=!1,xe=!1;if(B){const Se=V.get(B);Se.__useDefaultFramebuffer!==void 0?(Ie.bindFramebuffer(Z.FRAMEBUFFER,null),$=!1):Se.__webglFramebuffer===void 0?ne.setupRenderTarget(B):Se.__hasExternalTextures&&ne.rebindTextures(B,V.get(B.texture).__webglTexture,V.get(B.depthTexture).__webglTexture);const st=B.texture;(st.isData3DTexture||st.isDataArrayTexture||st.isCompressedArrayTexture)&&(xe=!0);const Fe=V.get(B).__webglFramebuffer;B.isWebGLCubeRenderTarget?(Array.isArray(Fe[k])?Y=Fe[k][W]:Y=Fe[k],ye=!0):ze.isWebGL2&&B.samples>0&&ne.useMultisampledRTT(B)===!1?Y=V.get(B).__webglMultisampledFramebuffer:Array.isArray(Fe)?Y=Fe[W]:Y=Fe,w.copy(B.viewport),D.copy(B.scissor),Q=B.scissorTest}else w.copy(J).multiplyScalar(pe).floor(),D.copy(ae).multiplyScalar(pe).floor(),Q=me;if(Ie.bindFramebuffer(Z.FRAMEBUFFER,Y)&&ze.drawBuffers&&$&&Ie.drawBuffers(B,Y),Ie.viewport(w),Ie.scissor(D),Ie.setScissorTest(Q),ye){const Se=V.get(B.texture);Z.framebufferTexture2D(Z.FRAMEBUFFER,Z.COLOR_ATTACHMENT0,Z.TEXTURE_CUBE_MAP_POSITIVE_X+k,Se.__webglTexture,W)}else if(xe){const Se=V.get(B.texture),st=k||0;Z.framebufferTextureLayer(Z.FRAMEBUFFER,Z.COLOR_ATTACHMENT0,Se.__webglTexture,W||0,st)}I=-1},this.readRenderTargetPixels=function(B,k,W,$,Y,ye,xe){if(!(B&&B.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Ee=V.get(B).__webglFramebuffer;if(B.isWebGLCubeRenderTarget&&xe!==void 0&&(Ee=Ee[xe]),Ee){Ie.bindFramebuffer(Z.FRAMEBUFFER,Ee);try{const Se=B.texture,st=Se.format,Fe=Se.type;if(st!==zi&&dt.convert(st)!==Z.getParameter(Z.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const Oe=Fe===Hi&&(Re.has("EXT_color_buffer_half_float")||ze.isWebGL2&&Re.has("EXT_color_buffer_float"));if(Fe!==ro&&dt.convert(Fe)!==Z.getParameter(Z.IMPLEMENTATION_COLOR_READ_TYPE)&&!(Fe===ei&&(ze.isWebGL2||Re.has("OES_texture_float")||Re.has("WEBGL_color_buffer_float")))&&!Oe){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}k>=0&&k<=B.width-$&&W>=0&&W<=B.height-Y&&Z.readPixels(k,W,$,Y,dt.convert(st),dt.convert(Fe),ye)}finally{const Se=P!==null?V.get(P).__webglFramebuffer:null;Ie.bindFramebuffer(Z.FRAMEBUFFER,Se)}}},this.copyFramebufferToTexture=function(B,k,W=0){const $=Math.pow(2,-W),Y=Math.floor(k.image.width*$),ye=Math.floor(k.image.height*$);ne.setTexture2D(k,0),Z.copyTexSubImage2D(Z.TEXTURE_2D,W,0,0,B.x,B.y,Y,ye),Ie.unbindTexture()},this.copyTextureToTexture=function(B,k,W,$=0){const Y=k.image.width,ye=k.image.height,xe=dt.convert(W.format),Ee=dt.convert(W.type);ne.setTexture2D(W,0),Z.pixelStorei(Z.UNPACK_FLIP_Y_WEBGL,W.flipY),Z.pixelStorei(Z.UNPACK_PREMULTIPLY_ALPHA_WEBGL,W.premultiplyAlpha),Z.pixelStorei(Z.UNPACK_ALIGNMENT,W.unpackAlignment),k.isDataTexture?Z.texSubImage2D(Z.TEXTURE_2D,$,B.x,B.y,Y,ye,xe,Ee,k.image.data):k.isCompressedTexture?Z.compressedTexSubImage2D(Z.TEXTURE_2D,$,B.x,B.y,k.mipmaps[0].width,k.mipmaps[0].height,xe,k.mipmaps[0].data):Z.texSubImage2D(Z.TEXTURE_2D,$,B.x,B.y,xe,Ee,k.image),$===0&&W.generateMipmaps&&Z.generateMipmap(Z.TEXTURE_2D),Ie.unbindTexture()},this.copyTextureToTexture3D=function(B,k,W,$,Y=0){if(x.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const ye=Math.round(B.max.x-B.min.x),xe=Math.round(B.max.y-B.min.y),Ee=B.max.z-B.min.z+1,Se=dt.convert($.format),st=dt.convert($.type);let Fe;if($.isData3DTexture)ne.setTexture3D($,0),Fe=Z.TEXTURE_3D;else if($.isDataArrayTexture||$.isCompressedArrayTexture)ne.setTexture2DArray($,0),Fe=Z.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}Z.pixelStorei(Z.UNPACK_FLIP_Y_WEBGL,$.flipY),Z.pixelStorei(Z.UNPACK_PREMULTIPLY_ALPHA_WEBGL,$.premultiplyAlpha),Z.pixelStorei(Z.UNPACK_ALIGNMENT,$.unpackAlignment);const Oe=Z.getParameter(Z.UNPACK_ROW_LENGTH),at=Z.getParameter(Z.UNPACK_IMAGE_HEIGHT),yt=Z.getParameter(Z.UNPACK_SKIP_PIXELS),At=Z.getParameter(Z.UNPACK_SKIP_ROWS),Rt=Z.getParameter(Z.UNPACK_SKIP_IMAGES),ot=W.isCompressedTexture?W.mipmaps[Y]:W.image;Z.pixelStorei(Z.UNPACK_ROW_LENGTH,ot.width),Z.pixelStorei(Z.UNPACK_IMAGE_HEIGHT,ot.height),Z.pixelStorei(Z.UNPACK_SKIP_PIXELS,B.min.x),Z.pixelStorei(Z.UNPACK_SKIP_ROWS,B.min.y),Z.pixelStorei(Z.UNPACK_SKIP_IMAGES,B.min.z),W.isDataTexture||W.isData3DTexture?Z.texSubImage3D(Fe,Y,k.x,k.y,k.z,ye,xe,Ee,Se,st,ot.data):$.isCompressedArrayTexture?Z.compressedTexSubImage3D(Fe,Y,k.x,k.y,k.z,ye,xe,Ee,Se,ot.data):Z.texSubImage3D(Fe,Y,k.x,k.y,k.z,ye,xe,Ee,Se,st,ot),Z.pixelStorei(Z.UNPACK_ROW_LENGTH,Oe),Z.pixelStorei(Z.UNPACK_IMAGE_HEIGHT,at),Z.pixelStorei(Z.UNPACK_SKIP_PIXELS,yt),Z.pixelStorei(Z.UNPACK_SKIP_ROWS,At),Z.pixelStorei(Z.UNPACK_SKIP_IMAGES,Rt),Y===0&&$.generateMipmaps&&Z.generateMipmap(Fe),Ie.unbindTexture()},this.initTexture=function(B){B.isCubeTexture?ne.setTextureCube(B,0):B.isData3DTexture?ne.setTexture3D(B,0):B.isDataArrayTexture||B.isCompressedArrayTexture?ne.setTexture2DArray(B,0):ne.setTexture2D(B,0),Ie.unbindTexture()},this.resetState=function(){b=0,T=0,P=null,Ie.reset(),q.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Ys}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=e===pv?"display-p3":"srgb",t.unpackColorSpace=an.workingColorSpace===Ap?"display-p3":"srgb"}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}class fB extends OC{}fB.prototype.isWebGL1Renderer=!0;class yv{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new qe(e),this.density=t}clone(){return new yv(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class _v{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new qe(e),this.near=t,this.far=i}clone(){return new _v(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class $d extends qt{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new yr,this.environmentRotation=new yr,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class Mp{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=Zd,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=Br()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return qP("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Br()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Br()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Yi=new H;class rl{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)Yi.fromBufferAttribute(this,t),Yi.applyMatrix4(e),this.setXYZ(t,Yi.x,Yi.y,Yi.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Yi.fromBufferAttribute(this,t),Yi.applyNormalMatrix(e),this.setXYZ(t,Yi.x,Yi.y,Yi.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Yi.fromBufferAttribute(this,t),Yi.transformDirection(e),this.setXYZ(t,Yi.x,Yi.y,Yi.z);return this}getComponent(e,t){let i=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(i=$i(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=Nt(i,this.array)),this.data.array[e*this.data.stride+this.offset+t]=i,this}setX(e,t){return this.normalized&&(t=Nt(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Nt(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Nt(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Nt(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=$i(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=$i(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=$i(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=$i(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=Nt(t,this.array),i=Nt(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Nt(t,this.array),i=Nt(i,this.array),r=Nt(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=Nt(t,this.array),i=Nt(i,this.array),r=Nt(r,this.array),s=Nt(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new $t(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new rl(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class UC extends ti{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new qe(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let yc;const Rh=new H,_c=new H,xc=new H,Ac=new be,Ph=new be,hB=new xt,x1=new H,Bh=new H,A1=new H,UT=new be,mx=new be,kT=new be;class dB extends qt{constructor(e=new UC){if(super(),this.isSprite=!0,this.type="Sprite",yc===void 0){yc=new It;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new Mp(t,5);yc.setIndex([0,1,2,0,2,3]),yc.setAttribute("position",new rl(i,3,0,!1)),yc.setAttribute("uv",new rl(i,2,3,!1))}this.geometry=yc,this.material=e,this.center=new be(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),_c.setFromMatrixScale(this.matrixWorld),hB.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),xc.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&_c.multiplyScalar(-xc.z);const i=this.material.rotation;let r,s;i!==0&&(s=Math.cos(i),r=Math.sin(i));const o=this.center;S1(x1.set(-.5,-.5,0),xc,o,_c,r,s),S1(Bh.set(.5,-.5,0),xc,o,_c,r,s),S1(A1.set(.5,.5,0),xc,o,_c,r,s),UT.set(0,0),mx.set(1,0),kT.set(1,1);let a=e.ray.intersectTriangle(x1,Bh,A1,!1,Rh);if(a===null&&(S1(Bh.set(-.5,.5,0),xc,o,_c,r,s),mx.set(0,1),a=e.ray.intersectTriangle(x1,A1,Bh,!1,Rh),a===null))return;const l=e.ray.origin.distanceTo(Rh);l<e.near||l>e.far||t.push({distance:l,point:Rh.clone(),uv:wr.getInterpolation(Rh,x1,Bh,A1,UT,mx,kT,new be),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function S1(n,e,t,i,r,s){Ac.subVectors(n,t).addScalar(.5).multiply(i),r!==void 0?(Ph.x=s*Ac.x-r*Ac.y,Ph.y=r*Ac.x+s*Ac.y):Ph.copy(Ac),n.copy(e),n.x+=Ph.x,n.y+=Ph.y,n.applyMatrix4(hB)}const C1=new H,zT=new H;class pB extends qt{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let i=0,r=t.length;i<r;i++){const s=t[i];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,i=0){t=Math.abs(t);const r=this.levels;let s;for(s=0;s<r.length&&!(t<r[s].distance);s++);return r.splice(s,0,{distance:t,hysteresis:i,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let i,r;for(i=1,r=t.length;i<r;i++){let s=t[i].distance;if(t[i].object.visible&&(s-=s*t[i].hysteresis),e<s)break}return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){C1.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(C1);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){C1.setFromMatrixPosition(e.matrixWorld),zT.setFromMatrixPosition(this.matrixWorld);const i=C1.distanceTo(zT)/e.zoom;t[0].object.visible=!0;let r,s;for(r=1,s=t.length;r<s;r++){let o=t[r].distance;if(t[r].object.visible&&(o-=o*t[r].hysteresis),i>=o)t[r-1].object.visible=!1,t[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<s;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let r=0,s=i.length;r<s;r++){const o=i[r];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const HT=new H,GT=new ln,VT=new ln,VY=new H,WT=new xt,E1=new H,gx=new Ti,jT=new xt,vx=new Fu;class kC extends Vn{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=I3,this.bindMatrix=new xt,this.bindMatrixInverse=new xt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Gi),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,E1),this.boundingBox.expandByPoint(E1)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Ti),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,E1),this.boundingSphere.expandByPoint(E1)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const i=this.material,r=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),gx.copy(this.boundingSphere),gx.applyMatrix4(r),e.ray.intersectsSphere(gx)!==!1&&(jT.copy(r).invert(),vx.copy(e.ray).applyMatrix4(jT),!(this.boundingBox!==null&&vx.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,vx)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new ln,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===I3?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===TP?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,r=this.geometry;GT.fromBufferAttribute(r.attributes.skinIndex,e),VT.fromBufferAttribute(r.attributes.skinWeight,e),HT.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=VT.getComponent(s);if(o!==0){const a=GT.getComponent(s);WT.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),t.addScaledVector(VY.copy(HT).applyMatrix4(WT),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class xv extends qt{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Za extends gn{constructor(e=null,t=1,i=1,r,s,o,a,l,u=zn,c=zn,h,p){super(null,o,a,l,u,c,r,s,h,p),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const XT=new xt,WY=new xt;class wp{constructor(e=[],t=[]){this.uuid=Br(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new xt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new xt;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:WY;XT.multiplyMatrices(a,t[s]),XT.toArray(i,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new wp(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new Za(t,e,e,zi,ei);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const s=e.bones[i];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new xv),this.bones.push(o),this.boneInverses.push(new xt().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,s=t.length;r<s;r++){const o=t[r];e.bones.push(o.uuid);const a=i[r];e.boneInverses.push(a.toArray())}return e}}class wf extends $t{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Sc=new xt,JT=new xt,M1=[],KT=new Gi,jY=new xt,Ih=new Vn,Lh=new Ti;class zC extends Vn{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new wf(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,jY)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Gi),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Sc),KT.copy(e.boundingBox).applyMatrix4(Sc),this.boundingBox.union(KT)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new Ti),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Sc),Lh.copy(e.boundingSphere).applyMatrix4(Sc),this.boundingSphere.union(Lh)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const i=t.morphTargetInfluences,r=this.morphTexture.source.data.data,s=i.length+1,o=e*s+1;for(let a=0;a<i.length;a++)i[a]=r[o+a]}raycast(e,t){const i=this.matrixWorld,r=this.count;if(Ih.geometry=this.geometry,Ih.material=this.material,Ih.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Lh.copy(this.boundingSphere),Lh.applyMatrix4(i),e.ray.intersectsSphere(Lh)!==!1))for(let s=0;s<r;s++){this.getMatrixAt(s,Sc),JT.multiplyMatrices(i,Sc),Ih.matrixWorld=JT,Ih.raycast(e,M1);for(let o=0,a=M1.length;o<a;o++){const l=M1[o];l.instanceId=s,l.object=this,t.push(l)}M1.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new wf(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const i=t.morphTargetInfluences,r=i.length+1;this.morphTexture===null&&(this.morphTexture=new Za(new Float32Array(r*this.count),r,this.count,hv,ei));const s=this.morphTexture.source.data.data;let o=0;for(let u=0;u<i.length;u++)o+=i[u];const a=this.geometry.morphTargetsRelative?1:1-o,l=r*e;s[l]=a,s.set(i,l+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}function XY(n,e){return n.z-e.z}function JY(n,e){return e.z-n.z}class KY{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t){const i=this.pool,r=this.list;this.index>=i.length&&i.push({start:-1,count:-1,z:-1});const s=i[this.index];r.push(s),this.index++,s.start=e.start,s.count=e.count,s.z=t}reset(){this.list.length=0,this.index=0}}const Cc="batchId",ga=new xt,YT=new xt,YY=new xt,ZT=new xt,yx=new Ep,w1=new Gi,Nl=new Ti,Dh=new H,_x=new KY,Oi=new Vn,T1=[];function ZY(n,e,t=0){const i=e.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==e.array.constructor){const r=n.count;for(let s=0;s<r;s++)for(let o=0;o<i;o++)e.setComponent(s+t,o,n.getComponent(s,o))}else e.array.set(n.array,t*i);e.needsUpdate=!0}class mB extends Vn{get maxGeometryCount(){return this._maxGeometryCount}constructor(e,t,i=t*2,r){super(new It,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawRanges=[],this._reservedRanges=[],this._visibility=[],this._active=[],this._bounds=[],this._maxGeometryCount=e,this._maxVertexCount=t,this._maxIndexCount=i,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._visibilityChanged=!0,this._matricesTexture=null,this._initMatricesTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxGeometryCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),i=new Za(t,e,e,zi,ei);this._matricesTexture=i}_initializeGeometry(e){const t=this.geometry,i=this._maxVertexCount,r=this._maxGeometryCount,s=this._maxIndexCount;if(this._geometryInitialized===!1){for(const a in e.attributes){const l=e.getAttribute(a),{array:u,itemSize:c,normalized:h}=l,p=new u.constructor(i*c),m=new l.constructor(p,c,h);m.setUsage(l.usage),t.setAttribute(a,m)}if(e.getIndex()!==null){const a=i>65536?new Uint32Array(s):new Uint16Array(s);t.setIndex(new $t(a,1))}const o=r>65536?new Uint32Array(i):new Uint16Array(i);t.setAttribute(Cc,new $t(o,1)),this._geometryInitialized=!0}}_validateGeometry(e){if(e.getAttribute(Cc))throw new Error(`BatchedMesh: Geometry cannot use attribute "${Cc}"`);const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const i in t.attributes){if(i===Cc)continue;if(!e.hasAttribute(i))throw new Error(`BatchedMesh: Added geometry missing "${i}". All geometries must have consistent attributes.`);const r=e.getAttribute(i),s=t.getAttribute(i);if(r.itemSize!==s.itemSize||r.normalized!==s.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Gi);const e=this._geometryCount,t=this.boundingBox,i=this._active;t.makeEmpty();for(let r=0;r<e;r++)i[r]!==!1&&(this.getMatrixAt(r,ga),this.getBoundingBoxAt(r,w1).applyMatrix4(ga),t.union(w1))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Ti);const e=this._geometryCount,t=this.boundingSphere,i=this._active;t.makeEmpty();for(let r=0;r<e;r++)i[r]!==!1&&(this.getMatrixAt(r,ga),this.getBoundingSphereAt(r,Nl).applyMatrix4(ga),t.union(Nl))}addGeometry(e,t=-1,i=-1){if(this._initializeGeometry(e),this._validateGeometry(e),this._geometryCount>=this._maxGeometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");const r={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1};let s=null;const o=this._reservedRanges,a=this._drawRanges,l=this._bounds;this._geometryCount!==0&&(s=o[o.length-1]),t===-1?r.vertexCount=e.getAttribute("position").count:r.vertexCount=t,s===null?r.vertexStart=0:r.vertexStart=s.vertexStart+s.vertexCount;const u=e.getIndex(),c=u!==null;if(c&&(i===-1?r.indexCount=u.count:r.indexCount=i,s===null?r.indexStart=0:r.indexStart=s.indexStart+s.indexCount),r.indexStart!==-1&&r.indexStart+r.indexCount>this._maxIndexCount||r.vertexStart+r.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");const h=this._visibility,p=this._active,m=this._matricesTexture,v=this._matricesTexture.image.data;h.push(!0),p.push(!0);const A=this._geometryCount;this._geometryCount++,YY.toArray(v,A*16),m.needsUpdate=!0,o.push(r),a.push({start:c?r.indexStart:r.vertexStart,count:-1}),l.push({boxInitialized:!1,box:new Gi,sphereInitialized:!1,sphere:new Ti});const _=this.geometry.getAttribute(Cc);for(let g=0;g<r.vertexCount;g++)_.setX(r.vertexStart+g,A);return _.needsUpdate=!0,this.setGeometryAt(A,e),A}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const i=this.geometry,r=i.getIndex()!==null,s=i.getIndex(),o=t.getIndex(),a=this._reservedRanges[e];if(r&&o.count>a.indexCount||t.attributes.position.count>a.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const l=a.vertexStart,u=a.vertexCount;for(const m in i.attributes){if(m===Cc)continue;const v=t.getAttribute(m),A=i.getAttribute(m);ZY(v,A,l);const _=v.itemSize;for(let g=v.count,S=u;g<S;g++){const x=l+g;for(let E=0;E<_;E++)A.setComponent(x,E,0)}A.needsUpdate=!0}if(r){const m=a.indexStart;for(let v=0;v<o.count;v++)s.setX(m+v,l+o.getX(v));for(let v=o.count,A=a.indexCount;v<A;v++)s.setX(m+v,l);s.needsUpdate=!0}const c=this._bounds[e];t.boundingBox!==null?(c.box.copy(t.boundingBox),c.boxInitialized=!0):c.boxInitialized=!1,t.boundingSphere!==null?(c.sphere.copy(t.boundingSphere),c.sphereInitialized=!0):c.sphereInitialized=!1;const h=this._drawRanges[e],p=t.getAttribute("position");return h.count=r?o.count:p.count,this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._active;return e>=t.length||t[e]===!1?this:(t[e]=!1,this._visibilityChanged=!0,this)}getBoundingBoxAt(e,t){if(this._active[e]===!1)return null;const r=this._bounds[e],s=r.box,o=this.geometry;if(r.boxInitialized===!1){s.makeEmpty();const a=o.index,l=o.attributes.position,u=this._drawRanges[e];for(let c=u.start,h=u.start+u.count;c<h;c++){let p=c;a&&(p=a.getX(p)),s.expandByPoint(Dh.fromBufferAttribute(l,p))}r.boxInitialized=!0}return t.copy(s),t}getBoundingSphereAt(e,t){if(this._active[e]===!1)return null;const r=this._bounds[e],s=r.sphere,o=this.geometry;if(r.sphereInitialized===!1){s.makeEmpty(),this.getBoundingBoxAt(e,w1),w1.getCenter(s.center);const a=o.index,l=o.attributes.position,u=this._drawRanges[e];let c=0;for(let h=u.start,p=u.start+u.count;h<p;h++){let m=h;a&&(m=a.getX(m)),Dh.fromBufferAttribute(l,m),c=Math.max(c,s.center.distanceToSquared(Dh))}s.radius=Math.sqrt(c),r.sphereInitialized=!0}return t.copy(s),t}setMatrixAt(e,t){const i=this._active,r=this._matricesTexture,s=this._matricesTexture.image.data,o=this._geometryCount;return e>=o||i[e]===!1?this:(t.toArray(s,e*16),r.needsUpdate=!0,this)}getMatrixAt(e,t){const i=this._active,r=this._matricesTexture.image.data,s=this._geometryCount;return e>=s||i[e]===!1?null:t.fromArray(r,e*16)}setVisibleAt(e,t){const i=this._visibility,r=this._active,s=this._geometryCount;return e>=s||r[e]===!1||i[e]===t?this:(i[e]=t,this._visibilityChanged=!0,this)}getVisibleAt(e){const t=this._visibility,i=this._active,r=this._geometryCount;return e>=r||i[e]===!1?!1:t[e]}raycast(e,t){const i=this._visibility,r=this._active,s=this._drawRanges,o=this._geometryCount,a=this.matrixWorld,l=this.geometry;Oi.material=this.material,Oi.geometry.index=l.index,Oi.geometry.attributes=l.attributes,Oi.geometry.boundingBox===null&&(Oi.geometry.boundingBox=new Gi),Oi.geometry.boundingSphere===null&&(Oi.geometry.boundingSphere=new Ti);for(let u=0;u<o;u++){if(!i[u]||!r[u])continue;const c=s[u];Oi.geometry.setDrawRange(c.start,c.count),this.getMatrixAt(u,Oi.matrixWorld).premultiply(a),this.getBoundingBoxAt(u,Oi.geometry.boundingBox),this.getBoundingSphereAt(u,Oi.geometry.boundingSphere),Oi.raycast(e,T1);for(let h=0,p=T1.length;h<p;h++){const m=T1[h];m.object=this,m.batchId=u,t.push(m)}T1.length=0}Oi.material=null,Oi.geometry.index=null,Oi.geometry.attributes={},Oi.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._drawRanges=e._drawRanges.map(t=>({...t})),this._reservedRanges=e._reservedRanges.map(t=>({...t})),this._visibility=e._visibility.slice(),this._active=e._active.slice(),this._bounds=e._bounds.map(t=>({boxInitialized:t.boxInitialized,box:t.box.clone(),sphereInitialized:t.sphereInitialized,sphere:t.sphere.clone()})),this._maxGeometryCount=e._maxGeometryCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.slice(),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this}onBeforeRender(e,t,i,r,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=r.getIndex(),a=o===null?1:o.array.BYTES_PER_ELEMENT,l=this._active,u=this._visibility,c=this._multiDrawStarts,h=this._multiDrawCounts,p=this._drawRanges,m=this.perObjectFrustumCulled;m&&(ZT.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse).multiply(this.matrixWorld),yx.setFromProjectionMatrix(ZT,e.coordinateSystem));let v=0;if(this.sortObjects){YT.copy(this.matrixWorld).invert(),Dh.setFromMatrixPosition(i.matrixWorld).applyMatrix4(YT);for(let g=0,S=u.length;g<S;g++)if(u[g]&&l[g]){this.getMatrixAt(g,ga),this.getBoundingSphereAt(g,Nl).applyMatrix4(ga);let x=!1;if(m&&(x=!yx.intersectsSphere(Nl)),!x){const E=Dh.distanceTo(Nl.center);_x.push(p[g],E)}}const A=_x.list,_=this.customSort;_===null?A.sort(s.transparent?JY:XY):_.call(this,A,i);for(let g=0,S=A.length;g<S;g++){const x=A[g];c[v]=x.start*a,h[v]=x.count,v++}_x.reset()}else for(let A=0,_=u.length;A<_;A++)if(u[A]&&l[A]){let g=!1;if(m&&(this.getMatrixAt(A,ga),this.getBoundingSphereAt(A,Nl).applyMatrix4(ga),g=!yx.intersectsSphere(Nl)),!g){const S=p[A];c[v]=S.start*a,h[v]=S.count,v++}}this._multiDrawCount=v,this._visibilityChanged=!1}onBeforeShadow(e,t,i,r,s,o){this.onBeforeRender(e,null,r,s,o)}}class Wi extends ti{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new qe(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const qT=new H,QT=new H,$T=new xt,xx=new Fu,b1=new Ti;class qo extends qt{constructor(e=new It,t=new Wi){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let r=1,s=t.count;r<s;r++)qT.fromBufferAttribute(t,r-1),QT.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=qT.distanceTo(QT);e.setAttribute("lineDistance",new pt(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),b1.copy(i.boundingSphere),b1.applyMatrix4(r),b1.radius+=s,e.ray.intersectsSphere(b1)===!1)return;$T.copy(r).invert(),xx.copy(e.ray).applyMatrix4($T);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=new H,c=new H,h=new H,p=new H,m=this.isLineSegments?2:1,v=i.index,_=i.attributes.position;if(v!==null){const g=Math.max(0,o.start),S=Math.min(v.count,o.start+o.count);for(let x=g,E=S-1;x<E;x+=m){const b=v.getX(x),T=v.getX(x+1);if(u.fromBufferAttribute(_,b),c.fromBufferAttribute(_,T),xx.distanceSqToSegment(u,c,p,h)>l)continue;p.applyMatrix4(this.matrixWorld);const I=e.ray.origin.distanceTo(p);I<e.near||I>e.far||t.push({distance:I,point:h.clone().applyMatrix4(this.matrixWorld),index:x,face:null,faceIndex:null,object:this})}}else{const g=Math.max(0,o.start),S=Math.min(_.count,o.start+o.count);for(let x=g,E=S-1;x<E;x+=m){if(u.fromBufferAttribute(_,x),c.fromBufferAttribute(_,x+1),xx.distanceSqToSegment(u,c,p,h)>l)continue;p.applyMatrix4(this.matrixWorld);const T=e.ray.origin.distanceTo(p);T<e.near||T>e.far||t.push({distance:T,point:h.clone().applyMatrix4(this.matrixWorld),index:x,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}const e6=new H,t6=new H;class Is extends qo{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let r=0,s=t.count;r<s;r+=2)e6.fromBufferAttribute(t,r),t6.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+e6.distanceTo(t6);e.setAttribute("lineDistance",new pt(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class HC extends qo{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class Av extends ti{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new qe(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const n6=new xt,uA=new Fu,R1=new Ti,P1=new H;class GC extends qt{constructor(e=new It,t=new Av){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),R1.copy(i.boundingSphere),R1.applyMatrix4(r),R1.radius+=s,e.ray.intersectsSphere(R1)===!1)return;n6.copy(r).invert(),uA.copy(e.ray).applyMatrix4(n6);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=i.index,h=i.attributes.position;if(u!==null){const p=Math.max(0,o.start),m=Math.min(u.count,o.start+o.count);for(let v=p,A=m;v<A;v++){const _=u.getX(v);P1.fromBufferAttribute(h,_),i6(P1,_,l,r,e,t,this)}}else{const p=Math.max(0,o.start),m=Math.min(h.count,o.start+o.count);for(let v=p,A=m;v<A;v++)P1.fromBufferAttribute(h,v),i6(P1,v,l,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function i6(n,e,t,i,r,s,o){const a=uA.distanceSqToPoint(n);if(a<t){const l=new H;uA.closestPointToPoint(n,l),l.applyMatrix4(i);const u=r.ray.origin.distanceTo(l);if(u<r.near||u>r.far)return;s.push({distance:u,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}class qY extends gn{constructor(e,t,i,r,s,o,a,l,u){super(e,t,i,r,s,o,a,l,u),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:rn,this.magFilter=s!==void 0?s:rn,this.generateMipmaps=!1;const c=this;function h(){c.needsUpdate=!0,e.requestVideoFrameCallback(h)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(h)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class QY extends gn{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=zn,this.minFilter=zn,this.generateMipmaps=!1,this.needsUpdate=!0}}class Sv extends gn{constructor(e,t,i,r,s,o,a,l,u,c,h,p){super(null,o,a,l,u,c,r,s,h,p),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class $Y extends Sv{constructor(e,t,i,r,s,o){super(e,t,i,s,o),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=Ei}}class eZ extends Sv{constructor(e,t,i){super(void 0,e[0].width,e[0].height,t,i,uo),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class tZ extends gn{constructor(e,t,i,r,s,o,a,l,u){super(e,t,i,r,s,o,a,l,u),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Ls{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,r=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)i=this.getPoint(o/e),s+=i.distanceTo(r),t.push(s),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const i=this.getLengths();let r=0;const s=i.length;let o;t?o=t:o=e*i[s-1];let a=0,l=s-1,u;for(;a<=l;)if(r=Math.floor(a+(l-a)/2),u=i[r]-o,u<0)a=r+1;else if(u>0)l=r-1;else{l=r;break}if(r=l,i[r]===o)return r/(s-1);const c=i[r],p=i[r+1]-c,m=(o-c)/p;return(r+m)/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),a=this.getPoint(s),l=t||(o.isVector2?new be:new H);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){const i=new H,r=[],s=[],o=[],a=new H,l=new xt;for(let m=0;m<=e;m++){const v=m/e;r[m]=this.getTangentAt(v,new H)}s[0]=new H,o[0]=new H;let u=Number.MAX_VALUE;const c=Math.abs(r[0].x),h=Math.abs(r[0].y),p=Math.abs(r[0].z);c<=u&&(u=c,i.set(1,0,0)),h<=u&&(u=h,i.set(0,1,0)),p<=u&&i.set(0,0,1),a.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],a),o[0].crossVectors(r[0],s[0]);for(let m=1;m<=e;m++){if(s[m]=s[m-1].clone(),o[m]=o[m-1].clone(),a.crossVectors(r[m-1],r[m]),a.length()>Number.EPSILON){a.normalize();const v=Math.acos(Hn(r[m-1].dot(r[m]),-1,1));s[m].applyMatrix4(l.makeRotationAxis(a,v))}o[m].crossVectors(r[m],s[m])}if(t===!0){let m=Math.acos(Hn(s[0].dot(s[e]),-1,1));m/=e,r[0].dot(a.crossVectors(s[0],s[e]))>0&&(m=-m);for(let v=1;v<=e;v++)s[v].applyMatrix4(l.makeRotationAxis(r[v],m*v)),o[v].crossVectors(r[v],s[v])}return{tangents:r,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Cv extends Ls{constructor(e=0,t=0,i=1,r=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t=new be){const i=t,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(o?s=0:s=r),this.aClockwise===!0&&!o&&(s===r?s=-r:s=s-r);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),u=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const c=Math.cos(this.aRotation),h=Math.sin(this.aRotation),p=l-this.aX,m=u-this.aY;l=p*c-m*h+this.aX,u=p*h+m*c+this.aY}return i.set(l,u)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class gB extends Cv{constructor(e,t,i,r,s,o){super(e,t,i,i,r,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function VC(){let n=0,e=0,t=0,i=0;function r(s,o,a,l){n=s,e=a,t=-3*s+3*o-2*a-l,i=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,u){r(o,a,u*(a-s),u*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,u,c,h){let p=(o-s)/u-(a-s)/(u+c)+(a-o)/c,m=(a-o)/c-(l-o)/(c+h)+(l-a)/h;p*=c,m*=c,r(o,a,p,m)},calc:function(s){const o=s*s,a=o*s;return n+e*s+t*o+i*a}}}const B1=new H,Ax=new VC,Sx=new VC,Cx=new VC;class vB extends Ls{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new H){const i=t,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let u,c;this.closed||a>0?u=r[(a-1)%s]:(B1.subVectors(r[0],r[1]).add(r[0]),u=B1);const h=r[a%s],p=r[(a+1)%s];if(this.closed||a+2<s?c=r[(a+2)%s]:(B1.subVectors(r[s-1],r[s-2]).add(r[s-1]),c=B1),this.curveType==="centripetal"||this.curveType==="chordal"){const m=this.curveType==="chordal"?.5:.25;let v=Math.pow(u.distanceToSquared(h),m),A=Math.pow(h.distanceToSquared(p),m),_=Math.pow(p.distanceToSquared(c),m);A<1e-4&&(A=1),v<1e-4&&(v=A),_<1e-4&&(_=A),Ax.initNonuniformCatmullRom(u.x,h.x,p.x,c.x,v,A,_),Sx.initNonuniformCatmullRom(u.y,h.y,p.y,c.y,v,A,_),Cx.initNonuniformCatmullRom(u.z,h.z,p.z,c.z,v,A,_)}else this.curveType==="catmullrom"&&(Ax.initCatmullRom(u.x,h.x,p.x,c.x,this.tension),Sx.initCatmullRom(u.y,h.y,p.y,c.y,this.tension),Cx.initCatmullRom(u.z,h.z,p.z,c.z,this.tension));return i.set(Ax.calc(l),Sx.calc(l),Cx.calc(l)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new H().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function r6(n,e,t,i,r){const s=(i-e)*.5,o=(r-t)*.5,a=n*n,l=n*a;return(2*t-2*i+s+o)*l+(-3*t+3*i-2*s-o)*a+s*n+t}function nZ(n,e){const t=1-n;return t*t*e}function iZ(n,e){return 2*(1-n)*n*e}function rZ(n,e){return n*n*e}function pd(n,e,t,i){return nZ(n,e)+iZ(n,t)+rZ(n,i)}function sZ(n,e){const t=1-n;return t*t*t*e}function oZ(n,e){const t=1-n;return 3*t*t*n*e}function aZ(n,e){return 3*(1-n)*n*n*e}function lZ(n,e){return n*n*n*e}function md(n,e,t,i,r){return sZ(n,e)+oZ(n,t)+aZ(n,i)+lZ(n,r)}class WC extends Ls{constructor(e=new be,t=new be,i=new be,r=new be){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new be){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(md(e,r.x,s.x,o.x,a.x),md(e,r.y,s.y,o.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class yB extends Ls{constructor(e=new H,t=new H,i=new H,r=new H){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new H){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(md(e,r.x,s.x,o.x,a.x),md(e,r.y,s.y,o.y,a.y),md(e,r.z,s.z,o.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class jC extends Ls{constructor(e=new be,t=new be){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new be){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new be){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class _B extends Ls{constructor(e=new H,t=new H){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new H){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new H){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class XC extends Ls{constructor(e=new be,t=new be,i=new be){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new be){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(pd(e,r.x,s.x,o.x),pd(e,r.y,s.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class JC extends Ls{constructor(e=new H,t=new H,i=new H){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new H){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(pd(e,r.x,s.x,o.x),pd(e,r.y,s.y,o.y),pd(e,r.z,s.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class KC extends Ls{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new be){const i=t,r=this.points,s=(r.length-1)*e,o=Math.floor(s),a=s-o,l=r[o===0?o:o-1],u=r[o],c=r[o>r.length-2?r.length-1:o+1],h=r[o>r.length-3?r.length-1:o+2];return i.set(r6(a,l.x,u.x,c.x,h.x),r6(a,l.y,u.y,c.y,h.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new be().fromArray(r))}return this}}var Sg=Object.freeze({__proto__:null,ArcCurve:gB,CatmullRomCurve3:vB,CubicBezierCurve:WC,CubicBezierCurve3:yB,EllipseCurve:Cv,LineCurve:jC,LineCurve3:_B,QuadraticBezierCurve:XC,QuadraticBezierCurve3:JC,SplineCurve:KC});class xB extends Ls{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const i=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new Sg[i](t,e))}return this}getPoint(e,t){const i=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=i){const o=r[s]-i,a=this.curves[s],l=a.getLength(),u=l===0?0:1-o/l;return a.getPointAt(u,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let u=0;u<l.length;u++){const c=l[u];i&&i.equals(c)||(t.push(c),i=c)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(new Sg[r.type]().fromJSON(r))}return this}}class ep extends xB{constructor(e){super(),this.type="Path",this.currentPoint=new be,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new jC(this.currentPoint.clone(),new be(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){const s=new XC(this.currentPoint.clone(),new be(e,t),new be(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,s,o){const a=new WC(this.currentPoint.clone(),new be(e,t),new be(i,r),new be(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new KC(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,t+l,i,r,s,o),this}absarc(e,t,i,r,s,o){return this.absellipse(e,t,i,i,r,s,o),this}ellipse(e,t,i,r,s,o,a,l){const u=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+u,t+c,i,r,s,o,a,l),this}absellipse(e,t,i,r,s,o,a,l){const u=new Cv(e,t,i,r,s,o,a,l);if(this.curves.length>0){const h=u.getPoint(0);h.equals(this.currentPoint)||this.lineTo(h.x,h.y)}this.curves.push(u);const c=u.getPoint(1);return this.currentPoint.copy(c),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Tp extends It{constructor(e=[new be(0,-.5),new be(.5,0),new be(0,.5)],t=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:r},t=Math.floor(t),r=Hn(r,0,Math.PI*2);const s=[],o=[],a=[],l=[],u=[],c=1/t,h=new H,p=new be,m=new H,v=new H,A=new H;let _=0,g=0;for(let S=0;S<=e.length-1;S++)switch(S){case 0:_=e[S+1].x-e[S].x,g=e[S+1].y-e[S].y,m.x=g*1,m.y=-_,m.z=g*0,A.copy(m),m.normalize(),l.push(m.x,m.y,m.z);break;case e.length-1:l.push(A.x,A.y,A.z);break;default:_=e[S+1].x-e[S].x,g=e[S+1].y-e[S].y,m.x=g*1,m.y=-_,m.z=g*0,v.copy(m),m.x+=A.x,m.y+=A.y,m.z+=A.z,m.normalize(),l.push(m.x,m.y,m.z),A.copy(v)}for(let S=0;S<=t;S++){const x=i+S*c*r,E=Math.sin(x),b=Math.cos(x);for(let T=0;T<=e.length-1;T++){h.x=e[T].x*E,h.y=e[T].y,h.z=e[T].x*b,o.push(h.x,h.y,h.z),p.x=S/t,p.y=T/(e.length-1),a.push(p.x,p.y);const P=l[3*T+0]*E,I=l[3*T+1],z=l[3*T+0]*b;u.push(P,I,z)}}for(let S=0;S<t;S++)for(let x=0;x<e.length-1;x++){const E=x+S*e.length,b=E,T=E+e.length,P=E+e.length+1,I=E+1;s.push(b,T,I),s.push(P,I,T)}this.setIndex(s),this.setAttribute("position",new pt(o,3)),this.setAttribute("uv",new pt(a,2)),this.setAttribute("normal",new pt(u,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Tp(e.points,e.segments,e.phiStart,e.phiLength)}}class Ev extends Tp{constructor(e=1,t=1,i=4,r=8){const s=new ep;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(i),r),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:i,radialSegments:r}}static fromJSON(e){return new Ev(e.radius,e.length,e.capSegments,e.radialSegments)}}class Mv extends It{constructor(e=1,t=32,i=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:r},t=Math.max(3,t);const s=[],o=[],a=[],l=[],u=new H,c=new be;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let h=0,p=3;h<=t;h++,p+=3){const m=i+h/t*r;u.x=e*Math.cos(m),u.y=e*Math.sin(m),o.push(u.x,u.y,u.z),a.push(0,0,1),c.x=(o[p]/e+1)/2,c.y=(o[p+1]/e+1)/2,l.push(c.x,c.y)}for(let h=1;h<=t;h++)s.push(h,h+1,0);this.setIndex(s),this.setAttribute("position",new pt(o,3)),this.setAttribute("normal",new pt(a,3)),this.setAttribute("uv",new pt(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Mv(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Wf extends It{constructor(e=1,t=1,i=1,r=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const u=this;r=Math.floor(r),s=Math.floor(s);const c=[],h=[],p=[],m=[];let v=0;const A=[],_=i/2;let g=0;S(),o===!1&&(e>0&&x(!0),t>0&&x(!1)),this.setIndex(c),this.setAttribute("position",new pt(h,3)),this.setAttribute("normal",new pt(p,3)),this.setAttribute("uv",new pt(m,2));function S(){const E=new H,b=new H;let T=0;const P=(t-e)/i;for(let I=0;I<=s;I++){const z=[],w=I/s,D=w*(t-e)+e;for(let Q=0;Q<=r;Q++){const ie=Q/r,j=ie*l+a,se=Math.sin(j),oe=Math.cos(j);b.x=D*se,b.y=-w*i+_,b.z=D*oe,h.push(b.x,b.y,b.z),E.set(se,P,oe).normalize(),p.push(E.x,E.y,E.z),m.push(ie,1-w),z.push(v++)}A.push(z)}for(let I=0;I<r;I++)for(let z=0;z<s;z++){const w=A[z][I],D=A[z+1][I],Q=A[z+1][I+1],ie=A[z][I+1];c.push(w,D,ie),c.push(D,Q,ie),T+=6}u.addGroup(g,T,0),g+=T}function x(E){const b=v,T=new be,P=new H;let I=0;const z=E===!0?e:t,w=E===!0?1:-1;for(let Q=1;Q<=r;Q++)h.push(0,_*w,0),p.push(0,w,0),m.push(.5,.5),v++;const D=v;for(let Q=0;Q<=r;Q++){const j=Q/r*l+a,se=Math.cos(j),oe=Math.sin(j);P.x=z*oe,P.y=_*w,P.z=z*se,h.push(P.x,P.y,P.z),p.push(0,w,0),T.x=se*.5+.5,T.y=oe*.5*w+.5,m.push(T.x,T.y),v++}for(let Q=0;Q<r;Q++){const ie=b+Q,j=D+Q;E===!0?c.push(j,j+1,ie):c.push(j+1,j,ie),I+=3}u.addGroup(g,I,E===!0?1:2),g+=I}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Wf(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class wv extends Wf{constructor(e=1,t=1,i=32,r=1,s=!1,o=0,a=Math.PI*2){super(0,e,t,i,r,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new wv(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class gl extends It{constructor(e=[],t=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:r};const s=[],o=[];a(r),u(i),c(),this.setAttribute("position",new pt(s,3)),this.setAttribute("normal",new pt(s.slice(),3)),this.setAttribute("uv",new pt(o,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function a(S){const x=new H,E=new H,b=new H;for(let T=0;T<t.length;T+=3)m(t[T+0],x),m(t[T+1],E),m(t[T+2],b),l(x,E,b,S)}function l(S,x,E,b){const T=b+1,P=[];for(let I=0;I<=T;I++){P[I]=[];const z=S.clone().lerp(E,I/T),w=x.clone().lerp(E,I/T),D=T-I;for(let Q=0;Q<=D;Q++)Q===0&&I===T?P[I][Q]=z:P[I][Q]=z.clone().lerp(w,Q/D)}for(let I=0;I<T;I++)for(let z=0;z<2*(T-I)-1;z++){const w=Math.floor(z/2);z%2===0?(p(P[I][w+1]),p(P[I+1][w]),p(P[I][w])):(p(P[I][w+1]),p(P[I+1][w+1]),p(P[I+1][w]))}}function u(S){const x=new H;for(let E=0;E<s.length;E+=3)x.x=s[E+0],x.y=s[E+1],x.z=s[E+2],x.normalize().multiplyScalar(S),s[E+0]=x.x,s[E+1]=x.y,s[E+2]=x.z}function c(){const S=new H;for(let x=0;x<s.length;x+=3){S.x=s[x+0],S.y=s[x+1],S.z=s[x+2];const E=_(S)/2/Math.PI+.5,b=g(S)/Math.PI+.5;o.push(E,1-b)}v(),h()}function h(){for(let S=0;S<o.length;S+=6){const x=o[S+0],E=o[S+2],b=o[S+4],T=Math.max(x,E,b),P=Math.min(x,E,b);T>.9&&P<.1&&(x<.2&&(o[S+0]+=1),E<.2&&(o[S+2]+=1),b<.2&&(o[S+4]+=1))}}function p(S){s.push(S.x,S.y,S.z)}function m(S,x){const E=S*3;x.x=e[E+0],x.y=e[E+1],x.z=e[E+2]}function v(){const S=new H,x=new H,E=new H,b=new H,T=new be,P=new be,I=new be;for(let z=0,w=0;z<s.length;z+=9,w+=6){S.set(s[z+0],s[z+1],s[z+2]),x.set(s[z+3],s[z+4],s[z+5]),E.set(s[z+6],s[z+7],s[z+8]),T.set(o[w+0],o[w+1]),P.set(o[w+2],o[w+3]),I.set(o[w+4],o[w+5]),b.copy(S).add(x).add(E).divideScalar(3);const D=_(b);A(T,w+0,S,D),A(P,w+2,x,D),A(I,w+4,E,D)}}function A(S,x,E,b){b<0&&S.x===1&&(o[x]=S.x-1),E.x===0&&E.z===0&&(o[x]=b/2/Math.PI+.5)}function _(S){return Math.atan2(S.z,-S.x)}function g(S){return Math.atan2(-S.y,Math.sqrt(S.x*S.x+S.z*S.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new gl(e.vertices,e.indices,e.radius,e.details)}}class Tv extends gl{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=1/i,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Tv(e.radius,e.detail)}}const I1=new H,L1=new H,Ex=new H,D1=new wr;class AB extends It{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),s=Math.cos(vu*t),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,u=[0,0,0],c=["a","b","c"],h=new Array(3),p={},m=[];for(let v=0;v<l;v+=3){o?(u[0]=o.getX(v),u[1]=o.getX(v+1),u[2]=o.getX(v+2)):(u[0]=v,u[1]=v+1,u[2]=v+2);const{a:A,b:_,c:g}=D1;if(A.fromBufferAttribute(a,u[0]),_.fromBufferAttribute(a,u[1]),g.fromBufferAttribute(a,u[2]),D1.getNormal(Ex),h[0]=`${Math.round(A.x*r)},${Math.round(A.y*r)},${Math.round(A.z*r)}`,h[1]=`${Math.round(_.x*r)},${Math.round(_.y*r)},${Math.round(_.z*r)}`,h[2]=`${Math.round(g.x*r)},${Math.round(g.y*r)},${Math.round(g.z*r)}`,!(h[0]===h[1]||h[1]===h[2]||h[2]===h[0]))for(let S=0;S<3;S++){const x=(S+1)%3,E=h[S],b=h[x],T=D1[c[S]],P=D1[c[x]],I=`${E}_${b}`,z=`${b}_${E}`;z in p&&p[z]?(Ex.dot(p[z].normal)<=s&&(m.push(T.x,T.y,T.z),m.push(P.x,P.y,P.z)),p[z]=null):I in p||(p[I]={index0:u[S],index1:u[x],normal:Ex.clone()})}}for(const v in p)if(p[v]){const{index0:A,index1:_}=p[v];I1.fromBufferAttribute(a,A),L1.fromBufferAttribute(a,_),m.push(I1.x,I1.y,I1.z),m.push(L1.x,L1.y,L1.z)}this.setAttribute("position",new pt(m,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class _u extends ep{constructor(e){super(e),this.uuid=Br(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(new ep().fromJSON(r))}return this}}const uZ={triangulate:function(n,e,t=2){const i=e&&e.length,r=i?e[0]*t:n.length;let s=SB(n,0,r,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,u,c,h,p,m;if(i&&(s=pZ(n,e,s,t)),n.length>80*t){a=u=n[0],l=c=n[1];for(let v=t;v<r;v+=t)h=n[v],p=n[v+1],h<a&&(a=h),p<l&&(l=p),h>u&&(u=h),p>c&&(c=p);m=Math.max(u-a,c-l),m=m!==0?32767/m:0}return tp(s,o,t,a,l,m,0),o}};function SB(n,e,t,i,r){let s,o;if(r===MZ(n,e,t,i)>0)for(s=e;s<t;s+=i)o=s6(s,n[s],n[s+1],o);else for(s=t-i;s>=e;s-=i)o=s6(s,n[s],n[s+1],o);return o&&bv(o,o.next)&&(ip(o),o=o.next),o}function bu(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(bv(t,t.next)||Bn(t.prev,t,t.next)===0)){if(ip(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function tp(n,e,t,i,r,s,o){if(!n)return;!o&&s&&_Z(n,i,r,s);let a=n,l,u;for(;n.prev!==n.next;){if(l=n.prev,u=n.next,s?fZ(n,i,r,s):cZ(n)){e.push(l.i/t|0),e.push(n.i/t|0),e.push(u.i/t|0),ip(n),n=u.next,a=u.next;continue}if(n=u,n===a){o?o===1?(n=hZ(bu(n),e,t),tp(n,e,t,i,r,s,2)):o===2&&dZ(n,e,t,i,r,s):tp(bu(n),e,t,i,r,s,1);break}}}function cZ(n){const e=n.prev,t=n,i=n.next;if(Bn(e,t,i)>=0)return!1;const r=e.x,s=t.x,o=i.x,a=e.y,l=t.y,u=i.y,c=r<s?r<o?r:o:s<o?s:o,h=a<l?a<u?a:u:l<u?l:u,p=r>s?r>o?r:o:s>o?s:o,m=a>l?a>u?a:u:l>u?l:u;let v=i.next;for(;v!==e;){if(v.x>=c&&v.x<=p&&v.y>=h&&v.y<=m&&qc(r,a,s,l,o,u,v.x,v.y)&&Bn(v.prev,v,v.next)>=0)return!1;v=v.next}return!0}function fZ(n,e,t,i){const r=n.prev,s=n,o=n.next;if(Bn(r,s,o)>=0)return!1;const a=r.x,l=s.x,u=o.x,c=r.y,h=s.y,p=o.y,m=a<l?a<u?a:u:l<u?l:u,v=c<h?c<p?c:p:h<p?h:p,A=a>l?a>u?a:u:l>u?l:u,_=c>h?c>p?c:p:h>p?h:p,g=cA(m,v,e,t,i),S=cA(A,_,e,t,i);let x=n.prevZ,E=n.nextZ;for(;x&&x.z>=g&&E&&E.z<=S;){if(x.x>=m&&x.x<=A&&x.y>=v&&x.y<=_&&x!==r&&x!==o&&qc(a,c,l,h,u,p,x.x,x.y)&&Bn(x.prev,x,x.next)>=0||(x=x.prevZ,E.x>=m&&E.x<=A&&E.y>=v&&E.y<=_&&E!==r&&E!==o&&qc(a,c,l,h,u,p,E.x,E.y)&&Bn(E.prev,E,E.next)>=0))return!1;E=E.nextZ}for(;x&&x.z>=g;){if(x.x>=m&&x.x<=A&&x.y>=v&&x.y<=_&&x!==r&&x!==o&&qc(a,c,l,h,u,p,x.x,x.y)&&Bn(x.prev,x,x.next)>=0)return!1;x=x.prevZ}for(;E&&E.z<=S;){if(E.x>=m&&E.x<=A&&E.y>=v&&E.y<=_&&E!==r&&E!==o&&qc(a,c,l,h,u,p,E.x,E.y)&&Bn(E.prev,E,E.next)>=0)return!1;E=E.nextZ}return!0}function hZ(n,e,t){let i=n;do{const r=i.prev,s=i.next.next;!bv(r,s)&&CB(r,i,i.next,s)&&np(r,s)&&np(s,r)&&(e.push(r.i/t|0),e.push(i.i/t|0),e.push(s.i/t|0),ip(i),ip(i.next),i=n=s),i=i.next}while(i!==n);return bu(i)}function dZ(n,e,t,i,r,s){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&SZ(o,a)){let l=EB(o,a);o=bu(o,o.next),l=bu(l,l.next),tp(o,e,t,i,r,s,0),tp(l,e,t,i,r,s,0);return}a=a.next}o=o.next}while(o!==n)}function pZ(n,e,t,i){const r=[];let s,o,a,l,u;for(s=0,o=e.length;s<o;s++)a=e[s]*i,l=s<o-1?e[s+1]*i:n.length,u=SB(n,a,l,i,!1),u===u.next&&(u.steiner=!0),r.push(AZ(u));for(r.sort(mZ),s=0;s<r.length;s++)t=gZ(r[s],t);return t}function mZ(n,e){return n.x-e.x}function gZ(n,e){const t=vZ(n,e);if(!t)return e;const i=EB(t,n);return bu(i,i.next),bu(t,t.next)}function vZ(n,e){let t=e,i=-1/0,r;const s=n.x,o=n.y;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const p=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(p<=s&&p>i&&(i=p,r=t.x<t.next.x?t:t.next,p===s))return r}t=t.next}while(t!==e);if(!r)return null;const a=r,l=r.x,u=r.y;let c=1/0,h;t=r;do s>=t.x&&t.x>=l&&s!==t.x&&qc(o<u?s:i,o,l,u,o<u?i:s,o,t.x,t.y)&&(h=Math.abs(o-t.y)/(s-t.x),np(t,n)&&(h<c||h===c&&(t.x>r.x||t.x===r.x&&yZ(r,t)))&&(r=t,c=h)),t=t.next;while(t!==a);return r}function yZ(n,e){return Bn(n.prev,n,e.prev)<0&&Bn(e.next,n,n.next)<0}function _Z(n,e,t,i){let r=n;do r.z===0&&(r.z=cA(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,xZ(r)}function xZ(n){let e,t,i,r,s,o,a,l,u=1;do{for(t=n,n=null,s=null,o=0;t;){for(o++,i=t,a=0,e=0;e<u&&(a++,i=i.nextZ,!!i);e++);for(l=u;a>0||l>0&&i;)a!==0&&(l===0||!i||t.z<=i.z)?(r=t,t=t.nextZ,a--):(r=i,i=i.nextZ,l--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;t=i}s.nextZ=null,u*=2}while(o>1);return n}function cA(n,e,t,i,r){return n=(n-t)*r|0,e=(e-i)*r|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function AZ(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function qc(n,e,t,i,r,s,o,a){return(r-o)*(e-a)>=(n-o)*(s-a)&&(n-o)*(i-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(r-o)*(i-a)}function SZ(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!CZ(n,e)&&(np(n,e)&&np(e,n)&&EZ(n,e)&&(Bn(n.prev,n,e.prev)||Bn(n,e.prev,e))||bv(n,e)&&Bn(n.prev,n,n.next)>0&&Bn(e.prev,e,e.next)>0)}function Bn(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function bv(n,e){return n.x===e.x&&n.y===e.y}function CB(n,e,t,i){const r=N1(Bn(n,e,t)),s=N1(Bn(n,e,i)),o=N1(Bn(t,i,n)),a=N1(Bn(t,i,e));return!!(r!==s&&o!==a||r===0&&F1(n,t,e)||s===0&&F1(n,i,e)||o===0&&F1(t,n,i)||a===0&&F1(t,e,i))}function F1(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function N1(n){return n>0?1:n<0?-1:0}function CZ(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&CB(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function np(n,e){return Bn(n.prev,n,n.next)<0?Bn(n,e,n.next)>=0&&Bn(n,n.prev,e)>=0:Bn(n,e,n.prev)<0||Bn(n,n.next,e)<0}function EZ(n,e){let t=n,i=!1;const r=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function EB(n,e){const t=new fA(n.i,n.x,n.y),i=new fA(e.i,e.x,e.y),r=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function s6(n,e,t,i){const r=new fA(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function ip(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function fA(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function MZ(n,e,t,i){let r=0;for(let s=e,o=t-i;s<t;s+=i)r+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return r}class so{static area(e){const t=e.length;let i=0;for(let r=t-1,s=0;s<t;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return i*.5}static isClockWise(e){return so.area(e)<0}static triangulateShape(e,t){const i=[],r=[],s=[];o6(e),a6(i,e);let o=e.length;t.forEach(o6);for(let l=0;l<t.length;l++)r.push(o),o+=t[l].length,a6(i,t[l]);const a=uZ.triangulate(i,r);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function o6(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function a6(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class Rv extends It{constructor(e=new _u([new be(.5,.5),new be(-.5,.5),new be(-.5,-.5),new be(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,r=[],s=[];for(let a=0,l=e.length;a<l;a++){const u=e[a];o(u)}this.setAttribute("position",new pt(r,3)),this.setAttribute("uv",new pt(s,2)),this.computeVertexNormals();function o(a){const l=[],u=t.curveSegments!==void 0?t.curveSegments:12,c=t.steps!==void 0?t.steps:1,h=t.depth!==void 0?t.depth:1;let p=t.bevelEnabled!==void 0?t.bevelEnabled:!0,m=t.bevelThickness!==void 0?t.bevelThickness:.2,v=t.bevelSize!==void 0?t.bevelSize:m-.1,A=t.bevelOffset!==void 0?t.bevelOffset:0,_=t.bevelSegments!==void 0?t.bevelSegments:3;const g=t.extrudePath,S=t.UVGenerator!==void 0?t.UVGenerator:wZ;let x,E=!1,b,T,P,I;g&&(x=g.getSpacedPoints(c),E=!0,p=!1,b=g.computeFrenetFrames(c,!1),T=new H,P=new H,I=new H),p||(_=0,m=0,v=0,A=0);const z=a.extractPoints(u);let w=z.shape;const D=z.holes;if(!so.isClockWise(w)){w=w.reverse();for(let Z=0,De=D.length;Z<De;Z++){const Re=D[Z];so.isClockWise(Re)&&(D[Z]=Re.reverse())}}const ie=so.triangulateShape(w,D),j=w;for(let Z=0,De=D.length;Z<De;Z++){const Re=D[Z];w=w.concat(Re)}function se(Z,De,Re){return De||console.error("THREE.ExtrudeGeometry: vec does not exist"),Z.clone().addScaledVector(De,Re)}const oe=w.length,pe=ie.length;function N(Z,De,Re){let ze,Ie,it;const V=Z.x-De.x,ne=Z.y-De.y,de=Re.x-Z.x,O=Re.y-Z.y,L=V*V+ne*ne,ee=V*O-ne*de;if(Math.abs(ee)>Number.EPSILON){const ue=Math.sqrt(L),Ce=Math.sqrt(de*de+O*O),Pe=De.x-ne/ue,ft=De.y+V/ue,ht=Re.x-O/Ce,He=Re.y+de/Ce,Ke=((ht-Pe)*O-(He-ft)*de)/(V*O-ne*de);ze=Pe+V*Ke-Z.x,Ie=ft+ne*Ke-Z.y;const _t=ze*ze+Ie*Ie;if(_t<=2)return new be(ze,Ie);it=Math.sqrt(_t/2)}else{let ue=!1;V>Number.EPSILON?de>Number.EPSILON&&(ue=!0):V<-Number.EPSILON?de<-Number.EPSILON&&(ue=!0):Math.sign(ne)===Math.sign(O)&&(ue=!0),ue?(ze=-ne,Ie=V,it=Math.sqrt(L)):(ze=V,Ie=ne,it=Math.sqrt(L/2))}return new be(ze/it,Ie/it)}const X=[];for(let Z=0,De=j.length,Re=De-1,ze=Z+1;Z<De;Z++,Re++,ze++)Re===De&&(Re=0),ze===De&&(ze=0),X[Z]=N(j[Z],j[Re],j[ze]);const J=[];let ae,me=X.concat();for(let Z=0,De=D.length;Z<De;Z++){const Re=D[Z];ae=[];for(let ze=0,Ie=Re.length,it=Ie-1,V=ze+1;ze<Ie;ze++,it++,V++)it===Ie&&(it=0),V===Ie&&(V=0),ae[ze]=N(Re[ze],Re[it],Re[V]);J.push(ae),me=me.concat(ae)}for(let Z=0;Z<_;Z++){const De=Z/_,Re=m*Math.cos(De*Math.PI/2),ze=v*Math.sin(De*Math.PI/2)+A;for(let Ie=0,it=j.length;Ie<it;Ie++){const V=se(j[Ie],X[Ie],ze);je(V.x,V.y,-Re)}for(let Ie=0,it=D.length;Ie<it;Ie++){const V=D[Ie];ae=J[Ie];for(let ne=0,de=V.length;ne<de;ne++){const O=se(V[ne],ae[ne],ze);je(O.x,O.y,-Re)}}}const Ue=v+A;for(let Z=0;Z<oe;Z++){const De=p?se(w[Z],me[Z],Ue):w[Z];E?(P.copy(b.normals[0]).multiplyScalar(De.x),T.copy(b.binormals[0]).multiplyScalar(De.y),I.copy(x[0]).add(P).add(T),je(I.x,I.y,I.z)):je(De.x,De.y,0)}for(let Z=1;Z<=c;Z++)for(let De=0;De<oe;De++){const Re=p?se(w[De],me[De],Ue):w[De];E?(P.copy(b.normals[Z]).multiplyScalar(Re.x),T.copy(b.binormals[Z]).multiplyScalar(Re.y),I.copy(x[Z]).add(P).add(T),je(I.x,I.y,I.z)):je(Re.x,Re.y,h/c*Z)}for(let Z=_-1;Z>=0;Z--){const De=Z/_,Re=m*Math.cos(De*Math.PI/2),ze=v*Math.sin(De*Math.PI/2)+A;for(let Ie=0,it=j.length;Ie<it;Ie++){const V=se(j[Ie],X[Ie],ze);je(V.x,V.y,h+Re)}for(let Ie=0,it=D.length;Ie<it;Ie++){const V=D[Ie];ae=J[Ie];for(let ne=0,de=V.length;ne<de;ne++){const O=se(V[ne],ae[ne],ze);E?je(O.x,O.y+x[c-1].y,x[c-1].x+Re):je(O.x,O.y,h+Re)}}}he(),Te();function he(){const Z=r.length/3;if(p){let De=0,Re=oe*De;for(let ze=0;ze<pe;ze++){const Ie=ie[ze];$e(Ie[2]+Re,Ie[1]+Re,Ie[0]+Re)}De=c+_*2,Re=oe*De;for(let ze=0;ze<pe;ze++){const Ie=ie[ze];$e(Ie[0]+Re,Ie[1]+Re,Ie[2]+Re)}}else{for(let De=0;De<pe;De++){const Re=ie[De];$e(Re[2],Re[1],Re[0])}for(let De=0;De<pe;De++){const Re=ie[De];$e(Re[0]+oe*c,Re[1]+oe*c,Re[2]+oe*c)}}i.addGroup(Z,r.length/3-Z,0)}function Te(){const Z=r.length/3;let De=0;we(j,De),De+=j.length;for(let Re=0,ze=D.length;Re<ze;Re++){const Ie=D[Re];we(Ie,De),De+=Ie.length}i.addGroup(Z,r.length/3-Z,1)}function we(Z,De){let Re=Z.length;for(;--Re>=0;){const ze=Re;let Ie=Re-1;Ie<0&&(Ie=Z.length-1);for(let it=0,V=c+_*2;it<V;it++){const ne=oe*it,de=oe*(it+1),O=De+ze+ne,L=De+Ie+ne,ee=De+Ie+de,ue=De+ze+de;nt(O,L,ee,ue)}}}function je(Z,De,Re){l.push(Z),l.push(De),l.push(Re)}function $e(Z,De,Re){Et(Z),Et(De),Et(Re);const ze=r.length/3,Ie=S.generateTopUV(i,r,ze-3,ze-2,ze-1);et(Ie[0]),et(Ie[1]),et(Ie[2])}function nt(Z,De,Re,ze){Et(Z),Et(De),Et(ze),Et(De),Et(Re),Et(ze);const Ie=r.length/3,it=S.generateSideWallUV(i,r,Ie-6,Ie-3,Ie-2,Ie-1);et(it[0]),et(it[1]),et(it[3]),et(it[1]),et(it[2]),et(it[3])}function Et(Z){r.push(l[Z*3+0]),r.push(l[Z*3+1]),r.push(l[Z*3+2])}function et(Z){s.push(Z.x),s.push(Z.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return TZ(t,i,e)}static fromJSON(e,t){const i=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=t[e.shapes[s]];i.push(a)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new Sg[r.type]().fromJSON(r)),new Rv(i,e.options)}}const wZ={generateTopUV:function(n,e,t,i,r){const s=e[t*3],o=e[t*3+1],a=e[i*3],l=e[i*3+1],u=e[r*3],c=e[r*3+1];return[new be(s,o),new be(a,l),new be(u,c)]},generateSideWallUV:function(n,e,t,i,r,s){const o=e[t*3],a=e[t*3+1],l=e[t*3+2],u=e[i*3],c=e[i*3+1],h=e[i*3+2],p=e[r*3],m=e[r*3+1],v=e[r*3+2],A=e[s*3],_=e[s*3+1],g=e[s*3+2];return Math.abs(a-c)<Math.abs(o-u)?[new be(o,1-l),new be(u,1-h),new be(p,1-v),new be(A,1-g)]:[new be(a,1-l),new be(c,1-h),new be(m,1-v),new be(_,1-g)]}};function TZ(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++){const s=n[i];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class bp extends gl{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new bp(e.radius,e.detail)}}class Rp extends gl{constructor(e=1,t=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Rp(e.radius,e.detail)}}class Pv extends It{constructor(e=.5,t=1,i=32,r=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:r,thetaStart:s,thetaLength:o},i=Math.max(3,i),r=Math.max(1,r);const a=[],l=[],u=[],c=[];let h=e;const p=(t-e)/r,m=new H,v=new be;for(let A=0;A<=r;A++){for(let _=0;_<=i;_++){const g=s+_/i*o;m.x=h*Math.cos(g),m.y=h*Math.sin(g),l.push(m.x,m.y,m.z),u.push(0,0,1),v.x=(m.x/t+1)/2,v.y=(m.y/t+1)/2,c.push(v.x,v.y)}h+=p}for(let A=0;A<r;A++){const _=A*(i+1);for(let g=0;g<i;g++){const S=g+_,x=S,E=S+i+1,b=S+i+2,T=S+1;a.push(x,E,T),a.push(E,b,T)}}this.setIndex(a),this.setAttribute("position",new pt(l,3)),this.setAttribute("normal",new pt(u,3)),this.setAttribute("uv",new pt(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Pv(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Bv extends It{constructor(e=new _u([new be(0,.5),new be(-.5,-.5),new be(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],r=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)u(e);else for(let c=0;c<e.length;c++)u(e[c]),this.addGroup(a,l,c),a+=l,l=0;this.setIndex(i),this.setAttribute("position",new pt(r,3)),this.setAttribute("normal",new pt(s,3)),this.setAttribute("uv",new pt(o,2));function u(c){const h=r.length/3,p=c.extractPoints(t);let m=p.shape;const v=p.holes;so.isClockWise(m)===!1&&(m=m.reverse());for(let _=0,g=v.length;_<g;_++){const S=v[_];so.isClockWise(S)===!0&&(v[_]=S.reverse())}const A=so.triangulateShape(m,v);for(let _=0,g=v.length;_<g;_++){const S=v[_];m=m.concat(S)}for(let _=0,g=m.length;_<g;_++){const S=m[_];r.push(S.x,S.y,0),s.push(0,0,1),o.push(S.x,S.y)}for(let _=0,g=A.length;_<g;_++){const S=A[_],x=S[0]+h,E=S[1]+h,b=S[2]+h;i.push(x,E,b),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return bZ(t,e)}static fromJSON(e,t){const i=[];for(let r=0,s=e.shapes.length;r<s;r++){const o=t[e.shapes[r]];i.push(o)}return new Bv(i,e.curveSegments)}}function bZ(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const r=n[t];e.shapes.push(r.uuid)}else e.shapes.push(n.uuid);return e}class Pp extends It{constructor(e=1,t=32,i=16,r=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const l=Math.min(o+a,Math.PI);let u=0;const c=[],h=new H,p=new H,m=[],v=[],A=[],_=[];for(let g=0;g<=i;g++){const S=[],x=g/i;let E=0;g===0&&o===0?E=.5/t:g===i&&l===Math.PI&&(E=-.5/t);for(let b=0;b<=t;b++){const T=b/t;h.x=-e*Math.cos(r+T*s)*Math.sin(o+x*a),h.y=e*Math.cos(o+x*a),h.z=e*Math.sin(r+T*s)*Math.sin(o+x*a),v.push(h.x,h.y,h.z),p.copy(h).normalize(),A.push(p.x,p.y,p.z),_.push(T+E,1-x),S.push(u++)}c.push(S)}for(let g=0;g<i;g++)for(let S=0;S<t;S++){const x=c[g][S+1],E=c[g][S],b=c[g+1][S],T=c[g+1][S+1];(g!==0||o>0)&&m.push(x,E,T),(g!==i-1||l<Math.PI)&&m.push(E,b,T)}this.setIndex(m),this.setAttribute("position",new pt(v,3)),this.setAttribute("normal",new pt(A,3)),this.setAttribute("uv",new pt(_,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Pp(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Iv extends gl{constructor(e=1,t=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Iv(e.radius,e.detail)}}class Lv extends It{constructor(e=1,t=.4,i=12,r=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:s},i=Math.floor(i),r=Math.floor(r);const o=[],a=[],l=[],u=[],c=new H,h=new H,p=new H;for(let m=0;m<=i;m++)for(let v=0;v<=r;v++){const A=v/r*s,_=m/i*Math.PI*2;h.x=(e+t*Math.cos(_))*Math.cos(A),h.y=(e+t*Math.cos(_))*Math.sin(A),h.z=t*Math.sin(_),a.push(h.x,h.y,h.z),c.x=e*Math.cos(A),c.y=e*Math.sin(A),p.subVectors(h,c).normalize(),l.push(p.x,p.y,p.z),u.push(v/r),u.push(m/i)}for(let m=1;m<=i;m++)for(let v=1;v<=r;v++){const A=(r+1)*m+v-1,_=(r+1)*(m-1)+v-1,g=(r+1)*(m-1)+v,S=(r+1)*m+v;o.push(A,_,S),o.push(_,g,S)}this.setIndex(o),this.setAttribute("position",new pt(a,3)),this.setAttribute("normal",new pt(l,3)),this.setAttribute("uv",new pt(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Lv(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class Dv extends It{constructor(e=1,t=.4,i=64,r=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:r,p:s,q:o},i=Math.floor(i),r=Math.floor(r);const a=[],l=[],u=[],c=[],h=new H,p=new H,m=new H,v=new H,A=new H,_=new H,g=new H;for(let x=0;x<=i;++x){const E=x/i*s*Math.PI*2;S(E,s,o,e,m),S(E+.01,s,o,e,v),_.subVectors(v,m),g.addVectors(v,m),A.crossVectors(_,g),g.crossVectors(A,_),A.normalize(),g.normalize();for(let b=0;b<=r;++b){const T=b/r*Math.PI*2,P=-t*Math.cos(T),I=t*Math.sin(T);h.x=m.x+(P*g.x+I*A.x),h.y=m.y+(P*g.y+I*A.y),h.z=m.z+(P*g.z+I*A.z),l.push(h.x,h.y,h.z),p.subVectors(h,m).normalize(),u.push(p.x,p.y,p.z),c.push(x/i),c.push(b/r)}}for(let x=1;x<=i;x++)for(let E=1;E<=r;E++){const b=(r+1)*(x-1)+(E-1),T=(r+1)*x+(E-1),P=(r+1)*x+E,I=(r+1)*(x-1)+E;a.push(b,T,I),a.push(T,P,I)}this.setIndex(a),this.setAttribute("position",new pt(l,3)),this.setAttribute("normal",new pt(u,3)),this.setAttribute("uv",new pt(c,2));function S(x,E,b,T,P){const I=Math.cos(x),z=Math.sin(x),w=b/E*x,D=Math.cos(w);P.x=T*(2+D)*.5*I,P.y=T*(2+D)*z*.5,P.z=T*Math.sin(w)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Dv(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class Fv extends It{constructor(e=new JC(new H(-1,-1,0),new H(-1,1,0),new H(1,1,0)),t=64,i=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:r,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new H,l=new H,u=new be;let c=new H;const h=[],p=[],m=[],v=[];A(),this.setIndex(v),this.setAttribute("position",new pt(h,3)),this.setAttribute("normal",new pt(p,3)),this.setAttribute("uv",new pt(m,2));function A(){for(let x=0;x<t;x++)_(x);_(s===!1?t:0),S(),g()}function _(x){c=e.getPointAt(x/t,c);const E=o.normals[x],b=o.binormals[x];for(let T=0;T<=r;T++){const P=T/r*Math.PI*2,I=Math.sin(P),z=-Math.cos(P);l.x=z*E.x+I*b.x,l.y=z*E.y+I*b.y,l.z=z*E.z+I*b.z,l.normalize(),p.push(l.x,l.y,l.z),a.x=c.x+i*l.x,a.y=c.y+i*l.y,a.z=c.z+i*l.z,h.push(a.x,a.y,a.z)}}function g(){for(let x=1;x<=t;x++)for(let E=1;E<=r;E++){const b=(r+1)*(x-1)+(E-1),T=(r+1)*x+(E-1),P=(r+1)*x+E,I=(r+1)*(x-1)+E;v.push(b,T,I),v.push(T,P,I)}}function S(){for(let x=0;x<=t;x++)for(let E=0;E<=r;E++)u.x=x/t,u.y=E/r,m.push(u.x,u.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Fv(new Sg[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class MB extends It{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],i=new Set,r=new H,s=new H;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let u=0,c=l.length;u<c;++u){const h=l[u],p=h.start,m=h.count;for(let v=p,A=p+m;v<A;v+=3)for(let _=0;_<3;_++){const g=a.getX(v+_),S=a.getX(v+(_+1)%3);r.fromBufferAttribute(o,g),s.fromBufferAttribute(o,S),l6(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let u=0;u<3;u++){const c=3*a+u,h=3*a+(u+1)%3;r.fromBufferAttribute(o,c),s.fromBufferAttribute(o,h),l6(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new pt(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function l6(n,e,t){const i=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(i)===!0||t.has(r)===!0?!1:(t.add(i),t.add(r),!0)}var u6=Object.freeze({__proto__:null,BoxGeometry:Nu,CapsuleGeometry:Ev,CircleGeometry:Mv,ConeGeometry:wv,CylinderGeometry:Wf,DodecahedronGeometry:Tv,EdgesGeometry:AB,ExtrudeGeometry:Rv,IcosahedronGeometry:bp,LatheGeometry:Tp,OctahedronGeometry:Rp,PlaneGeometry:Gf,PolyhedronGeometry:gl,RingGeometry:Pv,ShapeGeometry:Bv,SphereGeometry:Pp,TetrahedronGeometry:Iv,TorusGeometry:Lv,TorusKnotGeometry:Dv,TubeGeometry:Fv,WireframeGeometry:MB});class wB extends ti{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new qe(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class TB extends ds{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class Bp extends ti{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new qe(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new qe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ml,this.normalScale=new be(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new yr,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class ho extends Bp{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new be(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Hn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new qe(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new qe(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new qe(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class bB extends ti{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new qe(16777215),this.specular=new qe(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new qe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ml,this.normalScale=new be(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new yr,this.combine=xp,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class RB extends ti{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new qe(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new qe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ml,this.normalScale=new be(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class PB extends ti{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ml,this.normalScale=new be(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class BB extends ti{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new qe(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new qe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ml,this.normalScale=new be(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new yr,this.combine=xp,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class IB extends ti{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new qe(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ml,this.normalScale=new be(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class LB extends Wi{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function uu(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function DB(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function FB(n){function e(r,s){return n[r]-n[s]}const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(e),i}function hA(n,e,t){const i=n.length,r=new n.constructor(i);for(let s=0,o=0;o!==i;++s){const a=t[s]*e;for(let l=0;l!==e;++l)r[o++]=n[a+l]}return r}function YC(n,e,t,i){let r=1,s=n[0];for(;s!==void 0&&s[i]===void 0;)s=n[r++];if(s===void 0)return;let o=s[i];if(o!==void 0)if(Array.isArray(o))do o=s[i],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=n[r++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[i],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=n[r++];while(s!==void 0);else do o=s[i],o!==void 0&&(e.push(s.time),t.push(o)),s=n[r++];while(s!==void 0)}function RZ(n,e,t,i,r=30){const s=n.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const u=s.tracks[l],c=u.getValueSize(),h=[],p=[];for(let m=0;m<u.times.length;++m){const v=u.times[m]*r;if(!(v<t||v>=i)){h.push(u.times[m]);for(let A=0;A<c;++A)p.push(u.values[m*c+A])}}h.length!==0&&(u.times=uu(h,u.times.constructor),u.values=uu(p,u.values.constructor),o.push(u))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function PZ(n,e=0,t=n,i=30){i<=0&&(i=30);const r=t.tracks.length,s=e/i;for(let o=0;o<r;++o){const a=t.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const u=n.tracks.find(function(g){return g.name===a.name&&g.ValueTypeName===l});if(u===void 0)continue;let c=0;const h=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=h/3);let p=0;const m=u.getValueSize();u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(p=m/3);const v=a.times.length-1;let A;if(s<=a.times[0]){const g=c,S=h-c;A=a.values.slice(g,S)}else if(s>=a.times[v]){const g=v*h+c,S=g+h-c;A=a.values.slice(g,S)}else{const g=a.createInterpolant(),S=c,x=h-c;g.evaluate(s),A=g.resultBuffer.slice(S,x)}l==="quaternion"&&new vi().fromArray(A).normalize().conjugate().toArray(A);const _=u.times.length;for(let g=0;g<_;++g){const S=g*m+p;if(l==="quaternion")vi.multiplyQuaternionsFlat(u.values,S,A,0,u.values,S);else{const x=m-p*2;for(let E=0;E<x;++E)u.values[S+E]-=A[E]}}}return n.blendMode=EC,n}const BZ={convertArray:uu,isTypedArray:DB,getKeyframeOrder:FB,sortedArray:hA,flattenJSON:YC,subclip:RZ,makeClipAdditive:PZ};class jf{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let o;n:{i:if(!(e<r)){for(let a=i+2;;){if(r===void 0){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(s=r,r=t[++i],e<r)break t}o=t.length;break n}if(!(e>=s)){const a=t[1];e<a&&(i=2,s=a);for(let l=i-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===l)break;if(r=s,s=t[--i-1],e>=s)break t}o=i,i=0;break n}break e}for(;i<o;){const a=i+o>>>1;e<t[a]?o=a:i=a+1}if(r=t[i],s=t[i-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=i[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class NB extends jf{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:su,endingEnd:su}}intervalChanged_(e,t,i){const r=this.parameterPositions;let s=e-2,o=e+1,a=r[s],l=r[o];if(a===void 0)switch(this.getSettings_().endingStart){case ou:s=e,a=2*t-i;break;case Xd:s=r.length-2,a=t+r[s]-r[s+1];break;default:s=e,a=i}if(l===void 0)switch(this.getSettings_().endingEnd){case ou:o=e,l=2*i-t;break;case Xd:o=1,l=i+r[1]-r[0];break;default:o=e-1,l=t}const u=(i-t)*.5,c=this.valueSize;this._weightPrev=u/(t-a),this._weightNext=u/(l-i),this._offsetPrev=s*c,this._offsetNext=o*c}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,u=l-a,c=this._offsetPrev,h=this._offsetNext,p=this._weightPrev,m=this._weightNext,v=(i-t)/(r-t),A=v*v,_=A*v,g=-p*_+2*p*A-p*v,S=(1+p)*_+(-1.5-2*p)*A+(-.5+p)*v+1,x=(-1-m)*_+(1.5+m)*A+.5*v,E=m*_-m*A;for(let b=0;b!==a;++b)s[b]=g*o[c+b]+S*o[u+b]+x*o[l+b]+E*o[h+b];return s}}class ZC extends jf{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,u=l-a,c=(i-t)/(r-t),h=1-c;for(let p=0;p!==a;++p)s[p]=o[u+p]*h+o[l+p]*c;return s}}class OB extends jf{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class Ds{constructor(e,t,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=uu(t,this.TimeBufferType),this.values=uu(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:uu(e.times,Array),values:uu(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new OB(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new ZC(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new NB(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Cf:t=this.InterpolantFactoryMethodDiscrete;break;case Tu:t=this.InterpolantFactoryMethodLinear;break;case M0:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Cf;case this.InterpolantFactoryMethodLinear:return Tu;case this.InterpolantFactoryMethodSmooth:return M0}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let s=0,o=r-1;for(;s!==r&&i[s]<e;)++s;for(;o!==-1&&i[o]>t;)--o;if(++o,s!==0||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=i.slice(s,o),this.values=this.values.slice(s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=i[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(r!==void 0&&DB(r))for(let a=0,l=r.length;a!==l;++a){const u=r[a];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,u),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),r=this.getInterpolation()===M0,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const u=e[a],c=e[a+1];if(u!==c&&(a!==1||u!==e[0]))if(r)l=!0;else{const h=a*i,p=h-i,m=h+i;for(let v=0;v!==i;++v){const A=t[h+v];if(A!==t[p+v]||A!==t[m+v]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const h=a*i,p=o*i;for(let m=0;m!==i;++m)t[p+m]=t[h+m]}++o}}if(s>0){e[o]=e[s];for(let a=s*i,l=o*i,u=0;u!==i;++u)t[l+u]=t[a+u];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*i)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}Ds.prototype.TimeBufferType=Float32Array;Ds.prototype.ValueBufferType=Float32Array;Ds.prototype.DefaultInterpolation=Tu;class Ou extends Ds{}Ou.prototype.ValueTypeName="bool";Ou.prototype.ValueBufferType=Array;Ou.prototype.DefaultInterpolation=Cf;Ou.prototype.InterpolantFactoryMethodLinear=void 0;Ou.prototype.InterpolantFactoryMethodSmooth=void 0;class qC extends Ds{}qC.prototype.ValueTypeName="color";class Tf extends Ds{}Tf.prototype.ValueTypeName="number";class UB extends jf{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(i-t)/(r-t);let u=e*a;for(let c=u+a;u!==c;u+=4)vi.slerpFlat(s,0,o,u-a,o,u,l);return s}}class sl extends Ds{InterpolantFactoryMethodLinear(e){return new UB(this.times,this.values,this.getValueSize(),e)}}sl.prototype.ValueTypeName="quaternion";sl.prototype.DefaultInterpolation=Tu;sl.prototype.InterpolantFactoryMethodSmooth=void 0;class Uu extends Ds{}Uu.prototype.ValueTypeName="string";Uu.prototype.ValueBufferType=Array;Uu.prototype.DefaultInterpolation=Cf;Uu.prototype.InterpolantFactoryMethodLinear=void 0;Uu.prototype.InterpolantFactoryMethodSmooth=void 0;class bf extends Ds{}bf.prototype.ValueTypeName="vector";class Rf{constructor(e,t=-1,i,r=dv){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=Br(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let o=0,a=i.length;o!==a;++o)t.push(LZ(i[o]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=i.length;s!==o;++s)t.push(Ds.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],u=[];l.push((a+s-1)%s,a,(a+1)%s),u.push(0,1,0);const c=FB(l);l=hA(l,1,c),u=hA(u,1,c),!r&&l[0]===0&&(l.push(s),u.push(u[0])),o.push(new Tf(".morphTargetInfluences["+t[a].name+"]",l,u).scale(1/i))}return new this(e,-1,o)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const u=e[a],c=u.name.match(s);if(c&&c.length>1){const h=c[1];let p=r[h];p||(r[h]=p=[]),p.push(u)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],t,i));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(h,p,m,v,A){if(m.length!==0){const _=[],g=[];YC(m,_,g,v),_.length!==0&&A.push(new h(p,_,g))}},r=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const u=e.hierarchy||[];for(let h=0;h<u.length;h++){const p=u[h].keys;if(!(!p||p.length===0))if(p[0].morphTargets){const m={};let v;for(v=0;v<p.length;v++)if(p[v].morphTargets)for(let A=0;A<p[v].morphTargets.length;A++)m[p[v].morphTargets[A]]=-1;for(const A in m){const _=[],g=[];for(let S=0;S!==p[v].morphTargets.length;++S){const x=p[v];_.push(x.time),g.push(x.morphTarget===A?1:0)}r.push(new Tf(".morphTargetInfluence["+A+"]",_,g))}l=m.length*o}else{const m=".bones["+t[h].name+"]";i(bf,m+".position",p,"pos",r),i(sl,m+".quaternion",p,"rot",r),i(bf,m+".scale",p,"scl",r)}}return r.length===0?null:new this(s,l,r,a)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,r=e.length;i!==r;++i){const s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function IZ(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Tf;case"vector":case"vector2":case"vector3":case"vector4":return bf;case"color":return qC;case"quaternion":return sl;case"bool":case"boolean":return Ou;case"string":return Uu}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function LZ(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=IZ(n.type);if(n.times===void 0){const t=[],i=[];YC(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const Ho={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class QC{constructor(e,t,i){const r=this;let s=!1,o=0,a=0,l;const u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(c){a++,s===!1&&r.onStart!==void 0&&r.onStart(c,o,a),s=!0},this.itemEnd=function(c){o++,r.onProgress!==void 0&&r.onProgress(c,o,a),o===a&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(c){r.onError!==void 0&&r.onError(c)},this.resolveURL=function(c){return l?l(c):c},this.setURLModifier=function(c){return l=c,this},this.addHandler=function(c,h){return u.push(c,h),this},this.removeHandler=function(c){const h=u.indexOf(c);return h!==-1&&u.splice(h,2),this},this.getHandler=function(c){for(let h=0,p=u.length;h<p;h+=2){const m=u[h],v=u[h+1];if(m.global&&(m.lastIndex=0),m.test(c))return v}return null}}}const kB=new QC;class ji{constructor(e){this.manager=e!==void 0?e:kB,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,s){i.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}ji.DEFAULT_MATERIAL_NAME="__DEFAULT";const wo={};class DZ extends Error{constructor(e,t){super(e),this.response=t}}class Dr extends ji{constructor(e){super(e)}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Ho.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(wo[e]!==void 0){wo[e].push({onLoad:t,onProgress:i,onError:r});return}wo[e]=[],wo[e].push({onLoad:t,onProgress:i,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(u=>{if(u.status===200||u.status===0){if(u.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||u.body===void 0||u.body.getReader===void 0)return u;const c=wo[e],h=u.body.getReader(),p=u.headers.get("Content-Length")||u.headers.get("X-File-Size"),m=p?parseInt(p):0,v=m!==0;let A=0;const _=new ReadableStream({start(g){S();function S(){h.read().then(({done:x,value:E})=>{if(x)g.close();else{A+=E.byteLength;const b=new ProgressEvent("progress",{lengthComputable:v,loaded:A,total:m});for(let T=0,P=c.length;T<P;T++){const I=c[T];I.onProgress&&I.onProgress(b)}g.enqueue(E),S()}})}}});return new Response(_)}else throw new DZ(`fetch for "${u.url}" responded with ${u.status}: ${u.statusText}`,u)}).then(u=>{switch(l){case"arraybuffer":return u.arrayBuffer();case"blob":return u.blob();case"document":return u.text().then(c=>new DOMParser().parseFromString(c,a));case"json":return u.json();default:if(a===void 0)return u.text();{const h=/charset="?([^;"\s]*)"?/i.exec(a),p=h&&h[1]?h[1].toLowerCase():void 0,m=new TextDecoder(p);return u.arrayBuffer().then(v=>m.decode(v))}}}).then(u=>{Ho.add(e,u);const c=wo[e];delete wo[e];for(let h=0,p=c.length;h<p;h++){const m=c[h];m.onLoad&&m.onLoad(u)}}).catch(u=>{const c=wo[e];if(c===void 0)throw this.manager.itemError(e),u;delete wo[e];for(let h=0,p=c.length;h<p;h++){const m=c[h];m.onError&&m.onError(u)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class FZ extends ji{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Dr(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t=[];for(let i=0;i<e.length;i++){const r=Rf.parse(e[i]);t.push(r)}return t}}class NZ extends ji{constructor(e){super(e)}load(e,t,i,r){const s=this,o=[],a=new Sv,l=new Dr(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let u=0;function c(h){l.load(e[h],function(p){const m=s.parse(p,!0);o[h]={width:m.width,height:m.height,format:m.format,mipmaps:m.mipmaps},u+=1,u===6&&(m.mipmapCount===1&&(a.minFilter=rn),a.image=o,a.format=m.format,a.needsUpdate=!0,t&&t(a))},i,r)}if(Array.isArray(e))for(let h=0,p=e.length;h<p;++h)c(h);else l.load(e,function(h){const p=s.parse(h,!0);if(p.isCubemap){const m=p.mipmaps.length/p.mipmapCount;for(let v=0;v<m;v++){o[v]={mipmaps:[]};for(let A=0;A<p.mipmapCount;A++)o[v].mipmaps.push(p.mipmaps[v*p.mipmapCount+A]),o[v].format=p.format,o[v].width=p.width,o[v].height=p.height}a.image=o}else a.image.width=p.width,a.image.height=p.height,a.mipmaps=p.mipmaps;p.mipmapCount===1&&(a.minFilter=rn),a.format=p.format,a.needsUpdate=!0,t&&t(a)},i,r);return a}}class rp extends ji{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Ho.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=Qd("img");function l(){c(),Ho.add(e,this),t&&t(this),s.manager.itemEnd(e)}function u(h){c(),r&&r(h),s.manager.itemError(e),s.manager.itemEnd(e)}function c(){a.removeEventListener("load",l,!1),a.removeEventListener("error",u,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",u,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class zB extends ji{constructor(e){super(e)}load(e,t,i,r){const s=new Cp;s.colorSpace=ts;const o=new rp(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(u){o.load(e[u],function(c){s.images[u]=c,a++,a===6&&(s.needsUpdate=!0,t&&t(s))},void 0,r)}for(let u=0;u<e.length;++u)l(u);return s}}class $C extends ji{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Za,a=new Dr(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){let u;try{u=s.parse(l)}catch(c){if(r!==void 0)r(c);else{console.error(c);return}}u.image!==void 0?o.image=u.image:u.data!==void 0&&(o.image.width=u.width,o.image.height=u.height,o.image.data=u.data),o.wrapS=u.wrapS!==void 0?u.wrapS:Ei,o.wrapT=u.wrapT!==void 0?u.wrapT:Ei,o.magFilter=u.magFilter!==void 0?u.magFilter:rn,o.minFilter=u.minFilter!==void 0?u.minFilter:rn,o.anisotropy=u.anisotropy!==void 0?u.anisotropy:1,u.colorSpace!==void 0&&(o.colorSpace=u.colorSpace),u.flipY!==void 0&&(o.flipY=u.flipY),u.format!==void 0&&(o.format=u.format),u.type!==void 0&&(o.type=u.type),u.mipmaps!==void 0&&(o.mipmaps=u.mipmaps,o.minFilter=as),u.mipmapCount===1&&(o.minFilter=rn),u.generateMipmaps!==void 0&&(o.generateMipmaps=u.generateMipmaps),o.needsUpdate=!0,t&&t(o,u)},i,r),o}}class HB extends ji{constructor(e){super(e)}load(e,t,i,r){const s=new gn,o=new rp(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},i,r),s}}class vl extends qt{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new qe(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}class GB extends vl{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(qt.DEFAULT_UP),this.updateMatrix(),this.groundColor=new qe(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const Mx=new xt,c6=new H,f6=new H;class eE{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new be(512,512),this.map=null,this.mapPass=null,this.matrix=new xt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Ep,this._frameExtents=new be(1,1),this._viewportCount=1,this._viewports=[new ln(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;c6.setFromMatrixPosition(e.matrixWorld),t.position.copy(c6),f6.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(f6),t.updateMatrixWorld(),Mx.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Mx),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(Mx)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class OZ extends eE{constructor(){super(new Rn(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=Ef*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(i!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=i,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class tE extends vl{constructor(e,t,i=0,r=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(qt.DEFAULT_UP),this.updateMatrix(),this.target=new qt,this.distance=i,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new OZ}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const h6=new xt,Fh=new H,wx=new H;class UZ extends eE{constructor(){super(new Rn(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new be(4,2),this._viewportCount=6,this._viewports=[new ln(2,1,1,1),new ln(0,1,1,1),new ln(3,1,1,1),new ln(1,1,1,1),new ln(3,0,1,1),new ln(1,0,1,1)],this._cubeDirections=[new H(1,0,0),new H(-1,0,0),new H(0,0,1),new H(0,0,-1),new H(0,1,0),new H(0,-1,0)],this._cubeUps=[new H(0,1,0),new H(0,1,0),new H(0,1,0),new H(0,1,0),new H(0,0,1),new H(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),Fh.setFromMatrixPosition(e.matrixWorld),i.position.copy(Fh),wx.copy(i.position),wx.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(wx),i.updateMatrixWorld(),r.makeTranslation(-Fh.x,-Fh.y,-Fh.z),h6.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(h6)}}class nE extends vl{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new UZ}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class kZ extends eE{constructor(){super(new Zs(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class iE extends vl{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(qt.DEFAULT_UP),this.updateMatrix(),this.target=new qt,this.shadow=new kZ}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class VB extends vl{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class WB extends vl{constructor(e,t,i=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class jB{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new H)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*r),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*i),t.addScaledVector(o[4],1.092548*(i*r)),t.addScaledVector(o[5],1.092548*(r*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(i*s)),t.addScaledVector(o[8],.546274*(i*i-r*r)),t}getIrradianceAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*r),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*i),t.addScaledVector(o[4],2*.429043*i*r),t.addScaledVector(o[5],2*.429043*r*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*i*s),t.addScaledVector(o[8],.429043*(i*i-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const i=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*i,t[4]=1.092548*i*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*i*s,t[8]=.546274*(i*i-r*r)}}class XB extends vl{constructor(e=new jB,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class Nv extends ji{constructor(e){super(e),this.textures={}}load(e,t,i,r){const s=this,o=new Dr(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t=this.textures;function i(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const r=Nv.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new qe().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(r.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(r.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(r.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(r.depthFunc=e.depthFunc),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(r.blendSrc=e.blendSrc),e.blendDst!==void 0&&(r.blendDst=e.blendDst),e.blendEquation!==void 0&&(r.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(r.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(r.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(r.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&r.blendColor!==void 0&&r.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(r.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==void 0&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(r.uniforms[s]={},o.type){case"t":r.uniforms[s].value=i(o.value);break;case"c":r.uniforms[s].value=new qe().setHex(o.value);break;case"v2":r.uniforms[s].value=new be().fromArray(o.value);break;case"v3":r.uniforms[s].value=new H().fromArray(o.value);break;case"v4":r.uniforms[s].value=new ln().fromArray(o.value);break;case"m3":r.uniforms[s].value=new Ft().fromArray(o.value);break;case"m4":r.uniforms[s].value=new xt().fromArray(o.value);break;default:r.uniforms[s].value=o.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=i(e.map)),e.matcap!==void 0&&(r.matcap=i(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),r.normalScale=new be().fromArray(s)}return e.displacementMap!==void 0&&(r.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=i(e.envMap)),e.envMapRotation!==void 0&&r.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new be().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=i(e.thicknessMap)),e.anisotropyMap!==void 0&&(r.anisotropyMap=i(e.anisotropyMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:wB,SpriteMaterial:UC,RawShaderMaterial:TB,ShaderMaterial:ds,PointsMaterial:Av,MeshPhysicalMaterial:ho,MeshStandardMaterial:Bp,MeshPhongMaterial:bB,MeshToonMaterial:RB,MeshNormalMaterial:PB,MeshLambertMaterial:BB,MeshDepthMaterial:FC,MeshDistanceMaterial:NC,MeshBasicMaterial:br,MeshMatcapMaterial:IB,LineDashedMaterial:LB,LineBasicMaterial:Wi,Material:ti};return new t[e]}}class oo{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let i=0,r=e.length;i<r;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class JB extends It{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class KB extends ji{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Dr(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t={},i={};function r(m,v){if(t[v]!==void 0)return t[v];const _=m.interleavedBuffers[v],g=s(m,_.buffer),S=Kc(_.type,g),x=new Mp(S,_.stride);return x.uuid=_.uuid,t[v]=x,x}function s(m,v){if(i[v]!==void 0)return i[v];const _=m.arrayBuffers[v],g=new Uint32Array(_).buffer;return i[v]=g,g}const o=e.isInstancedBufferGeometry?new JB:new It,a=e.data.index;if(a!==void 0){const m=Kc(a.type,a.array);o.setIndex(new $t(m,1))}const l=e.data.attributes;for(const m in l){const v=l[m];let A;if(v.isInterleavedBufferAttribute){const _=r(e.data,v.data);A=new rl(_,v.itemSize,v.offset,v.normalized)}else{const _=Kc(v.type,v.array),g=v.isInstancedBufferAttribute?wf:$t;A=new g(_,v.itemSize,v.normalized)}v.name!==void 0&&(A.name=v.name),v.usage!==void 0&&A.setUsage(v.usage),o.setAttribute(m,A)}const u=e.data.morphAttributes;if(u)for(const m in u){const v=u[m],A=[];for(let _=0,g=v.length;_<g;_++){const S=v[_];let x;if(S.isInterleavedBufferAttribute){const E=r(e.data,S.data);x=new rl(E,S.itemSize,S.offset,S.normalized)}else{const E=Kc(S.type,S.array);x=new $t(E,S.itemSize,S.normalized)}S.name!==void 0&&(x.name=S.name),A.push(x)}o.morphAttributes[m]=A}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const h=e.data.groups||e.data.drawcalls||e.data.offsets;if(h!==void 0)for(let m=0,v=h.length;m!==v;++m){const A=h[m];o.addGroup(A.start,A.count,A.materialIndex)}const p=e.data.boundingSphere;if(p!==void 0){const m=new H;p.center!==void 0&&m.fromArray(p.center),o.boundingSphere=new Ti(m,p.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class zZ extends ji{constructor(e){super(e)}load(e,t,i,r){const s=this,o=this.path===""?oo.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new Dr(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let u=null;try{u=JSON.parse(l)}catch(h){r!==void 0&&r(h),console.error("THREE:ObjectLoader: Can't parse "+e+".",h.message);return}const c=u.metadata;if(c===void 0||c.type===void 0||c.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(u,t)},i,r)}async loadAsync(e,t){const i=this,r=this.path===""?oo.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const s=new Dr(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(a)}parse(e,t){const i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),o=this.parseImages(e.images,function(){t!==void 0&&t(u)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),u=this.parseObject(e.object,s,l,a,i),c=this.parseSkeletons(e.skeletons,u);if(this.bindSkeletons(u,c),t!==void 0){let h=!1;for(const p in o)if(o[p].data instanceof HTMLImageElement){h=!0;break}h===!1&&t(u)}return u}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,r,a,o,t),u=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,u),l}parseShapes(e){const t={};if(e!==void 0)for(let i=0,r=e.length;i<r;i++){const s=new _u().fromJSON(e[i]);t[s.uuid]=s}return t}parseSkeletons(e,t){const i={},r={};if(t.traverse(function(s){s.isBone&&(r[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new wp().fromJSON(e[s],r);i[a.uuid]=a}return i}parseGeometries(e,t){const i={};if(e!==void 0){const r=new KB;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=r.parse(l);break;default:l.type in u6?a=u6[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),i[l.uuid]=a}}return i}parseMaterials(e,t){const i={},r={};if(e!==void 0){const s=new Nv;s.setTextures(t);for(let o=0,a=e.length;o<a;o++){const l=e[o];i[l.uuid]===void 0&&(i[l.uuid]=s.parse(l)),r[l.uuid]=i[l.uuid]}}return r}parseAnimations(e){const t={};if(e!==void 0)for(let i=0;i<e.length;i++){const r=e[i],s=Rf.parse(r);t[s.uuid]=s}return t}parseImages(e,t){const i=this,r={};let s;function o(l){return i.manager.itemStart(l),s.load(l,function(){i.manager.itemEnd(l)},void 0,function(){i.manager.itemError(l),i.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const u=l,c=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u)?u:i.resourcePath+u;return o(c)}else return l.data?{data:Kc(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new QC(t);s=new rp(l),s.setCrossOrigin(this.crossOrigin);for(let u=0,c=e.length;u<c;u++){const h=e[u],p=h.url;if(Array.isArray(p)){const m=[];for(let v=0,A=p.length;v<A;v++){const _=p[v],g=a(_);g!==null&&(g instanceof HTMLImageElement?m.push(g):m.push(new Za(g.data,g.width,g.height)))}r[h.uuid]=new au(m)}else{const m=a(h.url);r[h.uuid]=new au(m)}}}return r}async parseImagesAsync(e){const t=this,i={};let r;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:t.resourcePath+a;return await r.loadAsync(l)}else return o.data?{data:Kc(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){r=new rp(this.manager),r.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],u=l.url;if(Array.isArray(u)){const c=[];for(let h=0,p=u.length;h<p;h++){const m=u[h],v=await s(m);v!==null&&(v instanceof HTMLImageElement?c.push(v):c.push(new Za(v.data,v.width,v.height)))}i[l.uuid]=new au(c)}else{const c=await s(l.url);i[l.uuid]=new au(c)}}}return i}parseTextures(e,t){function i(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const r={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),t[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=t[a.image],u=l.data;let c;Array.isArray(u)?(c=new Cp,u.length===6&&(c.needsUpdate=!0)):(u&&u.data?c=new Za:c=new gn,u&&(c.needsUpdate=!0)),c.source=l,c.uuid=a.uuid,a.name!==void 0&&(c.name=a.name),a.mapping!==void 0&&(c.mapping=i(a.mapping,HZ)),a.channel!==void 0&&(c.channel=a.channel),a.offset!==void 0&&c.offset.fromArray(a.offset),a.repeat!==void 0&&c.repeat.fromArray(a.repeat),a.center!==void 0&&c.center.fromArray(a.center),a.rotation!==void 0&&(c.rotation=a.rotation),a.wrap!==void 0&&(c.wrapS=i(a.wrap[0],d6),c.wrapT=i(a.wrap[1],d6)),a.format!==void 0&&(c.format=a.format),a.internalFormat!==void 0&&(c.internalFormat=a.internalFormat),a.type!==void 0&&(c.type=a.type),a.colorSpace!==void 0&&(c.colorSpace=a.colorSpace),a.minFilter!==void 0&&(c.minFilter=i(a.minFilter,p6)),a.magFilter!==void 0&&(c.magFilter=i(a.magFilter,p6)),a.anisotropy!==void 0&&(c.anisotropy=a.anisotropy),a.flipY!==void 0&&(c.flipY=a.flipY),a.generateMipmaps!==void 0&&(c.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(c.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(c.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(c.compareFunction=a.compareFunction),a.userData!==void 0&&(c.userData=a.userData),r[a.uuid]=c}return r}parseObject(e,t,i,r,s){let o;function a(p){return t[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",p),t[p]}function l(p){if(p!==void 0){if(Array.isArray(p)){const m=[];for(let v=0,A=p.length;v<A;v++){const _=p[v];i[_]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",_),m.push(i[_])}return m}return i[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",p),i[p]}}function u(p){return r[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",p),r[p]}let c,h;switch(e.type){case"Scene":o=new $d,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new qe(e.background):o.background=u(e.background)),e.environment!==void 0&&(o.environment=u(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new _v(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new yv(e.fog.color,e.fog.density)),e.fog.name!==""&&(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&o.backgroundRotation.fromArray(e.backgroundRotation),e.environmentRotation!==void 0&&o.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":o=new Rn(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new Zs(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new VB(e.color,e.intensity);break;case"DirectionalLight":o=new iE(e.color,e.intensity);break;case"PointLight":o=new nE(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new WB(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new tE(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new GB(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new XB().fromJSON(e);break;case"SkinnedMesh":c=a(e.geometry),h=l(e.material),o=new kC(c,h),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":c=a(e.geometry),h=l(e.material),o=new Vn(c,h);break;case"InstancedMesh":c=a(e.geometry),h=l(e.material);const p=e.count,m=e.instanceMatrix,v=e.instanceColor;o=new zC(c,h,p),o.instanceMatrix=new wf(new Float32Array(m.array),16),v!==void 0&&(o.instanceColor=new wf(new Float32Array(v.array),v.itemSize));break;case"BatchedMesh":c=a(e.geometry),h=l(e.material),o=new mB(e.maxGeometryCount,e.maxVertexCount,e.maxIndexCount,h),o.geometry=c,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._visibility=e.visibility,o._active=e.active,o._bounds=e.bounds.map(A=>{const _=new Gi;_.min.fromArray(A.boxMin),_.max.fromArray(A.boxMax);const g=new Ti;return g.radius=A.sphereRadius,g.center.fromArray(A.sphereCenter),{boxInitialized:A.boxInitialized,box:_,sphereInitialized:A.sphereInitialized,sphere:g}}),o._maxGeometryCount=e.maxGeometryCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._geometryCount=e.geometryCount,o._matricesTexture=u(e.matricesTexture.uuid);break;case"LOD":o=new pB;break;case"Line":o=new qo(a(e.geometry),l(e.material));break;case"LineLoop":o=new HC(a(e.geometry),l(e.material));break;case"LineSegments":o=new Is(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new GC(a(e.geometry),l(e.material));break;case"Sprite":o=new dB(l(e.material));break;case"Group":o=new zo;break;case"Bone":o=new xv;break;default:o=new qt}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const p=e.children;for(let m=0;m<p.length;m++)o.add(this.parseObject(p[m],t,i,r,s))}if(e.animations!==void 0){const p=e.animations;for(let m=0;m<p.length;m++){const v=p[m];o.animations.push(s[v])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const p=e.levels;for(let m=0;m<p.length;m++){const v=p[m],A=o.getObjectByProperty("uuid",v.object);A!==void 0&&o.addLevel(A,v.distance,v.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const r=t[i.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(r,i.bindMatrix)}})}}const HZ={UVMapping:cv,CubeReflectionMapping:uo,CubeRefractionMapping:nl,EquirectangularReflectionMapping:Af,EquirectangularRefractionMapping:Wd,CubeUVReflectionMapping:Hf},d6={RepeatWrapping:il,ClampToEdgeWrapping:Ei,MirroredRepeatWrapping:Sf},p6={NearestFilter:zn,NearestMipmapNearestFilter:jd,NearestMipmapLinearFilter:Ba,LinearFilter:rn,LinearMipmapNearestFilter:lf,LinearMipmapLinearFilter:as};class YB extends ji{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Ho.get(e);if(o!==void 0){if(s.manager.itemStart(e),o.then){o.then(u=>{t&&t(u),s.manager.itemEnd(e)}).catch(u=>{r&&r(u)});return}return setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o}const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader;const l=fetch(e,a).then(function(u){return u.blob()}).then(function(u){return createImageBitmap(u,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(u){return Ho.add(e,u),t&&t(u),s.manager.itemEnd(e),u}).catch(function(u){r&&r(u),Ho.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)});Ho.add(e,l),s.manager.itemStart(e)}}let O1;class rE{static getContext(){return O1===void 0&&(O1=new(window.AudioContext||window.webkitAudioContext)),O1}static setContext(e){O1=e}}class GZ extends ji{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Dr(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{const u=l.slice(0);rE.getContext().decodeAudioData(u,function(h){t(h)}).catch(a)}catch(u){a(u)}},i,r);function a(l){r?r(l):console.error(l),s.manager.itemError(e)}}}const m6=new xt,g6=new xt,Ol=new xt;class VZ{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Rn,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Rn,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Ol.copy(e.projectionMatrix);const r=t.eyeSep/2,s=r*t.near/t.focus,o=t.near*Math.tan(vu*t.fov*.5)/t.zoom;let a,l;g6.elements[12]=-r,m6.elements[12]=r,a=-o*t.aspect+s,l=o*t.aspect+s,Ol.elements[0]=2*t.near/(l-a),Ol.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(Ol),a=-o*t.aspect-s,l=o*t.aspect-s,Ol.elements[0]=2*t.near/(l-a),Ol.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(Ol)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(g6),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(m6)}}class sE{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=v6(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=v6();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function v6(){return(typeof performance>"u"?Date:performance).now()}const Ul=new H,y6=new vi,WZ=new H,kl=new H;class jZ extends qt{constructor(){super(),this.type="AudioListener",this.context=rE.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new sE}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Ul,y6,WZ),kl.set(0,0,-1).applyQuaternion(y6),t.positionX){const r=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Ul.x,r),t.positionY.linearRampToValueAtTime(Ul.y,r),t.positionZ.linearRampToValueAtTime(Ul.z,r),t.forwardX.linearRampToValueAtTime(kl.x,r),t.forwardY.linearRampToValueAtTime(kl.y,r),t.forwardZ.linearRampToValueAtTime(kl.z,r),t.upX.linearRampToValueAtTime(i.x,r),t.upY.linearRampToValueAtTime(i.y,r),t.upZ.linearRampToValueAtTime(i.z,r)}else t.setPosition(Ul.x,Ul.y,Ul.z),t.setOrientation(kl.x,kl.y,kl.z,i.x,i.y,i.z)}}class ZB extends qt{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const zl=new H,_6=new vi,XZ=new H,Hl=new H;class JZ extends ZB{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(zl,_6,XZ),Hl.set(0,0,1).applyQuaternion(_6);const t=this.panner;if(t.positionX){const i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(zl.x,i),t.positionY.linearRampToValueAtTime(zl.y,i),t.positionZ.linearRampToValueAtTime(zl.z,i),t.orientationX.linearRampToValueAtTime(Hl.x,i),t.orientationY.linearRampToValueAtTime(Hl.y,i),t.orientationZ.linearRampToValueAtTime(Hl.z,i)}else t.setPosition(zl.x,zl.y,zl.z),t.setOrientation(Hl.x,Hl.y,Hl.z)}}class KZ{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}}class qB{constructor(e,t,i){this.binding=e,this.valueSize=i;let r,s,o;switch(t){case"quaternion":r=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,r=this.valueSize,s=e*r+r;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==r;++a)i[s+a]=i[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(i,s,0,a,r)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,r=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(i,r,l,1-s,t)}o>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let l=t,u=t+t;l!==u;++l)if(i[l]!==i[l+t]){a.setValue(i,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(t,r);for(let s=i,o=r;s!==o;++s)t[s]=t[r+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,s){if(r>=.5)for(let o=0;o!==s;++o)e[t+o]=e[i+o]}_slerp(e,t,i,r){vi.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,s){const o=this._workIndex*s;vi.multiplyQuaternionsFlat(e,o,e,t,e,i),vi.slerpFlat(e,t,e,t,e,o,r)}_lerp(e,t,i,r,s){const o=1-r;for(let a=0;a!==s;++a){const l=t+a;e[l]=e[l]*o+e[i+a]*r}}_lerpAdditive(e,t,i,r,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[i+o]*r}}}const oE="\\[\\]\\.:\\/",YZ=new RegExp("["+oE+"]","g"),aE="[^"+oE+"]",ZZ="[^"+oE.replace("\\.","")+"]",qZ=/((?:WC+[\/:])*)/.source.replace("WC",aE),QZ=/(WCOD+)?/.source.replace("WCOD",ZZ),$Z=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",aE),eq=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",aE),tq=new RegExp("^"+qZ+QZ+$Z+eq+"$"),nq=["material","materials","bones","map"];class iq{constructor(e,t,i){const r=i||Yt.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class Yt{constructor(e,t,i){this.path=t,this.parsedPath=i||Yt.parseTrackName(t),this.node=Yt.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new Yt.Composite(e,t,i):new Yt(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(YZ,"")}static parseTrackName(e){const t=tq.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=i.nodeName.substring(r+1);nq.indexOf(s)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=s)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===t||a.uuid===t)return a;const l=i(a.children);if(l)return l}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)e[t++]=i[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,r=t.propertyName;let s=t.propertyIndex;if(e||(e=Yt.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(i){let u=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let c=0;c<e.length;c++)if(e[c].name===u){u=c;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(u!==void 0){if(e[u]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[u]}}const o=e[r];if(o===void 0){const u=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+r+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Yt.Composite=iq;Yt.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Yt.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Yt.prototype.GetterByBindingType=[Yt.prototype._getValue_direct,Yt.prototype._getValue_array,Yt.prototype._getValue_arrayElement,Yt.prototype._getValue_toArray];Yt.prototype.SetterByBindingTypeAndVersioning=[[Yt.prototype._setValue_direct,Yt.prototype._setValue_direct_setNeedsUpdate,Yt.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Yt.prototype._setValue_array,Yt.prototype._setValue_array_setNeedsUpdate,Yt.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Yt.prototype._setValue_arrayElement,Yt.prototype._setValue_arrayElement_setNeedsUpdate,Yt.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Yt.prototype._setValue_fromArray,Yt.prototype._setValue_fromArray_setNeedsUpdate,Yt.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class rq{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Br(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,r=arguments.length;i!==r;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,r=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,u=this.nCachedObjects_;for(let c=0,h=arguments.length;c!==h;++c){const p=arguments[c],m=p.uuid;let v=t[m];if(v===void 0){v=l++,t[m]=v,e.push(p);for(let A=0,_=o;A!==_;++A)s[A].push(new Yt(p,i[A],r[A]))}else if(v<u){a=e[v];const A=--u,_=e[A];t[_.uuid]=v,e[v]=_,t[m]=A,e[A]=p;for(let g=0,S=o;g!==S;++g){const x=s[g],E=x[A];let b=x[v];x[v]=E,b===void 0&&(b=new Yt(p,i[g],r[g])),x[A]=b}}else e[v]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=u}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],u=l.uuid,c=t[u];if(c!==void 0&&c>=s){const h=s++,p=e[h];t[p.uuid]=c,e[c]=p,t[u]=h,e[h]=l;for(let m=0,v=r;m!==v;++m){const A=i[m],_=A[h],g=A[c];A[c]=_,A[h]=g}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const u=arguments[a],c=u.uuid,h=t[c];if(h!==void 0)if(delete t[c],h<s){const p=--s,m=e[p],v=--o,A=e[v];t[m.uuid]=h,e[h]=m,t[A.uuid]=p,e[p]=A,e.pop();for(let _=0,g=r;_!==g;++_){const S=i[_],x=S[p],E=S[v];S[h]=x,S[p]=E,S.pop()}}else{const p=--o,m=e[p];p>0&&(t[m.uuid]=h),e[h]=m,e.pop();for(let v=0,A=r;v!==A;++v){const _=i[v];_[h]=_[p],_.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const i=this._bindingsIndicesByPath;let r=i[e];const s=this._bindings;if(r!==void 0)return s[r];const o=this._paths,a=this._parsedPaths,l=this._objects,u=l.length,c=this.nCachedObjects_,h=new Array(u);r=s.length,i[e]=r,o.push(e),a.push(t),s.push(h);for(let p=c,m=l.length;p!==m;++p){const v=l[p];h[p]=new Yt(v,e,t)}return h}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(i!==void 0){const r=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],u=e[a];t[u]=i,o[i]=l,o.pop(),s[i]=s[a],s.pop(),r[i]=r[a],r.pop()}}}class QB{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;const s=t.tracks,o=s.length,a=new Array(o),l={endingStart:su,endingEnd:su};for(let u=0;u!==o;++u){const c=s[u].createInterpolant(null);a[u]=c,c.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=NP,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){const r=this._clip.duration,s=e._clip.duration,o=s/r,a=r/s;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const r=this._mixer,s=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,u=a.sampleValues;return l[0]=s,l[1]=s+i,u[0]=e/o,u[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*i;l<0||i===0?t=0:(this._startTime=null,t=i*l)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,u=this._propertyBindings;switch(this.blendMode){case EC:for(let c=0,h=l.length;c!==h;++c)l[c].evaluate(o),u[c].accumulateAdditive(a);break;case dv:default:for(let c=0,h=l.length;c!==h;++c)l[c].evaluate(o),u[c].accumulate(r,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let r=this.time+e,s=this._loopCount;const o=i===OP;if(e===0)return s===-1?r:o&&(s&1)===1?t-r:r;if(i===FP){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),r>=t||r<0){const a=Math.floor(r/t);r-=t*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const u=e<0;this._setEndings(u,!u,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(o&&(s&1)===1)return t-r}return r}_setEndings(e,t,i){const r=this._interpolantSettings;i?(r.endingStart=ou,r.endingEnd=ou):(e?r.endingStart=this.zeroSlopeAtStart?ou:su:r.endingStart=Xd,t?r.endingEnd=this.zeroSlopeAtEnd?ou:su:r.endingEnd=Xd)}_scheduleFading(e,t,i){const r=this._mixer,s=r.time;let o=this._weightInterpolant;o===null&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=t,a[1]=s+e,l[1]=i,this}}const sq=new Float32Array(1);class oq extends fo{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,r=e._clip.tracks,s=r.length,o=e._propertyBindings,a=e._interpolants,l=i.uuid,u=this._bindingsByRootAndName;let c=u[l];c===void 0&&(c={},u[l]=c);for(let h=0;h!==s;++h){const p=r[h],m=p.name;let v=c[m];if(v!==void 0)++v.referenceCount,o[h]=v;else{if(v=o[h],v!==void 0){v._cacheIndex===null&&(++v.referenceCount,this._addInactiveBinding(v,l,m));continue}const A=t&&t._propertyBindings[h].binding.parsedPath;v=new qB(Yt.create(i,m,A),p.ValueTypeName,p.getValueSize()),++v.referenceCount,this._addInactiveBinding(v,l,m),o[h]=v}a[h].resultBuffer=v.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,i)}const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const r=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,u=l[l.length-1],c=e._byClipCacheIndex;u._byClipCacheIndex=c,l[c]=u,l.pop(),e._byClipCacheIndex=null;const h=a.actionByRoot,p=(e._localRoot||this._root).uuid;delete h[p],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_addInactiveBinding(e,t,i){const r=this._bindingsByRootAndName,s=this._bindings;let o=r[t];o===void 0&&(o={},r[t]=o),o[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,r=i.rootNode.uuid,s=i.path,o=this._bindingsByRootAndName,a=o[r],l=t[t.length-1],u=e._cacheIndex;l._cacheIndex=u,t[u]=l,t.pop(),delete a[s],Object.keys(a).length===0&&delete o[r]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new ZC(new Float32Array(2),new Float32Array(2),1,sq),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=i,t[i]=s}clipAction(e,t,i){const r=t||this._root,s=r.uuid;let o=typeof e=="string"?Rf.findByName(r,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let u=null;if(i===void 0&&(o!==null?i=o.blendMode:i=dv),l!==void 0){const h=l.actionByRoot[s];if(h!==void 0&&h.blendMode===i)return h;u=l.knownActions[0],o===null&&(o=u._clip)}if(o===null)return null;const c=new QB(this,o,t,i);return this._bindAction(c,u),this._addInactiveAction(c,a,s),c}existingAction(e,t){const i=t||this._root,r=i.uuid,s=typeof e=="string"?Rf.findByName(i,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,r=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let u=0;u!==i;++u)t[u]._update(r,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let u=0;u!==l;++u)a[u].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,r=this._actionsByClip,s=r[i];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const u=o[a];this._deactivateAction(u);const c=u._cacheIndex,h=t[t.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,h._cacheIndex=c,t[c]=h,t.pop(),this._removeInactiveBindingsForAction(u)}delete r[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const o in i){const a=i[o].actionByRoot,l=a[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const r=this._bindingsByRootAndName,s=r[t];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class lE{constructor(e){this.value=e}clone(){return new lE(this.value.clone===void 0?this.value:this.value.clone())}}let aq=0;class lq extends fo{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:aq++}),this.name="",this.usage=Zd,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let i=0,r=t.length;i<r;i++){const s=Array.isArray(t[i])?t[i]:[t[i]];for(let o=0;o<s.length;o++)this.uniforms.push(s[o].clone())}return this}clone(){return new this.constructor().copy(this)}}class uq extends Mp{constructor(e,t,i=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class cq{constructor(e,t,i,r,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=r,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const x6=new xt;class uE{constructor(e,t,i=0,r=1/0){this.ray=new Fu(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new yu,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return x6.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(x6),this}intersectObject(e,t=!0,i=[]){return dA(e,this,i,t),i.sort(A6),i}intersectObjects(e,t=!0,i=[]){for(let r=0,s=e.length;r<s;r++)dA(e[r],this,i,t);return i.sort(A6),i}}function A6(n,e){return n.distance-e.distance}function dA(n,e,t,i){if(n.layers.test(e.layers)&&n.raycast(e,t),i===!0){const r=n.children;for(let s=0,o=r.length;s<o;s++)dA(r[s],e,t,!0)}}class pA{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(Hn(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class fq{constructor(e=1,t=0,i=0){return this.radius=e,this.theta=t,this.y=i,this}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return new this.constructor().copy(this)}}const S6=new be;class hq{constructor(e=new be(1/0,1/0),t=new be(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=S6.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,S6).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const C6=new H,U1=new H;class dq{constructor(e=new H,t=new H){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){C6.subVectors(e,this.start),U1.subVectors(this.end,this.start);const i=U1.dot(U1);let s=U1.dot(C6)/i;return t&&(s=Hn(s,0,1)),s}closestPointToPoint(e,t,i){const r=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const E6=new H;class pq extends qt{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const i=new It,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const u=o/l*Math.PI*2,c=a/l*Math.PI*2;r.push(Math.cos(u),Math.sin(u),1,Math.cos(c),Math.sin(c),1)}i.setAttribute("position",new pt(r,3));const s=new Wi({fog:!1,toneMapped:!1});this.cone=new Is(i,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),E6.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(E6),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const va=new H,k1=new xt,Tx=new xt;class mq extends Is{constructor(e){const t=$B(e),i=new It,r=[],s=[],o=new qe(0,0,1),a=new qe(0,1,0);for(let u=0;u<t.length;u++){const c=t[u];c.parent&&c.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}i.setAttribute("position",new pt(r,3)),i.setAttribute("color",new pt(s,3));const l=new Wi({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,i=this.geometry,r=i.getAttribute("position");Tx.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const a=t[s];a.parent&&a.parent.isBone&&(k1.multiplyMatrices(Tx,a.matrixWorld),va.setFromMatrixPosition(k1),r.setXYZ(o,va.x,va.y,va.z),k1.multiplyMatrices(Tx,a.parent.matrixWorld),va.setFromMatrixPosition(k1),r.setXYZ(o+1,va.x,va.y,va.z),o+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function $B(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,$B(n.children[t]));return e}class gq extends Vn{constructor(e,t,i){const r=new Pp(t,4,2),s=new br({wireframe:!0,fog:!1,toneMapped:!1});super(r,s),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const vq=new H,M6=new qe,w6=new qe;class yq extends qt{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const r=new Rp(t);r.rotateY(Math.PI*.5),this.material=new br({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=r.getAttribute("position"),o=new Float32Array(s.count*3);r.setAttribute("color",new $t(o,3)),this.add(new Vn(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");M6.copy(this.light.color),w6.copy(this.light.groundColor);for(let i=0,r=t.count;i<r;i++){const s=i<r/2?M6:w6;t.setXYZ(i,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(vq.setFromMatrixPosition(this.light.matrixWorld).negate())}}class _q extends Is{constructor(e=10,t=10,i=4473924,r=8947848){i=new qe(i),r=new qe(r);const s=t/2,o=e/t,a=e/2,l=[],u=[];for(let p=0,m=0,v=-a;p<=t;p++,v+=o){l.push(-a,0,v,a,0,v),l.push(v,0,-a,v,0,a);const A=p===s?i:r;A.toArray(u,m),m+=3,A.toArray(u,m),m+=3,A.toArray(u,m),m+=3,A.toArray(u,m),m+=3}const c=new It;c.setAttribute("position",new pt(l,3)),c.setAttribute("color",new pt(u,3));const h=new Wi({vertexColors:!0,toneMapped:!1});super(c,h),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class xq extends Is{constructor(e=10,t=16,i=8,r=64,s=4473924,o=8947848){s=new qe(s),o=new qe(o);const a=[],l=[];if(t>1)for(let h=0;h<t;h++){const p=h/t*(Math.PI*2),m=Math.sin(p)*e,v=Math.cos(p)*e;a.push(0,0,0),a.push(m,0,v);const A=h&1?s:o;l.push(A.r,A.g,A.b),l.push(A.r,A.g,A.b)}for(let h=0;h<i;h++){const p=h&1?s:o,m=e-e/i*h;for(let v=0;v<r;v++){let A=v/r*(Math.PI*2),_=Math.sin(A)*m,g=Math.cos(A)*m;a.push(_,0,g),l.push(p.r,p.g,p.b),A=(v+1)/r*(Math.PI*2),_=Math.sin(A)*m,g=Math.cos(A)*m,a.push(_,0,g),l.push(p.r,p.g,p.b)}}const u=new It;u.setAttribute("position",new pt(a,3)),u.setAttribute("color",new pt(l,3));const c=new Wi({vertexColors:!0,toneMapped:!1});super(u,c),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const T6=new H,z1=new H,b6=new H;class Aq extends qt{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",t===void 0&&(t=1);let r=new It;r.setAttribute("position",new pt([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new Wi({fog:!1,toneMapped:!1});this.lightPlane=new qo(r,s),this.add(this.lightPlane),r=new It,r.setAttribute("position",new pt([0,0,0,0,0,1],3)),this.targetLine=new qo(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),T6.setFromMatrixPosition(this.light.matrixWorld),z1.setFromMatrixPosition(this.light.target.matrixWorld),b6.subVectors(z1,T6),this.lightPlane.lookAt(z1),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(z1),this.targetLine.scale.z=b6.length()}}const H1=new H,On=new Sp;class Sq extends Is{constructor(e){const t=new It,i=new Wi({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(v,A){l(v),l(A)}function l(v){r.push(0,0,0),s.push(0,0,0),o[v]===void 0&&(o[v]=[]),o[v].push(r.length/3-1)}t.setAttribute("position",new pt(r,3)),t.setAttribute("color",new pt(s,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const u=new qe(16755200),c=new qe(16711680),h=new qe(43775),p=new qe(16777215),m=new qe(3355443);this.setColors(u,c,h,p,m)}setColors(e,t,i,r,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,i.r,i.g,i.b),a.setXYZ(33,i.r,i.g,i.b),a.setXYZ(34,i.r,i.g,i.b),a.setXYZ(35,i.r,i.g,i.b),a.setXYZ(36,i.r,i.g,i.b),a.setXYZ(37,i.r,i.g,i.b),a.setXYZ(38,r.r,r.g,r.b),a.setXYZ(39,r.r,r.g,r.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,i=1,r=1;On.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),jn("c",t,e,On,0,0,-1),jn("t",t,e,On,0,0,1),jn("n1",t,e,On,-i,-r,-1),jn("n2",t,e,On,i,-r,-1),jn("n3",t,e,On,-i,r,-1),jn("n4",t,e,On,i,r,-1),jn("f1",t,e,On,-i,-r,1),jn("f2",t,e,On,i,-r,1),jn("f3",t,e,On,-i,r,1),jn("f4",t,e,On,i,r,1),jn("u1",t,e,On,i*.7,r*1.1,-1),jn("u2",t,e,On,-i*.7,r*1.1,-1),jn("u3",t,e,On,0,r*2,-1),jn("cf1",t,e,On,-i,0,1),jn("cf2",t,e,On,i,0,1),jn("cf3",t,e,On,0,-r,1),jn("cf4",t,e,On,0,r,1),jn("cn1",t,e,On,-i,0,-1),jn("cn2",t,e,On,i,0,-1),jn("cn3",t,e,On,0,-r,-1),jn("cn4",t,e,On,0,r,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function jn(n,e,t,i,r,s,o){H1.set(r,s,o).unproject(i);const a=e[n];if(a!==void 0){const l=t.getAttribute("position");for(let u=0,c=a.length;u<c;u++)l.setXYZ(a[u],H1.x,H1.y,H1.z)}}const G1=new Gi;class Cq extends Is{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),s=new It;s.setIndex(new $t(i,1)),s.setAttribute("position",new $t(r,3)),super(s,new Wi({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&G1.setFromObject(this.object),G1.isEmpty())return;const t=G1.min,i=G1.max,r=this.geometry.attributes.position,s=r.array;s[0]=i.x,s[1]=i.y,s[2]=i.z,s[3]=t.x,s[4]=i.y,s[5]=i.z,s[6]=t.x,s[7]=t.y,s[8]=i.z,s[9]=i.x,s[10]=t.y,s[11]=i.z,s[12]=i.x,s[13]=i.y,s[14]=t.z,s[15]=t.x,s[16]=i.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=i.x,s[22]=t.y,s[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Eq extends Is{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new It;s.setIndex(new $t(i,1)),s.setAttribute("position",new pt(r,3)),super(s,new Wi({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class Mq extends qo{constructor(e,t=1,i=16776960){const r=i,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new It;o.setAttribute("position",new pt(s,3)),o.computeBoundingSphere(),super(o,new Wi({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new It;l.setAttribute("position",new pt(a,3)),l.computeBoundingSphere(),this.add(new Vn(l,new br({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const R6=new H;let V1,bx;class wq extends qt{constructor(e=new H(0,0,1),t=new H(0,0,0),i=1,r=16776960,s=i*.2,o=s*.2){super(),this.type="ArrowHelper",V1===void 0&&(V1=new It,V1.setAttribute("position",new pt([0,0,0,0,1,0],3)),bx=new Wf(0,.5,1,5,1),bx.translate(0,-.5,0)),this.position.copy(t),this.line=new qo(V1,new Wi({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Vn(bx,new br({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{R6.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(R6,t)}}setLength(e,t=e*.2,i=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class Tq extends Is{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new It;r.setAttribute("position",new pt(t,3)),r.setAttribute("color",new pt(i,3));const s=new Wi({vertexColors:!0,toneMapped:!1});super(r,s),this.type="AxesHelper"}setColors(e,t,i){const r=new qe,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(t),r.toArray(s,6),r.toArray(s,9),r.set(i),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class bq{constructor(){this.type="ShapePath",this.color=new qe,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new ep,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,r){return this.currentPath.quadraticCurveTo(e,t,i,r),this}bezierCurveTo(e,t,i,r,s,o){return this.currentPath.bezierCurveTo(e,t,i,r,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(g){const S=[];for(let x=0,E=g.length;x<E;x++){const b=g[x],T=new _u;T.curves=b.curves,S.push(T)}return S}function i(g,S){const x=S.length;let E=!1;for(let b=x-1,T=0;T<x;b=T++){let P=S[b],I=S[T],z=I.x-P.x,w=I.y-P.y;if(Math.abs(w)>Number.EPSILON){if(w<0&&(P=S[T],z=-z,I=S[b],w=-w),g.y<P.y||g.y>I.y)continue;if(g.y===P.y){if(g.x===P.x)return!0}else{const D=w*(g.x-P.x)-z*(g.y-P.y);if(D===0)return!0;if(D<0)continue;E=!E}}else{if(g.y!==P.y)continue;if(I.x<=g.x&&g.x<=P.x||P.x<=g.x&&g.x<=I.x)return!0}}return E}const r=so.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const u=[];if(s.length===1)return a=s[0],l=new _u,l.curves=a.curves,u.push(l),u;let c=!r(s[0].getPoints());c=e?!c:c;const h=[],p=[];let m=[],v=0,A;p[v]=void 0,m[v]=[];for(let g=0,S=s.length;g<S;g++)a=s[g],A=a.getPoints(),o=r(A),o=e?!o:o,o?(!c&&p[v]&&v++,p[v]={s:new _u,p:A},p[v].s.curves=a.curves,c&&v++,m[v]=[]):m[v].push({h:a,p:A[0]});if(!p[0])return t(s);if(p.length>1){let g=!1,S=0;for(let x=0,E=p.length;x<E;x++)h[x]=[];for(let x=0,E=p.length;x<E;x++){const b=m[x];for(let T=0;T<b.length;T++){const P=b[T];let I=!0;for(let z=0;z<p.length;z++)i(P.p,p[z].p)&&(x!==z&&S++,I?(I=!1,h[z].push(P)):g=!0);I&&h[x].push(P)}}S>0&&g===!1&&(m=h)}let _;for(let g=0,S=p.length;g<S;g++){l=p[g].s,u.push(l),_=m[g];for(let x=0,E=_.length;x<E;x++)l.holes.push(_[x].h)}return u}}class Rq extends hs{constructor(e=1,t=1,i=1,r={}){console.warn('THREE.WebGLMultipleRenderTargets has been deprecated and will be removed in r172. Use THREE.WebGLRenderTarget and set the "count" parameter to enable MRT.'),super(e,t,{...r,count:i}),this.isWebGLMultipleRenderTargets=!0}get texture(){return this.textures}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:zf}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=zf);const Pq=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:gC,AddEquation:Pa,AddOperation:xP,AdditiveAnimationBlendMode:EC,AdditiveBlending:T3,AgXToneMapping:MP,AlphaFormat:PP,AlwaysCompare:KP,AlwaysDepth:dP,AlwaysStencilFunc:rA,AmbientLight:VB,AnimationAction:QB,AnimationClip:Rf,AnimationLoader:FZ,AnimationMixer:oq,AnimationObjectGroup:rq,AnimationUtils:BZ,ArcCurve:gB,ArrayCamera:cB,ArrowHelper:wq,AttachedBindMode:I3,Audio:ZB,AudioAnalyser:KZ,AudioContext:rE,AudioListener:jZ,AudioLoader:GZ,AxesHelper:Tq,BackSide:tr,BasicDepthPacking:kP,BasicShadowMap:Y7,BatchedMesh:mB,Bone:xv,BooleanKeyframeTrack:Ou,Box2:hq,Box3:Gi,Box3Helper:Eq,BoxGeometry:Nu,BoxHelper:Cq,BufferAttribute:$t,BufferGeometry:It,BufferGeometryLoader:KB,ByteType:bP,Cache:Ho,Camera:Sp,CameraHelper:Sq,CanvasTexture:tZ,CapsuleGeometry:Ev,CatmullRomCurve3:vB,CineonToneMapping:CP,CircleGeometry:Mv,ClampToEdgeWrapping:Ei,Clock:sE,Color:qe,ColorKeyframeTrack:qC,ColorManagement:an,CompressedArrayTexture:$Y,CompressedCubeTexture:eZ,CompressedTexture:Sv,CompressedTextureLoader:NZ,ConeGeometry:wv,ConstantAlphaFactor:cP,ConstantColorFactor:lP,CubeCamera:nB,CubeReflectionMapping:uo,CubeRefractionMapping:nl,CubeTexture:Cp,CubeTextureLoader:zB,CubeUVReflectionMapping:Hf,CubicBezierCurve:WC,CubicBezierCurve3:yB,CubicInterpolant:NB,CullFaceBack:w3,CullFaceFront:K7,CullFaceFrontBack:WV,CullFaceNone:J7,Curve:Ls,CurvePath:xB,CustomBlending:Z7,CustomToneMapping:EP,CylinderGeometry:Wf,Cylindrical:fq,Data3DTexture:PC,DataArrayTexture:mv,DataTexture:Za,DataTextureLoader:$C,DataUtils:lu,DecrementStencilOp:QV,DecrementWrapStencilOp:eW,DefaultLoadingManager:kB,DepthFormat:Ya,DepthStencilFormat:wu,DepthTexture:gv,DetachedBindMode:TP,DirectionalLight:iE,DirectionalLightHelper:Aq,DiscreteInterpolant:OB,DisplayP3ColorSpace:pv,DodecahedronGeometry:Tv,DoubleSide:rs,DstAlphaFactor:iP,DstColorFactor:sP,DynamicCopyUsage:mW,DynamicDrawUsage:uW,DynamicReadUsage:hW,EdgesGeometry:AB,EllipseCurve:Cv,EqualCompare:WP,EqualDepth:mP,EqualStencilFunc:rW,EquirectangularReflectionMapping:Af,EquirectangularRefractionMapping:Wd,Euler:yr,EventDispatcher:fo,ExtrudeGeometry:Rv,FileLoader:Dr,Float16BufferAttribute:$W,Float32BufferAttribute:pt,FloatType:ei,Fog:_v,FogExp2:yv,FramebufferTexture:QY,FrontSide:lo,Frustum:Ep,GLBufferAttribute:cq,GLSL1:vW,GLSL3:sA,GreaterCompare:jP,GreaterDepth:vP,GreaterEqualCompare:JP,GreaterEqualDepth:gP,GreaterEqualStencilFunc:lW,GreaterStencilFunc:oW,GridHelper:_q,Group:zo,HalfFloatType:Hi,HemisphereLight:GB,HemisphereLightHelper:yq,IcosahedronGeometry:bp,ImageBitmapLoader:YB,ImageLoader:rp,ImageUtils:RC,IncrementStencilOp:qV,IncrementWrapStencilOp:$V,InstancedBufferAttribute:wf,InstancedBufferGeometry:JB,InstancedInterleavedBuffer:uq,InstancedMesh:zC,Int16BufferAttribute:qW,Int32BufferAttribute:QW,Int8BufferAttribute:KW,IntType:vC,InterleavedBuffer:Mp,InterleavedBufferAttribute:rl,Interpolant:jf,InterpolateDiscrete:Cf,InterpolateLinear:Tu,InterpolateSmooth:M0,InvertStencilOp:tW,KeepStencilOp:ql,KeyframeTrack:Ds,LOD:pB,LatheGeometry:Tp,Layers:yu,LessCompare:VP,LessDepth:pP,LessEqualCompare:wC,LessEqualDepth:Vd,LessEqualStencilFunc:sW,LessStencilFunc:iW,Light:vl,LightProbe:XB,Line:qo,Line3:dq,LineBasicMaterial:Wi,LineCurve:jC,LineCurve3:_B,LineDashedMaterial:LB,LineLoop:HC,LineSegments:Is,LinearDisplayP3ColorSpace:Ap,LinearFilter:rn,LinearInterpolant:ZC,LinearMipMapLinearFilter:KV,LinearMipMapNearestFilter:JV,LinearMipmapLinearFilter:as,LinearMipmapNearestFilter:lf,LinearSRGBColorSpace:ea,LinearToneMapping:AP,LinearTransfer:Jd,Loader:ji,LoaderUtils:oo,LoadingManager:QC,LoopOnce:FP,LoopPingPong:OP,LoopRepeat:NP,LuminanceAlphaFormat:IP,LuminanceFormat:BP,MOUSE:Yl,Material:ti,MaterialLoader:Nv,MathUtils:bC,Matrix3:Ft,Matrix4:xt,MaxEquation:B3,Mesh:Vn,MeshBasicMaterial:br,MeshDepthMaterial:FC,MeshDistanceMaterial:NC,MeshLambertMaterial:BB,MeshMatcapMaterial:IB,MeshNormalMaterial:PB,MeshPhongMaterial:bB,MeshPhysicalMaterial:ho,MeshStandardMaterial:Bp,MeshToonMaterial:RB,MinEquation:P3,MirroredRepeatWrapping:Sf,MixOperation:_P,MultiplyBlending:R3,MultiplyOperation:xp,NearestFilter:zn,NearestMipMapLinearFilter:XV,NearestMipMapNearestFilter:jV,NearestMipmapLinearFilter:Ba,NearestMipmapNearestFilter:jd,NeutralToneMapping:wP,NeverCompare:GP,NeverDepth:hP,NeverStencilFunc:nW,NoBlending:Wo,NoColorSpace:Do,NoToneMapping:io,NormalAnimationBlendMode:dv,NormalBlending:gu,NotEqualCompare:XP,NotEqualDepth:yP,NotEqualStencilFunc:aW,NumberKeyframeTrack:Tf,Object3D:qt,ObjectLoader:zZ,ObjectSpaceNormalMap:HP,OctahedronGeometry:Rp,OneFactor:eP,OneMinusConstantAlphaFactor:fP,OneMinusConstantColorFactor:uP,OneMinusDstAlphaFactor:rP,OneMinusDstColorFactor:oP,OneMinusSrcAlphaFactor:yg,OneMinusSrcColorFactor:nP,OrthographicCamera:Zs,P3Primaries:Yd,PCFShadowMap:uv,PCFSoftShadowMap:hd,PMREMGenerator:aA,Path:ep,PerspectiveCamera:Rn,Plane:Bo,PlaneGeometry:Gf,PlaneHelper:Mq,PointLight:nE,PointLightHelper:gq,Points:GC,PointsMaterial:Av,PolarGridHelper:xq,PolyhedronGeometry:gl,PositionalAudio:JZ,PropertyBinding:Yt,PropertyMixer:qB,QuadraticBezierCurve:XC,QuadraticBezierCurve3:JC,Quaternion:vi,QuaternionKeyframeTrack:sl,QuaternionLinearInterpolant:UB,RED_GREEN_RGTC2_Format:nA,RED_RGTC1_Format:DP,REVISION:zf,RGBADepthPacking:zP,RGBAFormat:zi,RGBAIntegerFormat:SC,RGBA_ASTC_10x10_Format:Z3,RGBA_ASTC_10x5_Format:J3,RGBA_ASTC_10x6_Format:K3,RGBA_ASTC_10x8_Format:Y3,RGBA_ASTC_12x10_Format:q3,RGBA_ASTC_12x12_Format:Q3,RGBA_ASTC_4x4_Format:k3,RGBA_ASTC_5x4_Format:z3,RGBA_ASTC_5x5_Format:H3,RGBA_ASTC_6x5_Format:G3,RGBA_ASTC_6x6_Format:V3,RGBA_ASTC_8x5_Format:W3,RGBA_ASTC_8x6_Format:j3,RGBA_ASTC_8x8_Format:X3,RGBA_BPTC_Format:E0,RGBA_ETC2_EAC_Format:U3,RGBA_PVRTC_2BPPV1_Format:N3,RGBA_PVRTC_4BPPV1_Format:F3,RGBA_S3TC_DXT1_Format:A0,RGBA_S3TC_DXT3_Format:S0,RGBA_S3TC_DXT5_Format:C0,RGB_BPTC_SIGNED_Format:$3,RGB_BPTC_UNSIGNED_Format:eA,RGB_ETC1_Format:CC,RGB_ETC2_Format:O3,RGB_PVRTC_2BPPV1_Format:D3,RGB_PVRTC_4BPPV1_Format:L3,RGB_S3TC_DXT1_Format:x0,RGFormat:LP,RGIntegerFormat:AC,RawShaderMaterial:TB,Ray:Fu,Raycaster:uE,Rec709Primaries:Kd,RectAreaLight:WB,RedFormat:hv,RedIntegerFormat:xC,ReinhardToneMapping:SP,RenderTarget:QP,RepeatWrapping:il,ReplaceStencilOp:ZV,ReverseSubtractEquation:Q7,RingGeometry:Pv,SIGNED_RED_GREEN_RGTC2_Format:iA,SIGNED_RED_RGTC1_Format:tA,SRGBColorSpace:ts,SRGBTransfer:pn,Scene:$d,ShaderChunk:Ot,ShaderLib:Ms,ShaderMaterial:ds,ShadowMaterial:wB,Shape:_u,ShapeGeometry:Bv,ShapePath:bq,ShapeUtils:so,ShortType:RP,Skeleton:wp,SkeletonHelper:mq,SkinnedMesh:kC,Source:au,Sphere:Ti,SphereGeometry:Pp,Spherical:pA,SphericalHarmonics3:jB,SplineCurve:KC,SpotLight:tE,SpotLightHelper:pq,Sprite:dB,SpriteMaterial:UC,SrcAlphaFactor:vg,SrcAlphaSaturateFactor:aP,SrcColorFactor:tP,StaticCopyUsage:pW,StaticDrawUsage:Zd,StaticReadUsage:fW,StereoCamera:VZ,StreamCopyUsage:gW,StreamDrawUsage:cW,StreamReadUsage:dW,StringKeyframeTrack:Uu,SubtractEquation:q7,SubtractiveBlending:b3,TOUCH:Zl,TangentSpaceNormalMap:ml,TetrahedronGeometry:Iv,Texture:gn,TextureLoader:HB,TorusGeometry:Lv,TorusKnotGeometry:Dv,Triangle:wr,TriangleFanDrawMode:_g,TriangleStripDrawMode:MC,TrianglesDrawMode:UP,TubeGeometry:Fv,UVMapping:cv,Uint16BufferAttribute:BC,Uint32BufferAttribute:IC,Uint8BufferAttribute:YW,Uint8ClampedBufferAttribute:ZW,Uniform:lE,UniformsGroup:lq,UniformsLib:Ze,UniformsUtils:tB,UnsignedByteType:ro,UnsignedInt248Type:Ka,UnsignedIntType:ko,UnsignedShort4444Type:yC,UnsignedShort5551Type:_C,UnsignedShortType:fv,VSMShadowMap:Ss,Vector2:be,Vector3:H,Vector4:ln,VectorKeyframeTrack:bf,VideoTexture:qY,WebGL1Renderer:fB,WebGL3DRenderTarget:OW,WebGLArrayRenderTarget:NW,WebGLCoordinateSystem:Ys,WebGLCubeRenderTarget:LC,WebGLMultipleRenderTargets:Rq,WebGLRenderTarget:hs,WebGLRenderer:OC,WebGLUtils:uB,WebGPUCoordinateSystem:qd,WireframeGeometry:MB,WrapAroundEnding:Xd,ZeroCurvatureEnding:su,ZeroFactor:$7,ZeroSlopeEnding:ou,ZeroStencilOp:YV,_SRGBAFormat:xg,createCanvasElement:ZP},Symbol.toStringTag,{value:"Module"}));var eI={exports:{}},ku={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */ku.ConcurrentRoot=1;ku.ContinuousEventPriority=4;ku.DefaultEventPriority=16;ku.DiscreteEventPriority=1;ku.IdleEventPriority=536870912;ku.LegacyRoot=0;eI.exports=ku;var Qc=eI.exports;function Bq(n){let e;const t=new Set,i=(u,c)=>{const h=typeof u=="function"?u(e):u;if(h!==e){const p=e;e=c?h:Object.assign({},e,h),t.forEach(m=>m(e,p))}},r=()=>e,s=(u,c=r,h=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let p=c(e);function m(){const v=c(e);if(!h(p,v)){const A=p;u(p=v,A)}}return t.add(m),()=>t.delete(m)},l={setState:i,getState:r,subscribe:(u,c,h)=>c||h?s(u,c,h):(t.add(u),()=>t.delete(u)),destroy:()=>t.clear()};return e=n(i,r,l),l}const Iq=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),P6=Iq?G.useEffect:G.useLayoutEffect;function tI(n){const e=typeof n=="function"?Bq(n):n,t=(i=e.getState,r=Object.is)=>{const[,s]=G.useReducer(_=>_+1,0),o=e.getState(),a=G.useRef(o),l=G.useRef(i),u=G.useRef(r),c=G.useRef(!1),h=G.useRef();h.current===void 0&&(h.current=i(o));let p,m=!1;(a.current!==o||l.current!==i||u.current!==r||c.current)&&(p=i(o),m=!r(h.current,p)),P6(()=>{m&&(h.current=p),a.current=o,l.current=i,u.current=r,c.current=!1});const v=G.useRef(o);P6(()=>{const _=()=>{try{const S=e.getState(),x=l.current(S);u.current(h.current,x)||(a.current=S,h.current=x,s())}catch{c.current=!0,s()}},g=e.subscribe(_);return e.getState()!==v.current&&_(),g},[]);const A=m?p:h.current;return G.useDebugValue(A),A};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const i=[t,e];return{next(){const r=i.length<=0;return{value:i.shift(),done:r}}}},t}var nI={exports:{}},Rx={exports:{}},Px={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B6;function Lq(){return B6||(B6=1,function(n){function e(N,X){var J=N.length;N.push(X);e:for(;0<J;){var ae=J-1>>>1,me=N[ae];if(0<r(me,X))N[ae]=X,N[J]=me,J=ae;else break e}}function t(N){return N.length===0?null:N[0]}function i(N){if(N.length===0)return null;var X=N[0],J=N.pop();if(J!==X){N[0]=J;e:for(var ae=0,me=N.length,Ue=me>>>1;ae<Ue;){var he=2*(ae+1)-1,Te=N[he],we=he+1,je=N[we];if(0>r(Te,J))we<me&&0>r(je,Te)?(N[ae]=je,N[we]=J,ae=we):(N[ae]=Te,N[he]=J,ae=he);else if(we<me&&0>r(je,J))N[ae]=je,N[we]=J,ae=we;else break e}}return X}function r(N,X){var J=N.sortIndex-X.sortIndex;return J!==0?J:N.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,h=null,p=3,m=!1,v=!1,A=!1,_=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(N){for(var X=t(u);X!==null;){if(X.callback===null)i(u);else if(X.startTime<=N)i(u),X.sortIndex=X.expirationTime,e(l,X);else break;X=t(u)}}function E(N){if(A=!1,x(N),!v)if(t(l)!==null)v=!0,oe(b);else{var X=t(u);X!==null&&pe(E,X.startTime-N)}}function b(N,X){v=!1,A&&(A=!1,g(I),I=-1),m=!0;var J=p;try{for(x(X),h=t(l);h!==null&&(!(h.expirationTime>X)||N&&!D());){var ae=h.callback;if(typeof ae=="function"){h.callback=null,p=h.priorityLevel;var me=ae(h.expirationTime<=X);X=n.unstable_now(),typeof me=="function"?h.callback=me:h===t(l)&&i(l),x(X)}else i(l);h=t(l)}if(h!==null)var Ue=!0;else{var he=t(u);he!==null&&pe(E,he.startTime-X),Ue=!1}return Ue}finally{h=null,p=J,m=!1}}var T=!1,P=null,I=-1,z=5,w=-1;function D(){return!(n.unstable_now()-w<z)}function Q(){if(P!==null){var N=n.unstable_now();w=N;var X=!0;try{X=P(!0,N)}finally{X?ie():(T=!1,P=null)}}else T=!1}var ie;if(typeof S=="function")ie=function(){S(Q)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,se=j.port2;j.port1.onmessage=Q,ie=function(){se.postMessage(null)}}else ie=function(){_(Q,0)};function oe(N){P=N,T||(T=!0,ie())}function pe(N,X){I=_(function(){N(n.unstable_now())},X)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(N){N.callback=null},n.unstable_continueExecution=function(){v||m||(v=!0,oe(b))},n.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<N?Math.floor(1e3/N):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(N){switch(p){case 1:case 2:case 3:var X=3;break;default:X=p}var J=p;p=X;try{return N()}finally{p=J}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(N,X){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var J=p;p=N;try{return X()}finally{p=J}},n.unstable_scheduleCallback=function(N,X,J){var ae=n.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?ae+J:ae):J=ae,N){case 1:var me=-1;break;case 2:me=250;break;case 5:me=1073741823;break;case 4:me=1e4;break;default:me=5e3}return me=J+me,N={id:c++,callback:X,priorityLevel:N,startTime:J,expirationTime:me,sortIndex:-1},J>ae?(N.sortIndex=J,e(u,N),t(l)===null&&N===t(u)&&(A?(g(I),I=-1):A=!0,pe(E,J-ae))):(N.sortIndex=me,e(l,N),v||m||(v=!0,oe(b))),N},n.unstable_shouldYield=D,n.unstable_wrapCallback=function(N){var X=p;return function(){var J=p;p=X;try{return N.apply(this,arguments)}finally{p=J}}}}(Px)),Px}var I6;function Dq(){return I6||(I6=1,Rx.exports=Lq()),Rx.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fq=function(e){var t={},i=G,r=Dq(),s=Object.assign;function o(f){for(var d="https://reactjs.org/docs/error-decoder.html?invariant="+f,y=1;y<arguments.length;y++)d+="&args[]="+encodeURIComponent(arguments[y]);return"Minified React error #"+f+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),u=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),h=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),m=Symbol.for("react.provider"),v=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),g=Symbol.for("react.suspense_list"),S=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),E=Symbol.for("react.offscreen"),b=Symbol.iterator;function T(f){return f===null||typeof f!="object"?null:(f=b&&f[b]||f["@@iterator"],typeof f=="function"?f:null)}function P(f){if(f==null)return null;if(typeof f=="function")return f.displayName||f.name||null;if(typeof f=="string")return f;switch(f){case c:return"Fragment";case u:return"Portal";case p:return"Profiler";case h:return"StrictMode";case _:return"Suspense";case g:return"SuspenseList"}if(typeof f=="object")switch(f.$$typeof){case v:return(f.displayName||"Context")+".Consumer";case m:return(f._context.displayName||"Context")+".Provider";case A:var d=f.render;return f=f.displayName,f||(f=d.displayName||d.name||"",f=f!==""?"ForwardRef("+f+")":"ForwardRef"),f;case S:return d=f.displayName||null,d!==null?d:P(f.type)||"Memo";case x:d=f._payload,f=f._init;try{return P(f(d))}catch{}}return null}function I(f){var d=f.type;switch(f.tag){case 24:return"Cache";case 9:return(d.displayName||"Context")+".Consumer";case 10:return(d._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return f=d.render,f=f.displayName||f.name||"",d.displayName||(f!==""?"ForwardRef("+f+")":"ForwardRef");case 7:return"Fragment";case 5:return d;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return P(d);case 8:return d===h?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d}return null}function z(f){var d=f,y=f;if(f.alternate)for(;d.return;)d=d.return;else{f=d;do d=f,d.flags&4098&&(y=d.return),f=d.return;while(f)}return d.tag===3?y:null}function w(f){if(z(f)!==f)throw Error(o(188))}function D(f){var d=f.alternate;if(!d){if(d=z(f),d===null)throw Error(o(188));return d!==f?null:f}for(var y=f,C=d;;){var M=y.return;if(M===null)break;var R=M.alternate;if(R===null){if(C=M.return,C!==null){y=C;continue}break}if(M.child===R.child){for(R=M.child;R;){if(R===y)return w(M),f;if(R===C)return w(M),d;R=R.sibling}throw Error(o(188))}if(y.return!==C.return)y=M,C=R;else{for(var K=!1,le=M.child;le;){if(le===y){K=!0,y=M,C=R;break}if(le===C){K=!0,C=M,y=R;break}le=le.sibling}if(!K){for(le=R.child;le;){if(le===y){K=!0,y=R,C=M;break}if(le===C){K=!0,C=R,y=M;break}le=le.sibling}if(!K)throw Error(o(189))}}if(y.alternate!==C)throw Error(o(190))}if(y.tag!==3)throw Error(o(188));return y.stateNode.current===y?f:d}function Q(f){return f=D(f),f!==null?ie(f):null}function ie(f){if(f.tag===5||f.tag===6)return f;for(f=f.child;f!==null;){var d=ie(f);if(d!==null)return d;f=f.sibling}return null}function j(f){if(f.tag===5||f.tag===6)return f;for(f=f.child;f!==null;){if(f.tag!==4){var d=j(f);if(d!==null)return d}f=f.sibling}return null}var se=Array.isArray,oe=e.getPublicInstance,pe=e.getRootHostContext,N=e.getChildHostContext,X=e.prepareForCommit,J=e.resetAfterCommit,ae=e.createInstance,me=e.appendInitialChild,Ue=e.finalizeInitialChildren,he=e.prepareUpdate,Te=e.shouldSetTextContent,we=e.createTextInstance,je=e.scheduleTimeout,$e=e.cancelTimeout,nt=e.noTimeout,Et=e.isPrimaryRenderer,et=e.supportsMutation,Z=e.supportsPersistence,De=e.supportsHydration,Re=e.getInstanceFromNode,ze=e.preparePortalMount,Ie=e.getCurrentEventPriority,it=e.detachDeletedInstance,V=e.supportsMicrotasks,ne=e.scheduleMicrotask,de=e.supportsTestSelectors,O=e.findFiberRoot,L=e.getBoundingRect,ee=e.getTextContent,ue=e.isHiddenSubtree,Ce=e.matchAccessibilityRole,Pe=e.setFocusIfFocusable,ft=e.setupIntersectionObserver,ht=e.appendChild,He=e.appendChildToContainer,Ke=e.commitTextUpdate,_t=e.commitMount,Ge=e.commitUpdate,Jt=e.insertBefore,mt=e.insertInContainerBefore,dt=e.removeChild,q=e.removeChildFromContainer,ve=e.resetTextContent,Ne=e.hideInstance,Qe=e.hideTextInstance,Le=e.unhideInstance,re=e.unhideTextInstance,Xe=e.clearContainer,_e=e.cloneInstance,Ve=e.createContainerChildSet,Je=e.appendChildToContainerChildSet,Mt=e.finalizeContainerChildren,Gt=e.replaceContainerChildren,cn=e.cloneHiddenInstance,En=e.cloneHiddenTextInstance,jt=e.canHydrateInstance,ni=e.canHydrateTextInstance,rr=e.canHydrateSuspenseInstance,Fs=e.isSuspenseInstancePending,yl=e.isSuspenseInstanceFallback,kr=e.registerSuspenseInstanceRetry,sr=e.getNextHydratableSibling,Lt=e.getFirstHydratableChild,_l=e.getFirstHydratableChildWithinContainer,Gu=e.getFirstHydratableChildWithinSuspenseInstance,F=e.hydrateInstance,U=e.hydrateTextInstance,te=e.hydrateSuspenseInstance,B=e.getNextHydratableInstanceAfterSuspenseInstance,k=e.commitHydratedContainer,W=e.commitHydratedSuspenseInstance,$=e.clearSuspenseBoundary,Y=e.clearSuspenseBoundaryFromContainer,ye=e.shouldDeleteUnhydratedTailInstances,xe=e.didNotMatchHydratedContainerTextInstance,Ee=e.didNotMatchHydratedTextInstance,Se;function st(f){if(Se===void 0)try{throw Error()}catch(y){var d=y.stack.trim().match(/\n( *(at )?)/);Se=d&&d[1]||""}return`
`+Se+f}var Fe=!1;function Oe(f,d){if(!f||Fe)return"";Fe=!0;var y=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(d)if(d=function(){throw Error()},Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(We){var C=We}Reflect.construct(f,[],d)}else{try{d.call()}catch(We){C=We}f.call(d.prototype)}else{try{throw Error()}catch(We){C=We}f()}}catch(We){if(We&&C&&typeof We.stack=="string"){for(var M=We.stack.split(`
`),R=C.stack.split(`
`),K=M.length-1,le=R.length-1;1<=K&&0<=le&&M[K]!==R[le];)le--;for(;1<=K&&0<=le;K--,le--)if(M[K]!==R[le]){if(K!==1||le!==1)do if(K--,le--,0>le||M[K]!==R[le]){var Me=`
`+M[K].replace(" at new "," at ");return f.displayName&&Me.includes("<anonymous>")&&(Me=Me.replace("<anonymous>",f.displayName)),Me}while(1<=K&&0<=le);break}}}finally{Fe=!1,Error.prepareStackTrace=y}return(f=f?f.displayName||f.name:"")?st(f):""}var at=Object.prototype.hasOwnProperty,yt=[],At=-1;function Rt(f){return{current:f}}function ot(f){0>At||(f.current=yt[At],yt[At]=null,At--)}function Ye(f,d){At++,yt[At]=f.current,f.current=d}var kt={},St=Rt(kt),Tt=Rt(!1),on=kt;function Fn(f,d){var y=f.type.contextTypes;if(!y)return kt;var C=f.stateNode;if(C&&C.__reactInternalMemoizedUnmaskedChildContext===d)return C.__reactInternalMemoizedMaskedChildContext;var M={},R;for(R in y)M[R]=d[R];return C&&(f=f.stateNode,f.__reactInternalMemoizedUnmaskedChildContext=d,f.__reactInternalMemoizedMaskedChildContext=M),M}function An(f){return f=f.childContextTypes,f!=null}function Kt(){ot(Tt),ot(St)}function Ht(f,d,y){if(St.current!==kt)throw Error(o(168));Ye(St,d),Ye(Tt,y)}function Mn(f,d,y){var C=f.stateNode;if(d=d.childContextTypes,typeof C.getChildContext!="function")return y;C=C.getChildContext();for(var M in C)if(!(M in d))throw Error(o(108,I(f)||"Unknown",M));return s({},y,C)}function Dt(f){return f=(f=f.stateNode)&&f.__reactInternalMemoizedMergedChildContext||kt,on=St.current,Ye(St,f),Ye(Tt,Tt.current),!0}function Vt(f,d,y){var C=f.stateNode;if(!C)throw Error(o(169));y?(f=Mn(f,d,on),C.__reactInternalMemoizedMergedChildContext=f,ot(Tt),ot(St),Ye(St,f)):ot(Tt),Ye(Tt,y)}var dn=Math.clz32?Math.clz32:Ns,zr=Math.log,Xi=Math.LN2;function Ns(f){return f>>>=0,f===0?32:31-(zr(f)/Xi|0)|0}var zp=64,Hp=4194304;function Yf(f){switch(f&-f){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return f&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return f}}function Gp(f,d){var y=f.pendingLanes;if(y===0)return 0;var C=0,M=f.suspendedLanes,R=f.pingedLanes,K=y&268435455;if(K!==0){var le=K&~M;le!==0?C=Yf(le):(R&=K,R!==0&&(C=Yf(R)))}else K=y&~M,K!==0?C=Yf(K):R!==0&&(C=Yf(R));if(C===0)return 0;if(d!==0&&d!==C&&!(d&M)&&(M=C&-C,R=d&-d,M>=R||M===16&&(R&4194240)!==0))return d;if(C&4&&(C|=y&16),d=f.entangledLanes,d!==0)for(f=f.entanglements,d&=C;0<d;)y=31-dn(d),M=1<<y,C|=f[y],d&=~M;return C}function iD(f,d){switch(f){case 1:case 2:case 4:return d+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function rD(f,d){for(var y=f.suspendedLanes,C=f.pingedLanes,M=f.expirationTimes,R=f.pendingLanes;0<R;){var K=31-dn(R),le=1<<K,Me=M[K];Me===-1?(!(le&y)||le&C)&&(M[K]=iD(le,d)):Me<=d&&(f.expiredLanes|=le),R&=~le}}function qv(f){return f=f.pendingLanes&-1073741825,f!==0?f:f&1073741824?1073741824:0}function Qv(f){for(var d=[],y=0;31>y;y++)d.push(f);return d}function Zf(f,d,y){f.pendingLanes|=d,d!==536870912&&(f.suspendedLanes=0,f.pingedLanes=0),f=f.eventTimes,d=31-dn(d),f[d]=y}function sD(f,d){var y=f.pendingLanes&~d;f.pendingLanes=d,f.suspendedLanes=0,f.pingedLanes=0,f.expiredLanes&=d,f.mutableReadLanes&=d,f.entangledLanes&=d,d=f.entanglements;var C=f.eventTimes;for(f=f.expirationTimes;0<y;){var M=31-dn(y),R=1<<M;d[M]=0,C[M]=-1,f[M]=-1,y&=~R}}function $v(f,d){var y=f.entangledLanes|=d;for(f=f.entanglements;y;){var C=31-dn(y),M=1<<C;M&d|f[C]&d&&(f[C]|=d),y&=~M}}var en=0;function zE(f){return f&=-f,1<f?4<f?f&268435455?16:536870912:4:1}var ey=r.unstable_scheduleCallback,HE=r.unstable_cancelCallback,oD=r.unstable_shouldYield,aD=r.unstable_requestPaint,ui=r.unstable_now,ty=r.unstable_ImmediatePriority,lD=r.unstable_UserBlockingPriority,ny=r.unstable_NormalPriority,uD=r.unstable_IdlePriority,Vp=null,Os=null;function cD(f){if(Os&&typeof Os.onCommitFiberRoot=="function")try{Os.onCommitFiberRoot(Vp,f,void 0,(f.current.flags&128)===128)}catch{}}function fD(f,d){return f===d&&(f!==0||1/f===1/d)||f!==f&&d!==d}var Us=typeof Object.is=="function"?Object.is:fD,mo=null,Wp=!1,iy=!1;function GE(f){mo===null?mo=[f]:mo.push(f)}function hD(f){Wp=!0,GE(f)}function ks(){if(!iy&&mo!==null){iy=!0;var f=0,d=en;try{var y=mo;for(en=1;f<y.length;f++){var C=y[f];do C=C(!0);while(C!==null)}mo=null,Wp=!1}catch(M){throw mo!==null&&(mo=mo.slice(f+1)),ey(ty,ks),M}finally{en=d,iy=!1}}return null}var dD=a.ReactCurrentBatchConfig;function jp(f,d){if(Us(f,d))return!0;if(typeof f!="object"||f===null||typeof d!="object"||d===null)return!1;var y=Object.keys(f),C=Object.keys(d);if(y.length!==C.length)return!1;for(C=0;C<y.length;C++){var M=y[C];if(!at.call(d,M)||!Us(f[M],d[M]))return!1}return!0}function pD(f){switch(f.tag){case 5:return st(f.type);case 16:return st("Lazy");case 13:return st("Suspense");case 19:return st("SuspenseList");case 0:case 2:case 15:return f=Oe(f.type,!1),f;case 11:return f=Oe(f.type.render,!1),f;case 1:return f=Oe(f.type,!0),f;default:return""}}function ps(f,d){if(f&&f.defaultProps){d=s({},d),f=f.defaultProps;for(var y in f)d[y]===void 0&&(d[y]=f[y]);return d}return d}var Xp=Rt(null),Jp=null,Vu=null,ry=null;function sy(){ry=Vu=Jp=null}function VE(f,d,y){Et?(Ye(Xp,d._currentValue),d._currentValue=y):(Ye(Xp,d._currentValue2),d._currentValue2=y)}function oy(f){var d=Xp.current;ot(Xp),Et?f._currentValue=d:f._currentValue2=d}function ay(f,d,y){for(;f!==null;){var C=f.alternate;if((f.childLanes&d)!==d?(f.childLanes|=d,C!==null&&(C.childLanes|=d)):C!==null&&(C.childLanes&d)!==d&&(C.childLanes|=d),f===y)break;f=f.return}}function Wu(f,d){Jp=f,ry=Vu=null,f=f.dependencies,f!==null&&f.firstContext!==null&&(f.lanes&d&&(Ar=!0),f.firstContext=null)}function Hr(f){var d=Et?f._currentValue:f._currentValue2;if(ry!==f)if(f={context:f,memoizedValue:d,next:null},Vu===null){if(Jp===null)throw Error(o(308));Vu=f,Jp.dependencies={lanes:0,firstContext:f}}else Vu=Vu.next=f;return d}var zs=null,ta=!1;function ly(f){f.updateQueue={baseState:f.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function WE(f,d){f=f.updateQueue,d.updateQueue===f&&(d.updateQueue={baseState:f.baseState,firstBaseUpdate:f.firstBaseUpdate,lastBaseUpdate:f.lastBaseUpdate,shared:f.shared,effects:f.effects})}function go(f,d){return{eventTime:f,lane:d,tag:0,payload:null,callback:null,next:null}}function na(f,d){var y=f.updateQueue;y!==null&&(y=y.shared,Zn!==null&&f.mode&1&&!(zt&2)?(f=y.interleaved,f===null?(d.next=d,zs===null?zs=[y]:zs.push(y)):(d.next=f.next,f.next=d),y.interleaved=d):(f=y.pending,f===null?d.next=d:(d.next=f.next,f.next=d),y.pending=d))}function Kp(f,d,y){if(d=d.updateQueue,d!==null&&(d=d.shared,(y&4194240)!==0)){var C=d.lanes;C&=f.pendingLanes,y|=C,d.lanes=y,$v(f,y)}}function jE(f,d){var y=f.updateQueue,C=f.alternate;if(C!==null&&(C=C.updateQueue,y===C)){var M=null,R=null;if(y=y.firstBaseUpdate,y!==null){do{var K={eventTime:y.eventTime,lane:y.lane,tag:y.tag,payload:y.payload,callback:y.callback,next:null};R===null?M=R=K:R=R.next=K,y=y.next}while(y!==null);R===null?M=R=d:R=R.next=d}else M=R=d;y={baseState:C.baseState,firstBaseUpdate:M,lastBaseUpdate:R,shared:C.shared,effects:C.effects},f.updateQueue=y;return}f=y.lastBaseUpdate,f===null?y.firstBaseUpdate=d:f.next=d,y.lastBaseUpdate=d}function Yp(f,d,y,C){var M=f.updateQueue;ta=!1;var R=M.firstBaseUpdate,K=M.lastBaseUpdate,le=M.shared.pending;if(le!==null){M.shared.pending=null;var Me=le,We=Me.next;Me.next=null,K===null?R=We:K.next=We,K=Me;var ut=f.alternate;ut!==null&&(ut=ut.updateQueue,le=ut.lastBaseUpdate,le!==K&&(le===null?ut.firstBaseUpdate=We:le.next=We,ut.lastBaseUpdate=Me))}if(R!==null){var Pt=M.baseState;K=0,ut=We=Me=null,le=R;do{var Ct=le.lane,hn=le.eventTime;if((C&Ct)===Ct){ut!==null&&(ut=ut.next={eventTime:hn,lane:0,tag:le.tag,payload:le.payload,callback:le.callback,next:null});e:{var vt=f,Ii=le;switch(Ct=d,hn=y,Ii.tag){case 1:if(vt=Ii.payload,typeof vt=="function"){Pt=vt.call(hn,Pt,Ct);break e}Pt=vt;break e;case 3:vt.flags=vt.flags&-65537|128;case 0:if(vt=Ii.payload,Ct=typeof vt=="function"?vt.call(hn,Pt,Ct):vt,Ct==null)break e;Pt=s({},Pt,Ct);break e;case 2:ta=!0}}le.callback!==null&&le.lane!==0&&(f.flags|=64,Ct=M.effects,Ct===null?M.effects=[le]:Ct.push(le))}else hn={eventTime:hn,lane:Ct,tag:le.tag,payload:le.payload,callback:le.callback,next:null},ut===null?(We=ut=hn,Me=Pt):ut=ut.next=hn,K|=Ct;if(le=le.next,le===null){if(le=M.shared.pending,le===null)break;Ct=le,le=Ct.next,Ct.next=null,M.lastBaseUpdate=Ct,M.shared.pending=null}}while(!0);if(ut===null&&(Me=Pt),M.baseState=Me,M.firstBaseUpdate=We,M.lastBaseUpdate=ut,d=M.shared.interleaved,d!==null){M=d;do K|=M.lane,M=M.next;while(M!==d)}else R===null&&(M.shared.lanes=0);$u|=K,f.lanes=K,f.memoizedState=Pt}}function XE(f,d,y){if(f=d.effects,d.effects=null,f!==null)for(d=0;d<f.length;d++){var C=f[d],M=C.callback;if(M!==null){if(C.callback=null,C=y,typeof M!="function")throw Error(o(191,M));M.call(C)}}}var JE=new i.Component().refs;function uy(f,d,y,C){d=f.memoizedState,y=y(C,d),y=y==null?d:s({},d,y),f.memoizedState=y,f.lanes===0&&(f.updateQueue.baseState=y)}var Zp={isMounted:function(f){return(f=f._reactInternals)?z(f)===f:!1},enqueueSetState:function(f,d,y){f=f._reactInternals;var C=Ki(),M=sa(f),R=go(C,M);R.payload=d,y!=null&&(R.callback=y),na(f,R),d=Xr(f,M,C),d!==null&&Kp(d,f,M)},enqueueReplaceState:function(f,d,y){f=f._reactInternals;var C=Ki(),M=sa(f),R=go(C,M);R.tag=1,R.payload=d,y!=null&&(R.callback=y),na(f,R),d=Xr(f,M,C),d!==null&&Kp(d,f,M)},enqueueForceUpdate:function(f,d){f=f._reactInternals;var y=Ki(),C=sa(f),M=go(y,C);M.tag=2,d!=null&&(M.callback=d),na(f,M),d=Xr(f,C,y),d!==null&&Kp(d,f,C)}};function KE(f,d,y,C,M,R,K){return f=f.stateNode,typeof f.shouldComponentUpdate=="function"?f.shouldComponentUpdate(C,R,K):d.prototype&&d.prototype.isPureReactComponent?!jp(y,C)||!jp(M,R):!0}function YE(f,d,y){var C=!1,M=kt,R=d.contextType;return typeof R=="object"&&R!==null?R=Hr(R):(M=An(d)?on:St.current,C=d.contextTypes,R=(C=C!=null)?Fn(f,M):kt),d=new d(y,R),f.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Zp,f.stateNode=d,d._reactInternals=f,C&&(f=f.stateNode,f.__reactInternalMemoizedUnmaskedChildContext=M,f.__reactInternalMemoizedMaskedChildContext=R),d}function ZE(f,d,y,C){f=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(y,C),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(y,C),d.state!==f&&Zp.enqueueReplaceState(d,d.state,null)}function cy(f,d,y,C){var M=f.stateNode;M.props=y,M.state=f.memoizedState,M.refs=JE,ly(f);var R=d.contextType;typeof R=="object"&&R!==null?M.context=Hr(R):(R=An(d)?on:St.current,M.context=Fn(f,R)),M.state=f.memoizedState,R=d.getDerivedStateFromProps,typeof R=="function"&&(uy(f,d,R,y),M.state=f.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof M.getSnapshotBeforeUpdate=="function"||typeof M.UNSAFE_componentWillMount!="function"&&typeof M.componentWillMount!="function"||(d=M.state,typeof M.componentWillMount=="function"&&M.componentWillMount(),typeof M.UNSAFE_componentWillMount=="function"&&M.UNSAFE_componentWillMount(),d!==M.state&&Zp.enqueueReplaceState(M,M.state,null),Yp(f,y,M,C),M.state=f.memoizedState),typeof M.componentDidMount=="function"&&(f.flags|=4194308)}var ju=[],Xu=0,qp=null,Qp=0,Gr=[],Vr=0,xl=null,vo=1,yo="";function Al(f,d){ju[Xu++]=Qp,ju[Xu++]=qp,qp=f,Qp=d}function qE(f,d,y){Gr[Vr++]=vo,Gr[Vr++]=yo,Gr[Vr++]=xl,xl=f;var C=vo;f=yo;var M=32-dn(C)-1;C&=~(1<<M),y+=1;var R=32-dn(d)+M;if(30<R){var K=M-M%5;R=(C&(1<<K)-1).toString(32),C>>=K,M-=K,vo=1<<32-dn(d)+M|y<<M|C,yo=R+f}else vo=1<<R|y<<M|C,yo=f}function fy(f){f.return!==null&&(Al(f,1),qE(f,1,0))}function hy(f){for(;f===qp;)qp=ju[--Xu],ju[Xu]=null,Qp=ju[--Xu],ju[Xu]=null;for(;f===xl;)xl=Gr[--Vr],Gr[Vr]=null,yo=Gr[--Vr],Gr[Vr]=null,vo=Gr[--Vr],Gr[Vr]=null}var _r=null,xr=null,Sn=!1,qf=!1,ms=null;function QE(f,d){var y=Jr(5,null,null,0);y.elementType="DELETED",y.stateNode=d,y.return=f,d=f.deletions,d===null?(f.deletions=[y],f.flags|=16):d.push(y)}function $E(f,d){switch(f.tag){case 5:return d=jt(d,f.type,f.pendingProps),d!==null?(f.stateNode=d,_r=f,xr=Lt(d),!0):!1;case 6:return d=ni(d,f.pendingProps),d!==null?(f.stateNode=d,_r=f,xr=null,!0):!1;case 13:if(d=rr(d),d!==null){var y=xl!==null?{id:vo,overflow:yo}:null;return f.memoizedState={dehydrated:d,treeContext:y,retryLane:1073741824},y=Jr(18,null,null,0),y.stateNode=d,y.return=f,f.child=y,_r=f,xr=null,!0}return!1;default:return!1}}function dy(f){return(f.mode&1)!==0&&(f.flags&128)===0}function py(f){if(Sn){var d=xr;if(d){var y=d;if(!$E(f,d)){if(dy(f))throw Error(o(418));d=sr(y);var C=_r;d&&$E(f,d)?QE(C,y):(f.flags=f.flags&-4097|2,Sn=!1,_r=f)}}else{if(dy(f))throw Error(o(418));f.flags=f.flags&-4097|2,Sn=!1,_r=f}}}function eM(f){for(f=f.return;f!==null&&f.tag!==5&&f.tag!==3&&f.tag!==13;)f=f.return;_r=f}function Qf(f){if(!De||f!==_r)return!1;if(!Sn)return eM(f),Sn=!0,!1;if(f.tag!==3&&(f.tag!==5||ye(f.type)&&!Te(f.type,f.memoizedProps))){var d=xr;if(d){if(dy(f)){for(f=xr;f;)f=sr(f);throw Error(o(418))}for(;d;)QE(f,d),d=sr(d)}}if(eM(f),f.tag===13){if(!De)throw Error(o(316));if(f=f.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(o(317));xr=B(f)}else xr=_r?sr(f.stateNode):null;return!0}function Ju(){De&&(xr=_r=null,qf=Sn=!1)}function my(f){ms===null?ms=[f]:ms.push(f)}function $f(f,d,y){if(f=y.ref,f!==null&&typeof f!="function"&&typeof f!="object"){if(y._owner){if(y=y._owner,y){if(y.tag!==1)throw Error(o(309));var C=y.stateNode}if(!C)throw Error(o(147,f));var M=C,R=""+f;return d!==null&&d.ref!==null&&typeof d.ref=="function"&&d.ref._stringRef===R?d.ref:(d=function(K){var le=M.refs;le===JE&&(le=M.refs={}),K===null?delete le[R]:le[R]=K},d._stringRef=R,d)}if(typeof f!="string")throw Error(o(284));if(!y._owner)throw Error(o(290,f))}return f}function $p(f,d){throw f=Object.prototype.toString.call(d),Error(o(31,f==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":f))}function tM(f){var d=f._init;return d(f._payload)}function nM(f){function d(ge,fe){if(f){var Ae=ge.deletions;Ae===null?(ge.deletions=[fe],ge.flags|=16):Ae.push(fe)}}function y(ge,fe){if(!f)return null;for(;fe!==null;)d(ge,fe),fe=fe.sibling;return null}function C(ge,fe){for(ge=new Map;fe!==null;)fe.key!==null?ge.set(fe.key,fe):ge.set(fe.index,fe),fe=fe.sibling;return ge}function M(ge,fe){return ge=aa(ge,fe),ge.index=0,ge.sibling=null,ge}function R(ge,fe,Ae){return ge.index=Ae,f?(Ae=ge.alternate,Ae!==null?(Ae=Ae.index,Ae<fe?(ge.flags|=2,fe):Ae):(ge.flags|=2,fe)):(ge.flags|=1048576,fe)}function K(ge){return f&&ge.alternate===null&&(ge.flags|=2),ge}function le(ge,fe,Ae,rt){return fe===null||fe.tag!==6?(fe=Qy(Ae,ge.mode,rt),fe.return=ge,fe):(fe=M(fe,Ae),fe.return=ge,fe)}function Me(ge,fe,Ae,rt){var gt=Ae.type;return gt===c?ut(ge,fe,Ae.props.children,rt,Ae.key):fe!==null&&(fe.elementType===gt||typeof gt=="object"&&gt!==null&&gt.$$typeof===x&&tM(gt)===fe.type)?(rt=M(fe,Ae.props),rt.ref=$f(ge,fe,Ae),rt.return=ge,rt):(rt=Pm(Ae.type,Ae.key,Ae.props,null,ge.mode,rt),rt.ref=$f(ge,fe,Ae),rt.return=ge,rt)}function We(ge,fe,Ae,rt){return fe===null||fe.tag!==4||fe.stateNode.containerInfo!==Ae.containerInfo||fe.stateNode.implementation!==Ae.implementation?(fe=$y(Ae,ge.mode,rt),fe.return=ge,fe):(fe=M(fe,Ae.children||[]),fe.return=ge,fe)}function ut(ge,fe,Ae,rt,gt){return fe===null||fe.tag!==7?(fe=bl(Ae,ge.mode,rt,gt),fe.return=ge,fe):(fe=M(fe,Ae),fe.return=ge,fe)}function Pt(ge,fe,Ae){if(typeof fe=="string"&&fe!==""||typeof fe=="number")return fe=Qy(""+fe,ge.mode,Ae),fe.return=ge,fe;if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case l:return Ae=Pm(fe.type,fe.key,fe.props,null,ge.mode,Ae),Ae.ref=$f(ge,null,fe),Ae.return=ge,Ae;case u:return fe=$y(fe,ge.mode,Ae),fe.return=ge,fe;case x:var rt=fe._init;return Pt(ge,rt(fe._payload),Ae)}if(se(fe)||T(fe))return fe=bl(fe,ge.mode,Ae,null),fe.return=ge,fe;$p(ge,fe)}return null}function Ct(ge,fe,Ae,rt){var gt=fe!==null?fe.key:null;if(typeof Ae=="string"&&Ae!==""||typeof Ae=="number")return gt!==null?null:le(ge,fe,""+Ae,rt);if(typeof Ae=="object"&&Ae!==null){switch(Ae.$$typeof){case l:return Ae.key===gt?Me(ge,fe,Ae,rt):null;case u:return Ae.key===gt?We(ge,fe,Ae,rt):null;case x:return gt=Ae._init,Ct(ge,fe,gt(Ae._payload),rt)}if(se(Ae)||T(Ae))return gt!==null?null:ut(ge,fe,Ae,rt,null);$p(ge,Ae)}return null}function hn(ge,fe,Ae,rt,gt){if(typeof rt=="string"&&rt!==""||typeof rt=="number")return ge=ge.get(Ae)||null,le(fe,ge,""+rt,gt);if(typeof rt=="object"&&rt!==null){switch(rt.$$typeof){case l:return ge=ge.get(rt.key===null?Ae:rt.key)||null,Me(fe,ge,rt,gt);case u:return ge=ge.get(rt.key===null?Ae:rt.key)||null,We(fe,ge,rt,gt);case x:var Ut=rt._init;return hn(ge,fe,Ae,Ut(rt._payload),gt)}if(se(rt)||T(rt))return ge=ge.get(Ae)||null,ut(fe,ge,rt,gt,null);$p(fe,rt)}return null}function vt(ge,fe,Ae,rt){for(var gt=null,Ut=null,Bt=fe,tn=fe=0,fi=null;Bt!==null&&tn<Ae.length;tn++){Bt.index>tn?(fi=Bt,Bt=null):fi=Bt.sibling;var nn=Ct(ge,Bt,Ae[tn],rt);if(nn===null){Bt===null&&(Bt=fi);break}f&&Bt&&nn.alternate===null&&d(ge,Bt),fe=R(nn,fe,tn),Ut===null?gt=nn:Ut.sibling=nn,Ut=nn,Bt=fi}if(tn===Ae.length)return y(ge,Bt),Sn&&Al(ge,tn),gt;if(Bt===null){for(;tn<Ae.length;tn++)Bt=Pt(ge,Ae[tn],rt),Bt!==null&&(fe=R(Bt,fe,tn),Ut===null?gt=Bt:Ut.sibling=Bt,Ut=Bt);return Sn&&Al(ge,tn),gt}for(Bt=C(ge,Bt);tn<Ae.length;tn++)fi=hn(Bt,ge,tn,Ae[tn],rt),fi!==null&&(f&&fi.alternate!==null&&Bt.delete(fi.key===null?tn:fi.key),fe=R(fi,fe,tn),Ut===null?gt=fi:Ut.sibling=fi,Ut=fi);return f&&Bt.forEach(function(la){return d(ge,la)}),Sn&&Al(ge,tn),gt}function Ii(ge,fe,Ae,rt){var gt=T(Ae);if(typeof gt!="function")throw Error(o(150));if(Ae=gt.call(Ae),Ae==null)throw Error(o(151));for(var Ut=gt=null,Bt=fe,tn=fe=0,fi=null,nn=Ae.next();Bt!==null&&!nn.done;tn++,nn=Ae.next()){Bt.index>tn?(fi=Bt,Bt=null):fi=Bt.sibling;var la=Ct(ge,Bt,nn.value,rt);if(la===null){Bt===null&&(Bt=fi);break}f&&Bt&&la.alternate===null&&d(ge,Bt),fe=R(la,fe,tn),Ut===null?gt=la:Ut.sibling=la,Ut=la,Bt=fi}if(nn.done)return y(ge,Bt),Sn&&Al(ge,tn),gt;if(Bt===null){for(;!nn.done;tn++,nn=Ae.next())nn=Pt(ge,nn.value,rt),nn!==null&&(fe=R(nn,fe,tn),Ut===null?gt=nn:Ut.sibling=nn,Ut=nn);return Sn&&Al(ge,tn),gt}for(Bt=C(ge,Bt);!nn.done;tn++,nn=Ae.next())nn=hn(Bt,ge,tn,nn.value,rt),nn!==null&&(f&&nn.alternate!==null&&Bt.delete(nn.key===null?tn:nn.key),fe=R(nn,fe,tn),Ut===null?gt=nn:Ut.sibling=nn,Ut=nn);return f&&Bt.forEach(function(WD){return d(ge,WD)}),Sn&&Al(ge,tn),gt}function Kr(ge,fe,Ae,rt){if(typeof Ae=="object"&&Ae!==null&&Ae.type===c&&Ae.key===null&&(Ae=Ae.props.children),typeof Ae=="object"&&Ae!==null){switch(Ae.$$typeof){case l:e:{for(var gt=Ae.key,Ut=fe;Ut!==null;){if(Ut.key===gt){if(gt=Ae.type,gt===c){if(Ut.tag===7){y(ge,Ut.sibling),fe=M(Ut,Ae.props.children),fe.return=ge,ge=fe;break e}}else if(Ut.elementType===gt||typeof gt=="object"&&gt!==null&&gt.$$typeof===x&&tM(gt)===Ut.type){y(ge,Ut.sibling),fe=M(Ut,Ae.props),fe.ref=$f(ge,Ut,Ae),fe.return=ge,ge=fe;break e}y(ge,Ut);break}else d(ge,Ut);Ut=Ut.sibling}Ae.type===c?(fe=bl(Ae.props.children,ge.mode,rt,Ae.key),fe.return=ge,ge=fe):(rt=Pm(Ae.type,Ae.key,Ae.props,null,ge.mode,rt),rt.ref=$f(ge,fe,Ae),rt.return=ge,ge=rt)}return K(ge);case u:e:{for(Ut=Ae.key;fe!==null;){if(fe.key===Ut)if(fe.tag===4&&fe.stateNode.containerInfo===Ae.containerInfo&&fe.stateNode.implementation===Ae.implementation){y(ge,fe.sibling),fe=M(fe,Ae.children||[]),fe.return=ge,ge=fe;break e}else{y(ge,fe);break}else d(ge,fe);fe=fe.sibling}fe=$y(Ae,ge.mode,rt),fe.return=ge,ge=fe}return K(ge);case x:return Ut=Ae._init,Kr(ge,fe,Ut(Ae._payload),rt)}if(se(Ae))return vt(ge,fe,Ae,rt);if(T(Ae))return Ii(ge,fe,Ae,rt);$p(ge,Ae)}return typeof Ae=="string"&&Ae!==""||typeof Ae=="number"?(Ae=""+Ae,fe!==null&&fe.tag===6?(y(ge,fe.sibling),fe=M(fe,Ae),fe.return=ge,ge=fe):(y(ge,fe),fe=Qy(Ae,ge.mode,rt),fe.return=ge,ge=fe),K(ge)):y(ge,fe)}return Kr}var Ku=nM(!0),iM=nM(!1),eh={},Wr=Rt(eh),th=Rt(eh),Yu=Rt(eh);function Hs(f){if(f===eh)throw Error(o(174));return f}function gy(f,d){Ye(Yu,d),Ye(th,f),Ye(Wr,eh),f=pe(d),ot(Wr),Ye(Wr,f)}function Zu(){ot(Wr),ot(th),ot(Yu)}function rM(f){var d=Hs(Yu.current),y=Hs(Wr.current);d=N(y,f.type,d),y!==d&&(Ye(th,f),Ye(Wr,d))}function vy(f){th.current===f&&(ot(Wr),ot(th))}var wn=Rt(0);function em(f){for(var d=f;d!==null;){if(d.tag===13){var y=d.memoizedState;if(y!==null&&(y=y.dehydrated,y===null||Fs(y)||yl(y)))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if(d.flags&128)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===f)break;for(;d.sibling===null;){if(d.return===null||d.return===f)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var yy=[];function _y(){for(var f=0;f<yy.length;f++){var d=yy[f];Et?d._workInProgressVersionPrimary=null:d._workInProgressVersionSecondary=null}yy.length=0}var tm=a.ReactCurrentDispatcher,jr=a.ReactCurrentBatchConfig,qu=0,Nn=null,Ri=null,ci=null,nm=!1,nh=!1,ih=0,mD=0;function Pi(){throw Error(o(321))}function xy(f,d){if(d===null)return!1;for(var y=0;y<d.length&&y<f.length;y++)if(!Us(f[y],d[y]))return!1;return!0}function Ay(f,d,y,C,M,R){if(qu=R,Nn=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,tm.current=f===null||f.memoizedState===null?_D:xD,f=y(C,M),nh){R=0;do{if(nh=!1,ih=0,25<=R)throw Error(o(301));R+=1,ci=Ri=null,d.updateQueue=null,tm.current=AD,f=y(C,M)}while(nh)}if(tm.current=am,d=Ri!==null&&Ri.next!==null,qu=0,ci=Ri=Nn=null,nm=!1,d)throw Error(o(300));return f}function Sy(){var f=ih!==0;return ih=0,f}function _o(){var f={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ci===null?Nn.memoizedState=ci=f:ci=ci.next=f,ci}function Gs(){if(Ri===null){var f=Nn.alternate;f=f!==null?f.memoizedState:null}else f=Ri.next;var d=ci===null?Nn.memoizedState:ci.next;if(d!==null)ci=d,Ri=f;else{if(f===null)throw Error(o(310));Ri=f,f={memoizedState:Ri.memoizedState,baseState:Ri.baseState,baseQueue:Ri.baseQueue,queue:Ri.queue,next:null},ci===null?Nn.memoizedState=ci=f:ci=ci.next=f}return ci}function Sl(f,d){return typeof d=="function"?d(f):d}function im(f){var d=Gs(),y=d.queue;if(y===null)throw Error(o(311));y.lastRenderedReducer=f;var C=Ri,M=C.baseQueue,R=y.pending;if(R!==null){if(M!==null){var K=M.next;M.next=R.next,R.next=K}C.baseQueue=M=R,y.pending=null}if(M!==null){R=M.next,C=C.baseState;var le=K=null,Me=null,We=R;do{var ut=We.lane;if((qu&ut)===ut)Me!==null&&(Me=Me.next={lane:0,action:We.action,hasEagerState:We.hasEagerState,eagerState:We.eagerState,next:null}),C=We.hasEagerState?We.eagerState:f(C,We.action);else{var Pt={lane:ut,action:We.action,hasEagerState:We.hasEagerState,eagerState:We.eagerState,next:null};Me===null?(le=Me=Pt,K=C):Me=Me.next=Pt,Nn.lanes|=ut,$u|=ut}We=We.next}while(We!==null&&We!==R);Me===null?K=C:Me.next=le,Us(C,d.memoizedState)||(Ar=!0),d.memoizedState=C,d.baseState=K,d.baseQueue=Me,y.lastRenderedState=C}if(f=y.interleaved,f!==null){M=f;do R=M.lane,Nn.lanes|=R,$u|=R,M=M.next;while(M!==f)}else M===null&&(y.lanes=0);return[d.memoizedState,y.dispatch]}function rm(f){var d=Gs(),y=d.queue;if(y===null)throw Error(o(311));y.lastRenderedReducer=f;var C=y.dispatch,M=y.pending,R=d.memoizedState;if(M!==null){y.pending=null;var K=M=M.next;do R=f(R,K.action),K=K.next;while(K!==M);Us(R,d.memoizedState)||(Ar=!0),d.memoizedState=R,d.baseQueue===null&&(d.baseState=R),y.lastRenderedState=R}return[R,C]}function sM(){}function oM(f,d){var y=Nn,C=Gs(),M=d(),R=!Us(C.memoizedState,M);if(R&&(C.memoizedState=M,Ar=!0),C=C.queue,sh(uM.bind(null,y,C,f),[f]),C.getSnapshot!==d||R||ci!==null&&ci.memoizedState.tag&1){if(y.flags|=2048,rh(9,lM.bind(null,y,C,M,d),void 0,null),Zn===null)throw Error(o(349));qu&30||aM(y,d,M)}return M}function aM(f,d,y){f.flags|=16384,f={getSnapshot:d,value:y},d=Nn.updateQueue,d===null?(d={lastEffect:null,stores:null},Nn.updateQueue=d,d.stores=[f]):(y=d.stores,y===null?d.stores=[f]:y.push(f))}function lM(f,d,y,C){d.value=y,d.getSnapshot=C,cM(d)&&Xr(f,1,-1)}function uM(f,d,y){return y(function(){cM(d)&&Xr(f,1,-1)})}function cM(f){var d=f.getSnapshot;f=f.value;try{var y=d();return!Us(f,y)}catch{return!0}}function Cy(f){var d=_o();return typeof f=="function"&&(f=f()),d.memoizedState=d.baseState=f,f={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Sl,lastRenderedState:f},d.queue=f,f=f.dispatch=yD.bind(null,Nn,f),[d.memoizedState,f]}function rh(f,d,y,C){return f={tag:f,create:d,destroy:y,deps:C,next:null},d=Nn.updateQueue,d===null?(d={lastEffect:null,stores:null},Nn.updateQueue=d,d.lastEffect=f.next=f):(y=d.lastEffect,y===null?d.lastEffect=f.next=f:(C=y.next,y.next=f,f.next=C,d.lastEffect=f)),f}function fM(){return Gs().memoizedState}function sm(f,d,y,C){var M=_o();Nn.flags|=f,M.memoizedState=rh(1|d,y,void 0,C===void 0?null:C)}function om(f,d,y,C){var M=Gs();C=C===void 0?null:C;var R=void 0;if(Ri!==null){var K=Ri.memoizedState;if(R=K.destroy,C!==null&&xy(C,K.deps)){M.memoizedState=rh(d,y,R,C);return}}Nn.flags|=f,M.memoizedState=rh(1|d,y,R,C)}function Ey(f,d){return sm(8390656,8,f,d)}function sh(f,d){return om(2048,8,f,d)}function hM(f,d){return om(4,2,f,d)}function dM(f,d){return om(4,4,f,d)}function pM(f,d){if(typeof d=="function")return f=f(),d(f),function(){d(null)};if(d!=null)return f=f(),d.current=f,function(){d.current=null}}function mM(f,d,y){return y=y!=null?y.concat([f]):null,om(4,4,pM.bind(null,d,f),y)}function My(){}function gM(f,d){var y=Gs();d=d===void 0?null:d;var C=y.memoizedState;return C!==null&&d!==null&&xy(d,C[1])?C[0]:(y.memoizedState=[f,d],f)}function vM(f,d){var y=Gs();d=d===void 0?null:d;var C=y.memoizedState;return C!==null&&d!==null&&xy(d,C[1])?C[0]:(f=f(),y.memoizedState=[f,d],f)}function gD(f,d){var y=en;en=y!==0&&4>y?y:4,f(!0);var C=jr.transition;jr.transition={};try{f(!1),d()}finally{en=y,jr.transition=C}}function yM(){return Gs().memoizedState}function vD(f,d,y){var C=sa(f);y={lane:C,action:y,hasEagerState:!1,eagerState:null,next:null},_M(f)?xM(d,y):(AM(f,d,y),y=Ki(),f=Xr(f,C,y),f!==null&&SM(f,d,C))}function yD(f,d,y){var C=sa(f),M={lane:C,action:y,hasEagerState:!1,eagerState:null,next:null};if(_M(f))xM(d,M);else{AM(f,d,M);var R=f.alternate;if(f.lanes===0&&(R===null||R.lanes===0)&&(R=d.lastRenderedReducer,R!==null))try{var K=d.lastRenderedState,le=R(K,y);if(M.hasEagerState=!0,M.eagerState=le,Us(le,K))return}catch{}finally{}y=Ki(),f=Xr(f,C,y),f!==null&&SM(f,d,C)}}function _M(f){var d=f.alternate;return f===Nn||d!==null&&d===Nn}function xM(f,d){nh=nm=!0;var y=f.pending;y===null?d.next=d:(d.next=y.next,y.next=d),f.pending=d}function AM(f,d,y){Zn!==null&&f.mode&1&&!(zt&2)?(f=d.interleaved,f===null?(y.next=y,zs===null?zs=[d]:zs.push(d)):(y.next=f.next,f.next=y),d.interleaved=y):(f=d.pending,f===null?y.next=y:(y.next=f.next,f.next=y),d.pending=y)}function SM(f,d,y){if(y&4194240){var C=d.lanes;C&=f.pendingLanes,y|=C,d.lanes=y,$v(f,y)}}var am={readContext:Hr,useCallback:Pi,useContext:Pi,useEffect:Pi,useImperativeHandle:Pi,useInsertionEffect:Pi,useLayoutEffect:Pi,useMemo:Pi,useReducer:Pi,useRef:Pi,useState:Pi,useDebugValue:Pi,useDeferredValue:Pi,useTransition:Pi,useMutableSource:Pi,useSyncExternalStore:Pi,useId:Pi,unstable_isNewReconciler:!1},_D={readContext:Hr,useCallback:function(f,d){return _o().memoizedState=[f,d===void 0?null:d],f},useContext:Hr,useEffect:Ey,useImperativeHandle:function(f,d,y){return y=y!=null?y.concat([f]):null,sm(4194308,4,pM.bind(null,d,f),y)},useLayoutEffect:function(f,d){return sm(4194308,4,f,d)},useInsertionEffect:function(f,d){return sm(4,2,f,d)},useMemo:function(f,d){var y=_o();return d=d===void 0?null:d,f=f(),y.memoizedState=[f,d],f},useReducer:function(f,d,y){var C=_o();return d=y!==void 0?y(d):d,C.memoizedState=C.baseState=d,f={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:f,lastRenderedState:d},C.queue=f,f=f.dispatch=vD.bind(null,Nn,f),[C.memoizedState,f]},useRef:function(f){var d=_o();return f={current:f},d.memoizedState=f},useState:Cy,useDebugValue:My,useDeferredValue:function(f){var d=Cy(f),y=d[0],C=d[1];return Ey(function(){var M=jr.transition;jr.transition={};try{C(f)}finally{jr.transition=M}},[f]),y},useTransition:function(){var f=Cy(!1),d=f[0];return f=gD.bind(null,f[1]),_o().memoizedState=f,[d,f]},useMutableSource:function(){},useSyncExternalStore:function(f,d,y){var C=Nn,M=_o();if(Sn){if(y===void 0)throw Error(o(407));y=y()}else{if(y=d(),Zn===null)throw Error(o(349));qu&30||aM(C,d,y)}M.memoizedState=y;var R={value:y,getSnapshot:d};return M.queue=R,Ey(uM.bind(null,C,R,f),[f]),C.flags|=2048,rh(9,lM.bind(null,C,R,y,d),void 0,null),y},useId:function(){var f=_o(),d=Zn.identifierPrefix;if(Sn){var y=yo,C=vo;y=(C&~(1<<32-dn(C)-1)).toString(32)+y,d=":"+d+"R"+y,y=ih++,0<y&&(d+="H"+y.toString(32)),d+=":"}else y=mD++,d=":"+d+"r"+y.toString(32)+":";return f.memoizedState=d},unstable_isNewReconciler:!1},xD={readContext:Hr,useCallback:gM,useContext:Hr,useEffect:sh,useImperativeHandle:mM,useInsertionEffect:hM,useLayoutEffect:dM,useMemo:vM,useReducer:im,useRef:fM,useState:function(){return im(Sl)},useDebugValue:My,useDeferredValue:function(f){var d=im(Sl),y=d[0],C=d[1];return sh(function(){var M=jr.transition;jr.transition={};try{C(f)}finally{jr.transition=M}},[f]),y},useTransition:function(){var f=im(Sl)[0],d=Gs().memoizedState;return[f,d]},useMutableSource:sM,useSyncExternalStore:oM,useId:yM,unstable_isNewReconciler:!1},AD={readContext:Hr,useCallback:gM,useContext:Hr,useEffect:sh,useImperativeHandle:mM,useInsertionEffect:hM,useLayoutEffect:dM,useMemo:vM,useReducer:rm,useRef:fM,useState:function(){return rm(Sl)},useDebugValue:My,useDeferredValue:function(f){var d=rm(Sl),y=d[0],C=d[1];return sh(function(){var M=jr.transition;jr.transition={};try{C(f)}finally{jr.transition=M}},[f]),y},useTransition:function(){var f=rm(Sl)[0],d=Gs().memoizedState;return[f,d]},useMutableSource:sM,useSyncExternalStore:oM,useId:yM,unstable_isNewReconciler:!1};function wy(f,d){try{var y="",C=d;do y+=pD(C),C=C.return;while(C);var M=y}catch(R){M=`
Error generating stack: `+R.message+`
`+R.stack}return{value:f,source:d,stack:M}}function Ty(f,d){try{console.error(d.value)}catch(y){setTimeout(function(){throw y})}}var SD=typeof WeakMap=="function"?WeakMap:Map;function CM(f,d,y){y=go(-1,y),y.tag=3,y.payload={element:null};var C=d.value;return y.callback=function(){Cm||(Cm=!0,jy=C),Ty(f,d)},y}function EM(f,d,y){y=go(-1,y),y.tag=3;var C=f.type.getDerivedStateFromError;if(typeof C=="function"){var M=d.value;y.payload=function(){return C(M)},y.callback=function(){Ty(f,d)}}var R=f.stateNode;return R!==null&&typeof R.componentDidCatch=="function"&&(y.callback=function(){Ty(f,d),typeof C!="function"&&(ia===null?ia=new Set([this]):ia.add(this));var K=d.stack;this.componentDidCatch(d.value,{componentStack:K!==null?K:""})}),y}function MM(f,d,y){var C=f.pingCache;if(C===null){C=f.pingCache=new SD;var M=new Set;C.set(d,M)}else M=C.get(d),M===void 0&&(M=new Set,C.set(d,M));M.has(y)||(M.add(y),f=ND.bind(null,f,d,y),d.then(f,f))}function wM(f){do{var d;if((d=f.tag===13)&&(d=f.memoizedState,d=d!==null?d.dehydrated!==null:!0),d)return f;f=f.return}while(f!==null);return null}function TM(f,d,y,C,M){return f.mode&1?(f.flags|=65536,f.lanes=M,f):(f===d?f.flags|=65536:(f.flags|=128,y.flags|=131072,y.flags&=-52805,y.tag===1&&(y.alternate===null?y.tag=17:(d=go(-1,1),d.tag=2,na(y,d))),y.lanes|=1),f)}function Vs(f){f.flags|=4}function bM(f,d){if(f!==null&&f.child===d.child)return!0;if(d.flags&16)return!1;for(f=d.child;f!==null;){if(f.flags&12854||f.subtreeFlags&12854)return!1;f=f.sibling}return!0}var oh,ah,lm,um;if(et)oh=function(f,d){for(var y=d.child;y!==null;){if(y.tag===5||y.tag===6)me(f,y.stateNode);else if(y.tag!==4&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===d)break;for(;y.sibling===null;){if(y.return===null||y.return===d)return;y=y.return}y.sibling.return=y.return,y=y.sibling}},ah=function(){},lm=function(f,d,y,C,M){if(f=f.memoizedProps,f!==C){var R=d.stateNode,K=Hs(Wr.current);y=he(R,y,f,C,M,K),(d.updateQueue=y)&&Vs(d)}},um=function(f,d,y,C){y!==C&&Vs(d)};else if(Z){oh=function(f,d,y,C){for(var M=d.child;M!==null;){if(M.tag===5){var R=M.stateNode;y&&C&&(R=cn(R,M.type,M.memoizedProps,M)),me(f,R)}else if(M.tag===6)R=M.stateNode,y&&C&&(R=En(R,M.memoizedProps,M)),me(f,R);else if(M.tag!==4){if(M.tag===22&&M.memoizedState!==null)R=M.child,R!==null&&(R.return=M),oh(f,M,!0,!0);else if(M.child!==null){M.child.return=M,M=M.child;continue}}if(M===d)break;for(;M.sibling===null;){if(M.return===null||M.return===d)return;M=M.return}M.sibling.return=M.return,M=M.sibling}};var RM=function(f,d,y,C){for(var M=d.child;M!==null;){if(M.tag===5){var R=M.stateNode;y&&C&&(R=cn(R,M.type,M.memoizedProps,M)),Je(f,R)}else if(M.tag===6)R=M.stateNode,y&&C&&(R=En(R,M.memoizedProps,M)),Je(f,R);else if(M.tag!==4){if(M.tag===22&&M.memoizedState!==null)R=M.child,R!==null&&(R.return=M),RM(f,M,!0,!0);else if(M.child!==null){M.child.return=M,M=M.child;continue}}if(M===d)break;for(;M.sibling===null;){if(M.return===null||M.return===d)return;M=M.return}M.sibling.return=M.return,M=M.sibling}};ah=function(f,d){var y=d.stateNode;if(!bM(f,d)){f=y.containerInfo;var C=Ve(f);RM(C,d,!1,!1),y.pendingChildren=C,Vs(d),Mt(f,C)}},lm=function(f,d,y,C,M){var R=f.stateNode,K=f.memoizedProps;if((f=bM(f,d))&&K===C)d.stateNode=R;else{var le=d.stateNode,Me=Hs(Wr.current),We=null;K!==C&&(We=he(le,y,K,C,M,Me)),f&&We===null?d.stateNode=R:(R=_e(R,We,y,K,C,d,f,le),Ue(R,y,C,M,Me)&&Vs(d),d.stateNode=R,f?Vs(d):oh(R,d,!1,!1))}},um=function(f,d,y,C){y!==C?(f=Hs(Yu.current),y=Hs(Wr.current),d.stateNode=we(C,f,y,d),Vs(d)):d.stateNode=f.stateNode}}else ah=function(){},lm=function(){},um=function(){};function lh(f,d){if(!Sn)switch(f.tailMode){case"hidden":d=f.tail;for(var y=null;d!==null;)d.alternate!==null&&(y=d),d=d.sibling;y===null?f.tail=null:y.sibling=null;break;case"collapsed":y=f.tail;for(var C=null;y!==null;)y.alternate!==null&&(C=y),y=y.sibling;C===null?d||f.tail===null?f.tail=null:f.tail.sibling=null:C.sibling=null}}function Bi(f){var d=f.alternate!==null&&f.alternate.child===f.child,y=0,C=0;if(d)for(var M=f.child;M!==null;)y|=M.lanes|M.childLanes,C|=M.subtreeFlags&14680064,C|=M.flags&14680064,M.return=f,M=M.sibling;else for(M=f.child;M!==null;)y|=M.lanes|M.childLanes,C|=M.subtreeFlags,C|=M.flags,M.return=f,M=M.sibling;return f.subtreeFlags|=C,f.childLanes=y,d}function CD(f,d,y){var C=d.pendingProps;switch(hy(d),d.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Bi(d),null;case 1:return An(d.type)&&Kt(),Bi(d),null;case 3:return C=d.stateNode,Zu(),ot(Tt),ot(St),_y(),C.pendingContext&&(C.context=C.pendingContext,C.pendingContext=null),(f===null||f.child===null)&&(Qf(d)?Vs(d):f===null||f.memoizedState.isDehydrated&&!(d.flags&256)||(d.flags|=1024,ms!==null&&(Ky(ms),ms=null))),ah(f,d),Bi(d),null;case 5:vy(d),y=Hs(Yu.current);var M=d.type;if(f!==null&&d.stateNode!=null)lm(f,d,M,C,y),f.ref!==d.ref&&(d.flags|=512,d.flags|=2097152);else{if(!C){if(d.stateNode===null)throw Error(o(166));return Bi(d),null}if(f=Hs(Wr.current),Qf(d)){if(!De)throw Error(o(175));f=F(d.stateNode,d.type,d.memoizedProps,y,f,d,!qf),d.updateQueue=f,f!==null&&Vs(d)}else{var R=ae(M,C,y,f,d);oh(R,d,!1,!1),d.stateNode=R,Ue(R,M,C,y,f)&&Vs(d)}d.ref!==null&&(d.flags|=512,d.flags|=2097152)}return Bi(d),null;case 6:if(f&&d.stateNode!=null)um(f,d,f.memoizedProps,C);else{if(typeof C!="string"&&d.stateNode===null)throw Error(o(166));if(f=Hs(Yu.current),y=Hs(Wr.current),Qf(d)){if(!De)throw Error(o(176));if(f=d.stateNode,C=d.memoizedProps,(y=U(f,C,d,!qf))&&(M=_r,M!==null))switch(R=(M.mode&1)!==0,M.tag){case 3:xe(M.stateNode.containerInfo,f,C,R);break;case 5:Ee(M.type,M.memoizedProps,M.stateNode,f,C,R)}y&&Vs(d)}else d.stateNode=we(C,f,y,d)}return Bi(d),null;case 13:if(ot(wn),C=d.memoizedState,Sn&&xr!==null&&d.mode&1&&!(d.flags&128)){for(f=xr;f;)f=sr(f);return Ju(),d.flags|=98560,d}if(C!==null&&C.dehydrated!==null){if(C=Qf(d),f===null){if(!C)throw Error(o(318));if(!De)throw Error(o(344));if(f=d.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(o(317));te(f,d)}else Ju(),!(d.flags&128)&&(d.memoizedState=null),d.flags|=4;return Bi(d),null}return ms!==null&&(Ky(ms),ms=null),d.flags&128?(d.lanes=y,d):(C=C!==null,y=!1,f===null?Qf(d):y=f.memoizedState!==null,C&&!y&&(d.child.flags|=8192,d.mode&1&&(f===null||wn.current&1?ii===0&&(ii=3):Zy())),d.updateQueue!==null&&(d.flags|=4),Bi(d),null);case 4:return Zu(),ah(f,d),f===null&&ze(d.stateNode.containerInfo),Bi(d),null;case 10:return oy(d.type._context),Bi(d),null;case 17:return An(d.type)&&Kt(),Bi(d),null;case 19:if(ot(wn),M=d.memoizedState,M===null)return Bi(d),null;if(C=(d.flags&128)!==0,R=M.rendering,R===null)if(C)lh(M,!1);else{if(ii!==0||f!==null&&f.flags&128)for(f=d.child;f!==null;){if(R=em(f),R!==null){for(d.flags|=128,lh(M,!1),f=R.updateQueue,f!==null&&(d.updateQueue=f,d.flags|=4),d.subtreeFlags=0,f=y,C=d.child;C!==null;)y=C,M=f,y.flags&=14680066,R=y.alternate,R===null?(y.childLanes=0,y.lanes=M,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=R.childLanes,y.lanes=R.lanes,y.child=R.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=R.memoizedProps,y.memoizedState=R.memoizedState,y.updateQueue=R.updateQueue,y.type=R.type,M=R.dependencies,y.dependencies=M===null?null:{lanes:M.lanes,firstContext:M.firstContext}),C=C.sibling;return Ye(wn,wn.current&1|2),d.child}f=f.sibling}M.tail!==null&&ui()>Wy&&(d.flags|=128,C=!0,lh(M,!1),d.lanes=4194304)}else{if(!C)if(f=em(R),f!==null){if(d.flags|=128,C=!0,f=f.updateQueue,f!==null&&(d.updateQueue=f,d.flags|=4),lh(M,!0),M.tail===null&&M.tailMode==="hidden"&&!R.alternate&&!Sn)return Bi(d),null}else 2*ui()-M.renderingStartTime>Wy&&y!==1073741824&&(d.flags|=128,C=!0,lh(M,!1),d.lanes=4194304);M.isBackwards?(R.sibling=d.child,d.child=R):(f=M.last,f!==null?f.sibling=R:d.child=R,M.last=R)}return M.tail!==null?(d=M.tail,M.rendering=d,M.tail=d.sibling,M.renderingStartTime=ui(),d.sibling=null,f=wn.current,Ye(wn,C?f&1|2:f&1),d):(Bi(d),null);case 22:case 23:return Yy(),C=d.memoizedState!==null,f!==null&&f.memoizedState!==null!==C&&(d.flags|=8192),C&&d.mode&1?Sr&1073741824&&(Bi(d),et&&d.subtreeFlags&6&&(d.flags|=8192)):Bi(d),null;case 24:return null;case 25:return null}throw Error(o(156,d.tag))}var ED=a.ReactCurrentOwner,Ar=!1;function Ji(f,d,y,C){d.child=f===null?iM(d,null,y,C):Ku(d,f.child,y,C)}function PM(f,d,y,C,M){y=y.render;var R=d.ref;return Wu(d,M),C=Ay(f,d,y,C,R,M),y=Sy(),f!==null&&!Ar?(d.updateQueue=f.updateQueue,d.flags&=-2053,f.lanes&=~M,xo(f,d,M)):(Sn&&y&&fy(d),d.flags|=1,Ji(f,d,C,M),d.child)}function BM(f,d,y,C,M){if(f===null){var R=y.type;return typeof R=="function"&&!qy(R)&&R.defaultProps===void 0&&y.compare===null&&y.defaultProps===void 0?(d.tag=15,d.type=R,IM(f,d,R,C,M)):(f=Pm(y.type,null,C,d,d.mode,M),f.ref=d.ref,f.return=d,d.child=f)}if(R=f.child,!(f.lanes&M)){var K=R.memoizedProps;if(y=y.compare,y=y!==null?y:jp,y(K,C)&&f.ref===d.ref)return xo(f,d,M)}return d.flags|=1,f=aa(R,C),f.ref=d.ref,f.return=d,d.child=f}function IM(f,d,y,C,M){if(f!==null&&jp(f.memoizedProps,C)&&f.ref===d.ref)if(Ar=!1,(f.lanes&M)!==0)f.flags&131072&&(Ar=!0);else return d.lanes=f.lanes,xo(f,d,M);return by(f,d,y,C,M)}function LM(f,d,y){var C=d.pendingProps,M=C.children,R=f!==null?f.memoizedState:null;if(C.mode==="hidden")if(!(d.mode&1))d.memoizedState={baseLanes:0,cachePool:null},Ye(Qu,Sr),Sr|=y;else if(y&1073741824)d.memoizedState={baseLanes:0,cachePool:null},C=R!==null?R.baseLanes:y,Ye(Qu,Sr),Sr|=C;else return f=R!==null?R.baseLanes|y:y,d.lanes=d.childLanes=1073741824,d.memoizedState={baseLanes:f,cachePool:null},d.updateQueue=null,Ye(Qu,Sr),Sr|=f,null;else R!==null?(C=R.baseLanes|y,d.memoizedState=null):C=y,Ye(Qu,Sr),Sr|=C;return Ji(f,d,M,y),d.child}function DM(f,d){var y=d.ref;(f===null&&y!==null||f!==null&&f.ref!==y)&&(d.flags|=512,d.flags|=2097152)}function by(f,d,y,C,M){var R=An(y)?on:St.current;return R=Fn(d,R),Wu(d,M),y=Ay(f,d,y,C,R,M),C=Sy(),f!==null&&!Ar?(d.updateQueue=f.updateQueue,d.flags&=-2053,f.lanes&=~M,xo(f,d,M)):(Sn&&C&&fy(d),d.flags|=1,Ji(f,d,y,M),d.child)}function FM(f,d,y,C,M){if(An(y)){var R=!0;Dt(d)}else R=!1;if(Wu(d,M),d.stateNode===null)f!==null&&(f.alternate=null,d.alternate=null,d.flags|=2),YE(d,y,C),cy(d,y,C,M),C=!0;else if(f===null){var K=d.stateNode,le=d.memoizedProps;K.props=le;var Me=K.context,We=y.contextType;typeof We=="object"&&We!==null?We=Hr(We):(We=An(y)?on:St.current,We=Fn(d,We));var ut=y.getDerivedStateFromProps,Pt=typeof ut=="function"||typeof K.getSnapshotBeforeUpdate=="function";Pt||typeof K.UNSAFE_componentWillReceiveProps!="function"&&typeof K.componentWillReceiveProps!="function"||(le!==C||Me!==We)&&ZE(d,K,C,We),ta=!1;var Ct=d.memoizedState;K.state=Ct,Yp(d,C,K,M),Me=d.memoizedState,le!==C||Ct!==Me||Tt.current||ta?(typeof ut=="function"&&(uy(d,y,ut,C),Me=d.memoizedState),(le=ta||KE(d,y,le,C,Ct,Me,We))?(Pt||typeof K.UNSAFE_componentWillMount!="function"&&typeof K.componentWillMount!="function"||(typeof K.componentWillMount=="function"&&K.componentWillMount(),typeof K.UNSAFE_componentWillMount=="function"&&K.UNSAFE_componentWillMount()),typeof K.componentDidMount=="function"&&(d.flags|=4194308)):(typeof K.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=C,d.memoizedState=Me),K.props=C,K.state=Me,K.context=We,C=le):(typeof K.componentDidMount=="function"&&(d.flags|=4194308),C=!1)}else{K=d.stateNode,WE(f,d),le=d.memoizedProps,We=d.type===d.elementType?le:ps(d.type,le),K.props=We,Pt=d.pendingProps,Ct=K.context,Me=y.contextType,typeof Me=="object"&&Me!==null?Me=Hr(Me):(Me=An(y)?on:St.current,Me=Fn(d,Me));var hn=y.getDerivedStateFromProps;(ut=typeof hn=="function"||typeof K.getSnapshotBeforeUpdate=="function")||typeof K.UNSAFE_componentWillReceiveProps!="function"&&typeof K.componentWillReceiveProps!="function"||(le!==Pt||Ct!==Me)&&ZE(d,K,C,Me),ta=!1,Ct=d.memoizedState,K.state=Ct,Yp(d,C,K,M);var vt=d.memoizedState;le!==Pt||Ct!==vt||Tt.current||ta?(typeof hn=="function"&&(uy(d,y,hn,C),vt=d.memoizedState),(We=ta||KE(d,y,We,C,Ct,vt,Me)||!1)?(ut||typeof K.UNSAFE_componentWillUpdate!="function"&&typeof K.componentWillUpdate!="function"||(typeof K.componentWillUpdate=="function"&&K.componentWillUpdate(C,vt,Me),typeof K.UNSAFE_componentWillUpdate=="function"&&K.UNSAFE_componentWillUpdate(C,vt,Me)),typeof K.componentDidUpdate=="function"&&(d.flags|=4),typeof K.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof K.componentDidUpdate!="function"||le===f.memoizedProps&&Ct===f.memoizedState||(d.flags|=4),typeof K.getSnapshotBeforeUpdate!="function"||le===f.memoizedProps&&Ct===f.memoizedState||(d.flags|=1024),d.memoizedProps=C,d.memoizedState=vt),K.props=C,K.state=vt,K.context=Me,C=We):(typeof K.componentDidUpdate!="function"||le===f.memoizedProps&&Ct===f.memoizedState||(d.flags|=4),typeof K.getSnapshotBeforeUpdate!="function"||le===f.memoizedProps&&Ct===f.memoizedState||(d.flags|=1024),C=!1)}return Ry(f,d,y,C,R,M)}function Ry(f,d,y,C,M,R){DM(f,d);var K=(d.flags&128)!==0;if(!C&&!K)return M&&Vt(d,y,!1),xo(f,d,R);C=d.stateNode,ED.current=d;var le=K&&typeof y.getDerivedStateFromError!="function"?null:C.render();return d.flags|=1,f!==null&&K?(d.child=Ku(d,f.child,null,R),d.child=Ku(d,null,le,R)):Ji(f,d,le,R),d.memoizedState=C.state,M&&Vt(d,y,!0),d.child}function NM(f){var d=f.stateNode;d.pendingContext?Ht(f,d.pendingContext,d.pendingContext!==d.context):d.context&&Ht(f,d.context,!1),gy(f,d.containerInfo)}function OM(f,d,y,C,M){return Ju(),my(M),d.flags|=256,Ji(f,d,y,C),d.child}var cm={dehydrated:null,treeContext:null,retryLane:0};function fm(f){return{baseLanes:f,cachePool:null}}function UM(f,d,y){var C=d.pendingProps,M=wn.current,R=!1,K=(d.flags&128)!==0,le;if((le=K)||(le=f!==null&&f.memoizedState===null?!1:(M&2)!==0),le?(R=!0,d.flags&=-129):(f===null||f.memoizedState!==null)&&(M|=1),Ye(wn,M&1),f===null)return py(d),f=d.memoizedState,f!==null&&(f=f.dehydrated,f!==null)?(d.mode&1?yl(f)?d.lanes=8:d.lanes=1073741824:d.lanes=1,null):(M=C.children,f=C.fallback,R?(C=d.mode,R=d.child,M={mode:"hidden",children:M},!(C&1)&&R!==null?(R.childLanes=0,R.pendingProps=M):R=Bm(M,C,0,null),f=bl(f,C,y,null),R.return=d,f.return=d,R.sibling=f,d.child=R,d.child.memoizedState=fm(y),d.memoizedState=cm,f):Py(d,M));if(M=f.memoizedState,M!==null){if(le=M.dehydrated,le!==null){if(K)return d.flags&256?(d.flags&=-257,hm(f,d,y,Error(o(422)))):d.memoizedState!==null?(d.child=f.child,d.flags|=128,null):(R=C.fallback,M=d.mode,C=Bm({mode:"visible",children:C.children},M,0,null),R=bl(R,M,y,null),R.flags|=2,C.return=d,R.return=d,C.sibling=R,d.child=C,d.mode&1&&Ku(d,f.child,null,y),d.child.memoizedState=fm(y),d.memoizedState=cm,R);if(!(d.mode&1))d=hm(f,d,y,null);else if(yl(le))d=hm(f,d,y,Error(o(419)));else if(C=(y&f.childLanes)!==0,Ar||C){if(C=Zn,C!==null){switch(y&-y){case 4:R=2;break;case 16:R=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:R=32;break;case 536870912:R=268435456;break;default:R=0}C=R&(C.suspendedLanes|y)?0:R,C!==0&&C!==M.retryLane&&(M.retryLane=C,Xr(f,C,-1))}Zy(),d=hm(f,d,y,Error(o(421)))}else Fs(le)?(d.flags|=128,d.child=f.child,d=OD.bind(null,f),kr(le,d),d=null):(y=M.treeContext,De&&(xr=Gu(le),_r=d,Sn=!0,ms=null,qf=!1,y!==null&&(Gr[Vr++]=vo,Gr[Vr++]=yo,Gr[Vr++]=xl,vo=y.id,yo=y.overflow,xl=d)),d=Py(d,d.pendingProps.children),d.flags|=4096);return d}return R?(C=zM(f,d,C.children,C.fallback,y),R=d.child,M=f.child.memoizedState,R.memoizedState=M===null?fm(y):{baseLanes:M.baseLanes|y,cachePool:null},R.childLanes=f.childLanes&~y,d.memoizedState=cm,C):(y=kM(f,d,C.children,y),d.memoizedState=null,y)}return R?(C=zM(f,d,C.children,C.fallback,y),R=d.child,M=f.child.memoizedState,R.memoizedState=M===null?fm(y):{baseLanes:M.baseLanes|y,cachePool:null},R.childLanes=f.childLanes&~y,d.memoizedState=cm,C):(y=kM(f,d,C.children,y),d.memoizedState=null,y)}function Py(f,d){return d=Bm({mode:"visible",children:d},f.mode,0,null),d.return=f,f.child=d}function kM(f,d,y,C){var M=f.child;return f=M.sibling,y=aa(M,{mode:"visible",children:y}),!(d.mode&1)&&(y.lanes=C),y.return=d,y.sibling=null,f!==null&&(C=d.deletions,C===null?(d.deletions=[f],d.flags|=16):C.push(f)),d.child=y}function zM(f,d,y,C,M){var R=d.mode;f=f.child;var K=f.sibling,le={mode:"hidden",children:y};return!(R&1)&&d.child!==f?(y=d.child,y.childLanes=0,y.pendingProps=le,d.deletions=null):(y=aa(f,le),y.subtreeFlags=f.subtreeFlags&14680064),K!==null?C=aa(K,C):(C=bl(C,R,M,null),C.flags|=2),C.return=d,y.return=d,y.sibling=C,d.child=y,C}function hm(f,d,y,C){return C!==null&&my(C),Ku(d,f.child,null,y),f=Py(d,d.pendingProps.children),f.flags|=2,d.memoizedState=null,f}function HM(f,d,y){f.lanes|=d;var C=f.alternate;C!==null&&(C.lanes|=d),ay(f.return,d,y)}function By(f,d,y,C,M){var R=f.memoizedState;R===null?f.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:C,tail:y,tailMode:M}:(R.isBackwards=d,R.rendering=null,R.renderingStartTime=0,R.last=C,R.tail=y,R.tailMode=M)}function GM(f,d,y){var C=d.pendingProps,M=C.revealOrder,R=C.tail;if(Ji(f,d,C.children,y),C=wn.current,C&2)C=C&1|2,d.flags|=128;else{if(f!==null&&f.flags&128)e:for(f=d.child;f!==null;){if(f.tag===13)f.memoizedState!==null&&HM(f,y,d);else if(f.tag===19)HM(f,y,d);else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===d)break e;for(;f.sibling===null;){if(f.return===null||f.return===d)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}C&=1}if(Ye(wn,C),!(d.mode&1))d.memoizedState=null;else switch(M){case"forwards":for(y=d.child,M=null;y!==null;)f=y.alternate,f!==null&&em(f)===null&&(M=y),y=y.sibling;y=M,y===null?(M=d.child,d.child=null):(M=y.sibling,y.sibling=null),By(d,!1,M,y,R);break;case"backwards":for(y=null,M=d.child,d.child=null;M!==null;){if(f=M.alternate,f!==null&&em(f)===null){d.child=M;break}f=M.sibling,M.sibling=y,y=M,M=f}By(d,!0,y,null,R);break;case"together":By(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function xo(f,d,y){if(f!==null&&(d.dependencies=f.dependencies),$u|=d.lanes,!(y&d.childLanes))return null;if(f!==null&&d.child!==f.child)throw Error(o(153));if(d.child!==null){for(f=d.child,y=aa(f,f.pendingProps),d.child=y,y.return=d;f.sibling!==null;)f=f.sibling,y=y.sibling=aa(f,f.pendingProps),y.return=d;y.sibling=null}return d.child}function MD(f,d,y){switch(d.tag){case 3:NM(d),Ju();break;case 5:rM(d);break;case 1:An(d.type)&&Dt(d);break;case 4:gy(d,d.stateNode.containerInfo);break;case 10:VE(d,d.type._context,d.memoizedProps.value);break;case 13:var C=d.memoizedState;if(C!==null)return C.dehydrated!==null?(Ye(wn,wn.current&1),d.flags|=128,null):y&d.child.childLanes?UM(f,d,y):(Ye(wn,wn.current&1),f=xo(f,d,y),f!==null?f.sibling:null);Ye(wn,wn.current&1);break;case 19:if(C=(y&d.childLanes)!==0,f.flags&128){if(C)return GM(f,d,y);d.flags|=128}var M=d.memoizedState;if(M!==null&&(M.rendering=null,M.tail=null,M.lastEffect=null),Ye(wn,wn.current),C)break;return null;case 22:case 23:return d.lanes=0,LM(f,d,y)}return xo(f,d,y)}function wD(f,d){switch(hy(d),d.tag){case 1:return An(d.type)&&Kt(),f=d.flags,f&65536?(d.flags=f&-65537|128,d):null;case 3:return Zu(),ot(Tt),ot(St),_y(),f=d.flags,f&65536&&!(f&128)?(d.flags=f&-65537|128,d):null;case 5:return vy(d),null;case 13:if(ot(wn),f=d.memoizedState,f!==null&&f.dehydrated!==null){if(d.alternate===null)throw Error(o(340));Ju()}return f=d.flags,f&65536?(d.flags=f&-65537|128,d):null;case 19:return ot(wn),null;case 4:return Zu(),null;case 10:return oy(d.type._context),null;case 22:case 23:return Yy(),null;case 24:return null;default:return null}}var dm=!1,Cl=!1,TD=typeof WeakSet=="function"?WeakSet:Set,tt=null;function pm(f,d){var y=f.ref;if(y!==null)if(typeof y=="function")try{y(null)}catch(C){lr(f,d,C)}else y.current=null}function Iy(f,d,y){try{y()}catch(C){lr(f,d,C)}}var VM=!1;function bD(f,d){for(X(f.containerInfo),tt=d;tt!==null;)if(f=tt,d=f.child,(f.subtreeFlags&1028)!==0&&d!==null)d.return=f,tt=d;else for(;tt!==null;){f=tt;try{var y=f.alternate;if(f.flags&1024)switch(f.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var C=y.memoizedProps,M=y.memoizedState,R=f.stateNode,K=R.getSnapshotBeforeUpdate(f.elementType===f.type?C:ps(f.type,C),M);R.__reactInternalSnapshotBeforeUpdate=K}break;case 3:et&&Xe(f.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(le){lr(f,f.return,le)}if(d=f.sibling,d!==null){d.return=f.return,tt=d;break}tt=f.return}return y=VM,VM=!1,y}function El(f,d,y){var C=d.updateQueue;if(C=C!==null?C.lastEffect:null,C!==null){var M=C=C.next;do{if((M.tag&f)===f){var R=M.destroy;M.destroy=void 0,R!==void 0&&Iy(d,y,R)}M=M.next}while(M!==C)}}function uh(f,d){if(d=d.updateQueue,d=d!==null?d.lastEffect:null,d!==null){var y=d=d.next;do{if((y.tag&f)===f){var C=y.create;y.destroy=C()}y=y.next}while(y!==d)}}function Ly(f){var d=f.ref;if(d!==null){var y=f.stateNode;switch(f.tag){case 5:f=oe(y);break;default:f=y}typeof d=="function"?d(f):d.current=f}}function WM(f,d,y){if(Os&&typeof Os.onCommitFiberUnmount=="function")try{Os.onCommitFiberUnmount(Vp,d)}catch{}switch(d.tag){case 0:case 11:case 14:case 15:if(f=d.updateQueue,f!==null&&(f=f.lastEffect,f!==null)){var C=f=f.next;do{var M=C,R=M.destroy;M=M.tag,R!==void 0&&(M&2||M&4)&&Iy(d,y,R),C=C.next}while(C!==f)}break;case 1:if(pm(d,y),f=d.stateNode,typeof f.componentWillUnmount=="function")try{f.props=d.memoizedProps,f.state=d.memoizedState,f.componentWillUnmount()}catch(K){lr(d,y,K)}break;case 5:pm(d,y);break;case 4:et?ZM(f,d,y):Z&&Z&&(d=d.stateNode.containerInfo,y=Ve(d),Gt(d,y))}}function jM(f,d,y){for(var C=d;;)if(WM(f,C,y),C.child===null||et&&C.tag===4){if(C===d)break;for(;C.sibling===null;){if(C.return===null||C.return===d)return;C=C.return}C.sibling.return=C.return,C=C.sibling}else C.child.return=C,C=C.child}function XM(f){var d=f.alternate;d!==null&&(f.alternate=null,XM(d)),f.child=null,f.deletions=null,f.sibling=null,f.tag===5&&(d=f.stateNode,d!==null&&it(d)),f.stateNode=null,f.return=null,f.dependencies=null,f.memoizedProps=null,f.memoizedState=null,f.pendingProps=null,f.stateNode=null,f.updateQueue=null}function JM(f){return f.tag===5||f.tag===3||f.tag===4}function KM(f){e:for(;;){for(;f.sibling===null;){if(f.return===null||JM(f.return))return null;f=f.return}for(f.sibling.return=f.return,f=f.sibling;f.tag!==5&&f.tag!==6&&f.tag!==18;){if(f.flags&2||f.child===null||f.tag===4)continue e;f.child.return=f,f=f.child}if(!(f.flags&2))return f.stateNode}}function YM(f){if(et){e:{for(var d=f.return;d!==null;){if(JM(d))break e;d=d.return}throw Error(o(160))}var y=d;switch(y.tag){case 5:d=y.stateNode,y.flags&32&&(ve(d),y.flags&=-33),y=KM(f),Fy(f,y,d);break;case 3:case 4:d=y.stateNode.containerInfo,y=KM(f),Dy(f,y,d);break;default:throw Error(o(161))}}}function Dy(f,d,y){var C=f.tag;if(C===5||C===6)f=f.stateNode,d?mt(y,f,d):He(y,f);else if(C!==4&&(f=f.child,f!==null))for(Dy(f,d,y),f=f.sibling;f!==null;)Dy(f,d,y),f=f.sibling}function Fy(f,d,y){var C=f.tag;if(C===5||C===6)f=f.stateNode,d?Jt(y,f,d):ht(y,f);else if(C!==4&&(f=f.child,f!==null))for(Fy(f,d,y),f=f.sibling;f!==null;)Fy(f,d,y),f=f.sibling}function ZM(f,d,y){for(var C=d,M=!1,R,K;;){if(!M){M=C.return;e:for(;;){if(M===null)throw Error(o(160));switch(R=M.stateNode,M.tag){case 5:K=!1;break e;case 3:R=R.containerInfo,K=!0;break e;case 4:R=R.containerInfo,K=!0;break e}M=M.return}M=!0}if(C.tag===5||C.tag===6)jM(f,C,y),K?q(R,C.stateNode):dt(R,C.stateNode);else if(C.tag===18)K?Y(R,C.stateNode):$(R,C.stateNode);else if(C.tag===4){if(C.child!==null){R=C.stateNode.containerInfo,K=!0,C.child.return=C,C=C.child;continue}}else if(WM(f,C,y),C.child!==null){C.child.return=C,C=C.child;continue}if(C===d)break;for(;C.sibling===null;){if(C.return===null||C.return===d)return;C=C.return,C.tag===4&&(M=!1)}C.sibling.return=C.return,C=C.sibling}}function Ny(f,d){if(et){switch(d.tag){case 0:case 11:case 14:case 15:El(3,d,d.return),uh(3,d),El(5,d,d.return);return;case 1:return;case 5:var y=d.stateNode;if(y!=null){var C=d.memoizedProps;f=f!==null?f.memoizedProps:C;var M=d.type,R=d.updateQueue;d.updateQueue=null,R!==null&&Ge(y,R,M,f,C,d)}return;case 6:if(d.stateNode===null)throw Error(o(162));y=d.memoizedProps,Ke(d.stateNode,f!==null?f.memoizedProps:y,y);return;case 3:De&&f!==null&&f.memoizedState.isDehydrated&&k(d.stateNode.containerInfo);return;case 12:return;case 13:mm(d);return;case 19:mm(d);return;case 17:return}throw Error(o(163))}switch(d.tag){case 0:case 11:case 14:case 15:El(3,d,d.return),uh(3,d),El(5,d,d.return);return;case 12:return;case 13:mm(d);return;case 19:mm(d);return;case 3:De&&f!==null&&f.memoizedState.isDehydrated&&k(d.stateNode.containerInfo);break;case 22:case 23:return}e:if(Z){switch(d.tag){case 1:case 5:case 6:break e;case 3:case 4:d=d.stateNode,Gt(d.containerInfo,d.pendingChildren);break e}throw Error(o(163))}}function mm(f){var d=f.updateQueue;if(d!==null){f.updateQueue=null;var y=f.stateNode;y===null&&(y=f.stateNode=new TD),d.forEach(function(C){var M=UD.bind(null,f,C);y.has(C)||(y.add(C),C.then(M,M))})}}function RD(f,d){for(tt=d;tt!==null;){d=tt;var y=d.deletions;if(y!==null)for(var C=0;C<y.length;C++){var M=y[C];try{var R=f;et?ZM(R,M,d):jM(R,M,d);var K=M.alternate;K!==null&&(K.return=null),M.return=null}catch(gt){lr(M,d,gt)}}if(y=d.child,d.subtreeFlags&12854&&y!==null)y.return=d,tt=y;else for(;tt!==null;){d=tt;try{var le=d.flags;if(le&32&&et&&ve(d.stateNode),le&512){var Me=d.alternate;if(Me!==null){var We=Me.ref;We!==null&&(typeof We=="function"?We(null):We.current=null)}}if(le&8192)switch(d.tag){case 13:if(d.memoizedState!==null){var ut=d.alternate;(ut===null||ut.memoizedState===null)&&(Vy=ui())}break;case 22:var Pt=d.memoizedState!==null,Ct=d.alternate,hn=Ct!==null&&Ct.memoizedState!==null;if(y=d,et){e:if(C=y,M=Pt,R=null,et)for(var vt=C;;){if(vt.tag===5){if(R===null){R=vt;var Ii=vt.stateNode;M?Ne(Ii):Le(vt.stateNode,vt.memoizedProps)}}else if(vt.tag===6){if(R===null){var Kr=vt.stateNode;M?Qe(Kr):re(Kr,vt.memoizedProps)}}else if((vt.tag!==22&&vt.tag!==23||vt.memoizedState===null||vt===C)&&vt.child!==null){vt.child.return=vt,vt=vt.child;continue}if(vt===C)break;for(;vt.sibling===null;){if(vt.return===null||vt.return===C)break e;R===vt&&(R=null),vt=vt.return}R===vt&&(R=null),vt.sibling.return=vt.return,vt=vt.sibling}}if(Pt&&!hn&&y.mode&1){tt=y;for(var ge=y.child;ge!==null;){for(y=tt=ge;tt!==null;){C=tt;var fe=C.child;switch(C.tag){case 0:case 11:case 14:case 15:El(4,C,C.return);break;case 1:pm(C,C.return);var Ae=C.stateNode;if(typeof Ae.componentWillUnmount=="function"){var rt=C.return;try{Ae.props=C.memoizedProps,Ae.state=C.memoizedState,Ae.componentWillUnmount()}catch(gt){lr(C,rt,gt)}}break;case 5:pm(C,C.return);break;case 22:if(C.memoizedState!==null){$M(y);continue}}fe!==null?(fe.return=C,tt=fe):$M(y)}ge=ge.sibling}}}switch(le&4102){case 2:YM(d),d.flags&=-3;break;case 6:YM(d),d.flags&=-3,Ny(d.alternate,d);break;case 4096:d.flags&=-4097;break;case 4100:d.flags&=-4097,Ny(d.alternate,d);break;case 4:Ny(d.alternate,d)}}catch(gt){lr(d,d.return,gt)}if(y=d.sibling,y!==null){y.return=d.return,tt=y;break}tt=d.return}}}function PD(f,d,y){tt=f,qM(f)}function qM(f,d,y){for(var C=(f.mode&1)!==0;tt!==null;){var M=tt,R=M.child;if(M.tag===22&&C){var K=M.memoizedState!==null||dm;if(!K){var le=M.alternate,Me=le!==null&&le.memoizedState!==null||Cl;le=dm;var We=Cl;if(dm=K,(Cl=Me)&&!We)for(tt=M;tt!==null;)K=tt,Me=K.child,K.tag===22&&K.memoizedState!==null?ew(M):Me!==null?(Me.return=K,tt=Me):ew(M);for(;R!==null;)tt=R,qM(R),R=R.sibling;tt=M,dm=le,Cl=We}QM(f)}else M.subtreeFlags&8772&&R!==null?(R.return=M,tt=R):QM(f)}}function QM(f){for(;tt!==null;){var d=tt;if(d.flags&8772){var y=d.alternate;try{if(d.flags&8772)switch(d.tag){case 0:case 11:case 15:Cl||uh(5,d);break;case 1:var C=d.stateNode;if(d.flags&4&&!Cl)if(y===null)C.componentDidMount();else{var M=d.elementType===d.type?y.memoizedProps:ps(d.type,y.memoizedProps);C.componentDidUpdate(M,y.memoizedState,C.__reactInternalSnapshotBeforeUpdate)}var R=d.updateQueue;R!==null&&XE(d,R,C);break;case 3:var K=d.updateQueue;if(K!==null){if(y=null,d.child!==null)switch(d.child.tag){case 5:y=oe(d.child.stateNode);break;case 1:y=d.child.stateNode}XE(d,K,y)}break;case 5:var le=d.stateNode;y===null&&d.flags&4&&_t(le,d.type,d.memoizedProps,d);break;case 6:break;case 4:break;case 12:break;case 13:if(De&&d.memoizedState===null){var Me=d.alternate;if(Me!==null){var We=Me.memoizedState;if(We!==null){var ut=We.dehydrated;ut!==null&&W(ut)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}Cl||d.flags&512&&Ly(d)}catch(Pt){lr(d,d.return,Pt)}}if(d===f){tt=null;break}if(y=d.sibling,y!==null){y.return=d.return,tt=y;break}tt=d.return}}function $M(f){for(;tt!==null;){var d=tt;if(d===f){tt=null;break}var y=d.sibling;if(y!==null){y.return=d.return,tt=y;break}tt=d.return}}function ew(f){for(;tt!==null;){var d=tt;try{switch(d.tag){case 0:case 11:case 15:var y=d.return;try{uh(4,d)}catch(Me){lr(d,y,Me)}break;case 1:var C=d.stateNode;if(typeof C.componentDidMount=="function"){var M=d.return;try{C.componentDidMount()}catch(Me){lr(d,M,Me)}}var R=d.return;try{Ly(d)}catch(Me){lr(d,R,Me)}break;case 5:var K=d.return;try{Ly(d)}catch(Me){lr(d,K,Me)}}}catch(Me){lr(d,d.return,Me)}if(d===f){tt=null;break}var le=d.sibling;if(le!==null){le.return=d.return,tt=le;break}tt=d.return}}var gm=0,vm=1,ym=2,_m=3,xm=4;if(typeof Symbol=="function"&&Symbol.for){var ch=Symbol.for;gm=ch("selector.component"),vm=ch("selector.has_pseudo_class"),ym=ch("selector.role"),_m=ch("selector.test_id"),xm=ch("selector.text")}function Oy(f){var d=Re(f);if(d!=null){if(typeof d.memoizedProps["data-testname"]!="string")throw Error(o(364));return d}if(f=O(f),f===null)throw Error(o(362));return f.stateNode.current}function Uy(f,d){switch(d.$$typeof){case gm:if(f.type===d.value)return!0;break;case vm:e:{d=d.value,f=[f,0];for(var y=0;y<f.length;){var C=f[y++],M=f[y++],R=d[M];if(C.tag!==5||!ue(C)){for(;R!=null&&Uy(C,R);)M++,R=d[M];if(M===d.length){d=!0;break e}else for(C=C.child;C!==null;)f.push(C,M),C=C.sibling}}d=!1}return d;case ym:if(f.tag===5&&Ce(f.stateNode,d.value))return!0;break;case xm:if((f.tag===5||f.tag===6)&&(f=ee(f),f!==null&&0<=f.indexOf(d.value)))return!0;break;case _m:if(f.tag===5&&(f=f.memoizedProps["data-testname"],typeof f=="string"&&f.toLowerCase()===d.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function ky(f){switch(f.$$typeof){case gm:return"<"+(P(f.value)||"Unknown")+">";case vm:return":has("+(ky(f)||"")+")";case ym:return'[role="'+f.value+'"]';case xm:return'"'+f.value+'"';case _m:return'[data-testname="'+f.value+'"]';default:throw Error(o(365))}}function tw(f,d){var y=[];f=[f,0];for(var C=0;C<f.length;){var M=f[C++],R=f[C++],K=d[R];if(M.tag!==5||!ue(M)){for(;K!=null&&Uy(M,K);)R++,K=d[R];if(R===d.length)y.push(M);else for(M=M.child;M!==null;)f.push(M,R),M=M.sibling}}return y}function zy(f,d){if(!de)throw Error(o(363));f=Oy(f),f=tw(f,d),d=[],f=Array.from(f);for(var y=0;y<f.length;){var C=f[y++];if(C.tag===5)ue(C)||d.push(C.stateNode);else for(C=C.child;C!==null;)f.push(C),C=C.sibling}return d}var BD=Math.ceil,Am=a.ReactCurrentDispatcher,Hy=a.ReactCurrentOwner,Wn=a.ReactCurrentBatchConfig,zt=0,Zn=null,qn=null,yi=0,Sr=0,Qu=Rt(0),ii=0,fh=null,$u=0,Sm=0,Gy=0,hh=null,or=null,Vy=0,Wy=1/0;function ec(){Wy=ui()+500}var Cm=!1,jy=null,ia=null,Em=!1,ra=null,Mm=0,dh=0,Xy=null,wm=-1,Tm=0;function Ki(){return zt&6?ui():wm!==-1?wm:wm=ui()}function sa(f){return f.mode&1?zt&2&&yi!==0?yi&-yi:dD.transition!==null?(Tm===0&&(f=zp,zp<<=1,!(zp&4194240)&&(zp=64),Tm=f),Tm):(f=en,f!==0?f:Ie()):1}function Xr(f,d,y){if(50<dh)throw dh=0,Xy=null,Error(o(185));var C=bm(f,d);return C===null?null:(Zf(C,d,y),(!(zt&2)||C!==Zn)&&(C===Zn&&(!(zt&2)&&(Sm|=d),ii===4&&oa(C,yi)),ar(C,y),d===1&&zt===0&&!(f.mode&1)&&(ec(),Wp&&ks())),C)}function bm(f,d){f.lanes|=d;var y=f.alternate;for(y!==null&&(y.lanes|=d),y=f,f=f.return;f!==null;)f.childLanes|=d,y=f.alternate,y!==null&&(y.childLanes|=d),y=f,f=f.return;return y.tag===3?y.stateNode:null}function ar(f,d){var y=f.callbackNode;rD(f,d);var C=Gp(f,f===Zn?yi:0);if(C===0)y!==null&&HE(y),f.callbackNode=null,f.callbackPriority=0;else if(d=C&-C,f.callbackPriority!==d){if(y!=null&&HE(y),d===1)f.tag===0?hD(iw.bind(null,f)):GE(iw.bind(null,f)),V?ne(function(){zt===0&&ks()}):ey(ty,ks),y=null;else{switch(zE(C)){case 1:y=ty;break;case 4:y=lD;break;case 16:y=ny;break;case 536870912:y=uD;break;default:y=ny}y=hw(y,nw.bind(null,f))}f.callbackPriority=d,f.callbackNode=y}}function nw(f,d){if(wm=-1,Tm=0,zt&6)throw Error(o(327));var y=f.callbackNode;if(Tl()&&f.callbackNode!==y)return null;var C=Gp(f,f===Zn?yi:0);if(C===0)return null;if(C&30||C&f.expiredLanes||d)d=Rm(f,C);else{d=C;var M=zt;zt|=2;var R=ow();(Zn!==f||yi!==d)&&(ec(),Ml(f,d));do try{DD();break}catch(le){sw(f,le)}while(!0);sy(),Am.current=R,zt=M,qn!==null?d=0:(Zn=null,yi=0,d=ii)}if(d!==0){if(d===2&&(M=qv(f),M!==0&&(C=M,d=Jy(f,M))),d===1)throw y=fh,Ml(f,0),oa(f,C),ar(f,ui()),y;if(d===6)oa(f,C);else{if(M=f.current.alternate,!(C&30)&&!ID(M)&&(d=Rm(f,C),d===2&&(R=qv(f),R!==0&&(C=R,d=Jy(f,R))),d===1))throw y=fh,Ml(f,0),oa(f,C),ar(f,ui()),y;switch(f.finishedWork=M,f.finishedLanes=C,d){case 0:case 1:throw Error(o(345));case 2:wl(f,or);break;case 3:if(oa(f,C),(C&130023424)===C&&(d=Vy+500-ui(),10<d)){if(Gp(f,0)!==0)break;if(M=f.suspendedLanes,(M&C)!==C){Ki(),f.pingedLanes|=f.suspendedLanes&M;break}f.timeoutHandle=je(wl.bind(null,f,or),d);break}wl(f,or);break;case 4:if(oa(f,C),(C&4194240)===C)break;for(d=f.eventTimes,M=-1;0<C;){var K=31-dn(C);R=1<<K,K=d[K],K>M&&(M=K),C&=~R}if(C=M,C=ui()-C,C=(120>C?120:480>C?480:1080>C?1080:1920>C?1920:3e3>C?3e3:4320>C?4320:1960*BD(C/1960))-C,10<C){f.timeoutHandle=je(wl.bind(null,f,or),C);break}wl(f,or);break;case 5:wl(f,or);break;default:throw Error(o(329))}}}return ar(f,ui()),f.callbackNode===y?nw.bind(null,f):null}function Jy(f,d){var y=hh;return f.current.memoizedState.isDehydrated&&(Ml(f,d).flags|=256),f=Rm(f,d),f!==2&&(d=or,or=y,d!==null&&Ky(d)),f}function Ky(f){or===null?or=f:or.push.apply(or,f)}function ID(f){for(var d=f;;){if(d.flags&16384){var y=d.updateQueue;if(y!==null&&(y=y.stores,y!==null))for(var C=0;C<y.length;C++){var M=y[C],R=M.getSnapshot;M=M.value;try{if(!Us(R(),M))return!1}catch{return!1}}}if(y=d.child,d.subtreeFlags&16384&&y!==null)y.return=d,d=y;else{if(d===f)break;for(;d.sibling===null;){if(d.return===null||d.return===f)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function oa(f,d){for(d&=~Gy,d&=~Sm,f.suspendedLanes|=d,f.pingedLanes&=~d,f=f.expirationTimes;0<d;){var y=31-dn(d),C=1<<y;f[y]=-1,d&=~C}}function iw(f){if(zt&6)throw Error(o(327));Tl();var d=Gp(f,0);if(!(d&1))return ar(f,ui()),null;var y=Rm(f,d);if(f.tag!==0&&y===2){var C=qv(f);C!==0&&(d=C,y=Jy(f,C))}if(y===1)throw y=fh,Ml(f,0),oa(f,d),ar(f,ui()),y;if(y===6)throw Error(o(345));return f.finishedWork=f.current.alternate,f.finishedLanes=d,wl(f,or),ar(f,ui()),null}function rw(f){ra!==null&&ra.tag===0&&!(zt&6)&&Tl();var d=zt;zt|=1;var y=Wn.transition,C=en;try{if(Wn.transition=null,en=1,f)return f()}finally{en=C,Wn.transition=y,zt=d,!(zt&6)&&ks()}}function Yy(){Sr=Qu.current,ot(Qu)}function Ml(f,d){f.finishedWork=null,f.finishedLanes=0;var y=f.timeoutHandle;if(y!==nt&&(f.timeoutHandle=nt,$e(y)),qn!==null)for(y=qn.return;y!==null;){var C=y;switch(hy(C),C.tag){case 1:C=C.type.childContextTypes,C!=null&&Kt();break;case 3:Zu(),ot(Tt),ot(St),_y();break;case 5:vy(C);break;case 4:Zu();break;case 13:ot(wn);break;case 19:ot(wn);break;case 10:oy(C.type._context);break;case 22:case 23:Yy()}y=y.return}if(Zn=f,qn=f=aa(f.current,null),yi=Sr=d,ii=0,fh=null,Gy=Sm=$u=0,or=hh=null,zs!==null){for(d=0;d<zs.length;d++)if(y=zs[d],C=y.interleaved,C!==null){y.interleaved=null;var M=C.next,R=y.pending;if(R!==null){var K=R.next;R.next=M,C.next=K}y.pending=C}zs=null}return f}function sw(f,d){do{var y=qn;try{if(sy(),tm.current=am,nm){for(var C=Nn.memoizedState;C!==null;){var M=C.queue;M!==null&&(M.pending=null),C=C.next}nm=!1}if(qu=0,ci=Ri=Nn=null,nh=!1,ih=0,Hy.current=null,y===null||y.return===null){ii=1,fh=d,qn=null;break}e:{var R=f,K=y.return,le=y,Me=d;if(d=yi,le.flags|=32768,Me!==null&&typeof Me=="object"&&typeof Me.then=="function"){var We=Me,ut=le,Pt=ut.tag;if(!(ut.mode&1)&&(Pt===0||Pt===11||Pt===15)){var Ct=ut.alternate;Ct?(ut.updateQueue=Ct.updateQueue,ut.memoizedState=Ct.memoizedState,ut.lanes=Ct.lanes):(ut.updateQueue=null,ut.memoizedState=null)}var hn=wM(K);if(hn!==null){hn.flags&=-257,TM(hn,K,le,R,d),hn.mode&1&&MM(R,We,d),d=hn,Me=We;var vt=d.updateQueue;if(vt===null){var Ii=new Set;Ii.add(Me),d.updateQueue=Ii}else vt.add(Me);break e}else{if(!(d&1)){MM(R,We,d),Zy();break e}Me=Error(o(426))}}else if(Sn&&le.mode&1){var Kr=wM(K);if(Kr!==null){!(Kr.flags&65536)&&(Kr.flags|=256),TM(Kr,K,le,R,d),my(Me);break e}}R=Me,ii!==4&&(ii=2),hh===null?hh=[R]:hh.push(R),Me=wy(Me,le),le=K;do{switch(le.tag){case 3:le.flags|=65536,d&=-d,le.lanes|=d;var ge=CM(le,Me,d);jE(le,ge);break e;case 1:R=Me;var fe=le.type,Ae=le.stateNode;if(!(le.flags&128)&&(typeof fe.getDerivedStateFromError=="function"||Ae!==null&&typeof Ae.componentDidCatch=="function"&&(ia===null||!ia.has(Ae)))){le.flags|=65536,d&=-d,le.lanes|=d;var rt=EM(le,R,d);jE(le,rt);break e}}le=le.return}while(le!==null)}lw(y)}catch(gt){d=gt,qn===y&&y!==null&&(qn=y=y.return);continue}break}while(!0)}function ow(){var f=Am.current;return Am.current=am,f===null?am:f}function Zy(){(ii===0||ii===3||ii===2)&&(ii=4),Zn===null||!($u&268435455)&&!(Sm&268435455)||oa(Zn,yi)}function Rm(f,d){var y=zt;zt|=2;var C=ow();Zn===f&&yi===d||Ml(f,d);do try{LD();break}catch(M){sw(f,M)}while(!0);if(sy(),zt=y,Am.current=C,qn!==null)throw Error(o(261));return Zn=null,yi=0,ii}function LD(){for(;qn!==null;)aw(qn)}function DD(){for(;qn!==null&&!oD();)aw(qn)}function aw(f){var d=fw(f.alternate,f,Sr);f.memoizedProps=f.pendingProps,d===null?lw(f):qn=d,Hy.current=null}function lw(f){var d=f;do{var y=d.alternate;if(f=d.return,d.flags&32768){if(y=wD(y,d),y!==null){y.flags&=32767,qn=y;return}if(f!==null)f.flags|=32768,f.subtreeFlags=0,f.deletions=null;else{ii=6,qn=null;return}}else if(y=CD(y,d,Sr),y!==null){qn=y;return}if(d=d.sibling,d!==null){qn=d;return}qn=d=f}while(d!==null);ii===0&&(ii=5)}function wl(f,d){var y=en,C=Wn.transition;try{Wn.transition=null,en=1,FD(f,d,y)}finally{Wn.transition=C,en=y}return null}function FD(f,d,y){do Tl();while(ra!==null);if(zt&6)throw Error(o(327));var C=f.finishedWork,M=f.finishedLanes;if(C===null)return null;if(f.finishedWork=null,f.finishedLanes=0,C===f.current)throw Error(o(177));f.callbackNode=null,f.callbackPriority=0;var R=C.lanes|C.childLanes;if(sD(f,R),f===Zn&&(qn=Zn=null,yi=0),!(C.subtreeFlags&2064)&&!(C.flags&2064)||Em||(Em=!0,hw(ny,function(){return Tl(),null})),R=(C.flags&15990)!==0,C.subtreeFlags&15990||R){R=Wn.transition,Wn.transition=null;var K=en;en=1;var le=zt;zt|=4,Hy.current=null,bD(f,C),RD(f,C),J(f.containerInfo),f.current=C,PD(C),aD(),zt=le,en=K,Wn.transition=R}else f.current=C;if(Em&&(Em=!1,ra=f,Mm=M),R=f.pendingLanes,R===0&&(ia=null),cD(C.stateNode),ar(f,ui()),d!==null)for(y=f.onRecoverableError,C=0;C<d.length;C++)y(d[C]);if(Cm)throw Cm=!1,f=jy,jy=null,f;return Mm&1&&f.tag!==0&&Tl(),R=f.pendingLanes,R&1?f===Xy?dh++:(dh=0,Xy=f):dh=0,ks(),null}function Tl(){if(ra!==null){var f=zE(Mm),d=Wn.transition,y=en;try{if(Wn.transition=null,en=16>f?16:f,ra===null)var C=!1;else{if(f=ra,ra=null,Mm=0,zt&6)throw Error(o(331));var M=zt;for(zt|=4,tt=f.current;tt!==null;){var R=tt,K=R.child;if(tt.flags&16){var le=R.deletions;if(le!==null){for(var Me=0;Me<le.length;Me++){var We=le[Me];for(tt=We;tt!==null;){var ut=tt;switch(ut.tag){case 0:case 11:case 15:El(8,ut,R)}var Pt=ut.child;if(Pt!==null)Pt.return=ut,tt=Pt;else for(;tt!==null;){ut=tt;var Ct=ut.sibling,hn=ut.return;if(XM(ut),ut===We){tt=null;break}if(Ct!==null){Ct.return=hn,tt=Ct;break}tt=hn}}}var vt=R.alternate;if(vt!==null){var Ii=vt.child;if(Ii!==null){vt.child=null;do{var Kr=Ii.sibling;Ii.sibling=null,Ii=Kr}while(Ii!==null)}}tt=R}}if(R.subtreeFlags&2064&&K!==null)K.return=R,tt=K;else e:for(;tt!==null;){if(R=tt,R.flags&2048)switch(R.tag){case 0:case 11:case 15:El(9,R,R.return)}var ge=R.sibling;if(ge!==null){ge.return=R.return,tt=ge;break e}tt=R.return}}var fe=f.current;for(tt=fe;tt!==null;){K=tt;var Ae=K.child;if(K.subtreeFlags&2064&&Ae!==null)Ae.return=K,tt=Ae;else e:for(K=fe;tt!==null;){if(le=tt,le.flags&2048)try{switch(le.tag){case 0:case 11:case 15:uh(9,le)}}catch(gt){lr(le,le.return,gt)}if(le===K){tt=null;break e}var rt=le.sibling;if(rt!==null){rt.return=le.return,tt=rt;break e}tt=le.return}}if(zt=M,ks(),Os&&typeof Os.onPostCommitFiberRoot=="function")try{Os.onPostCommitFiberRoot(Vp,f)}catch{}C=!0}return C}finally{en=y,Wn.transition=d}}return!1}function uw(f,d,y){d=wy(y,d),d=CM(f,d,1),na(f,d),d=Ki(),f=bm(f,1),f!==null&&(Zf(f,1,d),ar(f,d))}function lr(f,d,y){if(f.tag===3)uw(f,f,y);else for(;d!==null;){if(d.tag===3){uw(d,f,y);break}else if(d.tag===1){var C=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof C.componentDidCatch=="function"&&(ia===null||!ia.has(C))){f=wy(y,f),f=EM(d,f,1),na(d,f),f=Ki(),d=bm(d,1),d!==null&&(Zf(d,1,f),ar(d,f));break}}d=d.return}}function ND(f,d,y){var C=f.pingCache;C!==null&&C.delete(d),d=Ki(),f.pingedLanes|=f.suspendedLanes&y,Zn===f&&(yi&y)===y&&(ii===4||ii===3&&(yi&130023424)===yi&&500>ui()-Vy?Ml(f,0):Gy|=y),ar(f,d)}function cw(f,d){d===0&&(f.mode&1?(d=Hp,Hp<<=1,!(Hp&130023424)&&(Hp=4194304)):d=1);var y=Ki();f=bm(f,d),f!==null&&(Zf(f,d,y),ar(f,y))}function OD(f){var d=f.memoizedState,y=0;d!==null&&(y=d.retryLane),cw(f,y)}function UD(f,d){var y=0;switch(f.tag){case 13:var C=f.stateNode,M=f.memoizedState;M!==null&&(y=M.retryLane);break;case 19:C=f.stateNode;break;default:throw Error(o(314))}C!==null&&C.delete(d),cw(f,y)}var fw;fw=function(f,d,y){if(f!==null)if(f.memoizedProps!==d.pendingProps||Tt.current)Ar=!0;else{if(!(f.lanes&y)&&!(d.flags&128))return Ar=!1,MD(f,d,y);Ar=!!(f.flags&131072)}else Ar=!1,Sn&&d.flags&1048576&&qE(d,Qp,d.index);switch(d.lanes=0,d.tag){case 2:var C=d.type;f!==null&&(f.alternate=null,d.alternate=null,d.flags|=2),f=d.pendingProps;var M=Fn(d,St.current);Wu(d,y),M=Ay(null,d,C,f,M,y);var R=Sy();return d.flags|=1,typeof M=="object"&&M!==null&&typeof M.render=="function"&&M.$$typeof===void 0?(d.tag=1,d.memoizedState=null,d.updateQueue=null,An(C)?(R=!0,Dt(d)):R=!1,d.memoizedState=M.state!==null&&M.state!==void 0?M.state:null,ly(d),M.updater=Zp,d.stateNode=M,M._reactInternals=d,cy(d,C,f,y),d=Ry(null,d,C,!0,R,y)):(d.tag=0,Sn&&R&&fy(d),Ji(null,d,M,y),d=d.child),d;case 16:C=d.elementType;e:{switch(f!==null&&(f.alternate=null,d.alternate=null,d.flags|=2),f=d.pendingProps,M=C._init,C=M(C._payload),d.type=C,M=d.tag=zD(C),f=ps(C,f),M){case 0:d=by(null,d,C,f,y);break e;case 1:d=FM(null,d,C,f,y);break e;case 11:d=PM(null,d,C,f,y);break e;case 14:d=BM(null,d,C,ps(C.type,f),y);break e}throw Error(o(306,C,""))}return d;case 0:return C=d.type,M=d.pendingProps,M=d.elementType===C?M:ps(C,M),by(f,d,C,M,y);case 1:return C=d.type,M=d.pendingProps,M=d.elementType===C?M:ps(C,M),FM(f,d,C,M,y);case 3:e:{if(NM(d),f===null)throw Error(o(387));C=d.pendingProps,R=d.memoizedState,M=R.element,WE(f,d),Yp(d,C,null,y);var K=d.memoizedState;if(C=K.element,De&&R.isDehydrated)if(R={element:C,isDehydrated:!1,cache:K.cache,transitions:K.transitions},d.updateQueue.baseState=R,d.memoizedState=R,d.flags&256){M=Error(o(423)),d=OM(f,d,C,y,M);break e}else if(C!==M){M=Error(o(424)),d=OM(f,d,C,y,M);break e}else for(De&&(xr=_l(d.stateNode.containerInfo),_r=d,Sn=!0,ms=null,qf=!1),y=iM(d,null,C,y),d.child=y;y;)y.flags=y.flags&-3|4096,y=y.sibling;else{if(Ju(),C===M){d=xo(f,d,y);break e}Ji(f,d,C,y)}d=d.child}return d;case 5:return rM(d),f===null&&py(d),C=d.type,M=d.pendingProps,R=f!==null?f.memoizedProps:null,K=M.children,Te(C,M)?K=null:R!==null&&Te(C,R)&&(d.flags|=32),DM(f,d),Ji(f,d,K,y),d.child;case 6:return f===null&&py(d),null;case 13:return UM(f,d,y);case 4:return gy(d,d.stateNode.containerInfo),C=d.pendingProps,f===null?d.child=Ku(d,null,C,y):Ji(f,d,C,y),d.child;case 11:return C=d.type,M=d.pendingProps,M=d.elementType===C?M:ps(C,M),PM(f,d,C,M,y);case 7:return Ji(f,d,d.pendingProps,y),d.child;case 8:return Ji(f,d,d.pendingProps.children,y),d.child;case 12:return Ji(f,d,d.pendingProps.children,y),d.child;case 10:e:{if(C=d.type._context,M=d.pendingProps,R=d.memoizedProps,K=M.value,VE(d,C,K),R!==null)if(Us(R.value,K)){if(R.children===M.children&&!Tt.current){d=xo(f,d,y);break e}}else for(R=d.child,R!==null&&(R.return=d);R!==null;){var le=R.dependencies;if(le!==null){K=R.child;for(var Me=le.firstContext;Me!==null;){if(Me.context===C){if(R.tag===1){Me=go(-1,y&-y),Me.tag=2;var We=R.updateQueue;if(We!==null){We=We.shared;var ut=We.pending;ut===null?Me.next=Me:(Me.next=ut.next,ut.next=Me),We.pending=Me}}R.lanes|=y,Me=R.alternate,Me!==null&&(Me.lanes|=y),ay(R.return,y,d),le.lanes|=y;break}Me=Me.next}}else if(R.tag===10)K=R.type===d.type?null:R.child;else if(R.tag===18){if(K=R.return,K===null)throw Error(o(341));K.lanes|=y,le=K.alternate,le!==null&&(le.lanes|=y),ay(K,y,d),K=R.sibling}else K=R.child;if(K!==null)K.return=R;else for(K=R;K!==null;){if(K===d){K=null;break}if(R=K.sibling,R!==null){R.return=K.return,K=R;break}K=K.return}R=K}Ji(f,d,M.children,y),d=d.child}return d;case 9:return M=d.type,C=d.pendingProps.children,Wu(d,y),M=Hr(M),C=C(M),d.flags|=1,Ji(f,d,C,y),d.child;case 14:return C=d.type,M=ps(C,d.pendingProps),M=ps(C.type,M),BM(f,d,C,M,y);case 15:return IM(f,d,d.type,d.pendingProps,y);case 17:return C=d.type,M=d.pendingProps,M=d.elementType===C?M:ps(C,M),f!==null&&(f.alternate=null,d.alternate=null,d.flags|=2),d.tag=1,An(C)?(f=!0,Dt(d)):f=!1,Wu(d,y),YE(d,C,M),cy(d,C,M,y),Ry(null,d,C,!0,f,y);case 19:return GM(f,d,y);case 22:return LM(f,d,y)}throw Error(o(156,d.tag))};function hw(f,d){return ey(f,d)}function kD(f,d,y,C){this.tag=f,this.key=y,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=C,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Jr(f,d,y,C){return new kD(f,d,y,C)}function qy(f){return f=f.prototype,!(!f||!f.isReactComponent)}function zD(f){if(typeof f=="function")return qy(f)?1:0;if(f!=null){if(f=f.$$typeof,f===A)return 11;if(f===S)return 14}return 2}function aa(f,d){var y=f.alternate;return y===null?(y=Jr(f.tag,d,f.key,f.mode),y.elementType=f.elementType,y.type=f.type,y.stateNode=f.stateNode,y.alternate=f,f.alternate=y):(y.pendingProps=d,y.type=f.type,y.flags=0,y.subtreeFlags=0,y.deletions=null),y.flags=f.flags&14680064,y.childLanes=f.childLanes,y.lanes=f.lanes,y.child=f.child,y.memoizedProps=f.memoizedProps,y.memoizedState=f.memoizedState,y.updateQueue=f.updateQueue,d=f.dependencies,y.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},y.sibling=f.sibling,y.index=f.index,y.ref=f.ref,y}function Pm(f,d,y,C,M,R){var K=2;if(C=f,typeof f=="function")qy(f)&&(K=1);else if(typeof f=="string")K=5;else e:switch(f){case c:return bl(y.children,M,R,d);case h:K=8,M|=8;break;case p:return f=Jr(12,y,d,M|2),f.elementType=p,f.lanes=R,f;case _:return f=Jr(13,y,d,M),f.elementType=_,f.lanes=R,f;case g:return f=Jr(19,y,d,M),f.elementType=g,f.lanes=R,f;case E:return Bm(y,M,R,d);default:if(typeof f=="object"&&f!==null)switch(f.$$typeof){case m:K=10;break e;case v:K=9;break e;case A:K=11;break e;case S:K=14;break e;case x:K=16,C=null;break e}throw Error(o(130,f==null?f:typeof f,""))}return d=Jr(K,y,d,M),d.elementType=f,d.type=C,d.lanes=R,d}function bl(f,d,y,C){return f=Jr(7,f,C,d),f.lanes=y,f}function Bm(f,d,y,C){return f=Jr(22,f,C,d),f.elementType=E,f.lanes=y,f.stateNode={},f}function Qy(f,d,y){return f=Jr(6,f,null,d),f.lanes=y,f}function $y(f,d,y){return d=Jr(4,f.children!==null?f.children:[],f.key,d),d.lanes=y,d.stateNode={containerInfo:f.containerInfo,pendingChildren:null,implementation:f.implementation},d}function HD(f,d,y,C,M){this.tag=d,this.containerInfo=f,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=nt,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Qv(0),this.expirationTimes=Qv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qv(0),this.identifierPrefix=C,this.onRecoverableError=M,De&&(this.mutableSourceEagerHydrationData=null)}function dw(f,d,y,C,M,R,K,le,Me){return f=new HD(f,d,y,le,Me),d===1?(d=1,R===!0&&(d|=8)):d=0,R=Jr(3,null,null,d),f.current=R,R.stateNode=f,R.memoizedState={element:C,isDehydrated:y,cache:null,transitions:null},ly(R),f}function pw(f){if(!f)return kt;f=f._reactInternals;e:{if(z(f)!==f||f.tag!==1)throw Error(o(170));var d=f;do{switch(d.tag){case 3:d=d.stateNode.context;break e;case 1:if(An(d.type)){d=d.stateNode.__reactInternalMemoizedMergedChildContext;break e}}d=d.return}while(d!==null);throw Error(o(171))}if(f.tag===1){var y=f.type;if(An(y))return Mn(f,y,d)}return d}function mw(f){var d=f._reactInternals;if(d===void 0)throw typeof f.render=="function"?Error(o(188)):(f=Object.keys(f).join(","),Error(o(268,f)));return f=Q(d),f===null?null:f.stateNode}function gw(f,d){if(f=f.memoizedState,f!==null&&f.dehydrated!==null){var y=f.retryLane;f.retryLane=y!==0&&y<d?y:d}}function e_(f,d){gw(f,d),(f=f.alternate)&&gw(f,d)}function GD(f){return f=Q(f),f===null?null:f.stateNode}function VD(){return null}return t.attemptContinuousHydration=function(f){if(f.tag===13){var d=Ki();Xr(f,134217728,d),e_(f,134217728)}},t.attemptHydrationAtCurrentPriority=function(f){if(f.tag===13){var d=Ki(),y=sa(f);Xr(f,y,d),e_(f,y)}},t.attemptSynchronousHydration=function(f){switch(f.tag){case 3:var d=f.stateNode;if(d.current.memoizedState.isDehydrated){var y=Yf(d.pendingLanes);y!==0&&($v(d,y|1),ar(d,ui()),!(zt&6)&&(ec(),ks()))}break;case 13:var C=Ki();rw(function(){return Xr(f,1,C)}),e_(f,1)}},t.batchedUpdates=function(f,d){var y=zt;zt|=1;try{return f(d)}finally{zt=y,zt===0&&(ec(),Wp&&ks())}},t.createComponentSelector=function(f){return{$$typeof:gm,value:f}},t.createContainer=function(f,d,y,C,M,R,K){return dw(f,d,!1,null,y,C,M,R,K)},t.createHasPseudoClassSelector=function(f){return{$$typeof:vm,value:f}},t.createHydrationContainer=function(f,d,y,C,M,R,K,le,Me){return f=dw(y,C,!0,f,M,R,K,le,Me),f.context=pw(null),y=f.current,C=Ki(),M=sa(y),R=go(C,M),R.callback=d??null,na(y,R),f.current.lanes=M,Zf(f,M,C),ar(f,C),f},t.createPortal=function(f,d,y){var C=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:C==null?null:""+C,children:f,containerInfo:d,implementation:y}},t.createRoleSelector=function(f){return{$$typeof:ym,value:f}},t.createTestNameSelector=function(f){return{$$typeof:_m,value:f}},t.createTextSelector=function(f){return{$$typeof:xm,value:f}},t.deferredUpdates=function(f){var d=en,y=Wn.transition;try{return Wn.transition=null,en=16,f()}finally{en=d,Wn.transition=y}},t.discreteUpdates=function(f,d,y,C,M){var R=en,K=Wn.transition;try{return Wn.transition=null,en=1,f(d,y,C,M)}finally{en=R,Wn.transition=K,zt===0&&ec()}},t.findAllNodes=zy,t.findBoundingRects=function(f,d){if(!de)throw Error(o(363));d=zy(f,d),f=[];for(var y=0;y<d.length;y++)f.push(L(d[y]));for(d=f.length-1;0<d;d--){y=f[d];for(var C=y.x,M=C+y.width,R=y.y,K=R+y.height,le=d-1;0<=le;le--)if(d!==le){var Me=f[le],We=Me.x,ut=We+Me.width,Pt=Me.y,Ct=Pt+Me.height;if(C>=We&&R>=Pt&&M<=ut&&K<=Ct){f.splice(d,1);break}else if(C!==We||y.width!==Me.width||Ct<R||Pt>K){if(!(R!==Pt||y.height!==Me.height||ut<C||We>M)){We>C&&(Me.width+=We-C,Me.x=C),ut<M&&(Me.width=M-We),f.splice(d,1);break}}else{Pt>R&&(Me.height+=Pt-R,Me.y=R),Ct<K&&(Me.height=K-Pt),f.splice(d,1);break}}}return f},t.findHostInstance=mw,t.findHostInstanceWithNoPortals=function(f){return f=D(f),f=f!==null?j(f):null,f===null?null:f.stateNode},t.findHostInstanceWithWarning=function(f){return mw(f)},t.flushControlled=function(f){var d=zt;zt|=1;var y=Wn.transition,C=en;try{Wn.transition=null,en=1,f()}finally{en=C,Wn.transition=y,zt=d,zt===0&&(ec(),ks())}},t.flushPassiveEffects=Tl,t.flushSync=rw,t.focusWithin=function(f,d){if(!de)throw Error(o(363));for(f=Oy(f),d=tw(f,d),d=Array.from(d),f=0;f<d.length;){var y=d[f++];if(!ue(y)){if(y.tag===5&&Pe(y.stateNode))return!0;for(y=y.child;y!==null;)d.push(y),y=y.sibling}}return!1},t.getCurrentUpdatePriority=function(){return en},t.getFindAllNodesFailureDescription=function(f,d){if(!de)throw Error(o(363));var y=0,C=[];f=[Oy(f),0];for(var M=0;M<f.length;){var R=f[M++],K=f[M++],le=d[K];if((R.tag!==5||!ue(R))&&(Uy(R,le)&&(C.push(ky(le)),K++,K>y&&(y=K)),K<d.length))for(R=R.child;R!==null;)f.push(R,K),R=R.sibling}if(y<d.length){for(f=[];y<d.length;y++)f.push(ky(d[y]));return`findAllNodes was able to match part of the selector:
  `+(C.join(" > ")+`

No matching component was found for:
  `)+f.join(" > ")}return null},t.getPublicRootInstance=function(f){if(f=f.current,!f.child)return null;switch(f.child.tag){case 5:return oe(f.child.stateNode);default:return f.child.stateNode}},t.injectIntoDevTools=function(f){if(f={bundleType:f.bundleType,version:f.version,rendererPackageName:f.rendererPackageName,rendererConfig:f.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:GD,findFiberByHostInstance:f.findFiberByHostInstance||VD,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")f=!1;else{var d=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(d.isDisabled||!d.supportsFiber)f=!0;else{try{Vp=d.inject(f),Os=d}catch{}f=!!d.checkDCE}}return f},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(f,d,y,C){if(!de)throw Error(o(363));f=zy(f,d);var M=ft(f,y,C).disconnect;return{disconnect:function(){M()}}},t.registerMutableSourceForHydration=function(f,d){var y=d._getVersion;y=y(d._source),f.mutableSourceEagerHydrationData==null?f.mutableSourceEagerHydrationData=[d,y]:f.mutableSourceEagerHydrationData.push(d,y)},t.runWithPriority=function(f,d){var y=en;try{return en=f,d()}finally{en=y}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(f,d,y,C){var M=d.current,R=Ki(),K=sa(M);return y=pw(y),d.context===null?d.context=y:d.pendingContext=y,d=go(R,K),d.payload={element:f},C=C===void 0?null:C,C!==null&&(d.callback=C),na(M,d),f=Xr(M,K,R),f!==null&&Kp(f,M,K),K},t};nI.exports=Fq;var Nq=nI.exports;const Oq=Og(Nq);var iI={exports:{}},rI={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(N,X){var J=N.length;N.push(X);e:for(;0<J;){var ae=J-1>>>1,me=N[ae];if(0<r(me,X))N[ae]=X,N[J]=me,J=ae;else break e}}function t(N){return N.length===0?null:N[0]}function i(N){if(N.length===0)return null;var X=N[0],J=N.pop();if(J!==X){N[0]=J;e:for(var ae=0,me=N.length,Ue=me>>>1;ae<Ue;){var he=2*(ae+1)-1,Te=N[he],we=he+1,je=N[we];if(0>r(Te,J))we<me&&0>r(je,Te)?(N[ae]=je,N[we]=J,ae=we):(N[ae]=Te,N[he]=J,ae=he);else if(we<me&&0>r(je,J))N[ae]=je,N[we]=J,ae=we;else break e}}return X}function r(N,X){var J=N.sortIndex-X.sortIndex;return J!==0?J:N.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,h=null,p=3,m=!1,v=!1,A=!1,_=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(N){for(var X=t(u);X!==null;){if(X.callback===null)i(u);else if(X.startTime<=N)i(u),X.sortIndex=X.expirationTime,e(l,X);else break;X=t(u)}}function E(N){if(A=!1,x(N),!v)if(t(l)!==null)v=!0,oe(b);else{var X=t(u);X!==null&&pe(E,X.startTime-N)}}function b(N,X){v=!1,A&&(A=!1,g(I),I=-1),m=!0;var J=p;try{for(x(X),h=t(l);h!==null&&(!(h.expirationTime>X)||N&&!D());){var ae=h.callback;if(typeof ae=="function"){h.callback=null,p=h.priorityLevel;var me=ae(h.expirationTime<=X);X=n.unstable_now(),typeof me=="function"?h.callback=me:h===t(l)&&i(l),x(X)}else i(l);h=t(l)}if(h!==null)var Ue=!0;else{var he=t(u);he!==null&&pe(E,he.startTime-X),Ue=!1}return Ue}finally{h=null,p=J,m=!1}}var T=!1,P=null,I=-1,z=5,w=-1;function D(){return!(n.unstable_now()-w<z)}function Q(){if(P!==null){var N=n.unstable_now();w=N;var X=!0;try{X=P(!0,N)}finally{X?ie():(T=!1,P=null)}}else T=!1}var ie;if(typeof S=="function")ie=function(){S(Q)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,se=j.port2;j.port1.onmessage=Q,ie=function(){se.postMessage(null)}}else ie=function(){_(Q,0)};function oe(N){P=N,T||(T=!0,ie())}function pe(N,X){I=_(function(){N(n.unstable_now())},X)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(N){N.callback=null},n.unstable_continueExecution=function(){v||m||(v=!0,oe(b))},n.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<N?Math.floor(1e3/N):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(N){switch(p){case 1:case 2:case 3:var X=3;break;default:X=p}var J=p;p=X;try{return N()}finally{p=J}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(N,X){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var J=p;p=N;try{return X()}finally{p=J}},n.unstable_scheduleCallback=function(N,X,J){var ae=n.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?ae+J:ae):J=ae,N){case 1:var me=-1;break;case 2:me=250;break;case 5:me=1073741823;break;case 4:me=1e4;break;default:me=5e3}return me=J+me,N={id:c++,callback:X,priorityLevel:N,startTime:J,expirationTime:me,sortIndex:-1},J>ae?(N.sortIndex=J,e(u,N),t(l)===null&&N===t(u)&&(A?(g(I),I=-1):A=!0,pe(E,J-ae))):(N.sortIndex=me,e(l,N),v||m||(v=!0,oe(b))),N},n.unstable_shouldYield=D,n.unstable_wrapCallback=function(N){var X=p;return function(){var J=p;p=X;try{return N.apply(this,arguments)}finally{p=J}}}})(rI);iI.exports=rI;var L6=iI.exports;const Uq=n=>typeof n=="object"&&typeof n.then=="function",cu=[];function sI(n,e,t=(i,r)=>i===r){if(n===e)return!0;if(!n||!e)return!1;const i=n.length;if(e.length!==i)return!1;for(let r=0;r<i;r++)if(!t(n[r],e[r]))return!1;return!0}function oI(n,e=null,t=!1,i={}){e===null&&(e=[n]);for(const s of cu)if(sI(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return i.lifespan&&i.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,i.lifespan)),s.response;if(!t)throw s.promise}const r={keys:e,equal:i.equal,remove:()=>{const s=cu.indexOf(r);s!==-1&&cu.splice(s,1)},promise:(Uq(n)?n:n(...e)).then(s=>{r.response=s,i.lifespan&&i.lifespan>0&&(r.timeout=setTimeout(r.remove,i.lifespan))}).catch(s=>r.error=s)};if(cu.push(r),!t)throw r.promise}const kq=(n,e,t)=>oI(n,e,!1,t),zq=(n,e,t)=>void oI(n,e,!0,t),Hq=n=>{if(n===void 0||n.length===0)cu.splice(0,cu.length);else{const e=cu.find(t=>sI(n,t.keys,t.equal));e&&e.remove()}},cE={},aI=n=>void Object.assign(cE,n);function Gq(n,e){function t(c,{args:h=[],attach:p,...m},v){let A=`${c[0].toUpperCase()}${c.slice(1)}`,_;if(c==="primitive"){if(m.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const g=m.object;_=Pc(g,{type:c,root:v,attach:p,primitive:!0})}else{const g=cE[A];if(!g)throw new Error(`R3F: ${A} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(h))throw new Error("R3F: The args prop must be an array!");_=Pc(new g(...h),{type:c,root:v,attach:p,memoizedProps:{args:h}})}return _.__r3f.attach===void 0&&(_ instanceof It?_.__r3f.attach="geometry":_ instanceof ti&&(_.__r3f.attach="material")),A!=="inject"&&Lx(_,m),_}function i(c,h){let p=!1;if(h){var m,v;(m=h.__r3f)!=null&&m.attach?Ix(c,h,h.__r3f.attach):h.isObject3D&&c.isObject3D&&(c.add(h),p=!0),p||(v=c.__r3f)==null||v.objects.push(h),h.__r3f||Pc(h,{}),h.__r3f.parent=c,gA(h),Bc(h)}}function r(c,h,p){let m=!1;if(h){var v,A;if((v=h.__r3f)!=null&&v.attach)Ix(c,h,h.__r3f.attach);else if(h.isObject3D&&c.isObject3D){h.parent=c,h.dispatchEvent({type:"added"}),c.dispatchEvent({type:"childadded",child:h});const _=c.children.filter(S=>S!==h),g=_.indexOf(p);c.children=[..._.slice(0,g),h,..._.slice(g)],m=!0}m||(A=c.__r3f)==null||A.objects.push(h),h.__r3f||Pc(h,{}),h.__r3f.parent=c,gA(h),Bc(h)}}function s(c,h,p=!1){c&&[...c].forEach(m=>o(h,m,p))}function o(c,h,p){if(h){var m,v,A;if(h.__r3f&&(h.__r3f.parent=null),(m=c.__r3f)!=null&&m.objects&&(c.__r3f.objects=c.__r3f.objects.filter(E=>E!==h)),(v=h.__r3f)!=null&&v.attach)U6(c,h,h.__r3f.attach);else if(h.isObject3D&&c.isObject3D){var _;c.remove(h),(_=h.__r3f)!=null&&_.root&&Zq(T0(h),h)}const S=(A=h.__r3f)==null?void 0:A.primitive,x=!S&&(p===void 0?h.dispose!==null:p);if(!S){var g;s((g=h.__r3f)==null?void 0:g.objects,h,x),s(h.children,h,x)}if(delete h.__r3f,x&&h.dispose&&h.type!=="Scene"){const E=()=>{try{h.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?L6.unstable_scheduleCallback(L6.unstable_IdlePriority,E):E()}Bc(c)}}function a(c,h,p,m){var v;const A=(v=c.__r3f)==null?void 0:v.parent;if(!A)return;const _=t(h,p,c.__r3f.root);if(c.children){for(const g of c.children)g.__r3f&&i(_,g);c.children=c.children.filter(g=>!g.__r3f)}c.__r3f.objects.forEach(g=>i(_,g)),c.__r3f.objects=[],c.__r3f.autoRemovedBeforeAppend||o(A,c),_.parent&&(_.__r3f.autoRemovedBeforeAppend=!0),i(A,_),_.raycast&&_.__r3f.eventCount&&T0(_).getState().internal.interaction.push(_),[m,m.alternate].forEach(g=>{g!==null&&(g.stateNode=_,g.ref&&(typeof g.ref=="function"?g.ref(_):g.ref.current=_))})}const l=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:Oq({createInstance:t,removeChild:o,appendChild:i,appendInitialChild:i,insertBefore:r,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(c,h)=>{if(!h)return;const p=c.getState().scene;p.__r3f&&(p.__r3f.root=c,i(p,h))},removeChildFromContainer:(c,h)=>{h&&o(c.getState().scene,h)},insertInContainerBefore:(c,h,p)=>{if(!h||!p)return;const m=c.getState().scene;m.__r3f&&r(m,h,p)},getRootHostContext:()=>null,getChildHostContext:c=>c,finalizeInitialChildren(c){var h;return!!((h=c==null?void 0:c.__r3f)!=null?h:{}).handlers},prepareUpdate(c,h,p,m){var v;if(((v=c==null?void 0:c.__r3f)!=null?v:{}).primitive&&m.object&&m.object!==c)return[!0];{const{args:_=[],children:g,...S}=m,{args:x=[],children:E,...b}=p;if(!Array.isArray(_))throw new Error("R3F: the args prop must be an array!");if(_.some((P,I)=>P!==x[I]))return[!0];const T=pI(c,S,b,!0);return T.changes.length?[!1,T]:null}},commitUpdate(c,[h,p],m,v,A,_){h?a(c,m,A,_):Lx(c,p)},commitMount(c,h,p,m){var v;const A=(v=c.__r3f)!=null?v:{};c.raycast&&A.handlers&&A.eventCount&&T0(c).getState().internal.interaction.push(c)},getPublicInstance:c=>c,prepareForCommit:()=>null,preparePortalMount:c=>Pc(c.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(c){var h;const{attach:p,parent:m}=(h=c.__r3f)!=null?h:{};p&&m&&U6(m,c,p),c.isObject3D&&(c.visible=!1),Bc(c)},unhideInstance(c,h){var p;const{attach:m,parent:v}=(p=c.__r3f)!=null?p:{};m&&v&&Ix(v,c,m),(c.isObject3D&&h.visible==null||h.visible)&&(c.visible=!0),Bc(c)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():Qc.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&yn.fun(performance.now)?performance.now:yn.fun(Date.now)?Date.now:()=>0,scheduleTimeout:yn.fun(setTimeout)?setTimeout:void 0,cancelTimeout:yn.fun(clearTimeout)?clearTimeout:void 0}),applyProps:Lx}}var D6,F6;const Bx=n=>"colorSpace"in n||"outputColorSpace"in n,lI=()=>{var n;return(n=cE.ColorManagement)!=null?n:null},uI=n=>n&&n.isOrthographicCamera,Vq=n=>n&&n.hasOwnProperty("current"),Ip=typeof window<"u"&&((D6=window.document)!=null&&D6.createElement||((F6=window.navigator)==null?void 0:F6.product)==="ReactNative")?G.useLayoutEffect:G.useEffect;function cI(n){const e=G.useRef(n);return Ip(()=>void(e.current=n),[n]),e}function Wq({set:n}){return Ip(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}class fI extends G.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}fI.getDerivedStateFromError=()=>({error:!0});const hI="__default",N6=new Map,jq=n=>n&&!!n.memoized&&!!n.changes;function dI(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}const Nh=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()};function T0(n){let e=n.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const yn={obj:n=>n===Object(n)&&!yn.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:i="reference",strict:r=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(yn.str(n)||yn.num(n))return n===e;const s=yn.obj(n);if(s&&i==="reference")return n===e;const o=yn.arr(n);if(o&&t==="reference")return n===e;if((o||s)&&n===e)return!0;let a;for(a in n)if(!(a in e))return!1;if(s&&t==="shallow"&&i==="shallow"){for(a in r?e:n)if(!yn.equ(n[a],e[a],{strict:r,objects:"reference"}))return!1}else for(a in r?e:n)if(n[a]!==e[a])return!1;if(yn.und(a)){if(o&&n.length===0&&e.length===0||s&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function Xq(n){const e={nodes:{},materials:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function Jq(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function Pc(n,e){const t=n;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},n}function mA(n,e){let t=n;if(e.includes("-")){const i=e.split("-"),r=i.pop();return t=i.reduce((s,o)=>s[o],n),{target:t,key:r}}else return{target:t,key:e}}const O6=/-\d+$/;function Ix(n,e,t){if(yn.str(t)){if(O6.test(t)){const s=t.replace(O6,""),{target:o,key:a}=mA(n,s);Array.isArray(o[a])||(o[a]=[])}const{target:i,key:r}=mA(n,t);e.__r3f.previousAttach=i[r],i[r]=e}else e.__r3f.previousAttach=t(n,e)}function U6(n,e,t){var i,r;if(yn.str(t)){const{target:s,key:o}=mA(n,t),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(i=e.__r3f)==null||i.previousAttach==null||i.previousAttach(n,e);(r=e.__r3f)==null||delete r.previousAttach}function pI(n,{children:e,key:t,ref:i,...r},{children:s,key:o,ref:a,...l}={},u=!1){var c;const h=(c=n==null?void 0:n.__r3f)!=null?c:{},p=Object.entries(r),m=[];if(u){const A=Object.keys(l);for(let _=0;_<A.length;_++)r.hasOwnProperty(A[_])||p.unshift([A[_],hI+"remove"])}p.forEach(([A,_])=>{var g;if((g=n.__r3f)!=null&&g.primitive&&A==="object"||yn.equ(_,l[A]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(A))return m.push([A,_,!0,[]]);let S=[];A.includes("-")&&(S=A.split("-")),m.push([A,_,!1,S]);for(const x in r){const E=r[x];x.startsWith(`${A}-`)&&m.push([x,E,!1,x.split("-")])}});const v={...r};return h.memoizedProps&&h.memoizedProps.args&&(v.args=h.memoizedProps.args),h.memoizedProps&&h.memoizedProps.attach&&(v.attach=h.memoizedProps.attach),{memoized:v,changes:m}}const Kq=typeof process<"u"&&!1;function Lx(n,e){var t,i,r;const s=(t=n.__r3f)!=null?t:{},o=s.root,a=(i=o==null||o.getState==null?void 0:o.getState())!=null?i:{},{memoized:l,changes:u}=jq(e)?e:pI(n,e),c=s.eventCount;n.__r3f&&(n.__r3f.memoizedProps=l);for(let p=0;p<u.length;p++){let[m,v,A,_]=u[p];if(Bx(n)){const E="srgb",b="srgb-linear";m==="encoding"?(m="colorSpace",v=v===3001?E:b):m==="outputEncoding"&&(m="outputColorSpace",v=v===3001?E:b)}let g=n,S=g[m];if(_.length&&(S=_.reduce((x,E)=>x[E],n),!(S&&S.set))){const[x,...E]=_.reverse();g=E.reverse().reduce((b,T)=>b[T],n),m=x}if(v===hI+"remove")if(g.constructor){let x=N6.get(g.constructor);x||(x=new g.constructor,N6.set(g.constructor,x)),v=x[m]}else v=0;if(A)v?s.handlers[m]=v:delete s.handlers[m],s.eventCount=Object.keys(s.handlers).length;else if(S&&S.set&&(S.copy||S instanceof yu)){if(Array.isArray(v))S.fromArray?S.fromArray(v):S.set(...v);else if(S.copy&&v&&v.constructor&&(Kq?S.constructor.name===v.constructor.name:S.constructor===v.constructor))S.copy(v);else if(v!==void 0){const x=S instanceof qe;!x&&S.setScalar?S.setScalar(v):S instanceof yu&&v instanceof yu?S.mask=v.mask:S.set(v),!lI()&&!a.linear&&x&&S.convertSRGBToLinear()}}else if(g[m]=v,g[m]instanceof gn&&g[m].format===zi&&g[m].type===ro){const x=g[m];Bx(x)&&Bx(a.gl)?x.colorSpace=a.gl.outputColorSpace:x.encoding=a.gl.outputEncoding}Bc(n)}if(s.parent&&n.raycast&&c!==s.eventCount){const p=T0(n).getState().internal,m=p.interaction.indexOf(n);m>-1&&p.interaction.splice(m,1),s.eventCount&&p.interaction.push(n)}return!(u.length===1&&u[0][0]==="onUpdate")&&u.length&&(r=n.__r3f)!=null&&r.parent&&gA(n),n}function Bc(n){var e,t;const i=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();i&&i.internal.frames===0&&i.invalidate()}function gA(n){n.onUpdate==null||n.onUpdate(n)}function mI(n,e){n.manual||(uI(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function W1(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function Yq(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return Qc.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Qc.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Qc.ContinuousEventPriority;default:return Qc.DefaultEventPriority}}function gI(n,e,t,i){const r=t.get(e);r&&(t.delete(e),t.size===0&&(n.delete(i),r.target.releasePointerCapture(i)))}function Zq(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(i=>i!==e),t.initialHits=t.initialHits.filter(i=>i!==e),t.hovered.forEach((i,r)=>{(i.eventObject===e||i.object===e)&&t.hovered.delete(r)}),t.capturedMap.forEach((i,r)=>{gI(t.capturedMap,e,i,r)})}function qq(n){function e(l){const{internal:u}=n.getState(),c=l.offsetX-u.initialClick[0],h=l.offsetY-u.initialClick[1];return Math.round(Math.sqrt(c*c+h*h))}function t(l){return l.filter(u=>["Move","Over","Enter","Out","Leave"].some(c=>{var h;return(h=u.__r3f)==null?void 0:h.handlers["onPointer"+c]}))}function i(l,u){const c=n.getState(),h=new Set,p=[],m=u?u(c.internal.interaction):c.internal.interaction;for(let g=0;g<m.length;g++){const S=Nh(m[g]);S&&(S.raycaster.camera=void 0)}c.previousRoot||c.events.compute==null||c.events.compute(l,c);function v(g){const S=Nh(g);if(!S||!S.events.enabled||S.raycaster.camera===null)return[];if(S.raycaster.camera===void 0){var x;S.events.compute==null||S.events.compute(l,S,(x=S.previousRoot)==null?void 0:x.getState()),S.raycaster.camera===void 0&&(S.raycaster.camera=null)}return S.raycaster.camera?S.raycaster.intersectObject(g,!0):[]}let A=m.flatMap(v).sort((g,S)=>{const x=Nh(g.object),E=Nh(S.object);return!x||!E?g.distance-S.distance:E.events.priority-x.events.priority||g.distance-S.distance}).filter(g=>{const S=W1(g);return h.has(S)?!1:(h.add(S),!0)});c.events.filter&&(A=c.events.filter(A,c));for(const g of A){let S=g.object;for(;S;){var _;(_=S.__r3f)!=null&&_.eventCount&&p.push({...g,eventObject:S}),S=S.parent}}if("pointerId"in l&&c.internal.capturedMap.has(l.pointerId))for(let g of c.internal.capturedMap.get(l.pointerId).values())h.has(W1(g.intersection))||p.push(g.intersection);return p}function r(l,u,c,h){const p=n.getState();if(l.length){const m={stopped:!1};for(const v of l){const A=Nh(v.object)||p,{raycaster:_,pointer:g,camera:S,internal:x}=A,E=new H(g.x,g.y,0).unproject(S),b=w=>{var D,Q;return(D=(Q=x.capturedMap.get(w))==null?void 0:Q.has(v.eventObject))!=null?D:!1},T=w=>{const D={intersection:v,target:u.target};x.capturedMap.has(w)?x.capturedMap.get(w).set(v.eventObject,D):x.capturedMap.set(w,new Map([[v.eventObject,D]])),u.target.setPointerCapture(w)},P=w=>{const D=x.capturedMap.get(w);D&&gI(x.capturedMap,v.eventObject,D,w)};let I={};for(let w in u){let D=u[w];typeof D!="function"&&(I[w]=D)}let z={...v,...I,pointer:g,intersections:l,stopped:m.stopped,delta:c,unprojectedPoint:E,ray:_.ray,camera:S,stopPropagation(){const w="pointerId"in u&&x.capturedMap.get(u.pointerId);if((!w||w.has(v.eventObject))&&(z.stopped=m.stopped=!0,x.hovered.size&&Array.from(x.hovered.values()).find(D=>D.eventObject===v.eventObject))){const D=l.slice(0,l.indexOf(v));s([...D,v])}},target:{hasPointerCapture:b,setPointerCapture:T,releasePointerCapture:P},currentTarget:{hasPointerCapture:b,setPointerCapture:T,releasePointerCapture:P},nativeEvent:u};if(h(z),m.stopped===!0)break}}return l}function s(l){const{internal:u}=n.getState();for(const c of u.hovered.values())if(!l.length||!l.find(h=>h.object===c.object&&h.index===c.index&&h.instanceId===c.instanceId)){const p=c.eventObject.__r3f,m=p==null?void 0:p.handlers;if(u.hovered.delete(W1(c)),p!=null&&p.eventCount){const v={...c,intersections:l};m.onPointerOut==null||m.onPointerOut(v),m.onPointerLeave==null||m.onPointerLeave(v)}}}function o(l,u){for(let c=0;c<u.length;c++){const h=u[c].__r3f;h==null||h.handlers.onPointerMissed==null||h.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return u=>{const{internal:c}=n.getState();"pointerId"in u&&c.capturedMap.has(u.pointerId)&&requestAnimationFrame(()=>{c.capturedMap.has(u.pointerId)&&(c.capturedMap.delete(u.pointerId),s([]))})}}return function(c){const{onPointerMissed:h,internal:p}=n.getState();p.lastEvent.current=c;const m=l==="onPointerMove",v=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",_=i(c,m?t:void 0),g=v?e(c):0;l==="onPointerDown"&&(p.initialClick=[c.offsetX,c.offsetY],p.initialHits=_.map(x=>x.eventObject)),v&&!_.length&&g<=2&&(o(c,p.interaction),h&&h(c)),m&&s(_);function S(x){const E=x.eventObject,b=E.__r3f,T=b==null?void 0:b.handlers;if(b!=null&&b.eventCount)if(m){if(T.onPointerOver||T.onPointerEnter||T.onPointerOut||T.onPointerLeave){const P=W1(x),I=p.hovered.get(P);I?I.stopped&&x.stopPropagation():(p.hovered.set(P,x),T.onPointerOver==null||T.onPointerOver(x),T.onPointerEnter==null||T.onPointerEnter(x))}T.onPointerMove==null||T.onPointerMove(x)}else{const P=T[l];P?(!v||p.initialHits.includes(E))&&(o(c,p.interaction.filter(I=>!p.initialHits.includes(I))),P(x)):v&&p.initialHits.includes(E)&&o(c,p.interaction.filter(I=>!p.initialHits.includes(I)))}}r(_,c,g,S)}}return{handlePointer:a}}const Qq=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],vI=n=>!!(n!=null&&n.render),fE=G.createContext(null),$q=(n,e)=>{const t=tI((a,l)=>{const u=new H,c=new H,h=new H;function p(g=l().camera,S=c,x=l().size){const{width:E,height:b,top:T,left:P}=x,I=E/b;S instanceof H?h.copy(S):h.set(...S);const z=g.getWorldPosition(u).distanceTo(h);if(uI(g))return{width:E/g.zoom,height:b/g.zoom,top:T,left:P,factor:1,distance:z,aspect:I};{const w=g.fov*Math.PI/180,D=2*Math.tan(w/2)*z,Q=D*(E/b);return{width:Q,height:D,top:T,left:P,factor:E/Q,distance:z,aspect:I}}}let m;const v=g=>a(S=>({performance:{...S.performance,current:g}})),A=new be;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(g=1)=>n(l(),g),advance:(g,S)=>e(g,S,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new sE,pointer:A,mouse:A,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const g=l();m&&clearTimeout(m),g.performance.current!==g.performance.min&&v(g.performance.min),m=setTimeout(()=>v(l().performance.max),g.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:p},setEvents:g=>a(S=>({...S,events:{...S.events,...g}})),setSize:(g,S,x,E,b)=>{const T=l().camera,P={width:g,height:S,top:E||0,left:b||0,updateStyle:x};a(I=>({size:P,viewport:{...I.viewport,...p(T,c,P)}}))},setDpr:g=>a(S=>{const x=dI(g);return{viewport:{...S.viewport,dpr:x,initialDpr:S.viewport.initialDpr||x}}}),setFrameloop:(g="always")=>{const S=l().clock;S.stop(),S.elapsedTime=0,g!=="never"&&(S.start(),S.elapsedTime=0),a(()=>({frameloop:g}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:G.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(g,S,x)=>{const E=l().internal;return E.priority=E.priority+(S>0?1:0),E.subscribers.push({ref:g,priority:S,store:x}),E.subscribers=E.subscribers.sort((b,T)=>b.priority-T.priority),()=>{const b=l().internal;b!=null&&b.subscribers&&(b.priority=b.priority-(S>0?1:0),b.subscribers=b.subscribers.filter(T=>T.ref!==g))}}}}}),i=t.getState();let r=i.size,s=i.viewport.dpr,o=i.camera;return t.subscribe(()=>{const{camera:a,size:l,viewport:u,gl:c,set:h}=t.getState();if(l.width!==r.width||l.height!==r.height||u.dpr!==s){var p;r=l,s=u.dpr,mI(a,l),c.setPixelRatio(u.dpr);const m=(p=l.updateStyle)!=null?p:typeof HTMLCanvasElement<"u"&&c.domElement instanceof HTMLCanvasElement;c.setSize(l.width,l.height,m)}a!==o&&(o=a,h(m=>({viewport:{...m.viewport,...m.viewport.getCurrentViewport(a)}})))}),t.subscribe(a=>n(a)),t};let j1,eQ=new Set,tQ=new Set,nQ=new Set;function Dx(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function Oh(n,e){switch(n){case"before":return Dx(eQ,e);case"after":return Dx(tQ,e);case"tail":return Dx(nQ,e)}}let Fx,Nx;function Ox(n,e,t){let i=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(i=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),Fx=e.internal.subscribers,j1=0;j1<Fx.length;j1++)Nx=Fx[j1],Nx.ref.current(Nx.store.getState(),i,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function iQ(n){let e=!1,t,i,r;function s(l){i=requestAnimationFrame(s),e=!0,t=0,Oh("before",l);for(const c of n.values()){var u;r=c.store.getState(),r.internal.active&&(r.frameloop==="always"||r.internal.frames>0)&&!((u=r.gl.xr)!=null&&u.isPresenting)&&(t+=Ox(l,r))}if(Oh("after",l),t===0)return Oh("tail",l),e=!1,cancelAnimationFrame(i)}function o(l,u=1){var c;if(!l)return n.forEach(h=>o(h.store.getState(),u));(c=l.gl.xr)!=null&&c.isPresenting||!l.internal.active||l.frameloop==="never"||(l.internal.frames=Math.min(60,l.internal.frames+u),e||(e=!0,requestAnimationFrame(s)))}function a(l,u=!0,c,h){if(u&&Oh("before",l),c)Ox(l,c,h);else for(const p of n.values())Ox(l,p.store.getState());u&&Oh("after",l)}return{loop:s,invalidate:o,advance:a}}function hE(){const n=G.useContext(fE);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function Si(n=t=>t,e){return hE()(n,e)}function Ov(n,e=0){const t=hE(),i=t.getState().internal.subscribe,r=cI(n);return Ip(()=>i(r,e,t),[e,i,t]),null}const k6=new WeakMap;function yI(n,e){return function(t,...i){let r=k6.get(t);return r||(r=new t,k6.set(t,r)),n&&n(r),Promise.all(i.map(s=>new Promise((o,a)=>r.load(s,l=>{l.scene&&Object.assign(l,Xq(l.scene)),o(l)},e,l=>a(new Error(`Could not load ${s}: ${l==null?void 0:l.message}`)))))).finally(()=>r.dispose==null?void 0:r.dispose())}}function Xf(n,e,t,i){const r=Array.isArray(e)?e:[e],s=kq(yI(t,i),[n,...r],{equal:yn.equ});return Array.isArray(e)?s:s[0]}Xf.preload=function(n,e,t){const i=Array.isArray(e)?e:[e];return zq(yI(t),[n,...i])};Xf.clear=function(n,e){const t=Array.isArray(e)?e:[e];return Hq([n,...t])};const Pf=new Map,{invalidate:z6,advance:H6}=iQ(Pf),{reconciler:sp,applyProps:Ec}=Gq(Pf,Yq),Mc={objects:"shallow",strict:!1},rQ=(n,e)=>{const t=typeof n=="function"?n(e):n;return vI(t)?t:new OC({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})};function sQ(n,e){const t=typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement;if(e){const{width:i,height:r,top:s,left:o,updateStyle:a=t}=e;return{width:i,height:r,top:s,left:o,updateStyle:a}}else if(typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:i,height:r,top:s,left:o}=n.parentElement.getBoundingClientRect();return{width:i,height:r,top:s,left:o,updateStyle:t}}else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0,updateStyle:t};return{width:0,height:0,top:0,left:0}}function oQ(n){const e=Pf.get(n),t=e==null?void 0:e.fiber,i=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const r=typeof reportError=="function"?reportError:console.error,s=i||$q(z6,H6),o=t||sp.createContainer(s,Qc.ConcurrentRoot,null,!1,null,"",r,null);e||Pf.set(n,{fiber:o,store:s});let a,l=!1,u;return{configure(c={}){let{gl:h,size:p,scene:m,events:v,onCreated:A,shadows:_=!1,linear:g=!1,flat:S=!1,legacy:x=!1,orthographic:E=!1,frameloop:b="always",dpr:T=[1,2],performance:P,raycaster:I,camera:z,onPointerMissed:w}=c,D=s.getState(),Q=D.gl;D.gl||D.set({gl:Q=rQ(h,n)});let ie=D.raycaster;ie||D.set({raycaster:ie=new uE});const{params:j,...se}=I||{};if(yn.equ(se,ie,Mc)||Ec(ie,{...se}),yn.equ(j,ie.params,Mc)||Ec(ie,{params:{...ie.params,...j}}),!D.camera||D.camera===u&&!yn.equ(u,z,Mc)){u=z;const J=z instanceof Sp,ae=J?z:E?new Zs(0,0,0,0,.1,1e3):new Rn(75,0,.1,1e3);J||(ae.position.z=5,z&&Ec(ae,z),!D.camera&&!(z!=null&&z.rotation)&&ae.lookAt(0,0,0)),D.set({camera:ae}),ie.camera=ae}if(!D.scene){let J;m instanceof $d?J=m:(J=new $d,m&&Ec(J,m)),D.set({scene:Pc(J)})}if(!D.xr){var oe;const J=(Ue,he)=>{const Te=s.getState();Te.frameloop!=="never"&&H6(Ue,!0,Te,he)},ae=()=>{const Ue=s.getState();Ue.gl.xr.enabled=Ue.gl.xr.isPresenting,Ue.gl.xr.setAnimationLoop(Ue.gl.xr.isPresenting?J:null),Ue.gl.xr.isPresenting||z6(Ue)},me={connect(){const Ue=s.getState().gl;Ue.xr.addEventListener("sessionstart",ae),Ue.xr.addEventListener("sessionend",ae)},disconnect(){const Ue=s.getState().gl;Ue.xr.removeEventListener("sessionstart",ae),Ue.xr.removeEventListener("sessionend",ae)}};typeof((oe=Q.xr)==null?void 0:oe.addEventListener)=="function"&&me.connect(),D.set({xr:me})}if(Q.shadowMap){const J=Q.shadowMap.enabled,ae=Q.shadowMap.type;if(Q.shadowMap.enabled=!!_,yn.boo(_))Q.shadowMap.type=hd;else if(yn.str(_)){var pe;const me={basic:Y7,percentage:uv,soft:hd,variance:Ss};Q.shadowMap.type=(pe=me[_])!=null?pe:hd}else yn.obj(_)&&Object.assign(Q.shadowMap,_);(J!==Q.shadowMap.enabled||ae!==Q.shadowMap.type)&&(Q.shadowMap.needsUpdate=!0)}const N=lI();N&&("enabled"in N?N.enabled=!x:"legacyMode"in N&&(N.legacyMode=x)),l||Ec(Q,{outputEncoding:g?3e3:3001,toneMapping:S?io:gC}),D.legacy!==x&&D.set(()=>({legacy:x})),D.linear!==g&&D.set(()=>({linear:g})),D.flat!==S&&D.set(()=>({flat:S})),h&&!yn.fun(h)&&!vI(h)&&!yn.equ(h,Q,Mc)&&Ec(Q,h),v&&!D.events.handlers&&D.set({events:v(s)});const X=sQ(n,p);return yn.equ(X,D.size,Mc)||D.setSize(X.width,X.height,X.updateStyle,X.top,X.left),T&&D.viewport.dpr!==dI(T)&&D.setDpr(T),D.frameloop!==b&&D.setFrameloop(b),D.onPointerMissed||D.set({onPointerMissed:w}),P&&!yn.equ(P,D.performance,Mc)&&D.set(J=>({performance:{...J.performance,...P}})),a=A,l=!0,this},render(c){return l||this.configure(),sp.updateContainer(G.createElement(aQ,{store:s,children:c,onCreated:a,rootElement:n}),o,null,()=>{}),s},unmount(){_I(n)}}}function aQ({store:n,children:e,onCreated:t,rootElement:i}){return Ip(()=>{const r=n.getState();r.set(s=>({internal:{...s.internal,active:!0}})),t&&t(r),n.getState().events.connected||r.events.connect==null||r.events.connect(i)},[]),G.createElement(fE.Provider,{value:n},e)}function _I(n,e){const t=Pf.get(n),i=t==null?void 0:t.fiber;if(i){const r=t==null?void 0:t.store.getState();r&&(r.internal.active=!1),sp.updateContainer(null,i,null,()=>{r&&setTimeout(()=>{try{var s,o,a,l;r.events.disconnect==null||r.events.disconnect(),(s=r.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=r.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=r.gl)!=null&&l.xr&&r.xr.disconnect(),Jq(r),Pf.delete(n),e&&e(n)}catch{}},500)})}}function lQ(n,e,t){return G.createElement(uQ,{key:e.uuid,children:n,container:e,state:t})}function uQ({state:n={},children:e,container:t}){const{events:i,size:r,...s}=n,o=hE(),[a]=G.useState(()=>new uE),[l]=G.useState(()=>new be),u=G.useCallback((h,p)=>{const m={...h};Object.keys(h).forEach(A=>{(Qq.includes(A)||h[A]!==p[A]&&p[A])&&delete m[A]});let v;if(p&&r){const A=p.camera;v=h.viewport.getCurrentViewport(A,new H,r),A!==h.camera&&mI(A,r)}return{...m,scene:t,raycaster:a,pointer:l,mouse:l,previousRoot:o,events:{...h.events,...p==null?void 0:p.events,...i},size:{...h.size,...r},viewport:{...h.viewport,...v},...s}},[n]),[c]=G.useState(()=>{const h=o.getState();return tI((m,v)=>({...h,scene:t,raycaster:a,pointer:l,mouse:l,previousRoot:o,events:{...h.events,...i},size:{...h.size,...r},...s,set:m,get:v,setEvents:A=>m(_=>({..._,events:{..._.events,...A}}))}))});return G.useEffect(()=>{const h=o.subscribe(p=>c.setState(m=>u(p,m)));return()=>{h(),c.destroy()}},[]),G.useEffect(()=>{c.setState(h=>u(o.getState(),h))},[u]),G.createElement(G.Fragment,null,sp.createPortal(G.createElement(fE.Provider,{value:c},e),c,null))}sp.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:G.version});function Ru(){return Ru=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Ru.apply(this,arguments)}function vA(n,e,t){var i,r,s,o,a;e==null&&(e=100);function l(){var c=Date.now()-o;c<e&&c>=0?i=setTimeout(l,e-c):(i=null,t||(a=n.apply(s,r),s=r=null))}var u=function(){s=this,r=arguments,o=Date.now();var c=t&&!i;return i||(i=setTimeout(l,e)),c&&(a=n.apply(s,r),s=r=null),a};return u.clear=function(){i&&(clearTimeout(i),i=null)},u.flush=function(){i&&(a=n.apply(s,r),s=r=null,clearTimeout(i),i=null)},u}vA.debounce=vA;var cQ=vA;const G6=Og(cQ);function fQ(n){let{debounce:e,scroll:t,polyfill:i,offsetSize:r}=n===void 0?{debounce:0,scroll:!1,offsetSize:!1}:n;const s=i||(typeof window>"u"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[o,a]=G.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=G.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:o}),u=e?typeof e=="number"?e:e.scroll:null,c=e?typeof e=="number"?e:e.resize:null,h=G.useRef(!1);G.useEffect(()=>(h.current=!0,()=>void(h.current=!1)));const[p,m,v]=G.useMemo(()=>{const S=()=>{if(!l.current.element)return;const{left:x,top:E,width:b,height:T,bottom:P,right:I,x:z,y:w}=l.current.element.getBoundingClientRect(),D={left:x,top:E,width:b,height:T,bottom:P,right:I,x:z,y:w};l.current.element instanceof HTMLElement&&r&&(D.height=l.current.element.offsetHeight,D.width=l.current.element.offsetWidth),Object.freeze(D),h.current&&!mQ(l.current.lastBounds,D)&&a(l.current.lastBounds=D)};return[S,c?G6(S,c):S,u?G6(S,u):S]},[a,r,u,c]);function A(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(S=>S.removeEventListener("scroll",v,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null)}function _(){l.current.element&&(l.current.resizeObserver=new s(v),l.current.resizeObserver.observe(l.current.element),t&&l.current.scrollContainers&&l.current.scrollContainers.forEach(S=>S.addEventListener("scroll",v,{capture:!0,passive:!0})))}const g=S=>{!S||S===l.current.element||(A(),l.current.element=S,l.current.scrollContainers=xI(S),_())};return dQ(v,!!t),hQ(m),G.useEffect(()=>{A(),_()},[t,v,m]),G.useEffect(()=>A,[]),[g,o,p]}function hQ(n){G.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function dQ(n,e){G.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function xI(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:i,overflowY:r}=window.getComputedStyle(n);return[t,i,r].some(s=>s==="auto"||s==="scroll")&&e.push(n),[...e,...xI(n.parentElement)]}const pQ=["x","y","top","bottom","left","right","width","height"],mQ=(n,e)=>pQ.every(t=>n[t]===e[t]);var gQ=Object.defineProperty,vQ=Object.defineProperties,yQ=Object.getOwnPropertyDescriptors,V6=Object.getOwnPropertySymbols,_Q=Object.prototype.hasOwnProperty,xQ=Object.prototype.propertyIsEnumerable,W6=(n,e,t)=>e in n?gQ(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,j6=(n,e)=>{for(var t in e||(e={}))_Q.call(e,t)&&W6(n,t,e[t]);if(V6)for(var t of V6(e))xQ.call(e,t)&&W6(n,t,e[t]);return n},AQ=(n,e)=>vQ(n,yQ(e));function AI(n,e,t){if(!n)return;if(t(n)===!0)return n;let i=e?n.return:n.child;for(;i;){const r=AI(i,e,t);if(r)return r;i=e?null:i.sibling}}function SI(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const dE=SI(G.createContext(null));class CI extends G.Component{render(){return G.createElement(dE.Provider,{value:this._reactInternals},this.props.children)}}const{ReactCurrentOwner:X6,ReactCurrentDispatcher:J6}=G.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function SQ(){const n=G.useContext(dE);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=G.useId();return G.useMemo(()=>{for(const i of[X6==null?void 0:X6.current,n,n==null?void 0:n.alternate]){if(!i)continue;const r=AI(i,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(r)return r}},[n,e])}function CQ(){var n;const e=SQ(),[t]=G.useState(()=>new Map);t.clear();let i=e;for(;i;){if(i.type&&typeof i.type=="object"){const s=i.type._context===void 0&&i.type.Provider===i.type?i.type:i.type._context;s&&s!==dE&&!t.has(s)&&t.set(s,(n=J6==null?void 0:J6.current)==null?void 0:n.readContext(SI(s)))}i=i.return}return t}function EQ(){const n=CQ();return G.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>i=>G.createElement(e,null,G.createElement(t.Provider,AQ(j6({},i),{value:n.get(t)}))),e=>G.createElement(CI,j6({},e))),[n])}const Ux={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function MQ(n){const{handlePointer:e}=qq(n);return{priority:1,enabled:!0,compute(t,i,r){i.pointer.set(t.offsetX/i.size.width*2-1,-(t.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(Ux).reduce((t,i)=>({...t,[i]:e(i)}),{}),update:()=>{var t;const{events:i,internal:r}=n.getState();(t=r.lastEvent)!=null&&t.current&&i.handlers&&i.handlers.onPointerMove(r.lastEvent.current)},connect:t=>{var i;const{set:r,events:s}=n.getState();s.disconnect==null||s.disconnect(),r(o=>({events:{...o.events,connected:t}})),Object.entries((i=s.handlers)!=null?i:[]).forEach(([o,a])=>{const[l,u]=Ux[o];t.addEventListener(l,a,{passive:u})})},disconnect:()=>{const{set:t,events:i}=n.getState();if(i.connected){var r;Object.entries((r=i.handlers)!=null?r:[]).forEach(([s,o])=>{if(i&&i.connected instanceof HTMLElement){const[a]=Ux[s];i.connected.removeEventListener(a,o)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}const wQ=G.forwardRef(function({children:e,fallback:t,resize:i,style:r,gl:s,events:o=MQ,eventSource:a,eventPrefix:l,shadows:u,linear:c,flat:h,legacy:p,orthographic:m,frameloop:v,dpr:A,performance:_,raycaster:g,camera:S,scene:x,onPointerMissed:E,onCreated:b,...T},P){G.useMemo(()=>aI(Pq),[]);const I=EQ(),[z,w]=fQ({scroll:!0,debounce:{scroll:50,resize:0},...i}),D=G.useRef(null),Q=G.useRef(null);G.useImperativeHandle(P,()=>D.current);const ie=cI(E),[j,se]=G.useState(!1),[oe,pe]=G.useState(!1);if(j)throw j;if(oe)throw oe;const N=G.useRef(null);Ip(()=>{const J=D.current;w.width>0&&w.height>0&&J&&(N.current||(N.current=oQ(J)),N.current.configure({gl:s,events:o,shadows:u,linear:c,flat:h,legacy:p,orthographic:m,frameloop:v,dpr:A,performance:_,raycaster:g,camera:S,scene:x,size:w,onPointerMissed:(...ae)=>ie.current==null?void 0:ie.current(...ae),onCreated:ae=>{ae.events.connect==null||ae.events.connect(a?Vq(a)?a.current:a:Q.current),l&&ae.setEvents({compute:(me,Ue)=>{const he=me[l+"X"],Te=me[l+"Y"];Ue.pointer.set(he/Ue.size.width*2-1,-(Te/Ue.size.height)*2+1),Ue.raycaster.setFromCamera(Ue.pointer,Ue.camera)}}),b==null||b(ae)}}),N.current.render(G.createElement(I,null,G.createElement(fI,{set:pe},G.createElement(G.Suspense,{fallback:G.createElement(Wq,{set:se})},e)))))}),G.useEffect(()=>{const J=D.current;if(J)return()=>_I(J)},[]);const X=a?"none":"auto";return G.createElement("div",Ru({ref:Q,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:X,...r}},T),G.createElement("div",{ref:z,style:{width:"100%",height:"100%"}},G.createElement("canvas",{ref:D,style:{display:"block"}},t)))}),TQ=G.forwardRef(function(e,t){return G.createElement(CI,null,G.createElement(wQ,Ru({},e,{ref:t})))});function K6(n,e){if(e===UP)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(e===_g||e===MC){let t=n.getIndex();if(t===null){const o=[],a=n.getAttribute("position");if(a!==void 0){for(let l=0;l<a.count;l++)o.push(l);n.setIndex(o),t=n.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}const i=t.count-2,r=[];if(t)if(e===_g)for(let o=1;o<=i;o++)r.push(t.getX(0)),r.push(t.getX(o)),r.push(t.getX(o+1));else for(let o=0;o<i;o++)o%2===0?(r.push(t.getX(o)),r.push(t.getX(o+1)),r.push(t.getX(o+2))):(r.push(t.getX(o+2)),r.push(t.getX(o+1)),r.push(t.getX(o)));r.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=n.clone();return s.setIndex(r),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),n}const bQ=parseInt(zf.replace(/\D+/g,""));var ss=Uint8Array,Fa=Uint16Array,yA=Uint32Array,EI=new ss([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),MI=new ss([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),RQ=new ss([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),wI=function(n,e){for(var t=new Fa(31),i=0;i<31;++i)t[i]=e+=1<<n[i-1];for(var r=new yA(t[30]),i=1;i<30;++i)for(var s=t[i];s<t[i+1];++s)r[s]=s-t[i]<<5|i;return[t,r]},TI=wI(EI,2),bI=TI[0],PQ=TI[1];bI[28]=258,PQ[258]=28;var BQ=wI(MI,0),IQ=BQ[0],_A=new Fa(32768);for(var _n=0;_n<32768;++_n){var ya=(_n&43690)>>>1|(_n&21845)<<1;ya=(ya&52428)>>>2|(ya&13107)<<2,ya=(ya&61680)>>>4|(ya&3855)<<4,_A[_n]=((ya&65280)>>>8|(ya&255)<<8)>>>1}var gd=function(n,e,t){for(var i=n.length,r=0,s=new Fa(e);r<i;++r)++s[n[r]-1];var o=new Fa(e);for(r=0;r<e;++r)o[r]=o[r-1]+s[r-1]<<1;var a;if(t){a=new Fa(1<<e);var l=15-e;for(r=0;r<i;++r)if(n[r])for(var u=r<<4|n[r],c=e-n[r],h=o[n[r]-1]++<<c,p=h|(1<<c)-1;h<=p;++h)a[_A[h]>>>l]=u}else for(a=new Fa(i),r=0;r<i;++r)n[r]&&(a[r]=_A[o[n[r]-1]++]>>>15-n[r]);return a},Lp=new ss(288);for(var _n=0;_n<144;++_n)Lp[_n]=8;for(var _n=144;_n<256;++_n)Lp[_n]=9;for(var _n=256;_n<280;++_n)Lp[_n]=7;for(var _n=280;_n<288;++_n)Lp[_n]=8;var RI=new ss(32);for(var _n=0;_n<32;++_n)RI[_n]=5;var LQ=gd(Lp,9,1),DQ=gd(RI,5,1),kx=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},xs=function(n,e,t){var i=e/8|0;return(n[i]|n[i+1]<<8)>>(e&7)&t},zx=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},FQ=function(n){return(n/8|0)+(n&7&&1)},NQ=function(n,e,t){(e==null||e<0)&&(e=0),(t==null||t>n.length)&&(t=n.length);var i=new(n instanceof Fa?Fa:n instanceof yA?yA:ss)(t-e);return i.set(n.subarray(e,t)),i},OQ=function(n,e,t){var i=n.length;if(!i||t&&!t.l&&i<5)return e||new ss(0);var r=!e||t,s=!t||t.i;t||(t={}),e||(e=new ss(i*3));var o=function(we){var je=e.length;if(we>je){var $e=new ss(Math.max(je*2,we));$e.set(e),e=$e}},a=t.f||0,l=t.p||0,u=t.b||0,c=t.l,h=t.d,p=t.m,m=t.n,v=i*8;do{if(!c){t.f=a=xs(n,l,1);var A=xs(n,l+1,3);if(l+=3,A)if(A==1)c=LQ,h=DQ,p=9,m=5;else if(A==2){var x=xs(n,l,31)+257,E=xs(n,l+10,15)+4,b=x+xs(n,l+5,31)+1;l+=14;for(var T=new ss(b),P=new ss(19),I=0;I<E;++I)P[RQ[I]]=xs(n,l+I*3,7);l+=E*3;for(var z=kx(P),w=(1<<z)-1,D=gd(P,z,1),I=0;I<b;){var Q=D[xs(n,l,w)];l+=Q&15;var _=Q>>>4;if(_<16)T[I++]=_;else{var ie=0,j=0;for(_==16?(j=3+xs(n,l,3),l+=2,ie=T[I-1]):_==17?(j=3+xs(n,l,7),l+=3):_==18&&(j=11+xs(n,l,127),l+=7);j--;)T[I++]=ie}}var se=T.subarray(0,x),oe=T.subarray(x);p=kx(se),m=kx(oe),c=gd(se,p,1),h=gd(oe,m,1)}else throw"invalid block type";else{var _=FQ(l)+4,g=n[_-4]|n[_-3]<<8,S=_+g;if(S>i){if(s)throw"unexpected EOF";break}r&&o(u+g),e.set(n.subarray(_,S),u),t.b=u+=g,t.p=l=S*8;continue}if(l>v){if(s)throw"unexpected EOF";break}}r&&o(u+131072);for(var pe=(1<<p)-1,N=(1<<m)-1,X=l;;X=l){var ie=c[zx(n,l)&pe],J=ie>>>4;if(l+=ie&15,l>v){if(s)throw"unexpected EOF";break}if(!ie)throw"invalid length/literal";if(J<256)e[u++]=J;else if(J==256){X=l,c=null;break}else{var ae=J-254;if(J>264){var I=J-257,me=EI[I];ae=xs(n,l,(1<<me)-1)+bI[I],l+=me}var Ue=h[zx(n,l)&N],he=Ue>>>4;if(!Ue)throw"invalid distance";l+=Ue&15;var oe=IQ[he];if(he>3){var me=MI[he];oe+=zx(n,l)&(1<<me)-1,l+=me}if(l>v){if(s)throw"unexpected EOF";break}r&&o(u+131072);for(var Te=u+ae;u<Te;u+=4)e[u]=e[u-oe],e[u+1]=e[u+1-oe],e[u+2]=e[u+2-oe],e[u+3]=e[u+3-oe];u=Te}}t.l=c,t.p=X,t.b=u,c&&(a=1,t.m=p,t.d=h,t.n=m)}while(!a);return u==e.length?e:NQ(e,0,u)},UQ=new ss(0),kQ=function(n){if((n[0]&15)!=8||n[0]>>>4>7||(n[0]<<8|n[1])%31)throw"invalid zlib data";if(n[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function X1(n,e){return OQ((kQ(n),n.subarray(2,-4)),e)}var zQ=typeof TextDecoder<"u"&&new TextDecoder,HQ=0;try{zQ.decode(UQ,{stream:!0}),HQ=1}catch{}const GQ=n=>n&&n.isCubeTexture;class VQ extends Vn{constructor(e,t){var i,r;const s=GQ(e),a=((r=s?(i=e.image[0])==null?void 0:i.width:e.image.width)!=null?r:1024)/4,l=Math.floor(Math.log2(a)),u=Math.pow(2,l),c=3*Math.max(u,16*7),h=4*u,p=[s?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/c}`,`#define CUBEUV_TEXEL_HEIGHT ${1/h}`,`#define CUBEUV_MAX_MIP ${l}.0`],m=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,v=p.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${parseInt(zf.replace(/\D+/g,""))>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,A={map:{value:e},height:{value:(t==null?void 0:t.height)||15},radius:{value:(t==null?void 0:t.radius)||100}},_=new bp(1,16),g=new ds({uniforms:A,fragmentShader:v,vertexShader:m,side:rs});super(_,g)}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}}var WQ=Object.defineProperty,jQ=(n,e,t)=>e in n?WQ(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,bt=(n,e,t)=>(jQ(n,typeof e!="symbol"?e+"":e,t),t);const J1=new Fu,Y6=new Bo,XQ=Math.cos(70*(Math.PI/180)),Z6=(n,e)=>(n%e+e)%e;let JQ=class extends fo{constructor(e,t){super(),bt(this,"object"),bt(this,"domElement"),bt(this,"enabled",!0),bt(this,"target",new H),bt(this,"minDistance",0),bt(this,"maxDistance",1/0),bt(this,"minZoom",0),bt(this,"maxZoom",1/0),bt(this,"minPolarAngle",0),bt(this,"maxPolarAngle",Math.PI),bt(this,"minAzimuthAngle",-1/0),bt(this,"maxAzimuthAngle",1/0),bt(this,"enableDamping",!1),bt(this,"dampingFactor",.05),bt(this,"enableZoom",!0),bt(this,"zoomSpeed",1),bt(this,"enableRotate",!0),bt(this,"rotateSpeed",1),bt(this,"enablePan",!0),bt(this,"panSpeed",1),bt(this,"screenSpacePanning",!0),bt(this,"keyPanSpeed",7),bt(this,"zoomToCursor",!1),bt(this,"autoRotate",!1),bt(this,"autoRotateSpeed",2),bt(this,"reverseOrbit",!1),bt(this,"reverseHorizontalOrbit",!1),bt(this,"reverseVerticalOrbit",!1),bt(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),bt(this,"mouseButtons",{LEFT:Yl.ROTATE,MIDDLE:Yl.DOLLY,RIGHT:Yl.PAN}),bt(this,"touches",{ONE:Zl.ROTATE,TWO:Zl.DOLLY_PAN}),bt(this,"target0"),bt(this,"position0"),bt(this,"zoom0"),bt(this,"_domElementKeyEvents",null),bt(this,"getPolarAngle"),bt(this,"getAzimuthalAngle"),bt(this,"setPolarAngle"),bt(this,"setAzimuthalAngle"),bt(this,"getDistance"),bt(this,"listenToKeyEvents"),bt(this,"stopListenToKeyEvents"),bt(this,"saveState"),bt(this,"reset"),bt(this,"update"),bt(this,"connect"),bt(this,"dispose"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>c.phi,this.getAzimuthalAngle=()=>c.theta,this.setPolarAngle=q=>{let ve=Z6(q,2*Math.PI),Ne=c.phi;Ne<0&&(Ne+=2*Math.PI),ve<0&&(ve+=2*Math.PI);let Qe=Math.abs(ve-Ne);2*Math.PI-Qe<Qe&&(ve<Ne?ve+=2*Math.PI:Ne+=2*Math.PI),h.phi=ve-Ne,i.update()},this.setAzimuthalAngle=q=>{let ve=Z6(q,2*Math.PI),Ne=c.theta;Ne<0&&(Ne+=2*Math.PI),ve<0&&(ve+=2*Math.PI);let Qe=Math.abs(ve-Ne);2*Math.PI-Qe<Qe&&(ve<Ne?ve+=2*Math.PI:Ne+=2*Math.PI),h.theta=ve-Ne,i.update()},this.getDistance=()=>i.object.position.distanceTo(i.target),this.listenToKeyEvents=q=>{q.addEventListener("keydown",ht),this._domElementKeyEvents=q},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",ht),this._domElementKeyEvents=null},this.saveState=()=>{i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=()=>{i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(r),i.update(),l=a.NONE},this.update=(()=>{const q=new H,ve=new H(0,1,0),Ne=new vi().setFromUnitVectors(e.up,ve),Qe=Ne.clone().invert(),Le=new H,re=new vi,Xe=2*Math.PI;return function(){const Ve=i.object.position;Ne.setFromUnitVectors(e.up,ve),Qe.copy(Ne).invert(),q.copy(Ve).sub(i.target),q.applyQuaternion(Ne),c.setFromVector3(q),i.autoRotate&&l===a.NONE&&j(Q()),i.enableDamping?(c.theta+=h.theta*i.dampingFactor,c.phi+=h.phi*i.dampingFactor):(c.theta+=h.theta,c.phi+=h.phi);let Je=i.minAzimuthAngle,Mt=i.maxAzimuthAngle;isFinite(Je)&&isFinite(Mt)&&(Je<-Math.PI?Je+=Xe:Je>Math.PI&&(Je-=Xe),Mt<-Math.PI?Mt+=Xe:Mt>Math.PI&&(Mt-=Xe),Je<=Mt?c.theta=Math.max(Je,Math.min(Mt,c.theta)):c.theta=c.theta>(Je+Mt)/2?Math.max(Je,c.theta):Math.min(Mt,c.theta)),c.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,c.phi)),c.makeSafe(),i.enableDamping===!0?i.target.addScaledVector(m,i.dampingFactor):i.target.add(m),i.zoomToCursor&&z||i.object.isOrthographicCamera?c.radius=me(c.radius):c.radius=me(c.radius*p),q.setFromSpherical(c),q.applyQuaternion(Qe),Ve.copy(i.target).add(q),i.object.matrixAutoUpdate||i.object.updateMatrix(),i.object.lookAt(i.target),i.enableDamping===!0?(h.theta*=1-i.dampingFactor,h.phi*=1-i.dampingFactor,m.multiplyScalar(1-i.dampingFactor)):(h.set(0,0,0),m.set(0,0,0));let Gt=!1;if(i.zoomToCursor&&z){let cn=null;if(i.object instanceof Rn&&i.object.isPerspectiveCamera){const En=q.length();cn=me(En*p);const jt=En-cn;i.object.position.addScaledVector(P,jt),i.object.updateMatrixWorld()}else if(i.object.isOrthographicCamera){const En=new H(I.x,I.y,0);En.unproject(i.object),i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/p)),i.object.updateProjectionMatrix(),Gt=!0;const jt=new H(I.x,I.y,0);jt.unproject(i.object),i.object.position.sub(jt).add(En),i.object.updateMatrixWorld(),cn=q.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),i.zoomToCursor=!1;cn!==null&&(i.screenSpacePanning?i.target.set(0,0,-1).transformDirection(i.object.matrix).multiplyScalar(cn).add(i.object.position):(J1.origin.copy(i.object.position),J1.direction.set(0,0,-1).transformDirection(i.object.matrix),Math.abs(i.object.up.dot(J1.direction))<XQ?e.lookAt(i.target):(Y6.setFromNormalAndCoplanarPoint(i.object.up,i.target),J1.intersectPlane(Y6,i.target))))}else i.object instanceof Zs&&i.object.isOrthographicCamera&&(Gt=p!==1,Gt&&(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/p)),i.object.updateProjectionMatrix()));return p=1,z=!1,Gt||Le.distanceToSquared(i.object.position)>u||8*(1-re.dot(i.object.quaternion))>u?(i.dispatchEvent(r),Le.copy(i.object.position),re.copy(i.object.quaternion),Gt=!1,!0):!1}})(),this.connect=q=>{q===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),i.domElement=q,i.domElement.style.touchAction="none",i.domElement.addEventListener("contextmenu",_t),i.domElement.addEventListener("pointerdown",O),i.domElement.addEventListener("pointercancel",ue),i.domElement.addEventListener("wheel",ft)},this.dispose=()=>{var q,ve,Ne,Qe,Le,re;(q=i.domElement)==null||q.removeEventListener("contextmenu",_t),(ve=i.domElement)==null||ve.removeEventListener("pointerdown",O),(Ne=i.domElement)==null||Ne.removeEventListener("pointercancel",ue),(Qe=i.domElement)==null||Qe.removeEventListener("wheel",ft),(Le=i.domElement)==null||Le.ownerDocument.removeEventListener("pointermove",L),(re=i.domElement)==null||re.ownerDocument.removeEventListener("pointerup",ee),i._domElementKeyEvents!==null&&i._domElementKeyEvents.removeEventListener("keydown",ht)};const i=this,r={type:"change"},s={type:"start"},o={type:"end"},a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=a.NONE;const u=1e-6,c=new pA,h=new pA;let p=1;const m=new H,v=new be,A=new be,_=new be,g=new be,S=new be,x=new be,E=new be,b=new be,T=new be,P=new H,I=new be;let z=!1;const w=[],D={};function Q(){return 2*Math.PI/60/60*i.autoRotateSpeed}function ie(){return Math.pow(.95,i.zoomSpeed)}function j(q){i.reverseOrbit||i.reverseHorizontalOrbit?h.theta+=q:h.theta-=q}function se(q){i.reverseOrbit||i.reverseVerticalOrbit?h.phi+=q:h.phi-=q}const oe=(()=>{const q=new H;return function(Ne,Qe){q.setFromMatrixColumn(Qe,0),q.multiplyScalar(-Ne),m.add(q)}})(),pe=(()=>{const q=new H;return function(Ne,Qe){i.screenSpacePanning===!0?q.setFromMatrixColumn(Qe,1):(q.setFromMatrixColumn(Qe,0),q.crossVectors(i.object.up,q)),q.multiplyScalar(Ne),m.add(q)}})(),N=(()=>{const q=new H;return function(Ne,Qe){const Le=i.domElement;if(Le&&i.object instanceof Rn&&i.object.isPerspectiveCamera){const re=i.object.position;q.copy(re).sub(i.target);let Xe=q.length();Xe*=Math.tan(i.object.fov/2*Math.PI/180),oe(2*Ne*Xe/Le.clientHeight,i.object.matrix),pe(2*Qe*Xe/Le.clientHeight,i.object.matrix)}else Le&&i.object instanceof Zs&&i.object.isOrthographicCamera?(oe(Ne*(i.object.right-i.object.left)/i.object.zoom/Le.clientWidth,i.object.matrix),pe(Qe*(i.object.top-i.object.bottom)/i.object.zoom/Le.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}})();function X(q){i.object instanceof Rn&&i.object.isPerspectiveCamera||i.object instanceof Zs&&i.object.isOrthographicCamera?p/=q:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function J(q){i.object instanceof Rn&&i.object.isPerspectiveCamera||i.object instanceof Zs&&i.object.isOrthographicCamera?p*=q:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function ae(q){if(!i.zoomToCursor||!i.domElement)return;z=!0;const ve=i.domElement.getBoundingClientRect(),Ne=q.clientX-ve.left,Qe=q.clientY-ve.top,Le=ve.width,re=ve.height;I.x=Ne/Le*2-1,I.y=-(Qe/re)*2+1,P.set(I.x,I.y,1).unproject(i.object).sub(i.object.position).normalize()}function me(q){return Math.max(i.minDistance,Math.min(i.maxDistance,q))}function Ue(q){v.set(q.clientX,q.clientY)}function he(q){ae(q),E.set(q.clientX,q.clientY)}function Te(q){g.set(q.clientX,q.clientY)}function we(q){A.set(q.clientX,q.clientY),_.subVectors(A,v).multiplyScalar(i.rotateSpeed);const ve=i.domElement;ve&&(j(2*Math.PI*_.x/ve.clientHeight),se(2*Math.PI*_.y/ve.clientHeight)),v.copy(A),i.update()}function je(q){b.set(q.clientX,q.clientY),T.subVectors(b,E),T.y>0?X(ie()):T.y<0&&J(ie()),E.copy(b),i.update()}function $e(q){S.set(q.clientX,q.clientY),x.subVectors(S,g).multiplyScalar(i.panSpeed),N(x.x,x.y),g.copy(S),i.update()}function nt(q){ae(q),q.deltaY<0?J(ie()):q.deltaY>0&&X(ie()),i.update()}function Et(q){let ve=!1;switch(q.code){case i.keys.UP:N(0,i.keyPanSpeed),ve=!0;break;case i.keys.BOTTOM:N(0,-i.keyPanSpeed),ve=!0;break;case i.keys.LEFT:N(i.keyPanSpeed,0),ve=!0;break;case i.keys.RIGHT:N(-i.keyPanSpeed,0),ve=!0;break}ve&&(q.preventDefault(),i.update())}function et(){if(w.length==1)v.set(w[0].pageX,w[0].pageY);else{const q=.5*(w[0].pageX+w[1].pageX),ve=.5*(w[0].pageY+w[1].pageY);v.set(q,ve)}}function Z(){if(w.length==1)g.set(w[0].pageX,w[0].pageY);else{const q=.5*(w[0].pageX+w[1].pageX),ve=.5*(w[0].pageY+w[1].pageY);g.set(q,ve)}}function De(){const q=w[0].pageX-w[1].pageX,ve=w[0].pageY-w[1].pageY,Ne=Math.sqrt(q*q+ve*ve);E.set(0,Ne)}function Re(){i.enableZoom&&De(),i.enablePan&&Z()}function ze(){i.enableZoom&&De(),i.enableRotate&&et()}function Ie(q){if(w.length==1)A.set(q.pageX,q.pageY);else{const Ne=dt(q),Qe=.5*(q.pageX+Ne.x),Le=.5*(q.pageY+Ne.y);A.set(Qe,Le)}_.subVectors(A,v).multiplyScalar(i.rotateSpeed);const ve=i.domElement;ve&&(j(2*Math.PI*_.x/ve.clientHeight),se(2*Math.PI*_.y/ve.clientHeight)),v.copy(A)}function it(q){if(w.length==1)S.set(q.pageX,q.pageY);else{const ve=dt(q),Ne=.5*(q.pageX+ve.x),Qe=.5*(q.pageY+ve.y);S.set(Ne,Qe)}x.subVectors(S,g).multiplyScalar(i.panSpeed),N(x.x,x.y),g.copy(S)}function V(q){const ve=dt(q),Ne=q.pageX-ve.x,Qe=q.pageY-ve.y,Le=Math.sqrt(Ne*Ne+Qe*Qe);b.set(0,Le),T.set(0,Math.pow(b.y/E.y,i.zoomSpeed)),X(T.y),E.copy(b)}function ne(q){i.enableZoom&&V(q),i.enablePan&&it(q)}function de(q){i.enableZoom&&V(q),i.enableRotate&&Ie(q)}function O(q){var ve,Ne;i.enabled!==!1&&(w.length===0&&((ve=i.domElement)==null||ve.ownerDocument.addEventListener("pointermove",L),(Ne=i.domElement)==null||Ne.ownerDocument.addEventListener("pointerup",ee)),Ge(q),q.pointerType==="touch"?He(q):Ce(q))}function L(q){i.enabled!==!1&&(q.pointerType==="touch"?Ke(q):Pe(q))}function ee(q){var ve,Ne,Qe;Jt(q),w.length===0&&((ve=i.domElement)==null||ve.releasePointerCapture(q.pointerId),(Ne=i.domElement)==null||Ne.ownerDocument.removeEventListener("pointermove",L),(Qe=i.domElement)==null||Qe.ownerDocument.removeEventListener("pointerup",ee)),i.dispatchEvent(o),l=a.NONE}function ue(q){Jt(q)}function Ce(q){let ve;switch(q.button){case 0:ve=i.mouseButtons.LEFT;break;case 1:ve=i.mouseButtons.MIDDLE;break;case 2:ve=i.mouseButtons.RIGHT;break;default:ve=-1}switch(ve){case Yl.DOLLY:if(i.enableZoom===!1)return;he(q),l=a.DOLLY;break;case Yl.ROTATE:if(q.ctrlKey||q.metaKey||q.shiftKey){if(i.enablePan===!1)return;Te(q),l=a.PAN}else{if(i.enableRotate===!1)return;Ue(q),l=a.ROTATE}break;case Yl.PAN:if(q.ctrlKey||q.metaKey||q.shiftKey){if(i.enableRotate===!1)return;Ue(q),l=a.ROTATE}else{if(i.enablePan===!1)return;Te(q),l=a.PAN}break;default:l=a.NONE}l!==a.NONE&&i.dispatchEvent(s)}function Pe(q){if(i.enabled!==!1)switch(l){case a.ROTATE:if(i.enableRotate===!1)return;we(q);break;case a.DOLLY:if(i.enableZoom===!1)return;je(q);break;case a.PAN:if(i.enablePan===!1)return;$e(q);break}}function ft(q){i.enabled===!1||i.enableZoom===!1||l!==a.NONE&&l!==a.ROTATE||(q.preventDefault(),i.dispatchEvent(s),nt(q),i.dispatchEvent(o))}function ht(q){i.enabled===!1||i.enablePan===!1||Et(q)}function He(q){switch(mt(q),w.length){case 1:switch(i.touches.ONE){case Zl.ROTATE:if(i.enableRotate===!1)return;et(),l=a.TOUCH_ROTATE;break;case Zl.PAN:if(i.enablePan===!1)return;Z(),l=a.TOUCH_PAN;break;default:l=a.NONE}break;case 2:switch(i.touches.TWO){case Zl.DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;Re(),l=a.TOUCH_DOLLY_PAN;break;case Zl.DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;ze(),l=a.TOUCH_DOLLY_ROTATE;break;default:l=a.NONE}break;default:l=a.NONE}l!==a.NONE&&i.dispatchEvent(s)}function Ke(q){switch(mt(q),l){case a.TOUCH_ROTATE:if(i.enableRotate===!1)return;Ie(q),i.update();break;case a.TOUCH_PAN:if(i.enablePan===!1)return;it(q),i.update();break;case a.TOUCH_DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;ne(q),i.update();break;case a.TOUCH_DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;de(q),i.update();break;default:l=a.NONE}}function _t(q){i.enabled!==!1&&q.preventDefault()}function Ge(q){w.push(q)}function Jt(q){delete D[q.pointerId];for(let ve=0;ve<w.length;ve++)if(w[ve].pointerId==q.pointerId){w.splice(ve,1);return}}function mt(q){let ve=D[q.pointerId];ve===void 0&&(ve=new be,D[q.pointerId]=ve),ve.set(q.pageX,q.pageY)}function dt(q){const ve=q.pointerId===w[0].pointerId?w[1]:w[0];return D[ve.pointerId]}t!==void 0&&this.connect(t),this.update()}};class pE extends ji{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new QQ(t)}),this.register(function(t){return new o$(t)}),this.register(function(t){return new a$(t)}),this.register(function(t){return new l$(t)}),this.register(function(t){return new e$(t)}),this.register(function(t){return new t$(t)}),this.register(function(t){return new n$(t)}),this.register(function(t){return new i$(t)}),this.register(function(t){return new qQ(t)}),this.register(function(t){return new r$(t)}),this.register(function(t){return new $Q(t)}),this.register(function(t){return new s$(t)}),this.register(function(t){return new YQ(t)}),this.register(function(t){return new u$(t)}),this.register(function(t){return new c$(t)})}load(e,t,i,r){const s=this;let o;this.resourcePath!==""?o=this.resourcePath:this.path!==""?o=this.path:o=oo.extractUrlBase(e),this.manager.itemStart(e);const a=function(u){r?r(u):console.error(u),s.manager.itemError(e),s.manager.itemEnd(e)},l=new Dr(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(u){try{s.parse(u,o,function(c){t(c),s.manager.itemEnd(e)},a)}catch(c){a(c)}},i,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,r){let s;const o={},a={};if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(oo.decodeText(new Uint8Array(e.slice(0,4)))===PI){try{o[Xt.KHR_BINARY_GLTF]=new f$(e)}catch(c){r&&r(c);return}s=JSON.parse(o[Xt.KHR_BINARY_GLTF].content)}else s=JSON.parse(oo.decodeText(new Uint8Array(e)));else s=e;if(s.asset===void 0||s.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const l=new E$(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let u=0;u<this.pluginCallbacks.length;u++){const c=this.pluginCallbacks[u](l);a[c.name]=c,o[c.name]=!0}if(s.extensionsUsed)for(let u=0;u<s.extensionsUsed.length;++u){const c=s.extensionsUsed[u],h=s.extensionsRequired||[];switch(c){case Xt.KHR_MATERIALS_UNLIT:o[c]=new ZQ;break;case Xt.KHR_DRACO_MESH_COMPRESSION:o[c]=new h$(s,this.dracoLoader);break;case Xt.KHR_TEXTURE_TRANSFORM:o[c]=new d$;break;case Xt.KHR_MESH_QUANTIZATION:o[c]=new p$;break;default:h.indexOf(c)>=0&&a[c]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+c+'".')}}l.setExtensions(o),l.setPlugins(a),l.parse(i,r)}parseAsync(e,t){const i=this;return new Promise(function(r,s){i.parse(e,t,r,s)})}}function KQ(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const Xt={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class YQ{constructor(e){this.parser=e,this.name=Xt.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let i=0,r=t.length;i<r;i++){const s=t[i];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,i="light:"+e;let r=t.cache.get(i);if(r)return r;const s=t.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let u;const c=new qe(16777215);l.color!==void 0&&c.fromArray(l.color);const h=l.range!==void 0?l.range:0;switch(l.type){case"directional":u=new iE(c),u.target.position.set(0,0,-1),u.add(u.target);break;case"point":u=new nE(c),u.distance=h;break;case"spot":u=new tE(c),u.distance=h,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,u.angle=l.spot.outerConeAngle,u.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,u.target.position.set(0,0,-1),u.add(u.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return u.position.set(0,0,0),u.decay=2,Ta(u,l),l.intensity!==void 0&&(u.intensity=l.intensity),u.name=t.createUniqueName(l.name||"light_"+e),r=Promise.resolve(u),t.cache.add(i,r),r}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,i=this.parser,s=i.json.nodes[e],a=(s.extensions&&s.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(l){return i._getNodeRef(t.cache,a,l)})}}class ZQ{constructor(){this.name=Xt.KHR_MATERIALS_UNLIT}getMaterialType(){return br}extendParams(e,t,i){const r=[];e.color=new qe(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.fromArray(o),e.opacity=o[3]}s.baseColorTexture!==void 0&&r.push(i.assignTexture(e,"map",s.baseColorTexture,3001))}return Promise.all(r)}}class qQ{constructor(e){this.parser=e,this.name=Xt.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name].emissiveStrength;return s!==void 0&&(t.emissiveIntensity=s),Promise.resolve()}}class QQ{constructor(e){this.parser=e,this.name=Xt.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:ho}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];if(o.clearcoatFactor!==void 0&&(t.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&s.push(i.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&s.push(i.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(s.push(i.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new be(a,a)}return Promise.all(s)}}class $Q{constructor(e){this.parser=e,this.name=Xt.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:ho}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.iridescenceFactor!==void 0&&(t.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&s.push(i.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(t.iridescenceIOR=o.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&s.push(i.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class e${constructor(e){this.parser=e,this.name=Xt.KHR_MATERIALS_SHEEN}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:ho}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new qe(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=r.extensions[this.name];return o.sheenColorFactor!==void 0&&t.sheenColor.fromArray(o.sheenColorFactor),o.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&s.push(i.assignTexture(t,"sheenColorMap",o.sheenColorTexture,3001)),o.sheenRoughnessTexture!==void 0&&s.push(i.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class t${constructor(e){this.parser=e,this.name=Xt.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:ho}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.transmissionFactor!==void 0&&(t.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&s.push(i.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class n${constructor(e){this.parser=e,this.name=Xt.KHR_MATERIALS_VOLUME}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:ho}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&s.push(i.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=new qe(a[0],a[1],a[2]),Promise.all(s)}}class i${constructor(e){this.parser=e,this.name=Xt.KHR_MATERIALS_IOR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:ho}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class r${constructor(e){this.parser=e,this.name=Xt.KHR_MATERIALS_SPECULAR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:ho}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&s.push(i.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=new qe(a[0],a[1],a[2]),o.specularColorTexture!==void 0&&s.push(i.assignTexture(t,"specularColorMap",o.specularColorTexture,3001)),Promise.all(s)}}class s${constructor(e){this.parser=e,this.name=Xt.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:ho}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.anisotropyStrength!==void 0&&(t.anisotropy=o.anisotropyStrength),o.anisotropyRotation!==void 0&&(t.anisotropyRotation=o.anisotropyRotation),o.anisotropyTexture!==void 0&&s.push(i.assignTexture(t,"anisotropyMap",o.anisotropyTexture)),Promise.all(s)}}class o${constructor(e){this.parser=e,this.name=Xt.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,i=t.json,r=i.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const s=r.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,o)}}class a${constructor(e){this.parser=e,this.name=Xt.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=r.images[o.source];let l=i.textureLoader;if(a.uri){const u=i.options.manager.getHandler(a.uri);u!==null&&(l=u)}return this.detectSupport().then(function(u){if(u)return i.loadTextureImage(e,o.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class l${constructor(e){this.parser=e,this.name=Xt.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=r.images[o.source];let l=i.textureLoader;if(a.uri){const u=i.options.manager.getHandler(a.uri);u!==null&&(l=u)}return this.detectSupport().then(function(u){if(u)return i.loadTextureImage(e,o.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class u${constructor(e){this.name=Xt.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,i=t.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const r=i.extensions[this.name],s=this.parser.getDependency("buffer",r.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){const l=r.byteOffset||0,u=r.byteLength||0,c=r.count,h=r.byteStride,p=new Uint8Array(a,l,u);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(c,h,p,r.mode,r.filter).then(function(m){return m.buffer}):o.ready.then(function(){const m=new ArrayBuffer(c*h);return o.decodeGltfBuffer(new Uint8Array(m),c,h,p,r.mode,r.filter),m})})}else return null}}class c${constructor(e){this.name=Xt.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,i=t.nodes[e];if(!i.extensions||!i.extensions[this.name]||i.mesh===void 0)return null;const r=t.meshes[i.mesh];for(const u of r.primitives)if(u.mode!==$r.TRIANGLES&&u.mode!==$r.TRIANGLE_STRIP&&u.mode!==$r.TRIANGLE_FAN&&u.mode!==void 0)return null;const o=i.extensions[this.name].attributes,a=[],l={};for(const u in o)a.push(this.parser.getDependency("accessor",o[u]).then(c=>(l[u]=c,l[u])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(u=>{const c=u.pop(),h=c.isGroup?c.children:[c],p=u[0].count,m=[];for(const v of h){const A=new xt,_=new H,g=new vi,S=new H(1,1,1),x=new zC(v.geometry,v.material,p);for(let E=0;E<p;E++)l.TRANSLATION&&_.fromBufferAttribute(l.TRANSLATION,E),l.ROTATION&&g.fromBufferAttribute(l.ROTATION,E),l.SCALE&&S.fromBufferAttribute(l.SCALE,E),x.setMatrixAt(E,A.compose(_,g,S));for(const E in l)E!=="TRANSLATION"&&E!=="ROTATION"&&E!=="SCALE"&&v.geometry.setAttribute(E,l[E]);qt.prototype.copy.call(x,v),this.parser.assignFinalMaterial(x),m.push(x)}return c.isGroup?(c.clear(),c.add(...m),c):m[0]}))}}const PI="glTF",Uh=12,q6={JSON:1313821514,BIN:5130562};class f${constructor(e){this.name=Xt.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,Uh);if(this.header={magic:oo.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==PI)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const i=this.header.length-Uh,r=new DataView(e,Uh);let s=0;for(;s<i;){const o=r.getUint32(s,!0);s+=4;const a=r.getUint32(s,!0);if(s+=4,a===q6.JSON){const l=new Uint8Array(e,Uh+s,o);this.content=oo.decodeText(l)}else if(a===q6.BIN){const l=Uh+s;this.body=e.slice(l,l+o)}s+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class h${constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Xt.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const i=this.json,r=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},l={},u={};for(const c in o){const h=xA[c]||c.toLowerCase();a[h]=o[c]}for(const c in e.attributes){const h=xA[c]||c.toLowerCase();if(o[c]!==void 0){const p=i.accessors[e.attributes[c]],m=cf[p.componentType];u[h]=m.name,l[h]=p.normalized===!0}}return t.getDependency("bufferView",s).then(function(c){return new Promise(function(h){r.decodeDracoFile(c,function(p){for(const m in p.attributes){const v=p.attributes[m],A=l[m];A!==void 0&&(v.normalized=A)}h(p)},a,u)})})}}class d${constructor(){this.name=Xt.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class p${constructor(){this.name=Xt.KHR_MESH_QUANTIZATION}}class BI extends jf{constructor(e,t,i,r){super(e,t,i,r)}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r*3+r;for(let o=0;o!==r;o++)t[o]=i[s+o];return t}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=a*2,u=a*3,c=r-t,h=(i-t)/c,p=h*h,m=p*h,v=e*u,A=v-u,_=-2*m+3*p,g=m-p,S=1-_,x=g-p+h;for(let E=0;E!==a;E++){const b=o[A+E+a],T=o[A+E+l]*c,P=o[v+E+a],I=o[v+E]*c;s[E]=S*b+x*T+_*P+g*I}return s}}const m$=new vi;class g$ extends BI{interpolate_(e,t,i,r){const s=super.interpolate_(e,t,i,r);return m$.fromArray(s).normalize().toArray(s),s}}const $r={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},cf={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},Q6={9728:zn,9729:rn,9984:jd,9985:lf,9986:Ba,9987:as},$6={33071:Ei,33648:Sf,10497:il},Hx={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},xA={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...bQ>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},_a={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},v$={CUBICSPLINE:void 0,LINEAR:Tu,STEP:Cf},Gx={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function y$(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new Bp({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:lo})),n.DefaultMaterial}function Gl(n,e,t){for(const i in t.extensions)n[i]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=t.extensions[i])}function Ta(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function _$(n,e,t){let i=!1,r=!1,s=!1;for(let u=0,c=e.length;u<c;u++){const h=e[u];if(h.POSITION!==void 0&&(i=!0),h.NORMAL!==void 0&&(r=!0),h.COLOR_0!==void 0&&(s=!0),i&&r&&s)break}if(!i&&!r&&!s)return Promise.resolve(n);const o=[],a=[],l=[];for(let u=0,c=e.length;u<c;u++){const h=e[u];if(i){const p=h.POSITION!==void 0?t.getDependency("accessor",h.POSITION):n.attributes.position;o.push(p)}if(r){const p=h.NORMAL!==void 0?t.getDependency("accessor",h.NORMAL):n.attributes.normal;a.push(p)}if(s){const p=h.COLOR_0!==void 0?t.getDependency("accessor",h.COLOR_0):n.attributes.color;l.push(p)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(u){const c=u[0],h=u[1],p=u[2];return i&&(n.morphAttributes.position=c),r&&(n.morphAttributes.normal=h),s&&(n.morphAttributes.color=p),n.morphTargetsRelative=!0,n})}function x$(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,i=e.weights.length;t<i;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let i=0,r=t.length;i<r;i++)n.morphTargetDictionary[t[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function A$(n){let e;const t=n.extensions&&n.extensions[Xt.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+Vx(t.attributes):e=n.indices+":"+Vx(n.attributes)+":"+n.mode,n.targets!==void 0)for(let i=0,r=n.targets.length;i<r;i++)e+=":"+Vx(n.targets[i]);return e}function Vx(n){let e="";const t=Object.keys(n).sort();for(let i=0,r=t.length;i<r;i++)e+=t[i]+":"+n[t[i]]+";";return e}function AA(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function S$(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const C$=new xt;class E${constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new KQ,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,r=!1,s=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(i=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,r=navigator.userAgent.indexOf("Firefox")>-1,s=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||i||r&&s<98?this.textureLoader=new HB(this.options.manager):this.textureLoader=new YB(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Dr(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const i=this,r=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(o){const a={scene:o[0][r.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:r.asset,parser:i,userData:{}};Gl(s,a,r),Ta(a,r),Promise.all(i._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let r=0,s=t.length;r<s;r++){const o=t[r].joints;for(let a=0,l=o.length;a<l;a++)e[o[a]].isBone=!0}for(let r=0,s=e.length;r<s;r++){const o=e[r];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(i[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]<=1)return i;const r=i.clone(),s=(o,a)=>{const l=this.associations.get(o);l!=null&&this.associations.set(a,l);for(const[u,c]of o.children.entries())s(c,a.children[u])};return s(i,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let i=0;i<t.length;i++){const r=e(t[i]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const i=[];for(let r=0;r<t.length;r++){const s=e(t[r]);s&&i.push(s)}return i}getDependency(e,t){const i=e+":"+t;let r=this.cache.get(i);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this._invokeOne(function(s){return s.loadNode&&s.loadNode(t)});break;case"mesh":r=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":r=this.loadCamera(t);break;default:if(r=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,t)}),!r)throw new Error("Unknown type: "+e);break}this.cache.add(i,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const i=this,r=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(r.map(function(s,o){return i.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],i=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[Xt.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(s,o){i.load(oo.resolveURL(t.uri,r.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(i){const r=t.byteLength||0,s=t.byteOffset||0;return i.slice(s,s+r)})}loadAccessor(e){const t=this,i=this.json,r=this.json.accessors[e];if(r.bufferView===void 0&&r.sparse===void 0){const o=Hx[r.type],a=cf[r.componentType],l=r.normalized===!0,u=new a(r.count*o);return Promise.resolve(new $t(u,o,l))}const s=[];return r.bufferView!==void 0?s.push(this.getDependency("bufferView",r.bufferView)):s.push(null),r.sparse!==void 0&&(s.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],l=Hx[r.type],u=cf[r.componentType],c=u.BYTES_PER_ELEMENT,h=c*l,p=r.byteOffset||0,m=r.bufferView!==void 0?i.bufferViews[r.bufferView].byteStride:void 0,v=r.normalized===!0;let A,_;if(m&&m!==h){const g=Math.floor(p/m),S="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+g+":"+r.count;let x=t.cache.get(S);x||(A=new u(a,g*m,r.count*m/c),x=new Mp(A,m/c),t.cache.add(S,x)),_=new rl(x,l,p%m/c,v)}else a===null?A=new u(r.count*l):A=new u(a,p,r.count*l),_=new $t(A,l,v);if(r.sparse!==void 0){const g=Hx.SCALAR,S=cf[r.sparse.indices.componentType],x=r.sparse.indices.byteOffset||0,E=r.sparse.values.byteOffset||0,b=new S(o[1],x,r.sparse.count*g),T=new u(o[2],E,r.sparse.count*l);a!==null&&(_=new $t(_.array.slice(),_.itemSize,_.normalized));for(let P=0,I=b.length;P<I;P++){const z=b[P];if(_.setX(z,T[P*l]),l>=2&&_.setY(z,T[P*l+1]),l>=3&&_.setZ(z,T[P*l+2]),l>=4&&_.setW(z,T[P*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return _})}loadTexture(e){const t=this.json,i=this.options,s=t.textures[e].source,o=t.images[s];let a=this.textureLoader;if(o.uri){const l=i.manager.getHandler(o.uri);l!==null&&(a=l)}return this.loadTextureImage(e,s,a)}loadTextureImage(e,t,i){const r=this,s=this.json,o=s.textures[e],a=s.images[t],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const u=this.loadImageSource(t,i).then(function(c){c.flipY=!1,c.name=o.name||a.name||"",c.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(c.name=a.uri);const p=(s.samplers||{})[o.sampler]||{};return c.magFilter=Q6[p.magFilter]||rn,c.minFilter=Q6[p.minFilter]||as,c.wrapS=$6[p.wrapS]||il,c.wrapT=$6[p.wrapT]||il,r.associations.set(c,{textures:e}),c}).catch(function(){return null});return this.textureCache[l]=u,u}loadImageSource(e,t){const i=this,r=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(h=>h.clone());const o=r.images[e],a=self.URL||self.webkitURL;let l=o.uri||"",u=!1;if(o.bufferView!==void 0)l=i.getDependency("bufferView",o.bufferView).then(function(h){u=!0;const p=new Blob([h],{type:o.mimeType});return l=a.createObjectURL(p),l});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const c=Promise.resolve(l).then(function(h){return new Promise(function(p,m){let v=p;t.isImageBitmapLoader===!0&&(v=function(A){const _=new gn(A);_.needsUpdate=!0,p(_)}),t.load(oo.resolveURL(h,s.path),v,void 0,m)})}).then(function(h){return u===!0&&a.revokeObjectURL(l),h.userData.mimeType=o.mimeType||S$(o.uri),h}).catch(function(h){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),h});return this.sourceCache[e]=c,c}assignTexture(e,t,i,r){const s=this;return this.getDependency("texture",i.index).then(function(o){if(!o)return null;if(i.texCoord!==void 0&&i.texCoord>0&&(o=o.clone(),o.channel=i.texCoord),s.extensions[Xt.KHR_TEXTURE_TRANSFORM]){const a=i.extensions!==void 0?i.extensions[Xt.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const l=s.associations.get(o);o=s.extensions[Xt.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,l)}}return r!==void 0&&("colorSpace"in o?o.colorSpace=r===3001?"srgb":"srgb-linear":o.encoding=r),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let i=e.material;const r=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,o=t.attributes.normal===void 0;if(e.isPoints){const a="PointsMaterial:"+i.uuid;let l=this.cache.get(a);l||(l=new Av,ti.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,l.sizeAttenuation=!1,this.cache.add(a,l)),i=l}else if(e.isLine){const a="LineBasicMaterial:"+i.uuid;let l=this.cache.get(a);l||(l=new Wi,ti.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,this.cache.add(a,l)),i=l}if(r||s||o){let a="ClonedMaterial:"+i.uuid+":";r&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=i.clone(),s&&(l.vertexColors=!0),o&&(l.flatShading=!0),r&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(i))),i=l}e.material=i}getMaterialType(){return Bp}loadMaterial(e){const t=this,i=this.json,r=this.extensions,s=i.materials[e];let o;const a={},l=s.extensions||{},u=[];if(l[Xt.KHR_MATERIALS_UNLIT]){const h=r[Xt.KHR_MATERIALS_UNLIT];o=h.getMaterialType(),u.push(h.extendParams(a,s,t))}else{const h=s.pbrMetallicRoughness||{};if(a.color=new qe(1,1,1),a.opacity=1,Array.isArray(h.baseColorFactor)){const p=h.baseColorFactor;a.color.fromArray(p),a.opacity=p[3]}h.baseColorTexture!==void 0&&u.push(t.assignTexture(a,"map",h.baseColorTexture,3001)),a.metalness=h.metallicFactor!==void 0?h.metallicFactor:1,a.roughness=h.roughnessFactor!==void 0?h.roughnessFactor:1,h.metallicRoughnessTexture!==void 0&&(u.push(t.assignTexture(a,"metalnessMap",h.metallicRoughnessTexture)),u.push(t.assignTexture(a,"roughnessMap",h.metallicRoughnessTexture))),o=this._invokeOne(function(p){return p.getMaterialType&&p.getMaterialType(e)}),u.push(Promise.all(this._invokeAll(function(p){return p.extendMaterialParams&&p.extendMaterialParams(e,a)})))}s.doubleSided===!0&&(a.side=rs);const c=s.alphaMode||Gx.OPAQUE;if(c===Gx.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,c===Gx.MASK&&(a.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&o!==br&&(u.push(t.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new be(1,1),s.normalTexture.scale!==void 0)){const h=s.normalTexture.scale;a.normalScale.set(h,h)}return s.occlusionTexture!==void 0&&o!==br&&(u.push(t.assignTexture(a,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&o!==br&&(a.emissive=new qe().fromArray(s.emissiveFactor)),s.emissiveTexture!==void 0&&o!==br&&u.push(t.assignTexture(a,"emissiveMap",s.emissiveTexture,3001)),Promise.all(u).then(function(){const h=new o(a);return s.name&&(h.name=s.name),Ta(h,s),t.associations.set(h,{materials:e}),s.extensions&&Gl(r,h,s),h})}createUniqueName(e){const t=Yt.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,i=this.extensions,r=this.primitiveCache;function s(a){return i[Xt.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(l){return e9(l,a,t)})}const o=[];for(let a=0,l=e.length;a<l;a++){const u=e[a],c=A$(u),h=r[c];if(h)o.push(h.promise);else{let p;u.extensions&&u.extensions[Xt.KHR_DRACO_MESH_COMPRESSION]?p=s(u):p=e9(new It,u,t),r[c]={primitive:u,promise:p},o.push(p)}}return Promise.all(o)}loadMesh(e){const t=this,i=this.json,r=this.extensions,s=i.meshes[e],o=s.primitives,a=[];for(let l=0,u=o.length;l<u;l++){const c=o[l].material===void 0?y$(this.cache):this.getDependency("material",o[l].material);a.push(c)}return a.push(t.loadGeometries(o)),Promise.all(a).then(function(l){const u=l.slice(0,l.length-1),c=l[l.length-1],h=[];for(let m=0,v=c.length;m<v;m++){const A=c[m],_=o[m];let g;const S=u[m];if(_.mode===$r.TRIANGLES||_.mode===$r.TRIANGLE_STRIP||_.mode===$r.TRIANGLE_FAN||_.mode===void 0)g=s.isSkinnedMesh===!0?new kC(A,S):new Vn(A,S),g.isSkinnedMesh===!0&&g.normalizeSkinWeights(),_.mode===$r.TRIANGLE_STRIP?g.geometry=K6(g.geometry,MC):_.mode===$r.TRIANGLE_FAN&&(g.geometry=K6(g.geometry,_g));else if(_.mode===$r.LINES)g=new Is(A,S);else if(_.mode===$r.LINE_STRIP)g=new qo(A,S);else if(_.mode===$r.LINE_LOOP)g=new HC(A,S);else if(_.mode===$r.POINTS)g=new GC(A,S);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+_.mode);Object.keys(g.geometry.morphAttributes).length>0&&x$(g,s),g.name=t.createUniqueName(s.name||"mesh_"+e),Ta(g,s),_.extensions&&Gl(r,g,_),t.assignFinalMaterial(g),h.push(g)}for(let m=0,v=h.length;m<v;m++)t.associations.set(h[m],{meshes:e,primitives:m});if(h.length===1)return s.extensions&&Gl(r,h[0],s),h[0];const p=new zo;s.extensions&&Gl(r,p,s),t.associations.set(p,{meshes:e});for(let m=0,v=h.length;m<v;m++)p.add(h[m]);return p})}loadCamera(e){let t;const i=this.json.cameras[e],r=i[i.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return i.type==="perspective"?t=new Rn(bC.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):i.type==="orthographic"&&(t=new Zs(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),i.name&&(t.name=this.createUniqueName(i.name)),Ta(t,i),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],i=[];for(let r=0,s=t.joints.length;r<s;r++)i.push(this._loadNodeShallow(t.joints[r]));return t.inverseBindMatrices!==void 0?i.push(this.getDependency("accessor",t.inverseBindMatrices)):i.push(null),Promise.all(i).then(function(r){const s=r.pop(),o=r,a=[],l=[];for(let u=0,c=o.length;u<c;u++){const h=o[u];if(h){a.push(h);const p=new xt;s!==null&&p.fromArray(s.array,u*16),l.push(p)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[u])}return new wp(a,l)})}loadAnimation(e){const i=this.json.animations[e],r=i.name?i.name:"animation_"+e,s=[],o=[],a=[],l=[],u=[];for(let c=0,h=i.channels.length;c<h;c++){const p=i.channels[c],m=i.samplers[p.sampler],v=p.target,A=v.node,_=i.parameters!==void 0?i.parameters[m.input]:m.input,g=i.parameters!==void 0?i.parameters[m.output]:m.output;v.node!==void 0&&(s.push(this.getDependency("node",A)),o.push(this.getDependency("accessor",_)),a.push(this.getDependency("accessor",g)),l.push(m),u.push(v))}return Promise.all([Promise.all(s),Promise.all(o),Promise.all(a),Promise.all(l),Promise.all(u)]).then(function(c){const h=c[0],p=c[1],m=c[2],v=c[3],A=c[4],_=[];for(let g=0,S=h.length;g<S;g++){const x=h[g],E=p[g],b=m[g],T=v[g],P=A[g];if(x===void 0)continue;x.updateMatrix();let I;switch(_a[P.path]){case _a.weights:I=Tf;break;case _a.rotation:I=sl;break;case _a.position:case _a.scale:default:I=bf;break}const z=x.name?x.name:x.uuid,w=T.interpolation!==void 0?v$[T.interpolation]:Tu,D=[];_a[P.path]===_a.weights?x.traverse(function(ie){ie.morphTargetInfluences&&D.push(ie.name?ie.name:ie.uuid)}):D.push(z);let Q=b.array;if(b.normalized){const ie=AA(Q.constructor),j=new Float32Array(Q.length);for(let se=0,oe=Q.length;se<oe;se++)j[se]=Q[se]*ie;Q=j}for(let ie=0,j=D.length;ie<j;ie++){const se=new I(D[ie]+"."+_a[P.path],E.array,Q,w);T.interpolation==="CUBICSPLINE"&&(se.createInterpolant=function(pe){const N=this instanceof sl?g$:BI;return new N(this.times,this.values,this.getValueSize()/3,pe)},se.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),_.push(se)}}return new Rf(r,void 0,_)})}createNodeMesh(e){const t=this.json,i=this,r=t.nodes[e];return r.mesh===void 0?null:i.getDependency("mesh",r.mesh).then(function(s){const o=i._getNodeRef(i.meshCache,r.mesh,s);return r.weights!==void 0&&o.traverse(function(a){if(a.isMesh)for(let l=0,u=r.weights.length;l<u;l++)a.morphTargetInfluences[l]=r.weights[l]}),o})}loadNode(e){const t=this.json,i=this,r=t.nodes[e],s=i._loadNodeShallow(e),o=[],a=r.children||[];for(let u=0,c=a.length;u<c;u++)o.push(i.getDependency("node",a[u]));const l=r.skin===void 0?Promise.resolve(null):i.getDependency("skin",r.skin);return Promise.all([s,Promise.all(o),l]).then(function(u){const c=u[0],h=u[1],p=u[2];p!==null&&c.traverse(function(m){m.isSkinnedMesh&&m.bind(p,C$)});for(let m=0,v=h.length;m<v;m++)c.add(h[m]);return c})}_loadNodeShallow(e){const t=this.json,i=this.extensions,r=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const s=t.nodes[e],o=s.name?r.createUniqueName(s.name):"",a=[],l=r._invokeOne(function(u){return u.createNodeMesh&&u.createNodeMesh(e)});return l&&a.push(l),s.camera!==void 0&&a.push(r.getDependency("camera",s.camera).then(function(u){return r._getNodeRef(r.cameraCache,s.camera,u)})),r._invokeAll(function(u){return u.createNodeAttachment&&u.createNodeAttachment(e)}).forEach(function(u){a.push(u)}),this.nodeCache[e]=Promise.all(a).then(function(u){let c;if(s.isBone===!0?c=new xv:u.length>1?c=new zo:u.length===1?c=u[0]:c=new qt,c!==u[0])for(let h=0,p=u.length;h<p;h++)c.add(u[h]);if(s.name&&(c.userData.name=s.name,c.name=o),Ta(c,s),s.extensions&&Gl(i,c,s),s.matrix!==void 0){const h=new xt;h.fromArray(s.matrix),c.applyMatrix4(h)}else s.translation!==void 0&&c.position.fromArray(s.translation),s.rotation!==void 0&&c.quaternion.fromArray(s.rotation),s.scale!==void 0&&c.scale.fromArray(s.scale);return r.associations.has(c)||r.associations.set(c,{}),r.associations.get(c).nodes=e,c}),this.nodeCache[e]}loadScene(e){const t=this.extensions,i=this.json.scenes[e],r=this,s=new zo;i.name&&(s.name=r.createUniqueName(i.name)),Ta(s,i),i.extensions&&Gl(t,s,i);const o=i.nodes||[],a=[];for(let l=0,u=o.length;l<u;l++)a.push(r.getDependency("node",o[l]));return Promise.all(a).then(function(l){for(let c=0,h=l.length;c<h;c++)s.add(l[c]);const u=c=>{const h=new Map;for(const[p,m]of r.associations)(p instanceof ti||p instanceof gn)&&h.set(p,m);return c.traverse(p=>{const m=r.associations.get(p);m!=null&&h.set(p,m)}),h};return r.associations=u(s),s})}}function M$(n,e,t){const i=e.attributes,r=new Gi;if(i.POSITION!==void 0){const a=t.json.accessors[i.POSITION],l=a.min,u=a.max;if(l!==void 0&&u!==void 0){if(r.set(new H(l[0],l[1],l[2]),new H(u[0],u[1],u[2])),a.normalized){const c=AA(cf[a.componentType]);r.min.multiplyScalar(c),r.max.multiplyScalar(c)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const a=new H,l=new H;for(let u=0,c=s.length;u<c;u++){const h=s[u];if(h.POSITION!==void 0){const p=t.json.accessors[h.POSITION],m=p.min,v=p.max;if(m!==void 0&&v!==void 0){if(l.setX(Math.max(Math.abs(m[0]),Math.abs(v[0]))),l.setY(Math.max(Math.abs(m[1]),Math.abs(v[1]))),l.setZ(Math.max(Math.abs(m[2]),Math.abs(v[2]))),p.normalized){const A=AA(cf[p.componentType]);l.multiplyScalar(A)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(a)}n.boundingBox=r;const o=new Ti;r.getCenter(o.center),o.radius=r.min.distanceTo(r.max)/2,n.boundingSphere=o}function e9(n,e,t){const i=e.attributes,r=[];function s(o,a){return t.getDependency("accessor",o).then(function(l){n.setAttribute(a,l)})}for(const o in i){const a=xA[o]||o.toLowerCase();a in n.attributes||r.push(s(i[o],a))}if(e.indices!==void 0&&!n.index){const o=t.getDependency("accessor",e.indices).then(function(a){n.setIndex(a)});r.push(o)}return Ta(n,e),M$(n,e,t),Promise.all(r).then(function(){return e.targets!==void 0?_$(n,e.targets,t):n})}class w$ extends $C{constructor(e){super(e),this.type=Hi}parse(e){const a=function(x,E){switch(x){case 1:console.error("THREE.RGBELoader Read Error: "+(E||""));break;case 2:console.error("THREE.RGBELoader Write Error: "+(E||""));break;case 3:console.error("THREE.RGBELoader Bad File Format: "+(E||""));break;default:case 4:console.error("THREE.RGBELoader: Error: "+(E||""))}return-1},h=`
`,p=function(x,E,b){E=E||1024;let P=x.pos,I=-1,z=0,w="",D=String.fromCharCode.apply(null,new Uint16Array(x.subarray(P,P+128)));for(;0>(I=D.indexOf(h))&&z<E&&P<x.byteLength;)w+=D,z+=D.length,P+=128,D+=String.fromCharCode.apply(null,new Uint16Array(x.subarray(P,P+128)));return-1<I?(b!==!1&&(x.pos+=z+I+1),w+D.slice(0,I)):!1},m=function(x){const E=/^#\?(\S+)/,b=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,T=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,P=/^\s*FORMAT=(\S+)\s*$/,I=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,z={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let w,D;if(x.pos>=x.byteLength||!(w=p(x)))return a(1,"no header found");if(!(D=w.match(E)))return a(3,"bad initial token");for(z.valid|=1,z.programtype=D[1],z.string+=w+`
`;w=p(x),w!==!1;){if(z.string+=w+`
`,w.charAt(0)==="#"){z.comments+=w+`
`;continue}if((D=w.match(b))&&(z.gamma=parseFloat(D[1])),(D=w.match(T))&&(z.exposure=parseFloat(D[1])),(D=w.match(P))&&(z.valid|=2,z.format=D[1]),(D=w.match(I))&&(z.valid|=4,z.height=parseInt(D[1],10),z.width=parseInt(D[2],10)),z.valid&2&&z.valid&4)break}return z.valid&2?z.valid&4?z:a(3,"missing image size specifier"):a(3,"missing format specifier")},v=function(x,E,b){const T=E;if(T<8||T>32767||x[0]!==2||x[1]!==2||x[2]&128)return new Uint8Array(x);if(T!==(x[2]<<8|x[3]))return a(3,"wrong scanline width");const P=new Uint8Array(4*E*b);if(!P.length)return a(4,"unable to allocate buffer space");let I=0,z=0;const w=4*T,D=new Uint8Array(4),Q=new Uint8Array(w);let ie=b;for(;ie>0&&z<x.byteLength;){if(z+4>x.byteLength)return a(1);if(D[0]=x[z++],D[1]=x[z++],D[2]=x[z++],D[3]=x[z++],D[0]!=2||D[1]!=2||(D[2]<<8|D[3])!=T)return a(3,"bad rgbe scanline format");let j=0,se;for(;j<w&&z<x.byteLength;){se=x[z++];const pe=se>128;if(pe&&(se-=128),se===0||j+se>w)return a(3,"bad scanline data");if(pe){const N=x[z++];for(let X=0;X<se;X++)Q[j++]=N}else Q.set(x.subarray(z,z+se),j),j+=se,z+=se}const oe=T;for(let pe=0;pe<oe;pe++){let N=0;P[I]=Q[pe+N],N+=T,P[I+1]=Q[pe+N],N+=T,P[I+2]=Q[pe+N],N+=T,P[I+3]=Q[pe+N],I+=4}ie--}return P},A=function(x,E,b,T){const P=x[E+3],I=Math.pow(2,P-128)/255;b[T+0]=x[E+0]*I,b[T+1]=x[E+1]*I,b[T+2]=x[E+2]*I,b[T+3]=1},_=function(x,E,b,T){const P=x[E+3],I=Math.pow(2,P-128)/255;b[T+0]=lu.toHalfFloat(Math.min(x[E+0]*I,65504)),b[T+1]=lu.toHalfFloat(Math.min(x[E+1]*I,65504)),b[T+2]=lu.toHalfFloat(Math.min(x[E+2]*I,65504)),b[T+3]=lu.toHalfFloat(1)},g=new Uint8Array(e);g.pos=0;const S=m(g);if(S!==-1){const x=S.width,E=S.height,b=v(g.subarray(g.pos),x,E);if(b!==-1){let T,P,I;switch(this.type){case ei:I=b.length/4;const z=new Float32Array(I*4);for(let D=0;D<I;D++)A(b,D*4,z,D*4);T=z,P=ei;break;case Hi:I=b.length/4;const w=new Uint16Array(I*4);for(let D=0;D<I;D++)_(b,D*4,w,D*4);T=w,P=Hi;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type);break}return{width:x,height:E,data:T,header:S.string,gamma:S.gamma,exposure:S.exposure,type:P}}}return null}setDataType(e){return this.type=e,this}load(e,t,i,r){function s(o,a){switch(o.type){case ei:case Hi:"colorSpace"in o?o.colorSpace="srgb-linear":o.encoding=3e3,o.minFilter=rn,o.magFilter=rn,o.generateMipmaps=!1,o.flipY=!0;break}t&&t(o,a)}return super.load(e,s,i,r)}}const kh="colorSpace"in new gn;class T$ extends $C{constructor(e){super(e),this.type=Hi}parse(e){const z=Math.pow(2.7182818,2.2);function w(F,U){for(var te=0,B=0;B<65536;++B)(B==0||F[B>>3]&1<<(B&7))&&(U[te++]=B);for(var k=te-1;te<65536;)U[te++]=0;return k}function D(F){for(var U=0;U<16384;U++)F[U]={},F[U].len=0,F[U].lit=0,F[U].p=null}const Q={l:0,c:0,lc:0};function ie(F,U,te,B,k){for(;te<F;)U=U<<8|dt(B,k),te+=8;te-=F,Q.l=U>>te&(1<<F)-1,Q.c=U,Q.lc=te}const j=new Array(59);function se(F){for(var U=0;U<=58;++U)j[U]=0;for(var U=0;U<65537;++U)j[F[U]]+=1;for(var te=0,U=58;U>0;--U){var B=te+j[U]>>1;j[U]=te,te=B}for(var U=0;U<65537;++U){var k=F[U];k>0&&(F[U]=k|j[k]++<<6)}}function oe(F,U,te,B,k,W,$){for(var Y=te,ye=0,xe=0;k<=W;k++){if(Y.value-te.value>B)return!1;ie(6,ye,xe,F,Y);var Ee=Q.l;if(ye=Q.c,xe=Q.lc,$[k]=Ee,Ee==63){if(Y.value-te.value>B)throw"Something wrong with hufUnpackEncTable";ie(8,ye,xe,F,Y);var Se=Q.l+6;if(ye=Q.c,xe=Q.lc,k+Se>W+1)throw"Something wrong with hufUnpackEncTable";for(;Se--;)$[k++]=0;k--}else if(Ee>=59){var Se=Ee-59+2;if(k+Se>W+1)throw"Something wrong with hufUnpackEncTable";for(;Se--;)$[k++]=0;k--}}se($)}function pe(F){return F&63}function N(F){return F>>6}function X(F,U,te,B){for(;U<=te;U++){var k=N(F[U]),W=pe(F[U]);if(k>>W)throw"Invalid table entry";if(W>14){var $=B[k>>W-14];if($.len)throw"Invalid table entry";if($.lit++,$.p){var Y=$.p;$.p=new Array($.lit);for(var ye=0;ye<$.lit-1;++ye)$.p[ye]=Y[ye]}else $.p=new Array(1);$.p[$.lit-1]=U}else if(W)for(var xe=0,ye=1<<14-W;ye>0;ye--){var $=B[(k<<14-W)+xe];if($.len||$.p)throw"Invalid table entry";$.len=W,$.lit=U,xe++}}return!0}const J={c:0,lc:0};function ae(F,U,te,B){F=F<<8|dt(te,B),U+=8,J.c=F,J.lc=U}const me={c:0,lc:0};function Ue(F,U,te,B,k,W,$,Y,ye,xe){if(F==U){B<8&&(ae(te,B,k,$),te=J.c,B=J.lc),B-=8;var Ee=te>>B,Ee=new Uint8Array([Ee])[0];if(ye.value+Ee>xe)return!1;for(var Se=Y[ye.value-1];Ee-- >0;)Y[ye.value++]=Se}else if(ye.value<xe)Y[ye.value++]=F;else return!1;me.c=te,me.lc=B}function he(F){return F&65535}function Te(F){var U=he(F);return U>32767?U-65536:U}const we={a:0,b:0};function je(F,U){var te=Te(F),B=Te(U),k=B,W=te+(k&1)+(k>>1),$=W,Y=W-k;we.a=$,we.b=Y}function $e(F,U){var te=he(F),B=he(U),k=te-(B>>1)&65535,W=B+k-32768&65535;we.a=W,we.b=k}function nt(F,U,te,B,k,W,$){for(var Y=$<16384,ye=te>k?k:te,xe=1,Ee;xe<=ye;)xe<<=1;for(xe>>=1,Ee=xe,xe>>=1;xe>=1;){for(var Se=0,st=Se+W*(k-Ee),Fe=W*xe,Oe=W*Ee,at=B*xe,yt=B*Ee,At,Rt,ot,Ye;Se<=st;Se+=Oe){for(var kt=Se,St=Se+B*(te-Ee);kt<=St;kt+=yt){var Tt=kt+at,on=kt+Fe,Fn=on+at;Y?(je(F[kt+U],F[on+U]),At=we.a,ot=we.b,je(F[Tt+U],F[Fn+U]),Rt=we.a,Ye=we.b,je(At,Rt),F[kt+U]=we.a,F[Tt+U]=we.b,je(ot,Ye),F[on+U]=we.a,F[Fn+U]=we.b):($e(F[kt+U],F[on+U]),At=we.a,ot=we.b,$e(F[Tt+U],F[Fn+U]),Rt=we.a,Ye=we.b,$e(At,Rt),F[kt+U]=we.a,F[Tt+U]=we.b,$e(ot,Ye),F[on+U]=we.a,F[Fn+U]=we.b)}if(te&xe){var on=kt+Fe;Y?je(F[kt+U],F[on+U]):$e(F[kt+U],F[on+U]),At=we.a,F[on+U]=we.b,F[kt+U]=At}}if(k&xe)for(var kt=Se,St=Se+B*(te-Ee);kt<=St;kt+=yt){var Tt=kt+at;Y?je(F[kt+U],F[Tt+U]):$e(F[kt+U],F[Tt+U]),At=we.a,F[Tt+U]=we.b,F[kt+U]=At}Ee=xe,xe>>=1}return Se}function Et(F,U,te,B,k,W,$,Y,ye,xe){for(var Ee=0,Se=0,st=Y,Fe=Math.trunc(k.value+(W+7)/8);k.value<Fe;)for(ae(Ee,Se,te,k),Ee=J.c,Se=J.lc;Se>=14;){var Oe=Ee>>Se-14&16383,at=U[Oe];if(at.len)Se-=at.len,Ue(at.lit,$,Ee,Se,te,B,k,ye,xe,st),Ee=me.c,Se=me.lc;else{if(!at.p)throw"hufDecode issues";var yt;for(yt=0;yt<at.lit;yt++){for(var At=pe(F[at.p[yt]]);Se<At&&k.value<Fe;)ae(Ee,Se,te,k),Ee=J.c,Se=J.lc;if(Se>=At&&N(F[at.p[yt]])==(Ee>>Se-At&(1<<At)-1)){Se-=At,Ue(at.p[yt],$,Ee,Se,te,B,k,ye,xe,st),Ee=me.c,Se=me.lc;break}}if(yt==at.lit)throw"hufDecode issues"}}var Rt=8-W&7;for(Ee>>=Rt,Se-=Rt;Se>0;){var at=U[Ee<<14-Se&16383];if(at.len)Se-=at.len,Ue(at.lit,$,Ee,Se,te,B,k,ye,xe,st),Ee=me.c,Se=me.lc;else throw"hufDecode issues"}return!0}function et(F,U,te,B,k,W){var $={value:0},Y=te.value,ye=mt(U,te),xe=mt(U,te);te.value+=4;var Ee=mt(U,te);if(te.value+=4,ye<0||ye>=65537||xe<0||xe>=65537)throw"Something wrong with HUF_ENCSIZE";var Se=new Array(65537),st=new Array(16384);D(st);var Fe=B-(te.value-Y);if(oe(F,U,te,Fe,ye,xe,Se),Ee>8*(B-(te.value-Y)))throw"Something wrong with hufUncompress";X(Se,ye,xe,st),Et(Se,st,F,U,te,Ee,xe,W,k,$)}function Z(F,U,te){for(var B=0;B<te;++B)U[B]=F[U[B]]}function De(F){for(var U=1;U<F.length;U++){var te=F[U-1]+F[U]-128;F[U]=te}}function Re(F,U){for(var te=0,B=Math.floor((F.length+1)/2),k=0,W=F.length-1;!(k>W||(U[k++]=F[te++],k>W));)U[k++]=F[B++]}function ze(F){for(var U=F.byteLength,te=new Array,B=0,k=new DataView(F);U>0;){var W=k.getInt8(B++);if(W<0){var $=-W;U-=$+1;for(var Y=0;Y<$;Y++)te.push(k.getUint8(B++))}else{var $=W;U-=2;for(var ye=k.getUint8(B++),Y=0;Y<$+1;Y++)te.push(ye)}}return te}function Ie(F,U,te,B,k,W){var Tt=new DataView(W.buffer),$=te[F.idx[0]].width,Y=te[F.idx[0]].height,ye=3,xe=Math.floor($/8),Ee=Math.ceil($/8),Se=Math.ceil(Y/8),st=$-(Ee-1)*8,Fe=Y-(Se-1)*8,Oe={value:0},at=new Array(ye),yt=new Array(ye),At=new Array(ye),Rt=new Array(ye),ot=new Array(ye);for(let Ht=0;Ht<ye;++Ht)ot[Ht]=U[F.idx[Ht]],at[Ht]=Ht<1?0:at[Ht-1]+Ee*Se,yt[Ht]=new Float32Array(64),At[Ht]=new Uint16Array(64),Rt[Ht]=new Uint16Array(Ee*64);for(let Ht=0;Ht<Se;++Ht){var Ye=8;Ht==Se-1&&(Ye=Fe);var kt=8;for(let Dt=0;Dt<Ee;++Dt){Dt==Ee-1&&(kt=st);for(let Vt=0;Vt<ye;++Vt)At[Vt].fill(0),At[Vt][0]=k[at[Vt]++],it(Oe,B,At[Vt]),V(At[Vt],yt[Vt]),ne(yt[Vt]);de(yt);for(let Vt=0;Vt<ye;++Vt)O(yt[Vt],Rt[Vt],Dt*64)}let Mn=0;for(let Dt=0;Dt<ye;++Dt){const Vt=te[F.idx[Dt]].type;for(let dn=8*Ht;dn<8*Ht+Ye;++dn){Mn=ot[Dt][dn];for(let zr=0;zr<xe;++zr){const Xi=zr*64+(dn&7)*8;Tt.setUint16(Mn+0*2*Vt,Rt[Dt][Xi+0],!0),Tt.setUint16(Mn+1*2*Vt,Rt[Dt][Xi+1],!0),Tt.setUint16(Mn+2*2*Vt,Rt[Dt][Xi+2],!0),Tt.setUint16(Mn+3*2*Vt,Rt[Dt][Xi+3],!0),Tt.setUint16(Mn+4*2*Vt,Rt[Dt][Xi+4],!0),Tt.setUint16(Mn+5*2*Vt,Rt[Dt][Xi+5],!0),Tt.setUint16(Mn+6*2*Vt,Rt[Dt][Xi+6],!0),Tt.setUint16(Mn+7*2*Vt,Rt[Dt][Xi+7],!0),Mn+=8*2*Vt}}if(xe!=Ee)for(let dn=8*Ht;dn<8*Ht+Ye;++dn){const zr=ot[Dt][dn]+8*xe*2*Vt,Xi=xe*64+(dn&7)*8;for(let Ns=0;Ns<kt;++Ns)Tt.setUint16(zr+Ns*2*Vt,Rt[Dt][Xi+Ns],!0)}}}for(var St=new Uint16Array($),Tt=new DataView(W.buffer),on=0;on<ye;++on){te[F.idx[on]].decoded=!0;var Fn=te[F.idx[on]].type;if(te[on].type==2)for(var An=0;An<Y;++An){const Ht=ot[on][An];for(var Kt=0;Kt<$;++Kt)St[Kt]=Tt.getUint16(Ht+Kt*2*Fn,!0);for(var Kt=0;Kt<$;++Kt)Tt.setFloat32(Ht+Kt*2*Fn,Le(St[Kt]),!0)}}}function it(F,U,te){for(var B,k=1;k<64;)B=U[F.value],B==65280?k=64:B>>8==255?k+=B&255:(te[k]=B,k++),F.value++}function V(F,U){U[0]=Le(F[0]),U[1]=Le(F[1]),U[2]=Le(F[5]),U[3]=Le(F[6]),U[4]=Le(F[14]),U[5]=Le(F[15]),U[6]=Le(F[27]),U[7]=Le(F[28]),U[8]=Le(F[2]),U[9]=Le(F[4]),U[10]=Le(F[7]),U[11]=Le(F[13]),U[12]=Le(F[16]),U[13]=Le(F[26]),U[14]=Le(F[29]),U[15]=Le(F[42]),U[16]=Le(F[3]),U[17]=Le(F[8]),U[18]=Le(F[12]),U[19]=Le(F[17]),U[20]=Le(F[25]),U[21]=Le(F[30]),U[22]=Le(F[41]),U[23]=Le(F[43]),U[24]=Le(F[9]),U[25]=Le(F[11]),U[26]=Le(F[18]),U[27]=Le(F[24]),U[28]=Le(F[31]),U[29]=Le(F[40]),U[30]=Le(F[44]),U[31]=Le(F[53]),U[32]=Le(F[10]),U[33]=Le(F[19]),U[34]=Le(F[23]),U[35]=Le(F[32]),U[36]=Le(F[39]),U[37]=Le(F[45]),U[38]=Le(F[52]),U[39]=Le(F[54]),U[40]=Le(F[20]),U[41]=Le(F[22]),U[42]=Le(F[33]),U[43]=Le(F[38]),U[44]=Le(F[46]),U[45]=Le(F[51]),U[46]=Le(F[55]),U[47]=Le(F[60]),U[48]=Le(F[21]),U[49]=Le(F[34]),U[50]=Le(F[37]),U[51]=Le(F[47]),U[52]=Le(F[50]),U[53]=Le(F[56]),U[54]=Le(F[59]),U[55]=Le(F[61]),U[56]=Le(F[35]),U[57]=Le(F[36]),U[58]=Le(F[48]),U[59]=Le(F[49]),U[60]=Le(F[57]),U[61]=Le(F[58]),U[62]=Le(F[62]),U[63]=Le(F[63])}function ne(F){const U=.5*Math.cos(.7853975),te=.5*Math.cos(3.14159/16),B=.5*Math.cos(3.14159/8),k=.5*Math.cos(3*3.14159/16),W=.5*Math.cos(5*3.14159/16),$=.5*Math.cos(3*3.14159/8),Y=.5*Math.cos(7*3.14159/16);for(var ye=new Array(4),xe=new Array(4),Ee=new Array(4),Se=new Array(4),st=0;st<8;++st){var Fe=st*8;ye[0]=B*F[Fe+2],ye[1]=$*F[Fe+2],ye[2]=B*F[Fe+6],ye[3]=$*F[Fe+6],xe[0]=te*F[Fe+1]+k*F[Fe+3]+W*F[Fe+5]+Y*F[Fe+7],xe[1]=k*F[Fe+1]-Y*F[Fe+3]-te*F[Fe+5]-W*F[Fe+7],xe[2]=W*F[Fe+1]-te*F[Fe+3]+Y*F[Fe+5]+k*F[Fe+7],xe[3]=Y*F[Fe+1]-W*F[Fe+3]+k*F[Fe+5]-te*F[Fe+7],Ee[0]=U*(F[Fe+0]+F[Fe+4]),Ee[3]=U*(F[Fe+0]-F[Fe+4]),Ee[1]=ye[0]+ye[3],Ee[2]=ye[1]-ye[2],Se[0]=Ee[0]+Ee[1],Se[1]=Ee[3]+Ee[2],Se[2]=Ee[3]-Ee[2],Se[3]=Ee[0]-Ee[1],F[Fe+0]=Se[0]+xe[0],F[Fe+1]=Se[1]+xe[1],F[Fe+2]=Se[2]+xe[2],F[Fe+3]=Se[3]+xe[3],F[Fe+4]=Se[3]-xe[3],F[Fe+5]=Se[2]-xe[2],F[Fe+6]=Se[1]-xe[1],F[Fe+7]=Se[0]-xe[0]}for(var Oe=0;Oe<8;++Oe)ye[0]=B*F[16+Oe],ye[1]=$*F[16+Oe],ye[2]=B*F[48+Oe],ye[3]=$*F[48+Oe],xe[0]=te*F[8+Oe]+k*F[24+Oe]+W*F[40+Oe]+Y*F[56+Oe],xe[1]=k*F[8+Oe]-Y*F[24+Oe]-te*F[40+Oe]-W*F[56+Oe],xe[2]=W*F[8+Oe]-te*F[24+Oe]+Y*F[40+Oe]+k*F[56+Oe],xe[3]=Y*F[8+Oe]-W*F[24+Oe]+k*F[40+Oe]-te*F[56+Oe],Ee[0]=U*(F[Oe]+F[32+Oe]),Ee[3]=U*(F[Oe]-F[32+Oe]),Ee[1]=ye[0]+ye[3],Ee[2]=ye[1]-ye[2],Se[0]=Ee[0]+Ee[1],Se[1]=Ee[3]+Ee[2],Se[2]=Ee[3]-Ee[2],Se[3]=Ee[0]-Ee[1],F[0+Oe]=Se[0]+xe[0],F[8+Oe]=Se[1]+xe[1],F[16+Oe]=Se[2]+xe[2],F[24+Oe]=Se[3]+xe[3],F[32+Oe]=Se[3]-xe[3],F[40+Oe]=Se[2]-xe[2],F[48+Oe]=Se[1]-xe[1],F[56+Oe]=Se[0]-xe[0]}function de(F){for(var U=0;U<64;++U){var te=F[0][U],B=F[1][U],k=F[2][U];F[0][U]=te+1.5747*k,F[1][U]=te-.1873*B-.4682*k,F[2][U]=te+1.8556*B}}function O(F,U,te){for(var B=0;B<64;++B)U[te+B]=lu.toHalfFloat(L(F[B]))}function L(F){return F<=1?Math.sign(F)*Math.pow(Math.abs(F),2.2):Math.sign(F)*Math.pow(z,Math.abs(F)-1)}function ee(F){return new DataView(F.array.buffer,F.offset.value,F.size)}function ue(F){var U=F.viewer.buffer.slice(F.offset.value,F.offset.value+F.size),te=new Uint8Array(ze(U)),B=new Uint8Array(te.length);return De(te),Re(te,B),new DataView(B.buffer)}function Ce(F){var U=F.array.slice(F.offset.value,F.offset.value+F.size),te=X1(U),B=new Uint8Array(te.length);return De(te),Re(te,B),new DataView(B.buffer)}function Pe(F){for(var U=F.viewer,te={value:F.offset.value},B=new Uint16Array(F.width*F.scanlineBlockSize*(F.channels*F.type)),k=new Uint8Array(8192),W=0,$=new Array(F.channels),Y=0;Y<F.channels;Y++)$[Y]={},$[Y].start=W,$[Y].end=$[Y].start,$[Y].nx=F.width,$[Y].ny=F.lines,$[Y].size=F.type,W+=$[Y].nx*$[Y].ny*$[Y].size;var ye=re(U,te),xe=re(U,te);if(xe>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(ye<=xe)for(var Y=0;Y<xe-ye+1;Y++)k[Y+ye]=q(U,te);var Ee=new Uint16Array(65536),Se=w(k,Ee),st=mt(U,te);et(F.array,U,te,st,B,W);for(var Y=0;Y<F.channels;++Y)for(var Fe=$[Y],Oe=0;Oe<$[Y].size;++Oe)nt(B,Fe.start+Oe,Fe.nx,Fe.size,Fe.ny,Fe.nx*Fe.size,Se);Z(Ee,B,W);for(var at=0,yt=new Uint8Array(B.buffer.byteLength),At=0;At<F.lines;At++)for(var Rt=0;Rt<F.channels;Rt++){var Fe=$[Rt],ot=Fe.nx*Fe.size,Ye=new Uint8Array(B.buffer,Fe.end*2,ot*2);yt.set(Ye,at),at+=ot*2,Fe.end+=ot}return new DataView(yt.buffer)}function ft(F){var U=F.array.slice(F.offset.value,F.offset.value+F.size),te=X1(U);const B=F.lines*F.channels*F.width,k=F.type==1?new Uint16Array(B):new Uint32Array(B);let W=0,$=0;const Y=new Array(4);for(let ye=0;ye<F.lines;ye++)for(let xe=0;xe<F.channels;xe++){let Ee=0;switch(F.type){case 1:Y[0]=W,Y[1]=Y[0]+F.width,W=Y[1]+F.width;for(let Se=0;Se<F.width;++Se){const st=te[Y[0]++]<<8|te[Y[1]++];Ee+=st,k[$]=Ee,$++}break;case 2:Y[0]=W,Y[1]=Y[0]+F.width,Y[2]=Y[1]+F.width,W=Y[2]+F.width;for(let Se=0;Se<F.width;++Se){const st=te[Y[0]++]<<24|te[Y[1]++]<<16|te[Y[2]++]<<8;Ee+=st,k[$]=Ee,$++}break}}return new DataView(k.buffer)}function ht(F){var U=F.viewer,te={value:F.offset.value},B=new Uint8Array(F.width*F.lines*(F.channels*F.type*2)),k={version:ve(U,te),unknownUncompressedSize:ve(U,te),unknownCompressedSize:ve(U,te),acCompressedSize:ve(U,te),dcCompressedSize:ve(U,te),rleCompressedSize:ve(U,te),rleUncompressedSize:ve(U,te),rleRawSize:ve(U,te),totalAcUncompressedCount:ve(U,te),totalDcUncompressedCount:ve(U,te),acCompression:ve(U,te)};if(k.version<2)throw"EXRLoader.parse: "+sr.compression+" version "+k.version+" is unsupported";for(var W=new Array,$=re(U,te)-2;$>0;){var Y=He(U.buffer,te),ye=q(U,te),xe=ye>>2&3,Ee=(ye>>4)-1,Se=new Int8Array([Ee])[0],st=q(U,te);W.push({name:Y,index:Se,type:st,compression:xe}),$-=Y.length+3}for(var Fe=sr.channels,Oe=new Array(F.channels),at=0;at<F.channels;++at){var yt=Oe[at]={},At=Fe[at];yt.name=At.name,yt.compression=0,yt.decoded=!1,yt.type=At.pixelType,yt.pLinear=At.pLinear,yt.width=F.width,yt.height=F.lines}for(var Rt={idx:new Array(3)},ot=0;ot<F.channels;++ot)for(var yt=Oe[ot],at=0;at<W.length;++at){var Ye=W[at];yt.name==Ye.name&&(yt.compression=Ye.compression,Ye.index>=0&&(Rt.idx[Ye.index]=ot),yt.offset=ot)}if(k.acCompressedSize>0)switch(k.acCompression){case 0:var Tt=new Uint16Array(k.totalAcUncompressedCount);et(F.array,U,te,k.acCompressedSize,Tt,k.totalAcUncompressedCount);break;case 1:var kt=F.array.slice(te.value,te.value+k.totalAcUncompressedCount),St=X1(kt),Tt=new Uint16Array(St.buffer);te.value+=k.totalAcUncompressedCount;break}if(k.dcCompressedSize>0){var on={array:F.array,offset:te,size:k.dcCompressedSize},Fn=new Uint16Array(Ce(on).buffer);te.value+=k.dcCompressedSize}if(k.rleRawSize>0){var kt=F.array.slice(te.value,te.value+k.rleCompressedSize),St=X1(kt),An=ze(St.buffer);te.value+=k.rleCompressedSize}for(var Kt=0,Ht=new Array(Oe.length),at=0;at<Ht.length;++at)Ht[at]=new Array;for(var Mn=0;Mn<F.lines;++Mn)for(var Dt=0;Dt<Oe.length;++Dt)Ht[Dt].push(Kt),Kt+=Oe[Dt].width*F.type*2;Ie(Rt,Ht,Oe,Tt,Fn,B);for(var at=0;at<Oe.length;++at){var yt=Oe[at];if(!yt.decoded)switch(yt.compression){case 2:for(var Vt=0,dn=0,Mn=0;Mn<F.lines;++Mn){for(var zr=Ht[at][Vt],Xi=0;Xi<yt.width;++Xi){for(var Ns=0;Ns<2*yt.type;++Ns)B[zr++]=An[dn+Ns*yt.width*yt.height];dn++}Vt++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(B.buffer)}function He(F,U){for(var te=new Uint8Array(F),B=0;te[U.value+B]!=0;)B+=1;var k=new TextDecoder().decode(te.slice(U.value,U.value+B));return U.value=U.value+B+1,k}function Ke(F,U,te){var B=new TextDecoder().decode(new Uint8Array(F).slice(U.value,U.value+te));return U.value=U.value+te,B}function _t(F,U){var te=Jt(F,U),B=mt(F,U);return[te,B]}function Ge(F,U){var te=mt(F,U),B=mt(F,U);return[te,B]}function Jt(F,U){var te=F.getInt32(U.value,!0);return U.value=U.value+4,te}function mt(F,U){var te=F.getUint32(U.value,!0);return U.value=U.value+4,te}function dt(F,U){var te=F[U.value];return U.value=U.value+1,te}function q(F,U){var te=F.getUint8(U.value);return U.value=U.value+1,te}const ve=function(F,U){let te;return"getBigInt64"in DataView.prototype?te=Number(F.getBigInt64(U.value,!0)):te=F.getUint32(U.value+4,!0)+Number(F.getUint32(U.value,!0)<<32),U.value+=8,te};function Ne(F,U){var te=F.getFloat32(U.value,!0);return U.value+=4,te}function Qe(F,U){return lu.toHalfFloat(Ne(F,U))}function Le(F){var U=(F&31744)>>10,te=F&1023;return(F>>15?-1:1)*(U?U===31?te?NaN:1/0:Math.pow(2,U-15)*(1+te/1024):6103515625e-14*(te/1024))}function re(F,U){var te=F.getUint16(U.value,!0);return U.value+=2,te}function Xe(F,U){return Le(re(F,U))}function _e(F,U,te,B){for(var k=te.value,W=[];te.value<k+B-1;){var $=He(U,te),Y=Jt(F,te),ye=q(F,te);te.value+=3;var xe=Jt(F,te),Ee=Jt(F,te);W.push({name:$,pixelType:Y,pLinear:ye,xSampling:xe,ySampling:Ee})}return te.value+=1,W}function Ve(F,U){var te=Ne(F,U),B=Ne(F,U),k=Ne(F,U),W=Ne(F,U),$=Ne(F,U),Y=Ne(F,U),ye=Ne(F,U),xe=Ne(F,U);return{redX:te,redY:B,greenX:k,greenY:W,blueX:$,blueY:Y,whiteX:ye,whiteY:xe}}function Je(F,U){var te=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],B=q(F,U);return te[B]}function Mt(F,U){var te=mt(F,U),B=mt(F,U),k=mt(F,U),W=mt(F,U);return{xMin:te,yMin:B,xMax:k,yMax:W}}function Gt(F,U){var te=["INCREASING_Y"],B=q(F,U);return te[B]}function cn(F,U){var te=Ne(F,U),B=Ne(F,U);return[te,B]}function En(F,U){var te=Ne(F,U),B=Ne(F,U),k=Ne(F,U);return[te,B,k]}function jt(F,U,te,B,k){if(B==="string"||B==="stringvector"||B==="iccProfile")return Ke(U,te,k);if(B==="chlist")return _e(F,U,te,k);if(B==="chromaticities")return Ve(F,te);if(B==="compression")return Je(F,te);if(B==="box2i")return Mt(F,te);if(B==="lineOrder")return Gt(F,te);if(B==="float")return Ne(F,te);if(B==="v2f")return cn(F,te);if(B==="v3f")return En(F,te);if(B==="int")return Jt(F,te);if(B==="rational")return _t(F,te);if(B==="timecode")return Ge(F,te);if(B==="preview")return te.value+=k,"skipped";te.value+=k}function ni(F,U,te){const B={};if(F.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";B.version=F.getUint8(4);const k=F.getUint8(5);B.spec={singleTile:!!(k&2),longName:!!(k&4),deepFormat:!!(k&8),multiPart:!!(k&16)},te.value=8;for(var W=!0;W;){var $=He(U,te);if($==0)W=!1;else{var Y=He(U,te),ye=mt(F,te),xe=jt(F,U,te,Y,ye);xe===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${Y}'.`):B[$]=xe}}if(k&-5)throw console.error("EXRHeader:",B),"THREE.EXRLoader: provided file is currently unsupported.";return B}function rr(F,U,te,B,k){const W={size:0,viewer:U,array:te,offset:B,width:F.dataWindow.xMax-F.dataWindow.xMin+1,height:F.dataWindow.yMax-F.dataWindow.yMin+1,channels:F.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:F.channels[0].pixelType,uncompress:null,getter:null,format:null,[kh?"colorSpace":"encoding"]:null};switch(F.compression){case"NO_COMPRESSION":W.lines=1,W.uncompress=ee;break;case"RLE_COMPRESSION":W.lines=1,W.uncompress=ue;break;case"ZIPS_COMPRESSION":W.lines=1,W.uncompress=Ce;break;case"ZIP_COMPRESSION":W.lines=16,W.uncompress=Ce;break;case"PIZ_COMPRESSION":W.lines=32,W.uncompress=Pe;break;case"PXR24_COMPRESSION":W.lines=16,W.uncompress=ft;break;case"DWAA_COMPRESSION":W.lines=32,W.uncompress=ht;break;case"DWAB_COMPRESSION":W.lines=256,W.uncompress=ht;break;default:throw"EXRLoader.parse: "+F.compression+" is unsupported"}if(W.scanlineBlockSize=W.lines,W.type==1)switch(k){case ei:W.getter=Xe,W.inputSize=2;break;case Hi:W.getter=re,W.inputSize=2;break}else if(W.type==2)switch(k){case ei:W.getter=Ne,W.inputSize=4;break;case Hi:W.getter=Qe,W.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+W.type+" for "+F.compression+".";W.blockCount=(F.dataWindow.yMax+1)/W.scanlineBlockSize;for(var $=0;$<W.blockCount;$++)ve(U,B);W.outputChannels=W.channels==3?4:W.channels;const Y=W.width*W.height*W.outputChannels;switch(k){case ei:W.byteArray=new Float32Array(Y),W.channels<W.outputChannels&&W.byteArray.fill(1,0,Y);break;case Hi:W.byteArray=new Uint16Array(Y),W.channels<W.outputChannels&&W.byteArray.fill(15360,0,Y);break;default:console.error("THREE.EXRLoader: unsupported type: ",k);break}return W.bytesPerLine=W.width*W.inputSize*W.channels,W.outputChannels==4?W.format=zi:W.format=hv,kh?W.colorSpace="srgb-linear":W.encoding=3e3,W}const Fs=new DataView(e),yl=new Uint8Array(e),kr={value:0},sr=ni(Fs,e,kr),Lt=rr(sr,Fs,yl,kr,this.type),_l={value:0},Gu={R:0,G:1,B:2,A:3,Y:0};for(let F=0;F<Lt.height/Lt.scanlineBlockSize;F++){const U=mt(Fs,kr);Lt.size=mt(Fs,kr),Lt.lines=U+Lt.scanlineBlockSize>Lt.height?Lt.height-U:Lt.scanlineBlockSize;const B=Lt.size<Lt.lines*Lt.bytesPerLine?Lt.uncompress(Lt):ee(Lt);kr.value+=Lt.size;for(let k=0;k<Lt.scanlineBlockSize;k++){const W=k+F*Lt.scanlineBlockSize;if(W>=Lt.height)break;for(let $=0;$<Lt.channels;$++){const Y=Gu[sr.channels[$].name];for(let ye=0;ye<Lt.width;ye++){_l.value=(k*(Lt.channels*Lt.width)+$*Lt.width+ye)*Lt.inputSize;const xe=(Lt.height-1-W)*(Lt.width*Lt.outputChannels)+ye*Lt.outputChannels+Y;Lt.byteArray[xe]=Lt.getter(B,_l)}}}}return{header:sr,width:Lt.width,height:Lt.height,data:Lt.byteArray,format:Lt.format,[kh?"colorSpace":"encoding"]:Lt[kh?"colorSpace":"encoding"],type:this.type}}setDataType(e){return this.type=e,this}load(e,t,i,r){function s(o,a){kh?o.colorSpace=a.colorSpace:o.encoding=a.encoding,o.minFilter=rn,o.magFilter=rn,o.generateMipmaps=!1,o.flipY=!1,t&&t(o,a)}return super.load(e,s,i,r)}}const Wx=new WeakMap;class b$ extends ji{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,i,r){const s=new Dr(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,o=>{const a={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(o,a).then(t).catch(r)},i,r)}decodeDracoFile(e,t,i,r){const s={attributeIDs:i||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!i};this.decodeGeometry(e,s).then(t)}decodeGeometry(e,t){for(const l in t.attributeTypes){const u=t.attributeTypes[l];u.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[l]=u.name)}const i=JSON.stringify(t);if(Wx.has(e)){const l=Wx.get(e);if(l.key===i)return l.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r;const s=this.workerNextTaskID++,o=e.byteLength,a=this._getWorker(s,o).then(l=>(r=l,new Promise((u,c)=>{r._callbacks[s]={resolve:u,reject:c},r.postMessage({type:"decode",id:s,taskConfig:t,buffer:e},[e])}))).then(l=>this._createGeometry(l.geometry));return a.catch(()=>!0).then(()=>{r&&s&&this._releaseTask(r,s)}),Wx.set(e,{key:i,promise:a}),a}_createGeometry(e){const t=new It;e.index&&t.setIndex(new $t(e.index.array,1));for(let i=0;i<e.attributes.length;i++){const r=e.attributes[i],s=r.name,o=r.array,a=r.itemSize;t.setAttribute(s,new $t(o,a))}return t}_loadLibrary(e,t){const i=new Dr(this.manager);return i.setPath(this.decoderPath),i.setResponseType(t),i.setWithCredentials(this.withCredentials),new Promise((r,s)=>{i.load(e,r,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(i=>{const r=i[0];e||(this.decoderConfig.wasmBinary=i[1]);const s=R$.toString(),o=["/* draco decoder */",r,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([o]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const r=new Worker(this.workerSourceURL);r._callbacks={},r._taskCosts={},r._taskLoad=0,r.postMessage({type:"init",decoderConfig:this.decoderConfig}),r.onmessage=function(s){const o=s.data;switch(o.type){case"decode":r._callbacks[o.id].resolve(o);break;case"error":r._callbacks[o.id].reject(o);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+o.type+'"')}},this.workerPool.push(r)}else this.workerPool.sort(function(r,s){return r._taskLoad>s._taskLoad?-1:1});const i=this.workerPool[this.workerPool.length-1];return i._taskCosts[e]=t,i._taskLoad+=t,i})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function R$(){let n,e;onmessage=function(o){const a=o.data;switch(a.type){case"init":n=a.decoderConfig,e=new Promise(function(c){n.onModuleLoaded=function(h){c({draco:h})},DracoDecoderModule(n)});break;case"decode":const l=a.buffer,u=a.taskConfig;e.then(c=>{const h=c.draco,p=new h.Decoder,m=new h.DecoderBuffer;m.Init(new Int8Array(l),l.byteLength);try{const v=t(h,p,m,u),A=v.attributes.map(_=>_.array.buffer);v.index&&A.push(v.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:v},A)}catch(v){console.error(v),self.postMessage({type:"error",id:a.id,error:v.message})}finally{h.destroy(m),h.destroy(p)}});break}};function t(o,a,l,u){const c=u.attributeIDs,h=u.attributeTypes;let p,m;const v=a.GetEncodedGeometryType(l);if(v===o.TRIANGULAR_MESH)p=new o.Mesh,m=a.DecodeBufferToMesh(l,p);else if(v===o.POINT_CLOUD)p=new o.PointCloud,m=a.DecodeBufferToPointCloud(l,p);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!m.ok()||p.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+m.error_msg());const A={index:null,attributes:[]};for(const _ in c){const g=self[h[_]];let S,x;if(u.useUniqueIDs)x=c[_],S=a.GetAttributeByUniqueId(p,x);else{if(x=a.GetAttributeId(p,o[c[_]]),x===-1)continue;S=a.GetAttribute(p,x)}A.attributes.push(r(o,a,p,_,g,S))}return v===o.TRIANGULAR_MESH&&(A.index=i(o,a,p)),o.destroy(p),A}function i(o,a,l){const c=l.num_faces()*3,h=c*4,p=o._malloc(h);a.GetTrianglesUInt32Array(l,h,p);const m=new Uint32Array(o.HEAPF32.buffer,p,c).slice();return o._free(p),{array:m,itemSize:1}}function r(o,a,l,u,c,h){const p=h.num_components(),v=l.num_points()*p,A=v*c.BYTES_PER_ELEMENT,_=s(o,c),g=o._malloc(A);a.GetAttributeDataArrayForAllPoints(l,h,_,A,g);const S=new c(o.HEAPF32.buffer,g,v).slice();return o._free(g),{name:u,array:S,itemSize:p}}function s(o,a){switch(a){case Float32Array:return o.DT_FLOAT32;case Int8Array:return o.DT_INT8;case Int16Array:return o.DT_INT16;case Int32Array:return o.DT_INT32;case Uint8Array:return o.DT_UINT8;case Uint16Array:return o.DT_UINT16;case Uint32Array:return o.DT_UINT32}}}let K1;const jx=()=>{if(K1)return K1;const n="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",e="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),i=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let r=n;WebAssembly.validate(t)&&(r=e);let s;const o=WebAssembly.instantiate(a(r),{}).then(h=>{s=h.instance,s.exports.__wasm_call_ctors()});function a(h){const p=new Uint8Array(h.length);for(let v=0;v<h.length;++v){const A=h.charCodeAt(v);p[v]=A>96?A-71:A>64?A-65:A>47?A+4:A>46?63:62}let m=0;for(let v=0;v<h.length;++v)p[m++]=p[v]<60?i[p[v]]:(p[v]-60)*64+p[++v];return p.buffer.slice(0,m)}function l(h,p,m,v,A,_){const g=s.exports.sbrk,S=m+3&-4,x=g(S*v),E=g(A.length),b=new Uint8Array(s.exports.memory.buffer);b.set(A,E);const T=h(x,m,v,E,A.length);if(T===0&&_&&_(x,S,v),p.set(b.subarray(x,x+m*v)),g(x-g(0)),T!==0)throw new Error(`Malformed buffer data: ${T}`)}const u={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},c={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return K1={ready:o,supported:!0,decodeVertexBuffer(h,p,m,v,A){l(s.exports.meshopt_decodeVertexBuffer,h,p,m,v,s.exports[u[A]])},decodeIndexBuffer(h,p,m,v){l(s.exports.meshopt_decodeIndexBuffer,h,p,m,v)},decodeIndexSequence(h,p,m,v){l(s.exports.meshopt_decodeIndexSequence,h,p,m,v)},decodeGltfBuffer(h,p,m,v,A,_){l(s.exports[c[A]],h,p,m,v,s.exports[u[_]])}},K1};let Y1=null,II="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function LI(n,e,t){return i=>{t&&t(i),n&&(Y1||(Y1=new b$),Y1.setDecoderPath(typeof n=="string"?n:II),i.setDRACOLoader(Y1)),e&&i.setMeshoptDecoder(typeof jx=="function"?jx():jx)}}function Dp(n,e=!0,t=!0,i){return Xf(pE,n,LI(e,t,i))}Dp.preload=(n,e=!0,t=!0,i)=>Xf.preload(pE,n,LI(e,t,i));Dp.clear=n=>Xf.clear(pE,n);Dp.setDecoderPath=n=>{II=n};function P$(n,e,t){const i=Si(p=>p.size),r=Si(p=>p.viewport),s=typeof n=="number"?n:i.width*r.dpr,o=typeof e=="number"?e:i.height*r.dpr,a=(typeof n=="number"?t:n)||{},{samples:l=0,depth:u,...c}=a,h=G.useMemo(()=>{const p=new hs(s,o,{minFilter:rn,magFilter:rn,type:Hi,...c});return u&&(p.depthTexture=new gv(s,o,ei)),p.samples=l,p},[]);return G.useLayoutEffect(()=>{h.setSize(s,o),l&&(h.samples=l)},[l,h,s,o]),G.useEffect(()=>()=>h.dispose(),[]),h}const B$=n=>typeof n=="function",I$=G.forwardRef(({envMap:n,resolution:e=256,frames:t=1/0,makeDefault:i,children:r,...s},o)=>{const a=Si(({set:_})=>_),l=Si(({camera:_})=>_),u=Si(({size:_})=>_),c=G.useRef(null);G.useImperativeHandle(o,()=>c.current,[]);const h=G.useRef(null),p=P$(e);G.useLayoutEffect(()=>{s.manual||(c.current.aspect=u.width/u.height)},[u,s]),G.useLayoutEffect(()=>{c.current.updateProjectionMatrix()});let m=0,v=null;const A=B$(r);return Ov(_=>{A&&(t===1/0||m<t)&&(h.current.visible=!1,_.gl.setRenderTarget(p),v=_.scene.background,n&&(_.scene.background=n),_.gl.render(_.scene,c.current),_.scene.background=v,_.gl.setRenderTarget(null),h.current.visible=!0,m++)}),G.useLayoutEffect(()=>{if(i){const _=l;return a(()=>({camera:c.current})),()=>a(()=>({camera:_}))}},[c,i,a]),G.createElement(G.Fragment,null,G.createElement("perspectiveCamera",Ru({ref:c},s),!A&&r),G.createElement("group",{ref:h},A&&r(p.texture)))}),L$=G.forwardRef(({makeDefault:n,camera:e,regress:t,domElement:i,enableDamping:r=!0,keyEvents:s=!1,onChange:o,onStart:a,onEnd:l,...u},c)=>{const h=Si(T=>T.invalidate),p=Si(T=>T.camera),m=Si(T=>T.gl),v=Si(T=>T.events),A=Si(T=>T.setEvents),_=Si(T=>T.set),g=Si(T=>T.get),S=Si(T=>T.performance),x=e||p,E=i||v.connected||m.domElement,b=G.useMemo(()=>new JQ(x),[x]);return Ov(()=>{b.enabled&&b.update()},-1),G.useEffect(()=>(s&&b.connect(s===!0?E:s),b.connect(E),()=>void b.dispose()),[s,E,t,b,h]),G.useEffect(()=>{const T=z=>{h(),t&&S.regress(),o&&o(z)},P=z=>{a&&a(z)},I=z=>{l&&l(z)};return b.addEventListener("change",T),b.addEventListener("start",P),b.addEventListener("end",I),()=>{b.removeEventListener("start",P),b.removeEventListener("end",I),b.removeEventListener("change",T)}},[o,a,l,b,h,A]),G.useEffect(()=>{if(n){const T=g().controls;return _({controls:b}),()=>_({controls:T})}},[n,b]),G.createElement("primitive",Ru({ref:c,object:b,enableDamping:r},u))}),D$=3e3,F$=3001,N$=G.forwardRef(({children:n,enabled:e=!0,speed:t=1,rotationIntensity:i=1,floatIntensity:r=1,floatingRange:s=[-.1,.1],...o},a)=>{const l=G.useRef(null);G.useImperativeHandle(a,()=>l.current,[]);const u=G.useRef(Math.random()*1e4);return Ov(c=>{var h,p;if(!e||t===0)return;const m=u.current+c.clock.getElapsedTime();l.current.rotation.x=Math.cos(m/4*t)/8*i,l.current.rotation.y=Math.sin(m/4*t)/8*i,l.current.rotation.z=Math.sin(m/4*t)/20*i;let v=Math.sin(m/4*t)/10;v=bC.mapLinear(v,-.1,.1,(h=s==null?void 0:s[0])!==null&&h!==void 0?h:-.1,(p=s==null?void 0:s[1])!==null&&p!==void 0?p:.1),l.current.position.y=v*r,l.current.updateMatrix()}),G.createElement("group",o,G.createElement("group",{ref:l,matrixAutoUpdate:!1},n))}),Xx={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},O$="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",t9=n=>Array.isArray(n);function DI({files:n=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"],path:e="",preset:t=void 0,encoding:i=void 0,extensions:r}={}){var s;let o=null,a=!1,l;if(t){if(!(t in Xx))throw new Error("Preset must be one of: "+Object.keys(Xx).join(", "));n=Xx[t],e=O$}if(a=t9(n),l=t9(n)?"cube":n.startsWith("data:application/exr")?"exr":n.startsWith("data:application/hdr")?"hdr":(s=n.split(".").pop())==null||(s=s.split("?"))==null||(s=s.shift())==null?void 0:s.toLowerCase(),o=a?zB:l==="hdr"?w$:l==="exr"?T$:null,!o)throw new Error("useEnvironment: Unrecognized file extension: "+n);const u=Xf(o,a?[n]:n,h=>{h.setPath==null||h.setPath(e),r&&r(h)}),c=a?u[0]:u;return c.mapping=a?uo:Af,"colorSpace"in c?c.colorSpace=i??a?"srgb":"srgb-linear":c.encoding=i??a?F$:D$,c}const U$=n=>n.current&&n.current.isScene,k$=n=>U$(n)?n.current:n;function mE(n,e,t,i,r=0){const s=k$(e||t),o=s.background,a=s.environment,l=s.backgroundBlurriness||0;return n!=="only"&&(s.environment=i),n&&(s.background=i),n&&s.backgroundBlurriness!==void 0&&(s.backgroundBlurriness=r),()=>{n!=="only"&&(s.environment=a),n&&(s.background=o),n&&s.backgroundBlurriness!==void 0&&(s.backgroundBlurriness=l)}}function gE({scene:n,background:e=!1,blur:t,map:i}){const r=Si(s=>s.scene);return G.useLayoutEffect(()=>{if(i)return mE(e,n,r,i,t)},[r,n,i,e,t]),null}function FI({background:n=!1,scene:e,blur:t,...i}){const r=DI(i),s=Si(o=>o.scene);return G.useLayoutEffect(()=>mE(n,e,s,r,t),[r,n,e,s,t]),null}function z$({children:n,near:e=1,far:t=1e3,resolution:i=256,frames:r=1,map:s,background:o=!1,blur:a,scene:l,files:u,path:c,preset:h=void 0,extensions:p}){const m=Si(x=>x.gl),v=Si(x=>x.scene),A=G.useRef(null),[_]=G.useState(()=>new $d),g=G.useMemo(()=>{const x=new LC(i);return x.texture.type=Hi,x},[i]);G.useLayoutEffect(()=>(r===1&&A.current.update(m,_),mE(o,l,v,g.texture,a)),[n,_,g.texture,l,v,o,r,m]);let S=1;return Ov(()=>{(r===1/0||S<r)&&(A.current.update(m,_),S++)}),G.createElement(G.Fragment,null,lQ(G.createElement(G.Fragment,null,n,G.createElement("cubeCamera",{ref:A,args:[e,t,g]}),u||h?G.createElement(FI,{background:!0,files:u,preset:h,path:c,extensions:p}):s?G.createElement(gE,{background:!0,map:s,extensions:p}):null),_))}function H$(n){var e,t,i,r;const s=DI(n),o=n.map||s;G.useMemo(()=>aI({GroundProjectedEnvImpl:VQ}),[]);const a=G.useMemo(()=>[o],[o]),l=(e=n.ground)==null?void 0:e.height,u=(t=n.ground)==null?void 0:t.radius,c=(i=(r=n.ground)==null?void 0:r.scale)!==null&&i!==void 0?i:1e3;return G.createElement(G.Fragment,null,G.createElement(gE,Ru({},n,{map:o})),G.createElement("groundProjectedEnvImpl",{args:a,scale:c,height:l,radius:u}))}function G$(n){return n.ground?G.createElement(H$,n):n.map?G.createElement(gE,n):n.children?G.createElement(z$,n):G.createElement(FI,n)}function V$(n,{whileHover:e,onHoverStart:t,onHoverEnd:i,onPointerOver:r,onPointerOut:s},o){return n||!o||!(e||t||i)?{}:{onPointerOver:l=>{var u;(u=o.animationState)===null||u===void 0||u.setActive("whileHover",!0),r&&r(l)},onPointerOut:l=>{var u;(u=o.animationState)===null||u===void 0||u.setActive("whileHover",!1),s&&s(l)}}}function W$(n,{whileTap:e,onTapStart:t,onTap:i,onTapCancel:r,onPointerDown:s},o){const a=i||t||r||e,l=G.useRef(!1),u=G.useRef(null);if(n||!o||!a)return{};function c(){var v;(v=u.current)===null||v===void 0||v.call(u),u.current=null}function h(){var v;return c(),l.current=!1,(v=o.animationState)===null||v===void 0||v.setActive("whileTap",!1),!qS()}function p(v,A){h()&&(i==null||i(v,A))}function m(v,A){h()&&(r==null||r(v,A))}return{onPointerDown:WR((v,A)=>{var _;if(c(),l.current)return;l.current=!0;const g={passive:!(t||i||r||s)};u.current=no(Ps(window,"pointerup",p,g),Ps(window,"pointercancel",m,g)),(_=o.animationState)===null||_===void 0||_.setActive("whileTap",!0),s==null||s(v),t==null||t(v,A)})}}const j$=(n,e,t,i,r,s)=>{const o=X$(e);return G.createElement(n,Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({ref:t},OR(e,!1,!1)),o),{onUpdate:e.onInstanceUpdate}),V$(r,e,s)),W$(r,e,s)))};function X$(n){return G.useMemo(()=>{const e={};for(const t in n){const i=n[t];Gn(i)?e[t]=i.get():Array.isArray(i)&&i.includes(Gn)&&(e[t]=i.map(ad))}return e},[])}const NI=(n,e)=>t=>(i,r)=>{i[n]===void 0&&(i[n]=new H(e)),i[n].setComponent(t,r)},J$=(n,e)=>t=>(i,r)=>{i[n]===void 0&&(i[n]=new yr(e));const s=i[n];s[t]=r},n9=n=>(e,t)=>{e[n]===void 0&&(e[n]=new qe(t)),e[n].set(t)},Jx=NI("scale",1),Kx=NI("position",0),Yx=J$("rotation",0),i9={x:Kx(0),y:Kx(1),z:Kx(2),scale:(n,e)=>{n.scale===void 0&&(n.scale=new H(1)),n.scale.set(e,e,e)},scaleX:Jx(0),scaleY:Jx(1),scaleZ:Jx(2),rotateX:Yx("x"),rotateY:Yx("y"),rotateZ:Yx("z"),color:n9("color"),specular:n9("specular")};function K$(n,e,t){i9[e]?i9[e](n,t[e]):(e==="opacity"&&!n.transparent&&(n.transparent=!0),n[e]=t[e])}const vE=(n,e)=>t=>i=>{const r=i[n];return r?r[t]:e},Zx=vE("position",0),Z1=vE("scale",1),qx=vE("rotation",0),r9={x:Zx("x"),y:Zx("y"),z:Zx("z"),scale:Z1("x"),scaleX:Z1("x"),scaleY:Z1("y"),scaleZ:Z1("z"),rotateX:qx("x"),rotateY:qx("y"),rotateZ:qx("z")};function Y$(n){if(n!==void 0)return n instanceof qe?n.getStyle():n}function Z$(n,e){return r9[e]?r9[e](n):Y$(n[e])||0}const q$=["x","y","z"],s9={"position-x":"x","position-y":"y","position-z":"z","rotation-x":"rotateX","rotation-y":"rotateY","rotation-z":"rotateZ","scale-x":"scaleX","scale-y":"scaleY","scale-z":"scaleZ"},OI=(n,e)=>{const t={};for(const i in n){const r=n[i];if(Gn(r)||Gn(e[i]))t[s9[i]||i]=r;else if(Array.isArray(r))for(let s=0;s<r.length;s++){const o=r[s];if(Gn(o)||Array.isArray(e[i])&&Gn(e[i][s])){const a=s9[i+"-"+q$[s]];t[a]=o}}}return t},Q$=()=>({});class $$ extends V7{constructor(){super(...arguments),this.type="three"}readValueFromInstance(e,t){return Z$(e,t)}getBaseTargetFromProps(){}sortInstanceNodePosition(e,t){return e.id-t.id}removeValueFromRenderState(){}measureInstanceViewportBox(){return Un()}scrapeMotionValuesFromProps(e,t){return OI(e,t)}build(e,t){for(const i in t)e[i]=t[i]}renderInstance(e,t){for(const i in t)K$(e,i,t)}}const eee=(n,e)=>new $$(e,{}),tee=ZS({scrapeMotionValuesFromProps:OI,createRenderState:Q$}),nee=Object.assign({},M7);function o9(n){return PR({Component:n,preloadedFeatures:nee,useRender:j$,useVisualState:tee,createVisualElement:eee})}const Qx=new Map,sn=new Proxy(o9,{get:(n,e)=>(!Qx.has(e)&&Qx.set(e,o9(e)),Qx.get(e))});function a9({rotatePropY:n,positionZ:e,positionX:t}){const{nodes:i,materials:r}=Dp("Apple-shop/iphone-model.glb");return ce.jsx(N$,{children:ce.jsx("group",{dispose:null,scale:.4,children:ce.jsxs(sn.mesh,{"rotation-y":n,"rotation-x":0,"rotation-z":0,position:[t,0,e],children:[ce.jsx(sn.mesh,{geometry:i.AdjkxvMXIDEHBMM.geometry,material:r.eShKpuMNVJTRrgg}),ce.jsx(sn.mesh,{geometry:i.AwsQCWysocWlYzN.geometry,material:r.xNrofRCqOXXHVZt}),ce.jsx(sn.mesh,{geometry:i.drpRvcOgsocXGbn.geometry,material:r.PpwUTnTFZJXxCoE}),ce.jsx(sn.mesh,{geometry:i.KXVnYLSfTdVnSOf.geometry,material:r.jlzuBkUzuJqgiAK}),ce.jsx(sn.mesh,{geometry:i.nnqwwoLVdMJlHIF.geometry,material:r.PaletteMaterial001}),ce.jsx(sn.mesh,{geometry:i.SRYqzKwamLGuEGm.geometry,material:r.PaletteMaterial002}),ce.jsx(sn.mesh,{geometry:i.xtMgDHhPqFLAHyB.geometry,material:r.hUlRcbieVuIiOXG}),ce.jsx(sn.mesh,{geometry:i.yxqQUnbopbiRvZr.geometry,material:r.yQQySPTfbEJufve}),ce.jsx(sn.mesh,{geometry:i.IkoiNqATMVoZFKD.geometry,material:r.hiVunnLeAHkwGEo}),ce.jsx(sn.mesh,{geometry:i.rqgRAGHOwnuBypi.geometry,material:r.HGhEhpqSBZRnjHC}),ce.jsx(sn.mesh,{geometry:i.pXBNoLiaMwsDHRF.geometry,material:r.yiDkEwDSyEhavuP}),ce.jsx(sn.mesh,{geometry:i.IykfmVvLplTsTEW.geometry,material:r.PaletteMaterial003}),ce.jsx(sn.mesh,{geometry:i.DCLCbjzqejuvsqH.geometry,material:r.vhaEJjZoqGtyLdo}),ce.jsx(sn.mesh,{geometry:i.WJwwVjsahIXbJpU.geometry,material:r.yhcAXNGcJWCqtIS}),ce.jsx(sn.mesh,{geometry:i.wLfSXtbwRlBrwof.geometry,material:r.oZRkkORNzkufnGD}),ce.jsx(sn.mesh,{geometry:i.YfrJNXgMvGOAfzz.geometry,material:r.bCgzXjHOanGdTFV}),ce.jsx(sn.mesh,{geometry:i.buRWvyqhBBgcJFo.geometry,material:r.PaletteMaterial004}),ce.jsx(sn.mesh,{geometry:i.CfghdUoyzvwzIum.geometry,material:r.jpGaQNgTtEGkTfo}),ce.jsx(sn.mesh,{geometry:i.MHfUXxLdYldKhVJ_0.geometry,material:r.dxCVrUCvYhjVxqy}),ce.jsx(sn.mesh,{geometry:i.pvdHknDTGDzVpwc.geometry,material:r.xdyiJLYTYRfJffH}),ce.jsx(sn.mesh,{geometry:i.TvgBVmqNmSrFVfW.geometry,material:r.pIhYLPqiSQOZTjn}),ce.jsx(sn.mesh,{geometry:i.wqbHSzWaUxBCwxY_0.geometry,material:r.MHFGNLrDQbTNima}),ce.jsx(sn.mesh,{geometry:i.evAxFwhaQUwXuua.geometry,material:r.KSIxMqttXxxmOYl}),ce.jsx(sn.mesh,{geometry:i.MGPAkjCLsByKXcN.geometry,material:r.kUhjpatHUvkBwfM}),ce.jsx(sn.mesh,{geometry:i.USxQiqZgxHbRvqB.geometry,material:r.mcPrzcBUcdqUybC}),ce.jsx(sn.mesh,{geometry:i.vFwJFNASGvEHWhs.geometry,material:r.RJoymvEsaIItifI}),ce.jsx(sn.mesh,{geometry:i.DjdhycfQYjKMDyn.geometry,material:r.ujsvqBWRMnqdwPx}),ce.jsx(sn.mesh,{geometry:i.vELORlCJixqPHsZ.geometry,material:r.zFdeDaGNRwzccye}),ce.jsx(sn.mesh,{geometry:i.xXDHkMplTIDAXLN.geometry,material:r["Material.001"],scale:[-1,1,1]}),ce.jsx("mesh",{geometry:i.usFLmqcyrnltBUr.geometry,material:r.sxNzrmuTqVeaXdg})]})})})}Dp.preload("Apple-shop/iphone-model.glb");function iee(){const n=G.useRef(),{scrollYProgress:e}=pC({target:n,offset:["start end","end start"]}),t=Gd(e,[0,1],[-9,6]),i=Gd(e,[0,2],[-6,9]);return ce.jsx("div",{className:q5.iphone,children:ce.jsxs(TQ,{className:q5.canvas,ref:n,orthographic:!0,children:[ce.jsx(L$,{scale:1,enableZoom:!1,enableRotate:!1}),ce.jsx(I$,{makeDefault:!0,position:[1,1,-10]}),ce.jsx(G$,{preset:"city"}),ce.jsxs(G.Suspense,{fallback:null,children:[ce.jsx(a9,{positionZ:t,rotatePropY:-3,rotatePropX:0,rotatePropZ:0,positionX:-5}),ce.jsx(a9,{positionZ:i,rotatePropY:3,rotatePropX:0,rotatePropZ:0,positionX:5})]})]})})}const ree="_text_42b1z_1",see={text:ree};function oee(){const n=G.useRef(),{scrollYProgress:e}=pC({target:n,offset:["start end","end start"]}),t=Gd(e,[0,2],[-400,400]),i=Gd(e,[0,2],[400,-400]);return ce.jsxs(Ci.div,{className:see.text,children:[ce.jsx(Ci.span,{style:{x:t},children:"We are more than just a store We are more than just a store We are more than just a store"}),ce.jsx(Ci.span,{style:{x:i},children:"You're more than just a client You're more than just a client You're more than just a client"})]})}function aee(){return ce.jsx(Du,{children:ce.jsxs("section",{className:K5.home,children:[ce.jsx(SV,{}),ce.jsx(iee,{}),ce.jsx(oee,{}),ce.jsx(kV,{className:K5.face}),ce.jsx(NV,{value:"Still in doubt?"}),ce.jsx(IV,{})]})})}const lee={};function uee({}){return ce.jsx(Du,{children:ce.jsx("section",{className:lee.catalog,children:ce.jsx("h1",{children:"Catalog"})})})}const cee={},fee="_container_1h4mw_1",hee="_form_1h4mw_15",dee="_error_1h4mw_24",pee="_img_1h4mw_30",zh={container:fee,form:hee,error:dee,img:pee},mee="_container_1vzy5_1",gee="_title_1vzy5_11",vee="_input_1vzy5_19",yee="_error_1vzy5_30",q1={container:mee,title:gee,input:vee,error:yee},$x=({register:n,registerName:e,titleName:t,errorText:i})=>ce.jsxs("div",{className:q1.container,children:[ce.jsx("label",{className:q1.title,children:t}),ce.jsx("input",{className:q1.input,type:"text",...n(e)}),ce.jsx("span",{className:q1.error,children:i})]}),_ee="_container_1kfkb_1",xee="_button_1kfkb_5",Aee={container:_ee,button:xee};function See({children:n}){return ce.jsx("button",{className:Aee.button,type:"submit",children:n})}const Cee="_loaderWrapper_1nyvi_1",Eee="_loader_1nyvi_1",Mee="_spin_1nyvi_1",wee="_rotate_1nyvi_1",l9={loaderWrapper:Cee,loader:Eee,spin:Mee,rotate:wee};function Tee(){return ce.jsx("div",{className:l9.loaderWrapper,children:ce.jsx("span",{className:l9.loader})})}var Fp=n=>n.type==="checkbox",$c=n=>n instanceof Date,Qi=n=>n==null;const UI=n=>typeof n=="object";var li=n=>!Qi(n)&&!Array.isArray(n)&&UI(n)&&!$c(n),bee=n=>li(n)&&n.target?Fp(n.target)?n.target.checked:n.target.value:n,Ree=n=>n.substring(0,n.search(/\.\d+(\.|$)/))||n,Pee=(n,e)=>n.has(Ree(e)),Bee=n=>{const e=n.constructor&&n.constructor.prototype;return li(e)&&e.hasOwnProperty("isPrototypeOf")},yE=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function qr(n){let e;const t=Array.isArray(n);if(n instanceof Date)e=new Date(n);else if(n instanceof Set)e=new Set(n);else if(!(yE&&(n instanceof Blob||n instanceof FileList))&&(t||li(n)))if(e=t?[]:{},!t&&!Bee(n))e=n;else for(const i in n)n.hasOwnProperty(i)&&(e[i]=qr(n[i]));else return n;return e}var Np=n=>Array.isArray(n)?n.filter(Boolean):[],Xn=n=>n===void 0,ct=(n,e,t)=>{if(!e||!li(n))return t;const i=Np(e.split(/[,[\].]+?/)).reduce((r,s)=>Qi(r)?r:r[s],n);return Xn(i)||i===n?Xn(n[e])?t:n[e]:i},Io=n=>typeof n=="boolean";const u9={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},ws={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},To={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"};Tn.createContext(null);var Iee=(n,e,t,i=!0)=>{const r={defaultValues:e._defaultValues};for(const s in n)Object.defineProperty(r,s,{get:()=>{const o=s;return e._proxyFormState[o]!==ws.all&&(e._proxyFormState[o]=!i||ws.all),t&&(t[o]=!0),n[o]}});return r},es=n=>li(n)&&!Object.keys(n).length,Lee=(n,e,t,i)=>{t(n);const{name:r,...s}=n;return es(s)||Object.keys(s).length>=Object.keys(e).length||Object.keys(s).find(o=>e[o]===(!i||ws.all))},e2=n=>Array.isArray(n)?n:[n];function Dee(n){const e=Tn.useRef(n);e.current=n,Tn.useEffect(()=>{const t=!n.disabled&&e.current.subject&&e.current.subject.subscribe({next:e.current.next});return()=>{t&&t.unsubscribe()}},[n.disabled])}var qs=n=>typeof n=="string",Fee=(n,e,t,i,r)=>qs(n)?(i&&e.watch.add(n),ct(t,n,r)):Array.isArray(n)?n.map(s=>(i&&e.watch.add(s),ct(t,s))):(i&&(e.watchAll=!0),t),_E=n=>/^\w*$/.test(n),kI=n=>Np(n.replace(/["|']|\]/g,"").split(/\.|\[/)),fn=(n,e,t)=>{let i=-1;const r=_E(e)?[e]:kI(e),s=r.length,o=s-1;for(;++i<s;){const a=r[i];let l=t;if(i!==o){const u=n[a];l=li(u)||Array.isArray(u)?u:isNaN(+r[i+1])?{}:[]}n[a]=l,n=n[a]}return n},zI=(n,e,t,i,r)=>e?{...t[n],types:{...t[n]&&t[n].types?t[n].types:{},[i]:r||!0}}:{},c9=n=>({isOnSubmit:!n||n===ws.onSubmit,isOnBlur:n===ws.onBlur,isOnChange:n===ws.onChange,isOnAll:n===ws.all,isOnTouch:n===ws.onTouched}),f9=(n,e,t)=>!t&&(e.watchAll||e.watch.has(n)||[...e.watch].some(i=>n.startsWith(i)&&/^\.\w+/.test(n.slice(i.length))));const vd=(n,e,t,i)=>{for(const r of t||Object.keys(n)){const s=ct(n,r);if(s){const{_f:o,...a}=s;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],r)&&!i)break;if(o.ref&&e(o.ref,o.name)&&!i)break;vd(a,e)}else li(a)&&vd(a,e)}}};var Nee=(n,e,t)=>{const i=Np(ct(n,t));return fn(i,"root",e[t]),fn(n,t,i),n},xE=n=>n.type==="file",Na=n=>typeof n=="function",Cg=n=>{if(!yE)return!1;const e=n?n.ownerDocument:0;return n instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},b0=n=>qs(n),AE=n=>n.type==="radio",Eg=n=>n instanceof RegExp;const h9={value:!1,isValid:!1},d9={value:!0,isValid:!0};var HI=n=>{if(Array.isArray(n)){if(n.length>1){const e=n.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:e,isValid:!!e.length}}return n[0].checked&&!n[0].disabled?n[0].attributes&&!Xn(n[0].attributes.value)?Xn(n[0].value)||n[0].value===""?d9:{value:n[0].value,isValid:!0}:d9:h9}return h9};const p9={isValid:!1,value:null};var GI=n=>Array.isArray(n)?n.reduce((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e,p9):p9;function m9(n,e,t="validate"){if(b0(n)||Array.isArray(n)&&n.every(b0)||Io(n)&&!n)return{type:t,message:b0(n)?n:"",ref:e}}var wc=n=>li(n)&&!Eg(n)?n:{value:n,message:""},g9=async(n,e,t,i,r)=>{const{ref:s,refs:o,required:a,maxLength:l,minLength:u,min:c,max:h,pattern:p,validate:m,name:v,valueAsNumber:A,mount:_,disabled:g}=n._f,S=ct(e,v);if(!_||g)return{};const x=o?o[0]:s,E=Q=>{i&&x.reportValidity&&(x.setCustomValidity(Io(Q)?"":Q||""),x.reportValidity())},b={},T=AE(s),P=Fp(s),I=T||P,z=(A||xE(s))&&Xn(s.value)&&Xn(S)||Cg(s)&&s.value===""||S===""||Array.isArray(S)&&!S.length,w=zI.bind(null,v,t,b),D=(Q,ie,j,se=To.maxLength,oe=To.minLength)=>{const pe=Q?ie:j;b[v]={type:Q?se:oe,message:pe,ref:s,...w(Q?se:oe,pe)}};if(r?!Array.isArray(S)||!S.length:a&&(!I&&(z||Qi(S))||Io(S)&&!S||P&&!HI(o).isValid||T&&!GI(o).isValid)){const{value:Q,message:ie}=b0(a)?{value:!!a,message:a}:wc(a);if(Q&&(b[v]={type:To.required,message:ie,ref:x,...w(To.required,ie)},!t))return E(ie),b}if(!z&&(!Qi(c)||!Qi(h))){let Q,ie;const j=wc(h),se=wc(c);if(!Qi(S)&&!isNaN(S)){const oe=s.valueAsNumber||S&&+S;Qi(j.value)||(Q=oe>j.value),Qi(se.value)||(ie=oe<se.value)}else{const oe=s.valueAsDate||new Date(S),pe=J=>new Date(new Date().toDateString()+" "+J),N=s.type=="time",X=s.type=="week";qs(j.value)&&S&&(Q=N?pe(S)>pe(j.value):X?S>j.value:oe>new Date(j.value)),qs(se.value)&&S&&(ie=N?pe(S)<pe(se.value):X?S<se.value:oe<new Date(se.value))}if((Q||ie)&&(D(!!Q,j.message,se.message,To.max,To.min),!t))return E(b[v].message),b}if((l||u)&&!z&&(qs(S)||r&&Array.isArray(S))){const Q=wc(l),ie=wc(u),j=!Qi(Q.value)&&S.length>+Q.value,se=!Qi(ie.value)&&S.length<+ie.value;if((j||se)&&(D(j,Q.message,ie.message),!t))return E(b[v].message),b}if(p&&!z&&qs(S)){const{value:Q,message:ie}=wc(p);if(Eg(Q)&&!S.match(Q)&&(b[v]={type:To.pattern,message:ie,ref:s,...w(To.pattern,ie)},!t))return E(ie),b}if(m){if(Na(m)){const Q=await m(S,e),ie=m9(Q,x);if(ie&&(b[v]={...ie,...w(To.validate,ie.message)},!t))return E(ie.message),b}else if(li(m)){let Q={};for(const ie in m){if(!es(Q)&&!t)break;const j=m9(await m[ie](S,e),x,ie);j&&(Q={...j,...w(ie,j.message)},E(j.message),t&&(b[v]=Q))}if(!es(Q)&&(b[v]={ref:x,...Q},!t))return b}}return E(!0),b};function Oee(n,e){const t=e.slice(0,-1).length;let i=0;for(;i<t;)n=Xn(n)?i++:n[e[i++]];return n}function Uee(n){for(const e in n)if(n.hasOwnProperty(e)&&!Xn(n[e]))return!1;return!0}function di(n,e){const t=Array.isArray(e)?e:_E(e)?[e]:kI(e),i=t.length===1?n:Oee(n,t),r=t.length-1,s=t[r];return i&&delete i[s],r!==0&&(li(i)&&es(i)||Array.isArray(i)&&Uee(i))&&di(n,t.slice(0,-1)),n}var t2=()=>{let n=[];return{get observers(){return n},next:r=>{for(const s of n)s.next&&s.next(r)},subscribe:r=>(n.push(r),{unsubscribe:()=>{n=n.filter(s=>s!==r)}}),unsubscribe:()=>{n=[]}}},Mg=n=>Qi(n)||!UI(n);function fu(n,e){if(Mg(n)||Mg(e))return n===e;if($c(n)&&$c(e))return n.getTime()===e.getTime();const t=Object.keys(n),i=Object.keys(e);if(t.length!==i.length)return!1;for(const r of t){const s=n[r];if(!i.includes(r))return!1;if(r!=="ref"){const o=e[r];if($c(s)&&$c(o)||li(s)&&li(o)||Array.isArray(s)&&Array.isArray(o)?!fu(s,o):s!==o)return!1}}return!0}var VI=n=>n.type==="select-multiple",kee=n=>AE(n)||Fp(n),n2=n=>Cg(n)&&n.isConnected,WI=n=>{for(const e in n)if(Na(n[e]))return!0;return!1};function wg(n,e={}){const t=Array.isArray(n);if(li(n)||t)for(const i in n)Array.isArray(n[i])||li(n[i])&&!WI(n[i])?(e[i]=Array.isArray(n[i])?[]:{},wg(n[i],e[i])):Qi(n[i])||(e[i]=!0);return e}function jI(n,e,t){const i=Array.isArray(n);if(li(n)||i)for(const r in n)Array.isArray(n[r])||li(n[r])&&!WI(n[r])?Xn(e)||Mg(t[r])?t[r]=Array.isArray(n[r])?wg(n[r],[]):{...wg(n[r])}:jI(n[r],Qi(e)?{}:e[r],t[r]):t[r]=!fu(n[r],e[r]);return t}var Q1=(n,e)=>jI(n,e,wg(e)),XI=(n,{valueAsNumber:e,valueAsDate:t,setValueAs:i})=>Xn(n)?n:e?n===""?NaN:n&&+n:t&&qs(n)?new Date(n):i?i(n):n;function i2(n){const e=n.ref;if(!(n.refs?n.refs.every(t=>t.disabled):e.disabled))return xE(e)?e.files:AE(e)?GI(n.refs).value:VI(e)?[...e.selectedOptions].map(({value:t})=>t):Fp(e)?HI(n.refs).value:XI(Xn(e.value)?n.ref.value:e.value,n)}var zee=(n,e,t,i)=>{const r={};for(const s of n){const o=ct(e,s);o&&fn(r,s,o._f)}return{criteriaMode:t,names:[...n],fields:r,shouldUseNativeValidation:i}},Hh=n=>Xn(n)?n:Eg(n)?n.source:li(n)?Eg(n.value)?n.value.source:n.value:n,Hee=n=>n.mount&&(n.required||n.min||n.max||n.maxLength||n.minLength||n.pattern||n.validate);function v9(n,e,t){const i=ct(n,t);if(i||_E(t))return{error:i,name:t};const r=t.split(".");for(;r.length;){const s=r.join("."),o=ct(e,s),a=ct(n,s);if(o&&!Array.isArray(o)&&t!==s)return{name:t};if(a&&a.type)return{name:s,error:a};r.pop()}return{name:t}}var Gee=(n,e,t,i,r)=>r.isOnAll?!1:!t&&r.isOnTouch?!(e||n):(t?i.isOnBlur:r.isOnBlur)?!n:(t?i.isOnChange:r.isOnChange)?n:!0,Vee=(n,e)=>!Np(ct(n,e)).length&&di(n,e);const Wee={mode:ws.onSubmit,reValidateMode:ws.onChange,shouldFocusError:!0};function jee(n={}){let e={...Wee,...n},t={submitCount:0,isDirty:!1,isLoading:Na(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},i={},r=li(e.defaultValues)||li(e.values)?qr(e.defaultValues||e.values)||{}:{},s=e.shouldUnregister?{}:qr(r),o={action:!1,mount:!1,watch:!1},a={mount:new Set,unMount:new Set,array:new Set,watch:new Set},l,u=0;const c={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},h={values:t2(),array:t2(),state:t2()},p=c9(e.mode),m=c9(e.reValidateMode),v=e.criteriaMode===ws.all,A=V=>ne=>{clearTimeout(u),u=setTimeout(V,ne)},_=async V=>{if(c.isValid||V){const ne=e.resolver?es((await I()).errors):await w(i,!0);ne!==t.isValid&&h.state.next({isValid:ne})}},g=(V,ne)=>{(c.isValidating||c.validatingFields)&&((V||Array.from(a.mount)).forEach(de=>de&&fn(t.validatingFields,de,!!ne)),t.isValidating=Object.values(t.validatingFields).some(de=>de),h.state.next({validatingFields:t.validatingFields,isValidating:t.isValidating}))},S=(V,ne=[],de,O,L=!0,ee=!0)=>{if(O&&de){if(o.action=!0,ee&&Array.isArray(ct(i,V))){const ue=de(ct(i,V),O.argA,O.argB);L&&fn(i,V,ue)}if(ee&&Array.isArray(ct(t.errors,V))){const ue=de(ct(t.errors,V),O.argA,O.argB);L&&fn(t.errors,V,ue),Vee(t.errors,V)}if(c.touchedFields&&ee&&Array.isArray(ct(t.touchedFields,V))){const ue=de(ct(t.touchedFields,V),O.argA,O.argB);L&&fn(t.touchedFields,V,ue)}c.dirtyFields&&(t.dirtyFields=Q1(r,s)),h.state.next({name:V,isDirty:Q(V,ne),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else fn(s,V,ne)},x=(V,ne)=>{fn(t.errors,V,ne),h.state.next({errors:t.errors})},E=V=>{t.errors=V,h.state.next({errors:t.errors,isValid:!1})},b=(V,ne,de,O)=>{const L=ct(i,V);if(L){const ee=ct(s,V,Xn(de)?ct(r,V):de);Xn(ee)||O&&O.defaultChecked||ne?fn(s,V,ne?ee:i2(L._f)):se(V,ee),o.mount&&_()}},T=(V,ne,de,O,L)=>{let ee=!1,ue=!1;const Ce={name:V},Pe=!!(ct(i,V)&&ct(i,V)._f.disabled);if(!de||O){c.isDirty&&(ue=t.isDirty,t.isDirty=Ce.isDirty=Q(),ee=ue!==Ce.isDirty);const ft=Pe||fu(ct(r,V),ne);ue=!!(!Pe&&ct(t.dirtyFields,V)),ft||Pe?di(t.dirtyFields,V):fn(t.dirtyFields,V,!0),Ce.dirtyFields=t.dirtyFields,ee=ee||c.dirtyFields&&ue!==!ft}if(de){const ft=ct(t.touchedFields,V);ft||(fn(t.touchedFields,V,de),Ce.touchedFields=t.touchedFields,ee=ee||c.touchedFields&&ft!==de)}return ee&&L&&h.state.next(Ce),ee?Ce:{}},P=(V,ne,de,O)=>{const L=ct(t.errors,V),ee=c.isValid&&Io(ne)&&t.isValid!==ne;if(n.delayError&&de?(l=A(()=>x(V,de)),l(n.delayError)):(clearTimeout(u),l=null,de?fn(t.errors,V,de):di(t.errors,V)),(de?!fu(L,de):L)||!es(O)||ee){const ue={...O,...ee&&Io(ne)?{isValid:ne}:{},errors:t.errors,name:V};t={...t,...ue},h.state.next(ue)}},I=async V=>{g(V,!0);const ne=await e.resolver(s,e.context,zee(V||a.mount,i,e.criteriaMode,e.shouldUseNativeValidation));return g(V),ne},z=async V=>{const{errors:ne}=await I(V);if(V)for(const de of V){const O=ct(ne,de);O?fn(t.errors,de,O):di(t.errors,de)}else t.errors=ne;return ne},w=async(V,ne,de={valid:!0})=>{for(const O in V){const L=V[O];if(L){const{_f:ee,...ue}=L;if(ee){const Ce=a.array.has(ee.name);g([O],!0);const Pe=await g9(L,s,v,e.shouldUseNativeValidation&&!ne,Ce);if(g([O]),Pe[ee.name]&&(de.valid=!1,ne))break;!ne&&(ct(Pe,ee.name)?Ce?Nee(t.errors,Pe,ee.name):fn(t.errors,ee.name,Pe[ee.name]):di(t.errors,ee.name))}ue&&await w(ue,ne,de)}}return de.valid},D=()=>{for(const V of a.unMount){const ne=ct(i,V);ne&&(ne._f.refs?ne._f.refs.every(de=>!n2(de)):!n2(ne._f.ref))&&we(V)}a.unMount=new Set},Q=(V,ne)=>(V&&ne&&fn(s,V,ne),!fu(ae(),r)),ie=(V,ne,de)=>Fee(V,a,{...o.mount?s:Xn(ne)?r:qs(V)?{[V]:ne}:ne},de,ne),j=V=>Np(ct(o.mount?s:r,V,n.shouldUnregister?ct(r,V,[]):[])),se=(V,ne,de={})=>{const O=ct(i,V);let L=ne;if(O){const ee=O._f;ee&&(!ee.disabled&&fn(s,V,XI(ne,ee)),L=Cg(ee.ref)&&Qi(ne)?"":ne,VI(ee.ref)?[...ee.ref.options].forEach(ue=>ue.selected=L.includes(ue.value)):ee.refs?Fp(ee.ref)?ee.refs.length>1?ee.refs.forEach(ue=>(!ue.defaultChecked||!ue.disabled)&&(ue.checked=Array.isArray(L)?!!L.find(Ce=>Ce===ue.value):L===ue.value)):ee.refs[0]&&(ee.refs[0].checked=!!L):ee.refs.forEach(ue=>ue.checked=ue.value===L):xE(ee.ref)?ee.ref.value="":(ee.ref.value=L,ee.ref.type||h.values.next({name:V,values:{...s}})))}(de.shouldDirty||de.shouldTouch)&&T(V,L,de.shouldTouch,de.shouldDirty,!0),de.shouldValidate&&J(V)},oe=(V,ne,de)=>{for(const O in ne){const L=ne[O],ee=`${V}.${O}`,ue=ct(i,ee);(a.array.has(V)||!Mg(L)||ue&&!ue._f)&&!$c(L)?oe(ee,L,de):se(ee,L,de)}},pe=(V,ne,de={})=>{const O=ct(i,V),L=a.array.has(V),ee=qr(ne);fn(s,V,ee),L?(h.array.next({name:V,values:{...s}}),(c.isDirty||c.dirtyFields)&&de.shouldDirty&&h.state.next({name:V,dirtyFields:Q1(r,s),isDirty:Q(V,ee)})):O&&!O._f&&!Qi(ee)?oe(V,ee,de):se(V,ee,de),f9(V,a)&&h.state.next({...t}),h.values.next({name:o.mount?V:void 0,values:{...s}})},N=async V=>{const ne=V.target;let de=ne.name,O=!0;const L=ct(i,de),ee=()=>ne.type?i2(L._f):bee(V),ue=Ce=>{O=Number.isNaN(Ce)||Ce===ct(s,de,Ce)};if(L){let Ce,Pe;const ft=ee(),ht=V.type===u9.BLUR||V.type===u9.FOCUS_OUT,He=!Hee(L._f)&&!e.resolver&&!ct(t.errors,de)&&!L._f.deps||Gee(ht,ct(t.touchedFields,de),t.isSubmitted,m,p),Ke=f9(de,a,ht);fn(s,de,ft),ht?(L._f.onBlur&&L._f.onBlur(V),l&&l(0)):L._f.onChange&&L._f.onChange(V);const _t=T(de,ft,ht,!1),Ge=!es(_t)||Ke;if(!ht&&h.values.next({name:de,type:V.type,values:{...s}}),He)return c.isValid&&_(),Ge&&h.state.next({name:de,...Ke?{}:_t});if(!ht&&Ke&&h.state.next({...t}),e.resolver){const{errors:Jt}=await I([de]);if(ue(ft),O){const mt=v9(t.errors,i,de),dt=v9(Jt,i,mt.name||de);Ce=dt.error,de=dt.name,Pe=es(Jt)}}else g([de],!0),Ce=(await g9(L,s,v,e.shouldUseNativeValidation))[de],g([de]),ue(ft),O&&(Ce?Pe=!1:c.isValid&&(Pe=await w(i,!0)));O&&(L._f.deps&&J(L._f.deps),P(de,Pe,Ce,_t))}},X=(V,ne)=>{if(ct(t.errors,ne)&&V.focus)return V.focus(),1},J=async(V,ne={})=>{let de,O;const L=e2(V);if(e.resolver){const ee=await z(Xn(V)?V:L);de=es(ee),O=V?!L.some(ue=>ct(ee,ue)):de}else V?(O=(await Promise.all(L.map(async ee=>{const ue=ct(i,ee);return await w(ue&&ue._f?{[ee]:ue}:ue)}))).every(Boolean),!(!O&&!t.isValid)&&_()):O=de=await w(i);return h.state.next({...!qs(V)||c.isValid&&de!==t.isValid?{}:{name:V},...e.resolver||!V?{isValid:de}:{},errors:t.errors}),ne.shouldFocus&&!O&&vd(i,X,V?L:a.mount),O},ae=V=>{const ne={...r,...o.mount?s:{}};return Xn(V)?ne:qs(V)?ct(ne,V):V.map(de=>ct(ne,de))},me=(V,ne)=>({invalid:!!ct((ne||t).errors,V),isDirty:!!ct((ne||t).dirtyFields,V),isTouched:!!ct((ne||t).touchedFields,V),isValidating:!!ct((ne||t).validatingFields,V),error:ct((ne||t).errors,V)}),Ue=V=>{V&&e2(V).forEach(ne=>di(t.errors,ne)),h.state.next({errors:V?t.errors:{}})},he=(V,ne,de)=>{const O=(ct(i,V,{_f:{}})._f||{}).ref;fn(t.errors,V,{...ne,ref:O}),h.state.next({name:V,errors:t.errors,isValid:!1}),de&&de.shouldFocus&&O&&O.focus&&O.focus()},Te=(V,ne)=>Na(V)?h.values.subscribe({next:de=>V(ie(void 0,ne),de)}):ie(V,ne,!0),we=(V,ne={})=>{for(const de of V?e2(V):a.mount)a.mount.delete(de),a.array.delete(de),ne.keepValue||(di(i,de),di(s,de)),!ne.keepError&&di(t.errors,de),!ne.keepDirty&&di(t.dirtyFields,de),!ne.keepTouched&&di(t.touchedFields,de),!ne.keepIsValidating&&di(t.validatingFields,de),!e.shouldUnregister&&!ne.keepDefaultValue&&di(r,de);h.values.next({values:{...s}}),h.state.next({...t,...ne.keepDirty?{isDirty:Q()}:{}}),!ne.keepIsValid&&_()},je=({disabled:V,name:ne,field:de,fields:O,value:L})=>{if(Io(V)){const ee=V?void 0:Xn(L)?i2(de?de._f:ct(O,ne)._f):L;fn(s,ne,ee),T(ne,ee,!1,!1,!0)}},$e=(V,ne={})=>{let de=ct(i,V);const O=Io(ne.disabled);return fn(i,V,{...de||{},_f:{...de&&de._f?de._f:{ref:{name:V}},name:V,mount:!0,...ne}}),a.mount.add(V),de?je({field:de,disabled:ne.disabled,name:V,value:ne.value}):b(V,!0,ne.value),{...O?{disabled:ne.disabled}:{},...e.progressive?{required:!!ne.required,min:Hh(ne.min),max:Hh(ne.max),minLength:Hh(ne.minLength),maxLength:Hh(ne.maxLength),pattern:Hh(ne.pattern)}:{},name:V,onChange:N,onBlur:N,ref:L=>{if(L){$e(V,ne),de=ct(i,V);const ee=Xn(L.value)&&L.querySelectorAll&&L.querySelectorAll("input,select,textarea")[0]||L,ue=kee(ee),Ce=de._f.refs||[];if(ue?Ce.find(Pe=>Pe===ee):ee===de._f.ref)return;fn(i,V,{_f:{...de._f,...ue?{refs:[...Ce.filter(n2),ee,...Array.isArray(ct(r,V))?[{}]:[]],ref:{type:ee.type,name:V}}:{ref:ee}}}),b(V,!1,void 0,ee)}else de=ct(i,V,{}),de._f&&(de._f.mount=!1),(e.shouldUnregister||ne.shouldUnregister)&&!(Pee(a.array,V)&&o.action)&&a.unMount.add(V)}}},nt=()=>e.shouldFocusError&&vd(i,X,a.mount),Et=V=>{Io(V)&&(h.state.next({disabled:V}),vd(i,(ne,de)=>{let O=V;const L=ct(i,de);L&&Io(L._f.disabled)&&(O||(O=L._f.disabled)),ne.disabled=O},0,!1))},et=(V,ne)=>async de=>{let O;de&&(de.preventDefault&&de.preventDefault(),de.persist&&de.persist());let L=qr(s);if(h.state.next({isSubmitting:!0}),e.resolver){const{errors:ee,values:ue}=await I();t.errors=ee,L=ue}else await w(i);if(di(t.errors,"root"),es(t.errors)){h.state.next({errors:{}});try{await V(L,de)}catch(ee){O=ee}}else ne&&await ne({...t.errors},de),nt(),setTimeout(nt);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:es(t.errors)&&!O,submitCount:t.submitCount+1,errors:t.errors}),O)throw O},Z=(V,ne={})=>{ct(i,V)&&(Xn(ne.defaultValue)?pe(V,qr(ct(r,V))):(pe(V,ne.defaultValue),fn(r,V,qr(ne.defaultValue))),ne.keepTouched||di(t.touchedFields,V),ne.keepDirty||(di(t.dirtyFields,V),t.isDirty=ne.defaultValue?Q(V,qr(ct(r,V))):Q()),ne.keepError||(di(t.errors,V),c.isValid&&_()),h.state.next({...t}))},De=(V,ne={})=>{const de=V?qr(V):r,O=qr(de),L=es(V),ee=L?r:O;if(ne.keepDefaultValues||(r=de),!ne.keepValues){if(ne.keepDirtyValues)for(const ue of a.mount)ct(t.dirtyFields,ue)?fn(ee,ue,ct(s,ue)):pe(ue,ct(ee,ue));else{if(yE&&Xn(V))for(const ue of a.mount){const Ce=ct(i,ue);if(Ce&&Ce._f){const Pe=Array.isArray(Ce._f.refs)?Ce._f.refs[0]:Ce._f.ref;if(Cg(Pe)){const ft=Pe.closest("form");if(ft){ft.reset();break}}}}i={}}s=n.shouldUnregister?ne.keepDefaultValues?qr(r):{}:qr(ee),h.array.next({values:{...ee}}),h.values.next({values:{...ee}})}a={mount:ne.keepDirtyValues?a.mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!c.isValid||!!ne.keepIsValid||!!ne.keepDirtyValues,o.watch=!!n.shouldUnregister,h.state.next({submitCount:ne.keepSubmitCount?t.submitCount:0,isDirty:L?!1:ne.keepDirty?t.isDirty:!!(ne.keepDefaultValues&&!fu(V,r)),isSubmitted:ne.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:L?[]:ne.keepDirtyValues?ne.keepDefaultValues&&s?Q1(r,s):t.dirtyFields:ne.keepDefaultValues&&V?Q1(r,V):{},touchedFields:ne.keepTouched?t.touchedFields:{},errors:ne.keepErrors?t.errors:{},isSubmitSuccessful:ne.keepIsSubmitSuccessful?t.isSubmitSuccessful:!1,isSubmitting:!1})},Re=(V,ne)=>De(Na(V)?V(s):V,ne);return{control:{register:$e,unregister:we,getFieldState:me,handleSubmit:et,setError:he,_executeSchema:I,_getWatch:ie,_getDirty:Q,_updateValid:_,_removeUnmounted:D,_updateFieldArray:S,_updateDisabledField:je,_getFieldArray:j,_reset:De,_resetDefaultValues:()=>Na(e.defaultValues)&&e.defaultValues().then(V=>{Re(V,e.resetOptions),h.state.next({isLoading:!1})}),_updateFormState:V=>{t={...t,...V}},_disableForm:Et,_subjects:h,_proxyFormState:c,_setErrors:E,get _fields(){return i},get _formValues(){return s},get _state(){return o},set _state(V){o=V},get _defaultValues(){return r},get _names(){return a},set _names(V){a=V},get _formState(){return t},set _formState(V){t=V},get _options(){return e},set _options(V){e={...e,...V}}},trigger:J,register:$e,handleSubmit:et,watch:Te,setValue:pe,getValues:ae,reset:Re,resetField:Z,clearErrors:Ue,unregister:we,setError:he,setFocus:(V,ne={})=>{const de=ct(i,V),O=de&&de._f;if(O){const L=O.refs?O.refs[0]:O.ref;L.focus&&(L.focus(),ne.shouldSelect&&L.select())}},getFieldState:me}}function Xee(n={}){const e=Tn.useRef(),t=Tn.useRef(),[i,r]=Tn.useState({isDirty:!1,isValidating:!1,isLoading:Na(n.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:n.errors||{},disabled:n.disabled||!1,defaultValues:Na(n.defaultValues)?void 0:n.defaultValues});e.current||(e.current={...jee(n),formState:i});const s=e.current.control;return s._options=n,Dee({subject:s._subjects.state,next:o=>{Lee(o,s._proxyFormState,s._updateFormState,!0)&&r({...s._formState})}}),Tn.useEffect(()=>s._disableForm(n.disabled),[s,n.disabled]),Tn.useEffect(()=>{if(s._proxyFormState.isDirty){const o=s._getDirty();o!==i.isDirty&&s._subjects.state.next({isDirty:o})}},[s,i.isDirty]),Tn.useEffect(()=>{n.values&&!fu(n.values,t.current)?(s._reset(n.values,s._options.resetOptions),t.current=n.values,r(o=>({...o}))):s._resetDefaultValues()},[n.values,s]),Tn.useEffect(()=>{n.errors&&s._setErrors(n.errors)},[n.errors,s]),Tn.useEffect(()=>{s._state.mount||(s._updateValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next({...s._formState})),s._removeUnmounted()}),Tn.useEffect(()=>{n.shouldUnregister&&s._subjects.values.next({values:s._getWatch()})},[n.shouldUnregister,s]),e.current.formState=Iee(i,s),e.current}function zu(n){this._maxSize=n,this.clear()}zu.prototype.clear=function(){this._size=0,this._values=Object.create(null)};zu.prototype.get=function(n){return this._values[n]};zu.prototype.set=function(n,e){return this._size>=this._maxSize&&this.clear(),n in this._values||this._size++,this._values[n]=e};var Jee=/[^.^\]^[]+|(?=\[\]|\.\.)/g,JI=/^\d+$/,Kee=/^\d/,Yee=/[~`!#$%\^&*+=\-\[\]\\';,/{}|\\":<>\?]/g,Zee=/^\s*(['"]?)(.*?)(\1)\s*$/,SE=512,y9=new zu(SE),_9=new zu(SE),x9=new zu(SE),xu={Cache:zu,split:SA,normalizePath:r2,setter:function(n){var e=r2(n);return _9.get(n)||_9.set(n,function(i,r){for(var s=0,o=e.length,a=i;s<o-1;){var l=e[s];if(l==="__proto__"||l==="constructor"||l==="prototype")return i;a=a[e[s++]]}a[e[s]]=r})},getter:function(n,e){var t=r2(n);return x9.get(n)||x9.set(n,function(r){for(var s=0,o=t.length;s<o;)if(r!=null||!e)r=r[t[s++]];else return;return r})},join:function(n){return n.reduce(function(e,t){return e+(CE(t)||JI.test(t)?"["+t+"]":(e?".":"")+t)},"")},forEach:function(n,e,t){qee(Array.isArray(n)?n:SA(n),e,t)}};function r2(n){return y9.get(n)||y9.set(n,SA(n).map(function(e){return e.replace(Zee,"$2")}))}function SA(n){return n.match(Jee)||[""]}function qee(n,e,t){var i=n.length,r,s,o,a;for(s=0;s<i;s++)r=n[s],r&&(ete(r)&&(r='"'+r+'"'),a=CE(r),o=!a&&/^\d+$/.test(r),e.call(t,r,a,o,s,n))}function CE(n){return typeof n=="string"&&n&&["'",'"'].indexOf(n.charAt(0))!==-1}function Qee(n){return n.match(Kee)&&!n.match(JI)}function $ee(n){return Yee.test(n)}function ete(n){return!CE(n)&&(Qee(n)||$ee(n))}const tte=/[A-Z\xc0-\xd6\xd8-\xde]?[a-z\xdf-\xf6\xf8-\xff]+(?:['’](?:d|ll|m|re|s|t|ve))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde]|$)|(?:[A-Z\xc0-\xd6\xd8-\xde]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['’](?:D|LL|M|RE|S|T|VE))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde](?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])|$)|[A-Z\xc0-\xd6\xd8-\xde]?(?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['’](?:d|ll|m|re|s|t|ve))?|[A-Z\xc0-\xd6\xd8-\xde]+(?:['’](?:D|LL|M|RE|S|T|VE))?|\d*(?:1ST|2ND|3RD|(?![123])\dTH)(?=\b|[a-z_])|\d*(?:1st|2nd|3rd|(?![123])\dth)(?=\b|[A-Z_])|\d+|(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?)*/g,Uv=n=>n.match(tte)||[],kv=n=>n[0].toUpperCase()+n.slice(1),EE=(n,e)=>Uv(n).join(e).toLowerCase(),KI=n=>Uv(n).reduce((e,t)=>`${e}${e?t[0].toUpperCase()+t.slice(1).toLowerCase():t.toLowerCase()}`,""),nte=n=>kv(KI(n)),ite=n=>EE(n,"_"),rte=n=>EE(n,"-"),ste=n=>kv(EE(n," ")),ote=n=>Uv(n).map(kv).join(" ");var s2={words:Uv,upperFirst:kv,camelCase:KI,pascalCase:nte,snakeCase:ite,kebabCase:rte,sentenceCase:ste,titleCase:ote},ME={exports:{}};ME.exports=function(n){return YI(ate(n),n)};ME.exports.array=YI;function YI(n,e){var t=n.length,i=new Array(t),r={},s=t,o=lte(e),a=ute(n);for(e.forEach(function(u){if(!a.has(u[0])||!a.has(u[1]))throw new Error("Unknown node. There is an unknown node in the supplied edges.")});s--;)r[s]||l(n[s],s,new Set);return i;function l(u,c,h){if(h.has(u)){var p;try{p=", node was:"+JSON.stringify(u)}catch{p=""}throw new Error("Cyclic dependency"+p)}if(!a.has(u))throw new Error("Found unknown node. Make sure to provided all involved nodes. Unknown node: "+JSON.stringify(u));if(!r[c]){r[c]=!0;var m=o.get(u)||new Set;if(m=Array.from(m),c=m.length){h.add(u);do{var v=m[--c];l(v,a.get(v),h)}while(c);h.delete(u)}i[--t]=u}}}function ate(n){for(var e=new Set,t=0,i=n.length;t<i;t++){var r=n[t];e.add(r[0]),e.add(r[1])}return Array.from(e)}function lte(n){for(var e=new Map,t=0,i=n.length;t<i;t++){var r=n[t];e.has(r[0])||e.set(r[0],new Set),e.has(r[1])||e.set(r[1],new Set),e.get(r[0]).add(r[1])}return e}function ute(n){for(var e=new Map,t=0,i=n.length;t<i;t++)e.set(n[t],t);return e}var cte=ME.exports;const fte=Og(cte),hte=Object.prototype.toString,dte=Error.prototype.toString,pte=RegExp.prototype.toString,mte=typeof Symbol<"u"?Symbol.prototype.toString:()=>"",gte=/^Symbol\((.*)\)(.*)$/;function vte(n){return n!=+n?"NaN":n===0&&1/n<0?"-0":""+n}function A9(n,e=!1){if(n==null||n===!0||n===!1)return""+n;const t=typeof n;if(t==="number")return vte(n);if(t==="string")return e?`"${n}"`:n;if(t==="function")return"[Function "+(n.name||"anonymous")+"]";if(t==="symbol")return mte.call(n).replace(gte,"Symbol($1)");const i=hte.call(n).slice(8,-1);return i==="Date"?isNaN(n.getTime())?""+n:n.toISOString(n):i==="Error"||n instanceof Error?"["+dte.call(n)+"]":i==="RegExp"?pte.call(n):null}function qa(n,e){let t=A9(n,e);return t!==null?t:JSON.stringify(n,function(i,r){let s=A9(this[i],e);return s!==null?s:r},2)}function ZI(n){return n==null?[]:[].concat(n)}let qI,QI,$I,yte=/\$\{\s*(\w+)\s*\}/g;qI=Symbol.toStringTag;class S9{constructor(e,t,i,r){this.name=void 0,this.message=void 0,this.value=void 0,this.path=void 0,this.type=void 0,this.params=void 0,this.errors=void 0,this.inner=void 0,this[qI]="Error",this.name="ValidationError",this.value=t,this.path=i,this.type=r,this.errors=[],this.inner=[],ZI(e).forEach(s=>{if(hr.isError(s)){this.errors.push(...s.errors);const o=s.inner.length?s.inner:[s];this.inner.push(...o)}else this.errors.push(s)}),this.message=this.errors.length>1?`${this.errors.length} errors occurred`:this.errors[0]}}QI=Symbol.hasInstance;$I=Symbol.toStringTag;class hr extends Error{static formatError(e,t){const i=t.label||t.path||"this";return i!==t.path&&(t=Object.assign({},t,{path:i})),typeof e=="string"?e.replace(yte,(r,s)=>qa(t[s])):typeof e=="function"?e(t):e}static isError(e){return e&&e.name==="ValidationError"}constructor(e,t,i,r,s){const o=new S9(e,t,i,r);if(s)return o;super(),this.value=void 0,this.path=void 0,this.type=void 0,this.params=void 0,this.errors=[],this.inner=[],this[$I]="Error",this.name=o.name,this.message=o.message,this.type=o.type,this.value=o.value,this.path=o.path,this.errors=o.errors,this.inner=o.inner,Error.captureStackTrace&&Error.captureStackTrace(this,hr)}static[QI](e){return S9[Symbol.hasInstance](e)||super[Symbol.hasInstance](e)}}let Xs={default:"${path} is invalid",required:"${path} is a required field",defined:"${path} must be defined",notNull:"${path} cannot be null",oneOf:"${path} must be one of the following values: ${values}",notOneOf:"${path} must not be one of the following values: ${values}",notType:({path:n,type:e,value:t,originalValue:i})=>{const r=i!=null&&i!==t?` (cast from the value \`${qa(i,!0)}\`).`:".";return e!=="mixed"?`${n} must be a \`${e}\` type, but the final value was: \`${qa(t,!0)}\``+r:`${n} must match the configured type. The validated value was: \`${qa(t,!0)}\``+r}},cr={length:"${path} must be exactly ${length} characters",min:"${path} must be at least ${min} characters",max:"${path} must be at most ${max} characters",matches:'${path} must match the following: "${regex}"',email:"${path} must be a valid email",url:"${path} must be a valid URL",uuid:"${path} must be a valid UUID",datetime:"${path} must be a valid ISO date-time",datetime_precision:"${path} must be a valid ISO date-time with a sub-second precision of exactly ${precision} digits",datetime_offset:'${path} must be a valid ISO date-time with UTC "Z" timezone',trim:"${path} must be a trimmed string",lowercase:"${path} must be a lowercase string",uppercase:"${path} must be a upper case string"},_te={min:"${path} must be greater than or equal to ${min}",max:"${path} must be less than or equal to ${max}",lessThan:"${path} must be less than ${less}",moreThan:"${path} must be greater than ${more}",positive:"${path} must be a positive number",negative:"${path} must be a negative number",integer:"${path} must be an integer"},CA={min:"${path} field must be later than ${min}",max:"${path} field must be at earlier than ${max}"},xte={isValue:"${path} field must be ${value}"},EA={noUnknown:"${path} field has unspecified keys: ${unknown}"},Ate={min:"${path} field must have at least ${min} items",max:"${path} field must have less than or equal to ${max} items",length:"${path} must have ${length} items"},Ste={notType:n=>{const{path:e,value:t,spec:i}=n,r=i.types.length;if(Array.isArray(t)){if(t.length<r)return`${e} tuple value has too few items, expected a length of ${r} but got ${t.length} for value: \`${qa(t,!0)}\``;if(t.length>r)return`${e} tuple value has too many items, expected a length of ${r} but got ${t.length} for value: \`${qa(t,!0)}\``}return hr.formatError(Xs.notType,n)}};Object.assign(Object.create(null),{mixed:Xs,string:cr,number:_te,date:CA,object:EA,array:Ate,boolean:xte,tuple:Ste});const wE=n=>n&&n.__isYupSchema__;class Tg{static fromOptions(e,t){if(!t.then&&!t.otherwise)throw new TypeError("either `then:` or `otherwise:` is required for `when()` conditions");let{is:i,then:r,otherwise:s}=t,o=typeof i=="function"?i:(...a)=>a.every(l=>l===i);return new Tg(e,(a,l)=>{var u;let c=o(...a)?r:s;return(u=c==null?void 0:c(l))!=null?u:l})}constructor(e,t){this.fn=void 0,this.refs=e,this.refs=e,this.fn=t}resolve(e,t){let i=this.refs.map(s=>s.getValue(t==null?void 0:t.value,t==null?void 0:t.parent,t==null?void 0:t.context)),r=this.fn(i,e,t);if(r===void 0||r===e)return e;if(!wE(r))throw new TypeError("conditions must return a schema object");return r.resolve(t)}}const $1={context:"$",value:"."};class Hu{constructor(e,t={}){if(this.key=void 0,this.isContext=void 0,this.isValue=void 0,this.isSibling=void 0,this.path=void 0,this.getter=void 0,this.map=void 0,typeof e!="string")throw new TypeError("ref must be a string, got: "+e);if(this.key=e.trim(),e==="")throw new TypeError("ref must be a non-empty string");this.isContext=this.key[0]===$1.context,this.isValue=this.key[0]===$1.value,this.isSibling=!this.isContext&&!this.isValue;let i=this.isContext?$1.context:this.isValue?$1.value:"";this.path=this.key.slice(i.length),this.getter=this.path&&xu.getter(this.path,!0),this.map=t.map}getValue(e,t,i){let r=this.isContext?i:this.isValue?e:t;return this.getter&&(r=this.getter(r||{})),this.map&&(r=this.map(r)),r}cast(e,t){return this.getValue(e,t==null?void 0:t.parent,t==null?void 0:t.context)}resolve(){return this}describe(){return{type:"ref",key:this.key}}toString(){return`Ref(${this.key})`}static isRef(e){return e&&e.__isYupRef}}Hu.prototype.__isYupRef=!0;const hu=n=>n==null;function Tc(n){function e({value:t,path:i="",options:r,originalValue:s,schema:o},a,l){const{name:u,test:c,params:h,message:p,skipAbsent:m}=n;let{parent:v,context:A,abortEarly:_=o.spec.abortEarly,disableStackTrace:g=o.spec.disableStackTrace}=r;function S(D){return Hu.isRef(D)?D.getValue(t,v,A):D}function x(D={}){const Q=Object.assign({value:t,originalValue:s,label:o.spec.label,path:D.path||i,spec:o.spec,disableStackTrace:D.disableStackTrace||g},h,D.params);for(const j of Object.keys(Q))Q[j]=S(Q[j]);const ie=new hr(hr.formatError(D.message||p,Q),t,Q.path,D.type||u,Q.disableStackTrace);return ie.params=Q,ie}const E=_?a:l;let b={path:i,parent:v,type:u,from:r.from,createError:x,resolve:S,options:r,originalValue:s,schema:o};const T=D=>{hr.isError(D)?E(D):D?l(null):E(x())},P=D=>{hr.isError(D)?E(D):a(D)};if(m&&hu(t))return T(!0);let z;try{var w;if(z=c.call(b,t,b),typeof((w=z)==null?void 0:w.then)=="function"){if(r.sync)throw new Error(`Validation test of type: "${b.type}" returned a Promise during a synchronous validate. This test will finish after the validate call has returned`);return Promise.resolve(z).then(T,P)}}catch(D){P(D);return}T(z)}return e.OPTIONS=n,e}function Cte(n,e,t,i=t){let r,s,o;return e?(xu.forEach(e,(a,l,u)=>{let c=l?a.slice(1,a.length-1):a;n=n.resolve({context:i,parent:r,value:t});let h=n.type==="tuple",p=u?parseInt(c,10):0;if(n.innerType||h){if(h&&!u)throw new Error(`Yup.reach cannot implicitly index into a tuple type. the path part "${o}" must contain an index to the tuple element, e.g. "${o}[0]"`);if(t&&p>=t.length)throw new Error(`Yup.reach cannot resolve an array item at index: ${a}, in the path: ${e}. because there is no value at that index. `);r=t,t=t&&t[p],n=h?n.spec.types[p]:n.innerType}if(!u){if(!n.fields||!n.fields[c])throw new Error(`The schema does not contain the path: ${e}. (failed at: ${o} which is a type: "${n.type}")`);r=t,t=t&&t[c],n=n.fields[c]}s=c,o=l?"["+a+"]":"."+a}),{schema:n,parent:r,parentPath:s}):{parent:r,parentPath:e,schema:n}}class bg extends Set{describe(){const e=[];for(const t of this.values())e.push(Hu.isRef(t)?t.describe():t);return e}resolveAll(e){let t=[];for(const i of this.values())t.push(e(i));return t}clone(){return new bg(this.values())}merge(e,t){const i=this.clone();return e.forEach(r=>i.add(r)),t.forEach(r=>i.delete(r)),i}}function ef(n,e=new Map){if(wE(n)||!n||typeof n!="object")return n;if(e.has(n))return e.get(n);let t;if(n instanceof Date)t=new Date(n.getTime()),e.set(n,t);else if(n instanceof RegExp)t=new RegExp(n),e.set(n,t);else if(Array.isArray(n)){t=new Array(n.length),e.set(n,t);for(let i=0;i<n.length;i++)t[i]=ef(n[i],e)}else if(n instanceof Map){t=new Map,e.set(n,t);for(const[i,r]of n.entries())t.set(i,ef(r,e))}else if(n instanceof Set){t=new Set,e.set(n,t);for(const i of n)t.add(ef(i,e))}else if(n instanceof Object){t={},e.set(n,t);for(const[i,r]of Object.entries(n))t[i]=ef(r,e)}else throw Error(`Unable to clone ${n}`);return t}class co{constructor(e){this.type=void 0,this.deps=[],this.tests=void 0,this.transforms=void 0,this.conditions=[],this._mutate=void 0,this.internalTests={},this._whitelist=new bg,this._blacklist=new bg,this.exclusiveTests=Object.create(null),this._typeCheck=void 0,this.spec=void 0,this.tests=[],this.transforms=[],this.withMutation(()=>{this.typeError(Xs.notType)}),this.type=e.type,this._typeCheck=e.check,this.spec=Object.assign({strip:!1,strict:!1,abortEarly:!0,recursive:!0,disableStackTrace:!1,nullable:!1,optional:!0,coerce:!0},e==null?void 0:e.spec),this.withMutation(t=>{t.nonNullable()})}get _type(){return this.type}clone(e){if(this._mutate)return e&&Object.assign(this.spec,e),this;const t=Object.create(Object.getPrototypeOf(this));return t.type=this.type,t._typeCheck=this._typeCheck,t._whitelist=this._whitelist.clone(),t._blacklist=this._blacklist.clone(),t.internalTests=Object.assign({},this.internalTests),t.exclusiveTests=Object.assign({},this.exclusiveTests),t.deps=[...this.deps],t.conditions=[...this.conditions],t.tests=[...this.tests],t.transforms=[...this.transforms],t.spec=ef(Object.assign({},this.spec,e)),t}label(e){let t=this.clone();return t.spec.label=e,t}meta(...e){if(e.length===0)return this.spec.meta;let t=this.clone();return t.spec.meta=Object.assign(t.spec.meta||{},e[0]),t}withMutation(e){let t=this._mutate;this._mutate=!0;let i=e(this);return this._mutate=t,i}concat(e){if(!e||e===this)return this;if(e.type!==this.type&&this.type!=="mixed")throw new TypeError(`You cannot \`concat()\` schema's of different types: ${this.type} and ${e.type}`);let t=this,i=e.clone();const r=Object.assign({},t.spec,i.spec);return i.spec=r,i.internalTests=Object.assign({},t.internalTests,i.internalTests),i._whitelist=t._whitelist.merge(e._whitelist,e._blacklist),i._blacklist=t._blacklist.merge(e._blacklist,e._whitelist),i.tests=t.tests,i.exclusiveTests=t.exclusiveTests,i.withMutation(s=>{e.tests.forEach(o=>{s.test(o.OPTIONS)})}),i.transforms=[...t.transforms,...i.transforms],i}isType(e){return e==null?!!(this.spec.nullable&&e===null||this.spec.optional&&e===void 0):this._typeCheck(e)}resolve(e){let t=this;if(t.conditions.length){let i=t.conditions;t=t.clone(),t.conditions=[],t=i.reduce((r,s)=>s.resolve(r,e),t),t=t.resolve(e)}return t}resolveOptions(e){var t,i,r,s;return Object.assign({},e,{from:e.from||[],strict:(t=e.strict)!=null?t:this.spec.strict,abortEarly:(i=e.abortEarly)!=null?i:this.spec.abortEarly,recursive:(r=e.recursive)!=null?r:this.spec.recursive,disableStackTrace:(s=e.disableStackTrace)!=null?s:this.spec.disableStackTrace})}cast(e,t={}){let i=this.resolve(Object.assign({value:e},t)),r=t.assert==="ignore-optionality",s=i._cast(e,t);if(t.assert!==!1&&!i.isType(s)){if(r&&hu(s))return s;let o=qa(e),a=qa(s);throw new TypeError(`The value of ${t.path||"field"} could not be cast to a value that satisfies the schema type: "${i.type}". 

attempted value: ${o} 
`+(a!==o?`result of cast: ${a}`:""))}return s}_cast(e,t){let i=e===void 0?e:this.transforms.reduce((r,s)=>s.call(this,r,e,this),e);return i===void 0&&(i=this.getDefault(t)),i}_validate(e,t={},i,r){let{path:s,originalValue:o=e,strict:a=this.spec.strict}=t,l=e;a||(l=this._cast(l,Object.assign({assert:!1},t)));let u=[];for(let c of Object.values(this.internalTests))c&&u.push(c);this.runTests({path:s,value:l,originalValue:o,options:t,tests:u},i,c=>{if(c.length)return r(c,l);this.runTests({path:s,value:l,originalValue:o,options:t,tests:this.tests},i,r)})}runTests(e,t,i){let r=!1,{tests:s,value:o,originalValue:a,path:l,options:u}=e,c=A=>{r||(r=!0,t(A,o))},h=A=>{r||(r=!0,i(A,o))},p=s.length,m=[];if(!p)return h([]);let v={value:o,originalValue:a,path:l,options:u,schema:this};for(let A=0;A<s.length;A++){const _=s[A];_(v,c,function(S){S&&(Array.isArray(S)?m.push(...S):m.push(S)),--p<=0&&h(m)})}}asNestedTest({key:e,index:t,parent:i,parentPath:r,originalParent:s,options:o}){const a=e??t;if(a==null)throw TypeError("Must include `key` or `index` for nested validations");const l=typeof a=="number";let u=i[a];const c=Object.assign({},o,{strict:!0,parent:i,value:u,originalValue:s[a],key:void 0,[l?"index":"key"]:a,path:l||a.includes(".")?`${r||""}[${l?a:`"${a}"`}]`:(r?`${r}.`:"")+e});return(h,p,m)=>this.resolve(c)._validate(u,c,p,m)}validate(e,t){var i;let r=this.resolve(Object.assign({},t,{value:e})),s=(i=t==null?void 0:t.disableStackTrace)!=null?i:r.spec.disableStackTrace;return new Promise((o,a)=>r._validate(e,t,(l,u)=>{hr.isError(l)&&(l.value=u),a(l)},(l,u)=>{l.length?a(new hr(l,u,void 0,void 0,s)):o(u)}))}validateSync(e,t){var i;let r=this.resolve(Object.assign({},t,{value:e})),s,o=(i=t==null?void 0:t.disableStackTrace)!=null?i:r.spec.disableStackTrace;return r._validate(e,Object.assign({},t,{sync:!0}),(a,l)=>{throw hr.isError(a)&&(a.value=l),a},(a,l)=>{if(a.length)throw new hr(a,e,void 0,void 0,o);s=l}),s}isValid(e,t){return this.validate(e,t).then(()=>!0,i=>{if(hr.isError(i))return!1;throw i})}isValidSync(e,t){try{return this.validateSync(e,t),!0}catch(i){if(hr.isError(i))return!1;throw i}}_getDefault(e){let t=this.spec.default;return t==null?t:typeof t=="function"?t.call(this,e):ef(t)}getDefault(e){return this.resolve(e||{})._getDefault(e)}default(e){return arguments.length===0?this._getDefault():this.clone({default:e})}strict(e=!0){return this.clone({strict:e})}nullability(e,t){const i=this.clone({nullable:e});return i.internalTests.nullable=Tc({message:t,name:"nullable",test(r){return r===null?this.schema.spec.nullable:!0}}),i}optionality(e,t){const i=this.clone({optional:e});return i.internalTests.optionality=Tc({message:t,name:"optionality",test(r){return r===void 0?this.schema.spec.optional:!0}}),i}optional(){return this.optionality(!0)}defined(e=Xs.defined){return this.optionality(!1,e)}nullable(){return this.nullability(!0)}nonNullable(e=Xs.notNull){return this.nullability(!1,e)}required(e=Xs.required){return this.clone().withMutation(t=>t.nonNullable(e).defined(e))}notRequired(){return this.clone().withMutation(e=>e.nullable().optional())}transform(e){let t=this.clone();return t.transforms.push(e),t}test(...e){let t;if(e.length===1?typeof e[0]=="function"?t={test:e[0]}:t=e[0]:e.length===2?t={name:e[0],test:e[1]}:t={name:e[0],message:e[1],test:e[2]},t.message===void 0&&(t.message=Xs.default),typeof t.test!="function")throw new TypeError("`test` is a required parameters");let i=this.clone(),r=Tc(t),s=t.exclusive||t.name&&i.exclusiveTests[t.name]===!0;if(t.exclusive&&!t.name)throw new TypeError("Exclusive tests must provide a unique `name` identifying the test");return t.name&&(i.exclusiveTests[t.name]=!!t.exclusive),i.tests=i.tests.filter(o=>!(o.OPTIONS.name===t.name&&(s||o.OPTIONS.test===r.OPTIONS.test))),i.tests.push(r),i}when(e,t){!Array.isArray(e)&&typeof e!="string"&&(t=e,e=".");let i=this.clone(),r=ZI(e).map(s=>new Hu(s));return r.forEach(s=>{s.isSibling&&i.deps.push(s.key)}),i.conditions.push(typeof t=="function"?new Tg(r,t):Tg.fromOptions(r,t)),i}typeError(e){let t=this.clone();return t.internalTests.typeError=Tc({message:e,name:"typeError",skipAbsent:!0,test(i){return this.schema._typeCheck(i)?!0:this.createError({params:{type:this.schema.type}})}}),t}oneOf(e,t=Xs.oneOf){let i=this.clone();return e.forEach(r=>{i._whitelist.add(r),i._blacklist.delete(r)}),i.internalTests.whiteList=Tc({message:t,name:"oneOf",skipAbsent:!0,test(r){let s=this.schema._whitelist,o=s.resolveAll(this.resolve);return o.includes(r)?!0:this.createError({params:{values:Array.from(s).join(", "),resolved:o}})}}),i}notOneOf(e,t=Xs.notOneOf){let i=this.clone();return e.forEach(r=>{i._blacklist.add(r),i._whitelist.delete(r)}),i.internalTests.blacklist=Tc({message:t,name:"notOneOf",test(r){let s=this.schema._blacklist,o=s.resolveAll(this.resolve);return o.includes(r)?this.createError({params:{values:Array.from(s).join(", "),resolved:o}}):!0}}),i}strip(e=!0){let t=this.clone();return t.spec.strip=e,t}describe(e){const t=(e?this.resolve(e):this).clone(),{label:i,meta:r,optional:s,nullable:o}=t.spec;return{meta:r,label:i,optional:s,nullable:o,default:t.getDefault(e),type:t.type,oneOf:t._whitelist.describe(),notOneOf:t._blacklist.describe(),tests:t.tests.map(l=>({name:l.OPTIONS.name,params:l.OPTIONS.params})).filter((l,u,c)=>c.findIndex(h=>h.name===l.name)===u)}}}co.prototype.__isYupSchema__=!0;for(const n of["validate","validateSync"])co.prototype[`${n}At`]=function(e,t,i={}){const{parent:r,parentPath:s,schema:o}=Cte(this,e,t,i.context);return o[n](r&&r[s],Object.assign({},i,{parent:r,path:e}))};for(const n of["equals","is"])co.prototype[n]=co.prototype.oneOf;for(const n of["not","nope"])co.prototype[n]=co.prototype.notOneOf;const Ete=/^(\d{4}|[+-]\d{6})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:[ T]?(\d{2}):?(\d{2})(?::?(\d{2})(?:[,.](\d{1,}))?)?(?:(Z)|([+-])(\d{2})(?::?(\d{2}))?)?)?$/;function Mte(n){const e=MA(n);if(!e)return Date.parse?Date.parse(n):Number.NaN;if(e.z===void 0&&e.plusMinus===void 0)return new Date(e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond).valueOf();let t=0;return e.z!=="Z"&&e.plusMinus!==void 0&&(t=e.hourOffset*60+e.minuteOffset,e.plusMinus==="+"&&(t=0-t)),Date.UTC(e.year,e.month,e.day,e.hour,e.minute+t,e.second,e.millisecond)}function MA(n){var e,t;const i=Ete.exec(n);return i?{year:bo(i[1]),month:bo(i[2],1)-1,day:bo(i[3],1),hour:bo(i[4]),minute:bo(i[5]),second:bo(i[6]),millisecond:i[7]?bo(i[7].substring(0,3)):0,precision:(e=(t=i[7])==null?void 0:t.length)!=null?e:void 0,z:i[8]||void 0,plusMinus:i[9]||void 0,hourOffset:bo(i[10]),minuteOffset:bo(i[11])}:null}function bo(n,e=0){return Number(n)||e}let wte=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Tte=/^((https?|ftp):)?\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,bte=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,Rte="^\\d{4}-\\d{2}-\\d{2}",Pte="\\d{2}:\\d{2}:\\d{2}",Bte="(([+-]\\d{2}(:?\\d{2})?)|Z)",Ite=new RegExp(`${Rte}T${Pte}(\\.\\d+)?${Bte}$`),Lte=n=>hu(n)||n===n.trim(),Dte={}.toString();function ff(){return new eL}class eL extends co{constructor(){super({type:"string",check(e){return e instanceof String&&(e=e.valueOf()),typeof e=="string"}}),this.withMutation(()=>{this.transform((e,t,i)=>{if(!i.spec.coerce||i.isType(e)||Array.isArray(e))return e;const r=e!=null&&e.toString?e.toString():e;return r===Dte?e:r})})}required(e){return super.required(e).withMutation(t=>t.test({message:e||Xs.required,name:"required",skipAbsent:!0,test:i=>!!i.length}))}notRequired(){return super.notRequired().withMutation(e=>(e.tests=e.tests.filter(t=>t.OPTIONS.name!=="required"),e))}length(e,t=cr.length){return this.test({message:t,name:"length",exclusive:!0,params:{length:e},skipAbsent:!0,test(i){return i.length===this.resolve(e)}})}min(e,t=cr.min){return this.test({message:t,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test(i){return i.length>=this.resolve(e)}})}max(e,t=cr.max){return this.test({name:"max",exclusive:!0,message:t,params:{max:e},skipAbsent:!0,test(i){return i.length<=this.resolve(e)}})}matches(e,t){let i=!1,r,s;return t&&(typeof t=="object"?{excludeEmptyString:i=!1,message:r,name:s}=t:r=t),this.test({name:s||"matches",message:r||cr.matches,params:{regex:e},skipAbsent:!0,test:o=>o===""&&i||o.search(e)!==-1})}email(e=cr.email){return this.matches(wte,{name:"email",message:e,excludeEmptyString:!0})}url(e=cr.url){return this.matches(Tte,{name:"url",message:e,excludeEmptyString:!0})}uuid(e=cr.uuid){return this.matches(bte,{name:"uuid",message:e,excludeEmptyString:!1})}datetime(e){let t="",i,r;return e&&(typeof e=="object"?{message:t="",allowOffset:i=!1,precision:r=void 0}=e:t=e),this.matches(Ite,{name:"datetime",message:t||cr.datetime,excludeEmptyString:!0}).test({name:"datetime_offset",message:t||cr.datetime_offset,params:{allowOffset:i},skipAbsent:!0,test:s=>{if(!s||i)return!0;const o=MA(s);return o?!!o.z:!1}}).test({name:"datetime_precision",message:t||cr.datetime_precision,params:{precision:r},skipAbsent:!0,test:s=>{if(!s||r==null)return!0;const o=MA(s);return o?o.precision===r:!1}})}ensure(){return this.default("").transform(e=>e===null?"":e)}trim(e=cr.trim){return this.transform(t=>t!=null?t.trim():t).test({message:e,name:"trim",test:Lte})}lowercase(e=cr.lowercase){return this.transform(t=>hu(t)?t:t.toLowerCase()).test({message:e,name:"string_case",exclusive:!0,skipAbsent:!0,test:t=>hu(t)||t===t.toLowerCase()})}uppercase(e=cr.uppercase){return this.transform(t=>hu(t)?t:t.toUpperCase()).test({message:e,name:"string_case",exclusive:!0,skipAbsent:!0,test:t=>hu(t)||t===t.toUpperCase()})}}ff.prototype=eL.prototype;let Fte=new Date(""),Nte=n=>Object.prototype.toString.call(n)==="[object Date]";class zv extends co{constructor(){super({type:"date",check(e){return Nte(e)&&!isNaN(e.getTime())}}),this.withMutation(()=>{this.transform((e,t,i)=>!i.spec.coerce||i.isType(e)||e===null?e:(e=Mte(e),isNaN(e)?zv.INVALID_DATE:new Date(e)))})}prepareParam(e,t){let i;if(Hu.isRef(e))i=e;else{let r=this.cast(e);if(!this._typeCheck(r))throw new TypeError(`\`${t}\` must be a Date or a value that can be \`cast()\` to a Date`);i=r}return i}min(e,t=CA.min){let i=this.prepareParam(e,"min");return this.test({message:t,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test(r){return r>=this.resolve(i)}})}max(e,t=CA.max){let i=this.prepareParam(e,"max");return this.test({message:t,name:"max",exclusive:!0,params:{max:e},skipAbsent:!0,test(r){return r<=this.resolve(i)}})}}zv.INVALID_DATE=Fte;zv.prototype;function Ote(n,e=[]){let t=[],i=new Set,r=new Set(e.map(([o,a])=>`${o}-${a}`));function s(o,a){let l=xu.split(o)[0];i.add(l),r.has(`${a}-${l}`)||t.push([a,l])}for(const o of Object.keys(n)){let a=n[o];i.add(o),Hu.isRef(a)&&a.isSibling?s(a.path,o):wE(a)&&"deps"in a&&a.deps.forEach(l=>s(l,o))}return fte.array(Array.from(i),t).reverse()}function C9(n,e){let t=1/0;return n.some((i,r)=>{var s;if((s=e.path)!=null&&s.includes(i))return t=r,!0}),t}function tL(n){return(e,t)=>C9(n,e)-C9(n,t)}const Ute=(n,e,t)=>{if(typeof n!="string")return n;let i=n;try{i=JSON.parse(n)}catch{}return t.isType(i)?i:n};function R0(n){if("fields"in n){const e={};for(const[t,i]of Object.entries(n.fields))e[t]=R0(i);return n.setFields(e)}if(n.type==="array"){const e=n.optional();return e.innerType&&(e.innerType=R0(e.innerType)),e}return n.type==="tuple"?n.optional().clone({types:n.spec.types.map(R0)}):"optional"in n?n.optional():n}const kte=(n,e)=>{const t=[...xu.normalizePath(e)];if(t.length===1)return t[0]in n;let i=t.pop(),r=xu.getter(xu.join(t),!0)(n);return!!(r&&i in r)};let E9=n=>Object.prototype.toString.call(n)==="[object Object]";function zte(n,e){let t=Object.keys(n.fields);return Object.keys(e).filter(i=>t.indexOf(i)===-1)}const Hte=tL([]);function nL(n){return new iL(n)}class iL extends co{constructor(e){super({type:"object",check(t){return E9(t)||typeof t=="function"}}),this.fields=Object.create(null),this._sortErrors=Hte,this._nodes=[],this._excludedEdges=[],this.withMutation(()=>{e&&this.shape(e)})}_cast(e,t={}){var i;let r=super._cast(e,t);if(r===void 0)return this.getDefault(t);if(!this._typeCheck(r))return r;let s=this.fields,o=(i=t.stripUnknown)!=null?i:this.spec.noUnknown,a=[].concat(this._nodes,Object.keys(r).filter(h=>!this._nodes.includes(h))),l={},u=Object.assign({},t,{parent:l,__validating:t.__validating||!1}),c=!1;for(const h of a){let p=s[h],m=h in r;if(p){let v,A=r[h];u.path=(t.path?`${t.path}.`:"")+h,p=p.resolve({value:A,context:t.context,parent:l});let _=p instanceof co?p.spec:void 0,g=_==null?void 0:_.strict;if(_!=null&&_.strip){c=c||h in r;continue}v=!t.__validating||!g?p.cast(r[h],u):r[h],v!==void 0&&(l[h]=v)}else m&&!o&&(l[h]=r[h]);(m!==h in l||l[h]!==r[h])&&(c=!0)}return c?l:r}_validate(e,t={},i,r){let{from:s=[],originalValue:o=e,recursive:a=this.spec.recursive}=t;t.from=[{schema:this,value:o},...s],t.__validating=!0,t.originalValue=o,super._validate(e,t,i,(l,u)=>{if(!a||!E9(u)){r(l,u);return}o=o||u;let c=[];for(let h of this._nodes){let p=this.fields[h];!p||Hu.isRef(p)||c.push(p.asNestedTest({options:t,key:h,parent:u,parentPath:t.path,originalParent:o}))}this.runTests({tests:c,value:u,originalValue:o,options:t},i,h=>{r(h.sort(this._sortErrors).concat(l),u)})})}clone(e){const t=super.clone(e);return t.fields=Object.assign({},this.fields),t._nodes=this._nodes,t._excludedEdges=this._excludedEdges,t._sortErrors=this._sortErrors,t}concat(e){let t=super.concat(e),i=t.fields;for(let[r,s]of Object.entries(this.fields)){const o=i[r];i[r]=o===void 0?s:o}return t.withMutation(r=>r.setFields(i,[...this._excludedEdges,...e._excludedEdges]))}_getDefault(e){if("default"in this.spec)return super._getDefault(e);if(!this._nodes.length)return;let t={};return this._nodes.forEach(i=>{var r;const s=this.fields[i];let o=e;(r=o)!=null&&r.value&&(o=Object.assign({},o,{parent:o.value,value:o.value[i]})),t[i]=s&&"getDefault"in s?s.getDefault(o):void 0}),t}setFields(e,t){let i=this.clone();return i.fields=e,i._nodes=Ote(e,t),i._sortErrors=tL(Object.keys(e)),t&&(i._excludedEdges=t),i}shape(e,t=[]){return this.clone().withMutation(i=>{let r=i._excludedEdges;return t.length&&(Array.isArray(t[0])||(t=[t]),r=[...i._excludedEdges,...t]),i.setFields(Object.assign(i.fields,e),r)})}partial(){const e={};for(const[t,i]of Object.entries(this.fields))e[t]="optional"in i&&i.optional instanceof Function?i.optional():i;return this.setFields(e)}deepPartial(){return R0(this)}pick(e){const t={};for(const i of e)this.fields[i]&&(t[i]=this.fields[i]);return this.setFields(t,this._excludedEdges.filter(([i,r])=>e.includes(i)&&e.includes(r)))}omit(e){const t=[];for(const i of Object.keys(this.fields))e.includes(i)||t.push(i);return this.pick(t)}from(e,t,i){let r=xu.getter(e,!0);return this.transform(s=>{if(!s)return s;let o=s;return kte(s,e)&&(o=Object.assign({},s),i||delete o[e],o[t]=r(s)),o})}json(){return this.transform(Ute)}noUnknown(e=!0,t=EA.noUnknown){typeof e!="boolean"&&(t=e,e=!0);let i=this.test({name:"noUnknown",exclusive:!0,message:t,test(r){if(r==null)return!0;const s=zte(this.schema,r);return!e||s.length===0||this.createError({params:{unknown:s.join(", ")}})}});return i.spec.noUnknown=e,i}unknown(e=!0,t=EA.noUnknown){return this.noUnknown(!e,t)}transformKeys(e){return this.transform(t=>{if(!t)return t;const i={};for(const r of Object.keys(t))i[e(r)]=t[r];return i})}camelCase(){return this.transformKeys(s2.camelCase)}snakeCase(){return this.transformKeys(s2.snakeCase)}constantCase(){return this.transformKeys(e=>s2.snakeCase(e).toUpperCase())}describe(e){const t=(e?this.resolve(e):this).clone(),i=super.describe(e);i.fields={};for(const[s,o]of Object.entries(t.fields)){var r;let a=e;(r=a)!=null&&r.value&&(a=Object.assign({},a,{parent:a.value,value:a.value[s]})),i.fields[s]=o.describe(a)}return i}}nL.prototype=iL.prototype;var M9=function(n,e,t){if(n&&"reportValidity"in n){var i=ct(t,e);n.setCustomValidity(i&&i.message||""),n.reportValidity()}},rL=function(n,e){var t=function(r){var s=e.fields[r];s&&s.ref&&"reportValidity"in s.ref?M9(s.ref,r,n):s.refs&&s.refs.forEach(function(o){return M9(o,r,n)})};for(var i in e.fields)t(i)},Gte=function(n,e){e.shouldUseNativeValidation&&rL(n,e);var t={};for(var i in n){var r=ct(e.fields,i),s=Object.assign(n[i]||{},{ref:r&&r.ref});if(Vte(e.names||Object.keys(n),i)){var o=Object.assign({},ct(t,i));fn(o,"root",s),fn(t,i,o)}else fn(t,i,s)}return t},Vte=function(n,e){return n.some(function(t){return t.startsWith(e+".")})};function Wte(n,e,t){return e===void 0&&(e={}),t===void 0&&(t={}),function(i,r,s){try{return Promise.resolve(function(o,a){try{var l=(e.context,Promise.resolve(n[t.mode==="sync"?"validateSync":"validate"](i,Object.assign({abortEarly:!1},e,{context:r}))).then(function(u){return s.shouldUseNativeValidation&&rL({},s),{values:t.raw?i:u,errors:{}}}))}catch(u){return a(u)}return l&&l.then?l.then(void 0,a):l}(0,function(o){if(!o.inner)throw o;return{values:{},errors:Gte((a=o,l=!s.shouldUseNativeValidation&&s.criteriaMode==="all",(a.inner||[]).reduce(function(u,c){if(u[c.path]||(u[c.path]={message:c.message,type:c.type}),l){var h=u[c.path].types,p=h&&h[c.type];u[c.path]=zI(c.path,l,u,c.type,p?[].concat(p,c.message):c.message)}return u},{})),s)};var a,l}))}catch(o){return Promise.reject(o)}}}var sL={exports:{}},oL={};/**
 * @license React
 * use-sync-external-store-with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Op=G;function jte(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Xte=typeof Object.is=="function"?Object.is:jte,Jte=Op.useSyncExternalStore,Kte=Op.useRef,Yte=Op.useEffect,Zte=Op.useMemo,qte=Op.useDebugValue;oL.useSyncExternalStoreWithSelector=function(n,e,t,i,r){var s=Kte(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=Zte(function(){function l(m){if(!u){if(u=!0,c=m,m=i(m),r!==void 0&&o.hasValue){var v=o.value;if(r(v,m))return h=v}return h=m}if(v=h,Xte(c,m))return v;var A=i(m);return r!==void 0&&r(v,A)?v:(c=m,h=A)}var u=!1,c,h,p=t===void 0?null:t;return[function(){return l(e())},p===null?void 0:function(){return l(p())}]},[e,t,i,r]);var a=Jte(n,s[0],s[1]);return Yte(function(){o.hasValue=!0,o.value=a},[a]),qte(a),a};sL.exports=oL;var Qte=sL.exports,Rr="default"in p2?Tn:p2,w9=Symbol.for("react-redux-context"),T9=typeof globalThis<"u"?globalThis:{};function $te(){if(!Rr.createContext)return{};const n=T9[w9]??(T9[w9]=new Map);let e=n.get(Rr.createContext);return e||(e=Rr.createContext(null),n.set(Rr.createContext,e)),e}var ol=$te(),ene=()=>{throw new Error("uSES not initialized!")};function TE(n=ol){return function(){return Rr.useContext(n)}}var aL=TE(),lL=ene,tne=n=>{lL=n},nne=(n,e)=>n===e;function ine(n=ol){const e=n===ol?aL:TE(n),t=(i,r={})=>{const{equalityFn:s=nne,devModeChecks:o={}}=typeof r=="function"?{equalityFn:r}:r,{store:a,subscription:l,getServerState:u,stabilityCheck:c,identityFunctionCheck:h}=e();Rr.useRef(!0);const p=Rr.useCallback({[i.name](v){return i(v)}}[i.name],[i,c,o.stabilityCheck]),m=lL(l.addNestedSub,a.getState,u||a.getState,p,s);return Rr.useDebugValue(m),m};return Object.assign(t,{withTypes:()=>t}),t}var rne=ine();function sne(n){n()}function one(){let n=null,e=null;return{clear(){n=null,e=null},notify(){sne(()=>{let t=n;for(;t;)t.callback(),t=t.next})},get(){const t=[];let i=n;for(;i;)t.push(i),i=i.next;return t},subscribe(t){let i=!0;const r=e={callback:t,next:null,prev:e};return r.prev?r.prev.next=r:n=r,function(){!i||n===null||(i=!1,r.next?r.next.prev=r.prev:e=r.prev,r.prev?r.prev.next=r.next:n=r.next)}}}}var b9={notify(){},get:()=>[]};function ane(n,e){let t,i=b9,r=0,s=!1;function o(A){c();const _=i.subscribe(A);let g=!1;return()=>{g||(g=!0,_(),h())}}function a(){i.notify()}function l(){v.onStateChange&&v.onStateChange()}function u(){return s}function c(){r++,t||(t=e?e.addNestedSub(l):n.subscribe(l),i=one())}function h(){r--,t&&r===0&&(t(),t=void 0,i.clear(),i=b9)}function p(){s||(s=!0,c())}function m(){s&&(s=!1,h())}const v={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:l,isSubscribed:u,trySubscribe:p,tryUnsubscribe:m,getListeners:()=>i};return v}var lne=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",une=lne?Rr.useLayoutEffect:Rr.useEffect;function cne({store:n,context:e,children:t,serverState:i,stabilityCheck:r="once",identityFunctionCheck:s="once"}){const o=Rr.useMemo(()=>{const u=ane(n);return{store:n,subscription:u,getServerState:i?()=>i:void 0,stabilityCheck:r,identityFunctionCheck:s}},[n,i,r,s]),a=Rr.useMemo(()=>n.getState(),[n]);une(()=>{const{subscription:u}=o;return u.onStateChange=u.notifyNestedSubs,u.trySubscribe(),a!==n.getState()&&u.notifyNestedSubs(),()=>{u.tryUnsubscribe(),u.onStateChange=void 0}},[o,a]);const l=e||ol;return Rr.createElement(l.Provider,{value:o},t)}var fne=cne;function uL(n=ol){const e=n===ol?aL:TE(n),t=()=>{const{store:i}=e();return i};return Object.assign(t,{withTypes:()=>t}),t}var hne=uL();function dne(n=ol){const e=n===ol?hne:uL(n),t=()=>e().dispatch;return Object.assign(t,{withTypes:()=>t}),t}var pne=dne();tne(Qte.useSyncExternalStoreWithSelector);const Jf=()=>pne(),al=rne;function cL(n,e){return function(){return n.apply(e,arguments)}}const{toString:mne}=Object.prototype,{getPrototypeOf:bE}=Object,Hv=(n=>e=>{const t=mne.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),po=n=>(n=n.toLowerCase(),e=>Hv(e)===n),Gv=n=>e=>typeof e===n,{isArray:Kf}=Array,op=Gv("undefined");function gne(n){return n!==null&&!op(n)&&n.constructor!==null&&!op(n.constructor)&&us(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const fL=po("ArrayBuffer");function vne(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&fL(n.buffer),e}const yne=Gv("string"),us=Gv("function"),hL=Gv("number"),Vv=n=>n!==null&&typeof n=="object",_ne=n=>n===!0||n===!1,P0=n=>{if(Hv(n)!=="object")return!1;const e=bE(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},xne=po("Date"),Ane=po("File"),Sne=po("Blob"),Cne=po("FileList"),Ene=n=>Vv(n)&&us(n.pipe),Mne=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||us(n.append)&&((e=Hv(n))==="formdata"||e==="object"&&us(n.toString)&&n.toString()==="[object FormData]"))},wne=po("URLSearchParams"),Tne=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Up(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let i,r;if(typeof n!="object"&&(n=[n]),Kf(n))for(i=0,r=n.length;i<r;i++)e.call(null,n[i],i,n);else{const s=t?Object.getOwnPropertyNames(n):Object.keys(n),o=s.length;let a;for(i=0;i<o;i++)a=s[i],e.call(null,n[a],a,n)}}function dL(n,e){e=e.toLowerCase();const t=Object.keys(n);let i=t.length,r;for(;i-- >0;)if(r=t[i],e===r.toLowerCase())return r;return null}const pL=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,mL=n=>!op(n)&&n!==pL;function wA(){const{caseless:n}=mL(this)&&this||{},e={},t=(i,r)=>{const s=n&&dL(e,r)||r;P0(e[s])&&P0(i)?e[s]=wA(e[s],i):P0(i)?e[s]=wA({},i):Kf(i)?e[s]=i.slice():e[s]=i};for(let i=0,r=arguments.length;i<r;i++)arguments[i]&&Up(arguments[i],t);return e}const bne=(n,e,t,{allOwnKeys:i}={})=>(Up(e,(r,s)=>{t&&us(r)?n[s]=cL(r,t):n[s]=r},{allOwnKeys:i}),n),Rne=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),Pne=(n,e,t,i)=>{n.prototype=Object.create(e.prototype,i),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},Bne=(n,e,t,i)=>{let r,s,o;const a={};if(e=e||{},n==null)return e;do{for(r=Object.getOwnPropertyNames(n),s=r.length;s-- >0;)o=r[s],(!i||i(o,n,e))&&!a[o]&&(e[o]=n[o],a[o]=!0);n=t!==!1&&bE(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},Ine=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const i=n.indexOf(e,t);return i!==-1&&i===t},Lne=n=>{if(!n)return null;if(Kf(n))return n;let e=n.length;if(!hL(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},Dne=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&bE(Uint8Array)),Fne=(n,e)=>{const i=(n&&n[Symbol.iterator]).call(n);let r;for(;(r=i.next())&&!r.done;){const s=r.value;e.call(n,s[0],s[1])}},Nne=(n,e)=>{let t;const i=[];for(;(t=n.exec(e))!==null;)i.push(t);return i},One=po("HTMLFormElement"),Une=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,i,r){return i.toUpperCase()+r}),R9=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),kne=po("RegExp"),gL=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),i={};Up(t,(r,s)=>{let o;(o=e(r,s,n))!==!1&&(i[s]=o||r)}),Object.defineProperties(n,i)},zne=n=>{gL(n,(e,t)=>{if(us(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const i=n[t];if(us(i)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},Hne=(n,e)=>{const t={},i=r=>{r.forEach(s=>{t[s]=!0})};return Kf(n)?i(n):i(String(n).split(e)),t},Gne=()=>{},Vne=(n,e)=>(n=+n,Number.isFinite(n)?n:e),o2="abcdefghijklmnopqrstuvwxyz",P9="0123456789",vL={DIGIT:P9,ALPHA:o2,ALPHA_DIGIT:o2+o2.toUpperCase()+P9},Wne=(n=16,e=vL.ALPHA_DIGIT)=>{let t="";const{length:i}=e;for(;n--;)t+=e[Math.random()*i|0];return t};function jne(n){return!!(n&&us(n.append)&&n[Symbol.toStringTag]==="FormData"&&n[Symbol.iterator])}const Xne=n=>{const e=new Array(10),t=(i,r)=>{if(Vv(i)){if(e.indexOf(i)>=0)return;if(!("toJSON"in i)){e[r]=i;const s=Kf(i)?[]:{};return Up(i,(o,a)=>{const l=t(o,r+1);!op(l)&&(s[a]=l)}),e[r]=void 0,s}}return i};return t(n,0)},Jne=po("AsyncFunction"),Kne=n=>n&&(Vv(n)||us(n))&&us(n.then)&&us(n.catch),Be={isArray:Kf,isArrayBuffer:fL,isBuffer:gne,isFormData:Mne,isArrayBufferView:vne,isString:yne,isNumber:hL,isBoolean:_ne,isObject:Vv,isPlainObject:P0,isUndefined:op,isDate:xne,isFile:Ane,isBlob:Sne,isRegExp:kne,isFunction:us,isStream:Ene,isURLSearchParams:wne,isTypedArray:Dne,isFileList:Cne,forEach:Up,merge:wA,extend:bne,trim:Tne,stripBOM:Rne,inherits:Pne,toFlatObject:Bne,kindOf:Hv,kindOfTest:po,endsWith:Ine,toArray:Lne,forEachEntry:Fne,matchAll:Nne,isHTMLForm:One,hasOwnProperty:R9,hasOwnProp:R9,reduceDescriptors:gL,freezeMethods:zne,toObjectSet:Hne,toCamelCase:Une,noop:Gne,toFiniteNumber:Vne,findKey:dL,global:pL,isContextDefined:mL,ALPHABET:vL,generateString:Wne,isSpecCompliantForm:jne,toJSONObject:Xne,isAsyncFn:Jne,isThenable:Kne};function Zt(n,e,t,i,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),i&&(this.request=i),r&&(this.response=r)}Be.inherits(Zt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Be.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const yL=Zt.prototype,_L={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{_L[n]={value:n}});Object.defineProperties(Zt,_L);Object.defineProperty(yL,"isAxiosError",{value:!0});Zt.from=(n,e,t,i,r,s)=>{const o=Object.create(yL);return Be.toFlatObject(n,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),Zt.call(o,n.message,e,t,i,r),o.cause=n,o.name=n.name,s&&Object.assign(o,s),o};const Yne=null;function TA(n){return Be.isPlainObject(n)||Be.isArray(n)}function xL(n){return Be.endsWith(n,"[]")?n.slice(0,-2):n}function B9(n,e,t){return n?n.concat(e).map(function(r,s){return r=xL(r),!t&&s?"["+r+"]":r}).join(t?".":""):e}function Zne(n){return Be.isArray(n)&&!n.some(TA)}const qne=Be.toFlatObject(Be,{},null,function(e){return/^is[A-Z]/.test(e)});function Wv(n,e,t){if(!Be.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=Be.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(A,_){return!Be.isUndefined(_[A])});const i=t.metaTokens,r=t.visitor||c,s=t.dots,o=t.indexes,l=(t.Blob||typeof Blob<"u"&&Blob)&&Be.isSpecCompliantForm(e);if(!Be.isFunction(r))throw new TypeError("visitor must be a function");function u(v){if(v===null)return"";if(Be.isDate(v))return v.toISOString();if(!l&&Be.isBlob(v))throw new Zt("Blob is not supported. Use a Buffer instead.");return Be.isArrayBuffer(v)||Be.isTypedArray(v)?l&&typeof Blob=="function"?new Blob([v]):Buffer.from(v):v}function c(v,A,_){let g=v;if(v&&!_&&typeof v=="object"){if(Be.endsWith(A,"{}"))A=i?A:A.slice(0,-2),v=JSON.stringify(v);else if(Be.isArray(v)&&Zne(v)||(Be.isFileList(v)||Be.endsWith(A,"[]"))&&(g=Be.toArray(v)))return A=xL(A),g.forEach(function(x,E){!(Be.isUndefined(x)||x===null)&&e.append(o===!0?B9([A],E,s):o===null?A:A+"[]",u(x))}),!1}return TA(v)?!0:(e.append(B9(_,A,s),u(v)),!1)}const h=[],p=Object.assign(qne,{defaultVisitor:c,convertValue:u,isVisitable:TA});function m(v,A){if(!Be.isUndefined(v)){if(h.indexOf(v)!==-1)throw Error("Circular reference detected in "+A.join("."));h.push(v),Be.forEach(v,function(g,S){(!(Be.isUndefined(g)||g===null)&&r.call(e,g,Be.isString(S)?S.trim():S,A,p))===!0&&m(g,A?A.concat(S):[S])}),h.pop()}}if(!Be.isObject(n))throw new TypeError("data must be an object");return m(n),e}function I9(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(i){return e[i]})}function RE(n,e){this._pairs=[],n&&Wv(n,this,e)}const AL=RE.prototype;AL.append=function(e,t){this._pairs.push([e,t])};AL.toString=function(e){const t=e?function(i){return e.call(this,i,I9)}:I9;return this._pairs.map(function(r){return t(r[0])+"="+t(r[1])},"").join("&")};function Qne(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function SL(n,e,t){if(!e)return n;const i=t&&t.encode||Qne,r=t&&t.serialize;let s;if(r?s=r(e,t):s=Be.isURLSearchParams(e)?e.toString():new RE(e,t).toString(i),s){const o=n.indexOf("#");o!==-1&&(n=n.slice(0,o)),n+=(n.indexOf("?")===-1?"?":"&")+s}return n}class L9{constructor(){this.handlers=[]}use(e,t,i){return this.handlers.push({fulfilled:e,rejected:t,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Be.forEach(this.handlers,function(i){i!==null&&e(i)})}}const CL={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},$ne=typeof URLSearchParams<"u"?URLSearchParams:RE,eie=typeof FormData<"u"?FormData:null,tie=typeof Blob<"u"?Blob:null,nie={isBrowser:!0,classes:{URLSearchParams:$ne,FormData:eie,Blob:tie},protocols:["http","https","file","blob","url","data"]},EL=typeof window<"u"&&typeof document<"u",iie=(n=>EL&&["ReactNative","NativeScript","NS"].indexOf(n)<0)(typeof navigator<"u"&&navigator.product),rie=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",sie=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:EL,hasStandardBrowserEnv:iie,hasStandardBrowserWebWorkerEnv:rie},Symbol.toStringTag,{value:"Module"})),Qs={...sie,...nie};function oie(n,e){return Wv(n,new Qs.classes.URLSearchParams,Object.assign({visitor:function(t,i,r,s){return Qs.isNode&&Be.isBuffer(t)?(this.append(i,t.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function aie(n){return Be.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function lie(n){const e={},t=Object.keys(n);let i;const r=t.length;let s;for(i=0;i<r;i++)s=t[i],e[s]=n[s];return e}function ML(n){function e(t,i,r,s){let o=t[s++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=s>=t.length;return o=!o&&Be.isArray(r)?r.length:o,l?(Be.hasOwnProp(r,o)?r[o]=[r[o],i]:r[o]=i,!a):((!r[o]||!Be.isObject(r[o]))&&(r[o]=[]),e(t,i,r[o],s)&&Be.isArray(r[o])&&(r[o]=lie(r[o])),!a)}if(Be.isFormData(n)&&Be.isFunction(n.entries)){const t={};return Be.forEachEntry(n,(i,r)=>{e(aie(i),r,t,0)}),t}return null}function uie(n,e,t){if(Be.isString(n))try{return(e||JSON.parse)(n),Be.trim(n)}catch(i){if(i.name!=="SyntaxError")throw i}return(t||JSON.stringify)(n)}const PE={transitional:CL,adapter:["xhr","http"],transformRequest:[function(e,t){const i=t.getContentType()||"",r=i.indexOf("application/json")>-1,s=Be.isObject(e);if(s&&Be.isHTMLForm(e)&&(e=new FormData(e)),Be.isFormData(e))return r?JSON.stringify(ML(e)):e;if(Be.isArrayBuffer(e)||Be.isBuffer(e)||Be.isStream(e)||Be.isFile(e)||Be.isBlob(e))return e;if(Be.isArrayBufferView(e))return e.buffer;if(Be.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(i.indexOf("application/x-www-form-urlencoded")>-1)return oie(e,this.formSerializer).toString();if((a=Be.isFileList(e))||i.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return Wv(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return s||r?(t.setContentType("application/json",!1),uie(e)):e}],transformResponse:[function(e){const t=this.transitional||PE.transitional,i=t&&t.forcedJSONParsing,r=this.responseType==="json";if(e&&Be.isString(e)&&(i&&!this.responseType||r)){const o=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?Zt.from(a,Zt.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Qs.classes.FormData,Blob:Qs.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Be.forEach(["delete","get","head","post","put","patch"],n=>{PE.headers[n]={}});const BE=PE,cie=Be.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),fie=n=>{const e={};let t,i,r;return n&&n.split(`
`).forEach(function(o){r=o.indexOf(":"),t=o.substring(0,r).trim().toLowerCase(),i=o.substring(r+1).trim(),!(!t||e[t]&&cie[t])&&(t==="set-cookie"?e[t]?e[t].push(i):e[t]=[i]:e[t]=e[t]?e[t]+", "+i:i)}),e},D9=Symbol("internals");function Gh(n){return n&&String(n).trim().toLowerCase()}function B0(n){return n===!1||n==null?n:Be.isArray(n)?n.map(B0):String(n)}function hie(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=t.exec(n);)e[i[1]]=i[2];return e}const die=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function a2(n,e,t,i,r){if(Be.isFunction(i))return i.call(this,e,t);if(r&&(e=t),!!Be.isString(e)){if(Be.isString(i))return e.indexOf(i)!==-1;if(Be.isRegExp(i))return i.test(e)}}function pie(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,i)=>t.toUpperCase()+i)}function mie(n,e){const t=Be.toCamelCase(" "+e);["get","set","has"].forEach(i=>{Object.defineProperty(n,i+t,{value:function(r,s,o){return this[i].call(this,e,r,s,o)},configurable:!0})})}class jv{constructor(e){e&&this.set(e)}set(e,t,i){const r=this;function s(a,l,u){const c=Gh(l);if(!c)throw new Error("header name must be a non-empty string");const h=Be.findKey(r,c);(!h||r[h]===void 0||u===!0||u===void 0&&r[h]!==!1)&&(r[h||l]=B0(a))}const o=(a,l)=>Be.forEach(a,(u,c)=>s(u,c,l));return Be.isPlainObject(e)||e instanceof this.constructor?o(e,t):Be.isString(e)&&(e=e.trim())&&!die(e)?o(fie(e),t):e!=null&&s(t,e,i),this}get(e,t){if(e=Gh(e),e){const i=Be.findKey(this,e);if(i){const r=this[i];if(!t)return r;if(t===!0)return hie(r);if(Be.isFunction(t))return t.call(this,r,i);if(Be.isRegExp(t))return t.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Gh(e),e){const i=Be.findKey(this,e);return!!(i&&this[i]!==void 0&&(!t||a2(this,this[i],i,t)))}return!1}delete(e,t){const i=this;let r=!1;function s(o){if(o=Gh(o),o){const a=Be.findKey(i,o);a&&(!t||a2(i,i[a],a,t))&&(delete i[a],r=!0)}}return Be.isArray(e)?e.forEach(s):s(e),r}clear(e){const t=Object.keys(this);let i=t.length,r=!1;for(;i--;){const s=t[i];(!e||a2(this,this[s],s,e,!0))&&(delete this[s],r=!0)}return r}normalize(e){const t=this,i={};return Be.forEach(this,(r,s)=>{const o=Be.findKey(i,s);if(o){t[o]=B0(r),delete t[s];return}const a=e?pie(s):String(s).trim();a!==s&&delete t[s],t[a]=B0(r),i[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return Be.forEach(this,(i,r)=>{i!=null&&i!==!1&&(t[r]=e&&Be.isArray(i)?i.join(", "):i)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const i=new this(e);return t.forEach(r=>i.set(r)),i}static accessor(e){const i=(this[D9]=this[D9]={accessors:{}}).accessors,r=this.prototype;function s(o){const a=Gh(o);i[a]||(mie(r,o),i[a]=!0)}return Be.isArray(e)?e.forEach(s):s(e),this}}jv.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Be.reduceDescriptors(jv.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(i){this[t]=i}}});Be.freezeMethods(jv);const jo=jv;function l2(n,e){const t=this||BE,i=e||t,r=jo.from(i.headers);let s=i.data;return Be.forEach(n,function(a){s=a.call(t,s,r.normalize(),e?e.status:void 0)}),r.normalize(),s}function wL(n){return!!(n&&n.__CANCEL__)}function kp(n,e,t){Zt.call(this,n??"canceled",Zt.ERR_CANCELED,e,t),this.name="CanceledError"}Be.inherits(kp,Zt,{__CANCEL__:!0});function gie(n,e,t){const i=t.config.validateStatus;!t.status||!i||i(t.status)?n(t):e(new Zt("Request failed with status code "+t.status,[Zt.ERR_BAD_REQUEST,Zt.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}const vie=Qs.hasStandardBrowserEnv?{write(n,e,t,i,r,s){const o=[n+"="+encodeURIComponent(e)];Be.isNumber(t)&&o.push("expires="+new Date(t).toGMTString()),Be.isString(i)&&o.push("path="+i),Be.isString(r)&&o.push("domain="+r),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(n){const e=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function yie(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function _ie(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function TL(n,e){return n&&!yie(e)?_ie(n,e):e}const xie=Qs.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let i;function r(s){let o=s;return e&&(t.setAttribute("href",o),o=t.href),t.setAttribute("href",o),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:t.pathname.charAt(0)==="/"?t.pathname:"/"+t.pathname}}return i=r(window.location.href),function(o){const a=Be.isString(o)?r(o):o;return a.protocol===i.protocol&&a.host===i.host}}():function(){return function(){return!0}}();function Aie(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function Sie(n,e){n=n||10;const t=new Array(n),i=new Array(n);let r=0,s=0,o;return e=e!==void 0?e:1e3,function(l){const u=Date.now(),c=i[s];o||(o=u),t[r]=l,i[r]=u;let h=s,p=0;for(;h!==r;)p+=t[h++],h=h%n;if(r=(r+1)%n,r===s&&(s=(s+1)%n),u-o<e)return;const m=c&&u-c;return m?Math.round(p*1e3/m):void 0}}function F9(n,e){let t=0;const i=Sie(50,250);return r=>{const s=r.loaded,o=r.lengthComputable?r.total:void 0,a=s-t,l=i(a),u=s<=o;t=s;const c={loaded:s,total:o,progress:o?s/o:void 0,bytes:a,rate:l||void 0,estimated:l&&o&&u?(o-s)/l:void 0,event:r};c[e?"download":"upload"]=!0,n(c)}}const Cie=typeof XMLHttpRequest<"u",Eie=Cie&&function(n){return new Promise(function(t,i){let r=n.data;const s=jo.from(n.headers).normalize();let{responseType:o,withXSRFToken:a}=n,l;function u(){n.cancelToken&&n.cancelToken.unsubscribe(l),n.signal&&n.signal.removeEventListener("abort",l)}let c;if(Be.isFormData(r)){if(Qs.hasStandardBrowserEnv||Qs.hasStandardBrowserWebWorkerEnv)s.setContentType(!1);else if((c=s.getContentType())!==!1){const[A,..._]=c?c.split(";").map(g=>g.trim()).filter(Boolean):[];s.setContentType([A||"multipart/form-data",..._].join("; "))}}let h=new XMLHttpRequest;if(n.auth){const A=n.auth.username||"",_=n.auth.password?unescape(encodeURIComponent(n.auth.password)):"";s.set("Authorization","Basic "+btoa(A+":"+_))}const p=TL(n.baseURL,n.url);h.open(n.method.toUpperCase(),SL(p,n.params,n.paramsSerializer),!0),h.timeout=n.timeout;function m(){if(!h)return;const A=jo.from("getAllResponseHeaders"in h&&h.getAllResponseHeaders()),g={data:!o||o==="text"||o==="json"?h.responseText:h.response,status:h.status,statusText:h.statusText,headers:A,config:n,request:h};gie(function(x){t(x),u()},function(x){i(x),u()},g),h=null}if("onloadend"in h?h.onloadend=m:h.onreadystatechange=function(){!h||h.readyState!==4||h.status===0&&!(h.responseURL&&h.responseURL.indexOf("file:")===0)||setTimeout(m)},h.onabort=function(){h&&(i(new Zt("Request aborted",Zt.ECONNABORTED,n,h)),h=null)},h.onerror=function(){i(new Zt("Network Error",Zt.ERR_NETWORK,n,h)),h=null},h.ontimeout=function(){let _=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const g=n.transitional||CL;n.timeoutErrorMessage&&(_=n.timeoutErrorMessage),i(new Zt(_,g.clarifyTimeoutError?Zt.ETIMEDOUT:Zt.ECONNABORTED,n,h)),h=null},Qs.hasStandardBrowserEnv&&(a&&Be.isFunction(a)&&(a=a(n)),a||a!==!1&&xie(p))){const A=n.xsrfHeaderName&&n.xsrfCookieName&&vie.read(n.xsrfCookieName);A&&s.set(n.xsrfHeaderName,A)}r===void 0&&s.setContentType(null),"setRequestHeader"in h&&Be.forEach(s.toJSON(),function(_,g){h.setRequestHeader(g,_)}),Be.isUndefined(n.withCredentials)||(h.withCredentials=!!n.withCredentials),o&&o!=="json"&&(h.responseType=n.responseType),typeof n.onDownloadProgress=="function"&&h.addEventListener("progress",F9(n.onDownloadProgress,!0)),typeof n.onUploadProgress=="function"&&h.upload&&h.upload.addEventListener("progress",F9(n.onUploadProgress)),(n.cancelToken||n.signal)&&(l=A=>{h&&(i(!A||A.type?new kp(null,n,h):A),h.abort(),h=null)},n.cancelToken&&n.cancelToken.subscribe(l),n.signal&&(n.signal.aborted?l():n.signal.addEventListener("abort",l)));const v=Aie(p);if(v&&Qs.protocols.indexOf(v)===-1){i(new Zt("Unsupported protocol "+v+":",Zt.ERR_BAD_REQUEST,n));return}h.send(r||null)})},bA={http:Yne,xhr:Eie};Be.forEach(bA,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const N9=n=>`- ${n}`,Mie=n=>Be.isFunction(n)||n===null||n===!1,bL={getAdapter:n=>{n=Be.isArray(n)?n:[n];const{length:e}=n;let t,i;const r={};for(let s=0;s<e;s++){t=n[s];let o;if(i=t,!Mie(t)&&(i=bA[(o=String(t)).toLowerCase()],i===void 0))throw new Zt(`Unknown adapter '${o}'`);if(i)break;r[o||"#"+s]=i}if(!i){const s=Object.entries(r).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=e?s.length>1?`since :
`+s.map(N9).join(`
`):" "+N9(s[0]):"as no adapter specified";throw new Zt("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return i},adapters:bA};function u2(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new kp(null,n)}function O9(n){return u2(n),n.headers=jo.from(n.headers),n.data=l2.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),bL.getAdapter(n.adapter||BE.adapter)(n).then(function(i){return u2(n),i.data=l2.call(n,n.transformResponse,i),i.headers=jo.from(i.headers),i},function(i){return wL(i)||(u2(n),i&&i.response&&(i.response.data=l2.call(n,n.transformResponse,i.response),i.response.headers=jo.from(i.response.headers))),Promise.reject(i)})}const U9=n=>n instanceof jo?{...n}:n;function Bf(n,e){e=e||{};const t={};function i(u,c,h){return Be.isPlainObject(u)&&Be.isPlainObject(c)?Be.merge.call({caseless:h},u,c):Be.isPlainObject(c)?Be.merge({},c):Be.isArray(c)?c.slice():c}function r(u,c,h){if(Be.isUndefined(c)){if(!Be.isUndefined(u))return i(void 0,u,h)}else return i(u,c,h)}function s(u,c){if(!Be.isUndefined(c))return i(void 0,c)}function o(u,c){if(Be.isUndefined(c)){if(!Be.isUndefined(u))return i(void 0,u)}else return i(void 0,c)}function a(u,c,h){if(h in e)return i(u,c);if(h in n)return i(void 0,u)}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(u,c)=>r(U9(u),U9(c),!0)};return Be.forEach(Object.keys(Object.assign({},n,e)),function(c){const h=l[c]||r,p=h(n[c],e[c],c);Be.isUndefined(p)&&h!==a||(t[c]=p)}),t}const RL="1.6.8",IE={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{IE[n]=function(i){return typeof i===n||"a"+(e<1?"n ":" ")+n}});const k9={};IE.transitional=function(e,t,i){function r(s,o){return"[Axios v"+RL+"] Transitional option '"+s+"'"+o+(i?". "+i:"")}return(s,o,a)=>{if(e===!1)throw new Zt(r(o," has been removed"+(t?" in "+t:"")),Zt.ERR_DEPRECATED);return t&&!k9[o]&&(k9[o]=!0,console.warn(r(o," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(s,o,a):!0}};function wie(n,e,t){if(typeof n!="object")throw new Zt("options must be an object",Zt.ERR_BAD_OPTION_VALUE);const i=Object.keys(n);let r=i.length;for(;r-- >0;){const s=i[r],o=e[s];if(o){const a=n[s],l=a===void 0||o(a,s,n);if(l!==!0)throw new Zt("option "+s+" must be "+l,Zt.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new Zt("Unknown option "+s,Zt.ERR_BAD_OPTION)}}const RA={assertOptions:wie,validators:IE},xa=RA.validators;class Rg{constructor(e){this.defaults=e,this.interceptors={request:new L9,response:new L9}}async request(e,t){try{return await this._request(e,t)}catch(i){if(i instanceof Error){let r;Error.captureStackTrace?Error.captureStackTrace(r={}):r=new Error;const s=r.stack?r.stack.replace(/^.+\n/,""):"";i.stack?s&&!String(i.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+s):i.stack=s}throw i}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=Bf(this.defaults,t);const{transitional:i,paramsSerializer:r,headers:s}=t;i!==void 0&&RA.assertOptions(i,{silentJSONParsing:xa.transitional(xa.boolean),forcedJSONParsing:xa.transitional(xa.boolean),clarifyTimeoutError:xa.transitional(xa.boolean)},!1),r!=null&&(Be.isFunction(r)?t.paramsSerializer={serialize:r}:RA.assertOptions(r,{encode:xa.function,serialize:xa.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=s&&Be.merge(s.common,s[t.method]);s&&Be.forEach(["delete","get","head","post","put","patch","common"],v=>{delete s[v]}),t.headers=jo.concat(o,s);const a=[];let l=!0;this.interceptors.request.forEach(function(A){typeof A.runWhen=="function"&&A.runWhen(t)===!1||(l=l&&A.synchronous,a.unshift(A.fulfilled,A.rejected))});const u=[];this.interceptors.response.forEach(function(A){u.push(A.fulfilled,A.rejected)});let c,h=0,p;if(!l){const v=[O9.bind(this),void 0];for(v.unshift.apply(v,a),v.push.apply(v,u),p=v.length,c=Promise.resolve(t);h<p;)c=c.then(v[h++],v[h++]);return c}p=a.length;let m=t;for(h=0;h<p;){const v=a[h++],A=a[h++];try{m=v(m)}catch(_){A.call(this,_);break}}try{c=O9.call(this,m)}catch(v){return Promise.reject(v)}for(h=0,p=u.length;h<p;)c=c.then(u[h++],u[h++]);return c}getUri(e){e=Bf(this.defaults,e);const t=TL(e.baseURL,e.url);return SL(t,e.params,e.paramsSerializer)}}Be.forEach(["delete","get","head","options"],function(e){Rg.prototype[e]=function(t,i){return this.request(Bf(i||{},{method:e,url:t,data:(i||{}).data}))}});Be.forEach(["post","put","patch"],function(e){function t(i){return function(s,o,a){return this.request(Bf(a||{},{method:e,headers:i?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}Rg.prototype[e]=t(),Rg.prototype[e+"Form"]=t(!0)});const I0=Rg;class LE{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(s){t=s});const i=this;this.promise.then(r=>{if(!i._listeners)return;let s=i._listeners.length;for(;s-- >0;)i._listeners[s](r);i._listeners=null}),this.promise.then=r=>{let s;const o=new Promise(a=>{i.subscribe(a),s=a}).then(r);return o.cancel=function(){i.unsubscribe(s)},o},e(function(s,o,a){i.reason||(i.reason=new kp(s,o,a),t(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}static source(){let e;return{token:new LE(function(r){e=r}),cancel:e}}}const Tie=LE;function bie(n){return function(t){return n.apply(null,t)}}function Rie(n){return Be.isObject(n)&&n.isAxiosError===!0}const PA={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(PA).forEach(([n,e])=>{PA[e]=n});const Pie=PA;function PL(n){const e=new I0(n),t=cL(I0.prototype.request,e);return Be.extend(t,I0.prototype,e,{allOwnKeys:!0}),Be.extend(t,e,null,{allOwnKeys:!0}),t.create=function(r){return PL(Bf(n,r))},t}const Yn=PL(BE);Yn.Axios=I0;Yn.CanceledError=kp;Yn.CancelToken=Tie;Yn.isCancel=wL;Yn.VERSION=RL;Yn.toFormData=Wv;Yn.AxiosError=Zt;Yn.Cancel=Yn.CanceledError;Yn.all=function(e){return Promise.all(e)};Yn.spread=bie;Yn.isAxiosError=Rie;Yn.mergeConfig=Bf;Yn.AxiosHeaders=jo;Yn.formToJSON=n=>ML(Be.isHTMLForm(n)?new FormData(n):n);Yn.getAdapter=bL.getAdapter;Yn.HttpStatusCode=Pie;Yn.default=Yn;function xi(n){return`Minified Redux error #${n}; visit https://redux.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}var Bie=typeof Symbol=="function"&&Symbol.observable||"@@observable",z9=Bie,c2=()=>Math.random().toString(36).substring(7).split("").join("."),Iie={INIT:`@@redux/INIT${c2()}`,REPLACE:`@@redux/REPLACE${c2()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${c2()}`},Pg=Iie;function DE(n){if(typeof n!="object"||n===null)return!1;let e=n;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(n)===e||Object.getPrototypeOf(n)===null}function BL(n,e,t){if(typeof n!="function")throw new Error(xi(2));if(typeof e=="function"&&typeof t=="function"||typeof t=="function"&&typeof arguments[3]=="function")throw new Error(xi(0));if(typeof e=="function"&&typeof t>"u"&&(t=e,e=void 0),typeof t<"u"){if(typeof t!="function")throw new Error(xi(1));return t(BL)(n,e)}let i=n,r=e,s=new Map,o=s,a=0,l=!1;function u(){o===s&&(o=new Map,s.forEach((_,g)=>{o.set(g,_)}))}function c(){if(l)throw new Error(xi(3));return r}function h(_){if(typeof _!="function")throw new Error(xi(4));if(l)throw new Error(xi(5));let g=!0;u();const S=a++;return o.set(S,_),function(){if(g){if(l)throw new Error(xi(6));g=!1,u(),o.delete(S),s=null}}}function p(_){if(!DE(_))throw new Error(xi(7));if(typeof _.type>"u")throw new Error(xi(8));if(typeof _.type!="string")throw new Error(xi(17));if(l)throw new Error(xi(9));try{l=!0,r=i(r,_)}finally{l=!1}return(s=o).forEach(S=>{S()}),_}function m(_){if(typeof _!="function")throw new Error(xi(10));i=_,p({type:Pg.REPLACE})}function v(){const _=h;return{subscribe(g){if(typeof g!="object"||g===null)throw new Error(xi(11));function S(){const E=g;E.next&&E.next(c())}return S(),{unsubscribe:_(S)}},[z9](){return this}}}return p({type:Pg.INIT}),{dispatch:p,subscribe:h,getState:c,replaceReducer:m,[z9]:v}}function Lie(n){Object.keys(n).forEach(e=>{const t=n[e];if(typeof t(void 0,{type:Pg.INIT})>"u")throw new Error(xi(12));if(typeof t(void 0,{type:Pg.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(xi(13))})}function IL(n){const e=Object.keys(n),t={};for(let s=0;s<e.length;s++){const o=e[s];typeof n[o]=="function"&&(t[o]=n[o])}const i=Object.keys(t);let r;try{Lie(t)}catch(s){r=s}return function(o={},a){if(r)throw r;let l=!1;const u={};for(let c=0;c<i.length;c++){const h=i[c],p=t[h],m=o[h],v=p(m,a);if(typeof v>"u")throw a&&a.type,new Error(xi(14));u[h]=v,l=l||v!==m}return l=l||i.length!==Object.keys(o).length,l?u:o}}function Bg(...n){return n.length===0?e=>e:n.length===1?n[0]:n.reduce((e,t)=>(...i)=>e(t(...i)))}function Die(...n){return e=>(t,i)=>{const r=e(t,i);let s=()=>{throw new Error(xi(15))};const o={getState:r.getState,dispatch:(l,...u)=>s(l,...u)},a=n.map(l=>l(o));return s=Bg(...a)(r.dispatch),{...r,dispatch:s}}}function Fie(n){return DE(n)&&"type"in n&&typeof n.type=="string"}var LL=Symbol.for("immer-nothing"),H9=Symbol.for("immer-draftable"),Fr=Symbol.for("immer-state");function Ts(n,...e){throw new Error(`[Immer] minified error nr: ${n}. Full error at: https://bit.ly/3cXEKWf`)}var If=Object.getPrototypeOf;function ll(n){return!!n&&!!n[Fr]}function Qo(n){var e;return n?DL(n)||Array.isArray(n)||!!n[H9]||!!((e=n.constructor)!=null&&e[H9])||Jv(n)||Kv(n):!1}var Nie=Object.prototype.constructor.toString();function DL(n){if(!n||typeof n!="object")return!1;const e=If(n);if(e===null)return!0;const t=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return t===Object?!0:typeof t=="function"&&Function.toString.call(t)===Nie}function Ig(n,e){Xv(n)===0?Reflect.ownKeys(n).forEach(t=>{e(t,n[t],n)}):n.forEach((t,i)=>e(i,t,n))}function Xv(n){const e=n[Fr];return e?e.type_:Array.isArray(n)?1:Jv(n)?2:Kv(n)?3:0}function BA(n,e){return Xv(n)===2?n.has(e):Object.prototype.hasOwnProperty.call(n,e)}function FL(n,e,t){const i=Xv(n);i===2?n.set(e,t):i===3?n.add(t):n[e]=t}function Oie(n,e){return n===e?n!==0||1/n===1/e:n!==n&&e!==e}function Jv(n){return n instanceof Map}function Kv(n){return n instanceof Set}function $l(n){return n.copy_||n.base_}function IA(n,e){if(Jv(n))return new Map(n);if(Kv(n))return new Set(n);if(Array.isArray(n))return Array.prototype.slice.call(n);if(!e&&DL(n))return If(n)?{...n}:Object.assign(Object.create(null),n);const t=Object.getOwnPropertyDescriptors(n);delete t[Fr];let i=Reflect.ownKeys(t);for(let r=0;r<i.length;r++){const s=i[r],o=t[s];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(t[s]={configurable:!0,writable:!0,enumerable:o.enumerable,value:n[s]})}return Object.create(If(n),t)}function FE(n,e=!1){return Yv(n)||ll(n)||!Qo(n)||(Xv(n)>1&&(n.set=n.add=n.clear=n.delete=Uie),Object.freeze(n),e&&Object.entries(n).forEach(([t,i])=>FE(i,!0))),n}function Uie(){Ts(2)}function Yv(n){return Object.isFrozen(n)}var kie={};function Pu(n){const e=kie[n];return e||Ts(0,n),e}var ap;function NL(){return ap}function zie(n,e){return{drafts_:[],parent_:n,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function G9(n,e){e&&(Pu("Patches"),n.patches_=[],n.inversePatches_=[],n.patchListener_=e)}function LA(n){DA(n),n.drafts_.forEach(Hie),n.drafts_=null}function DA(n){n===ap&&(ap=n.parent_)}function V9(n){return ap=zie(ap,n)}function Hie(n){const e=n[Fr];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function W9(n,e){e.unfinalizedDrafts_=e.drafts_.length;const t=e.drafts_[0];return n!==void 0&&n!==t?(t[Fr].modified_&&(LA(e),Ts(4)),Qo(n)&&(n=Lg(e,n),e.parent_||Dg(e,n)),e.patches_&&Pu("Patches").generateReplacementPatches_(t[Fr].base_,n,e.patches_,e.inversePatches_)):n=Lg(e,t,[]),LA(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),n!==LL?n:void 0}function Lg(n,e,t){if(Yv(e))return e;const i=e[Fr];if(!i)return Ig(e,(r,s)=>j9(n,i,e,r,s,t)),e;if(i.scope_!==n)return e;if(!i.modified_)return Dg(n,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const r=i.copy_;let s=r,o=!1;i.type_===3&&(s=new Set(r),r.clear(),o=!0),Ig(s,(a,l)=>j9(n,i,r,a,l,t,o)),Dg(n,r,!1),t&&n.patches_&&Pu("Patches").generatePatches_(i,t,n.patches_,n.inversePatches_)}return i.copy_}function j9(n,e,t,i,r,s,o){if(ll(r)){const a=s&&e&&e.type_!==3&&!BA(e.assigned_,i)?s.concat(i):void 0,l=Lg(n,r,a);if(FL(t,i,l),ll(l))n.canAutoFreeze_=!1;else return}else o&&t.add(r);if(Qo(r)&&!Yv(r)){if(!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1)return;Lg(n,r),(!e||!e.scope_.parent_)&&typeof i!="symbol"&&Object.prototype.propertyIsEnumerable.call(t,i)&&Dg(n,r)}}function Dg(n,e,t=!1){!n.parent_&&n.immer_.autoFreeze_&&n.canAutoFreeze_&&FE(e,t)}function Gie(n,e){const t=Array.isArray(n),i={type_:t?1:0,scope_:e?e.scope_:NL(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:n,draft_:null,copy_:null,revoke_:null,isManual_:!1};let r=i,s=NE;t&&(r=[i],s=lp);const{revoke:o,proxy:a}=Proxy.revocable(r,s);return i.draft_=a,i.revoke_=o,a}var NE={get(n,e){if(e===Fr)return n;const t=$l(n);if(!BA(t,e))return Vie(n,t,e);const i=t[e];return n.finalized_||!Qo(i)?i:i===f2(n.base_,e)?(h2(n),n.copy_[e]=NA(i,n)):i},has(n,e){return e in $l(n)},ownKeys(n){return Reflect.ownKeys($l(n))},set(n,e,t){const i=OL($l(n),e);if(i!=null&&i.set)return i.set.call(n.draft_,t),!0;if(!n.modified_){const r=f2($l(n),e),s=r==null?void 0:r[Fr];if(s&&s.base_===t)return n.copy_[e]=t,n.assigned_[e]=!1,!0;if(Oie(t,r)&&(t!==void 0||BA(n.base_,e)))return!0;h2(n),FA(n)}return n.copy_[e]===t&&(t!==void 0||e in n.copy_)||Number.isNaN(t)&&Number.isNaN(n.copy_[e])||(n.copy_[e]=t,n.assigned_[e]=!0),!0},deleteProperty(n,e){return f2(n.base_,e)!==void 0||e in n.base_?(n.assigned_[e]=!1,h2(n),FA(n)):delete n.assigned_[e],n.copy_&&delete n.copy_[e],!0},getOwnPropertyDescriptor(n,e){const t=$l(n),i=Reflect.getOwnPropertyDescriptor(t,e);return i&&{writable:!0,configurable:n.type_!==1||e!=="length",enumerable:i.enumerable,value:t[e]}},defineProperty(){Ts(11)},getPrototypeOf(n){return If(n.base_)},setPrototypeOf(){Ts(12)}},lp={};Ig(NE,(n,e)=>{lp[n]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});lp.deleteProperty=function(n,e){return lp.set.call(this,n,e,void 0)};lp.set=function(n,e,t){return NE.set.call(this,n[0],e,t,n[0])};function f2(n,e){const t=n[Fr];return(t?$l(t):n)[e]}function Vie(n,e,t){var r;const i=OL(e,t);return i?"value"in i?i.value:(r=i.get)==null?void 0:r.call(n.draft_):void 0}function OL(n,e){if(!(e in n))return;let t=If(n);for(;t;){const i=Object.getOwnPropertyDescriptor(t,e);if(i)return i;t=If(t)}}function FA(n){n.modified_||(n.modified_=!0,n.parent_&&FA(n.parent_))}function h2(n){n.copy_||(n.copy_=IA(n.base_,n.scope_.immer_.useStrictShallowCopy_))}var Wie=class{constructor(n){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,i)=>{if(typeof e=="function"&&typeof t!="function"){const s=t;t=e;const o=this;return function(l=s,...u){return o.produce(l,c=>t.call(this,c,...u))}}typeof t!="function"&&Ts(6),i!==void 0&&typeof i!="function"&&Ts(7);let r;if(Qo(e)){const s=V9(this),o=NA(e,void 0);let a=!0;try{r=t(o),a=!1}finally{a?LA(s):DA(s)}return G9(s,i),W9(r,s)}else if(!e||typeof e!="object"){if(r=t(e),r===void 0&&(r=e),r===LL&&(r=void 0),this.autoFreeze_&&FE(r,!0),i){const s=[],o=[];Pu("Patches").generateReplacementPatches_(e,r,s,o),i(s,o)}return r}else Ts(1,e)},this.produceWithPatches=(e,t)=>{if(typeof e=="function")return(o,...a)=>this.produceWithPatches(o,l=>e(l,...a));let i,r;return[this.produce(e,t,(o,a)=>{i=o,r=a}),i,r]},typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze),typeof(n==null?void 0:n.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(n.useStrictShallowCopy)}createDraft(n){Qo(n)||Ts(8),ll(n)&&(n=UL(n));const e=V9(this),t=NA(n,void 0);return t[Fr].isManual_=!0,DA(e),t}finishDraft(n,e){const t=n&&n[Fr];(!t||!t.isManual_)&&Ts(9);const{scope_:i}=t;return G9(i,e),W9(void 0,i)}setAutoFreeze(n){this.autoFreeze_=n}setUseStrictShallowCopy(n){this.useStrictShallowCopy_=n}applyPatches(n,e){let t;for(t=e.length-1;t>=0;t--){const r=e[t];if(r.path.length===0&&r.op==="replace"){n=r.value;break}}t>-1&&(e=e.slice(t+1));const i=Pu("Patches").applyPatches_;return ll(n)?i(n,e):this.produce(n,r=>i(r,e))}};function NA(n,e){const t=Jv(n)?Pu("MapSet").proxyMap_(n,e):Kv(n)?Pu("MapSet").proxySet_(n,e):Gie(n,e);return(e?e.scope_:NL()).drafts_.push(t),t}function UL(n){return ll(n)||Ts(10,n),kL(n)}function kL(n){if(!Qo(n)||Yv(n))return n;const e=n[Fr];let t;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,t=IA(n,e.scope_.immer_.useStrictShallowCopy_)}else t=IA(n,!0);return Ig(t,(i,r)=>{FL(t,i,kL(r))}),e&&(e.finalized_=!1),t}var Nr=new Wie,zL=Nr.produce;Nr.produceWithPatches.bind(Nr);Nr.setAutoFreeze.bind(Nr);Nr.setUseStrictShallowCopy.bind(Nr);Nr.applyPatches.bind(Nr);Nr.createDraft.bind(Nr);Nr.finishDraft.bind(Nr);function jie(n,e=`expected a function, instead received ${typeof n}`){if(typeof n!="function")throw new TypeError(e)}function Xie(n,e=`expected an object, instead received ${typeof n}`){if(typeof n!="object")throw new TypeError(e)}function Jie(n,e="expected all items to be functions, instead received the following types: "){if(!n.every(t=>typeof t=="function")){const t=n.map(i=>typeof i=="function"?`function ${i.name||"unnamed"}()`:typeof i).join(", ");throw new TypeError(`${e}[${t}]`)}}var X9=n=>Array.isArray(n)?n:[n];function Kie(n){const e=Array.isArray(n[0])?n[0]:n;return Jie(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function Yie(n,e){const t=[],{length:i}=n;for(let r=0;r<i;r++)t.push(n[r].apply(null,e));return t}var Zie=class{constructor(n){this.value=n}deref(){return this.value}},qie=typeof WeakRef<"u"?WeakRef:Zie,Qie=0,J9=1;function e0(){return{s:Qie,v:void 0,o:null,p:null}}function OE(n,e={}){let t=e0();const{resultEqualityCheck:i}=e;let r,s=0;function o(){var h;let a=t;const{length:l}=arguments;for(let p=0,m=l;p<m;p++){const v=arguments[p];if(typeof v=="function"||typeof v=="object"&&v!==null){let A=a.o;A===null&&(a.o=A=new WeakMap);const _=A.get(v);_===void 0?(a=e0(),A.set(v,a)):a=_}else{let A=a.p;A===null&&(a.p=A=new Map);const _=A.get(v);_===void 0?(a=e0(),A.set(v,a)):a=_}}const u=a;let c;if(a.s===J9?c=a.v:(c=n.apply(null,arguments),s++),u.s=J9,i){const p=((h=r==null?void 0:r.deref)==null?void 0:h.call(r))??r;p!=null&&i(p,c)&&(c=p,s!==0&&s--),r=typeof c=="object"&&c!==null||typeof c=="function"?new qie(c):c}return u.v=c,c}return o.clearCache=()=>{t=e0(),o.resetResultsCount()},o.resultsCount=()=>s,o.resetResultsCount=()=>{s=0},o}function HL(n,...e){const t=typeof n=="function"?{memoize:n,memoizeOptions:e}:n,i=(...r)=>{let s=0,o=0,a,l={},u=r.pop();typeof u=="object"&&(l=u,u=r.pop()),jie(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const c={...t,...l},{memoize:h,memoizeOptions:p=[],argsMemoize:m=OE,argsMemoizeOptions:v=[],devModeChecks:A={}}=c,_=X9(p),g=X9(v),S=Kie(r),x=h(function(){return s++,u.apply(null,arguments)},..._),E=m(function(){o++;const T=Yie(S,arguments);return a=x.apply(null,T),a},...g);return Object.assign(E,{resultFunc:u,memoizedResultFunc:x,dependencies:S,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>a,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:h,argsMemoize:m})};return Object.assign(i,{withTypes:()=>i}),i}var $ie=HL(OE),ere=Object.assign((n,e=$ie)=>{Xie(n,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof n}`);const t=Object.keys(n),i=t.map(s=>n[s]);return e(i,(...s)=>s.reduce((o,a,l)=>(o[t[l]]=a,o),{}))},{withTypes:()=>ere});function GL(n){return({dispatch:t,getState:i})=>r=>s=>typeof s=="function"?s(t,i,n):r(s)}var tre=GL(),nre=GL,ire=(...n)=>{const e=HL(...n),t=Object.assign((...i)=>{const r=e(...i),s=(o,...a)=>r(ll(o)?UL(o):o,...a);return Object.assign(s,r),s},{withTypes:()=>t});return t};ire(OE);var rre=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Bg:Bg.apply(null,arguments)},sre=n=>n&&typeof n.match=="function";function Xo(n,e){function t(...i){if(e){let r=e(...i);if(!r)throw new Error(vr(0));return{type:n,payload:r.payload,..."meta"in r&&{meta:r.meta},..."error"in r&&{error:r.error}}}return{type:n,payload:i[0]}}return t.toString=()=>`${n}`,t.type=n,t.match=i=>Fie(i)&&i.type===n,t}var VL=class Yh extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Yh.prototype)}static get[Symbol.species](){return Yh}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new Yh(...e[0].concat(this)):new Yh(...e.concat(this))}};function K9(n){return Qo(n)?zL(n,()=>{}):n}function Y9(n,e,t){if(n.has(e)){let r=n.get(e);return t.update&&(r=t.update(r,e,n),n.set(e,r)),r}if(!t.insert)throw new Error(vr(10));const i=t.insert(e,n);return n.set(e,i),i}function ore(n){return typeof n=="boolean"}var are=()=>function(e){const{thunk:t=!0,immutableCheck:i=!0,serializableCheck:r=!0,actionCreatorCheck:s=!0}=e??{};let o=new VL;return t&&(ore(t)?o.push(tre):o.push(nre(t.extraArgument))),o},lre="RTK_autoBatch",WL=n=>e=>{setTimeout(e,n)},ure=typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:WL(10),cre=(n={type:"raf"})=>e=>(...t)=>{const i=e(...t);let r=!0,s=!1,o=!1;const a=new Set,l=n.type==="tick"?queueMicrotask:n.type==="raf"?ure:n.type==="callback"?n.queueNotification:WL(n.timeout),u=()=>{o=!1,s&&(s=!1,a.forEach(c=>c()))};return Object.assign({},i,{subscribe(c){const h=()=>r&&c(),p=i.subscribe(h);return a.add(c),()=>{p(),a.delete(c)}},dispatch(c){var h;try{return r=!((h=c==null?void 0:c.meta)!=null&&h[lre]),s=!r,s&&(o||(o=!0,l(u))),i.dispatch(c)}finally{r=!0}}})},fre=n=>function(t){const{autoBatch:i=!0}=t??{};let r=new VL(n);return i&&r.push(cre(typeof i=="object"?i:void 0)),r},hre=!0;function dre(n){const e=are(),{reducer:t=void 0,middleware:i,devTools:r=!0,preloadedState:s=void 0,enhancers:o=void 0}=n||{};let a;if(typeof t=="function")a=t;else if(DE(t))a=IL(t);else throw new Error(vr(1));let l;typeof i=="function"?l=i(e):l=e();let u=Bg;r&&(u=rre({trace:!hre,...typeof r=="object"&&r}));const c=Die(...l),h=fre(c);let p=typeof o=="function"?o(h):h();const m=u(...p);return BL(a,s,m)}function jL(n){const e={},t=[];let i;const r={addCase(s,o){const a=typeof s=="string"?s:s.type;if(!a)throw new Error(vr(28));if(a in e)throw new Error(vr(29));return e[a]=o,r},addMatcher(s,o){return t.push({matcher:s,reducer:o}),r},addDefaultCase(s){return i=s,r}};return n(r),[e,t,i]}function pre(n){return typeof n=="function"}function mre(n,e){let[t,i,r]=jL(e),s;if(pre(n))s=()=>K9(n());else{const a=K9(n);s=()=>a}function o(a=s(),l){let u=[t[l.type],...i.filter(({matcher:c})=>c(l)).map(({reducer:c})=>c)];return u.filter(c=>!!c).length===0&&(u=[r]),u.reduce((c,h)=>{if(h)if(ll(c)){const m=h(c,l);return m===void 0?c:m}else{if(Qo(c))return zL(c,p=>h(p,l));{const p=h(c,l);if(p===void 0){if(c===null)return c;throw new Error(vr(9))}return p}}return c},a)}return o.getInitialState=s,o}var gre="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",XL=(n=21)=>{let e="",t=n;for(;t--;)e+=gre[Math.random()*64|0];return e},vre=(n,e)=>sre(n)?n.match(e):n(e);function yre(...n){return e=>n.some(t=>vre(t,e))}var _re=["name","message","stack","code"],d2=class{constructor(n,e){t_(this,"_type");this.payload=n,this.meta=e}},Z9=class{constructor(n,e){t_(this,"_type");this.payload=n,this.meta=e}},xre=n=>{if(typeof n=="object"&&n!==null){const e={};for(const t of _re)typeof n[t]=="string"&&(e[t]=n[t]);return e}return{message:String(n)}},Zv=(()=>{function n(e,t,i){const r=Xo(e+"/fulfilled",(l,u,c,h)=>({payload:l,meta:{...h||{},arg:c,requestId:u,requestStatus:"fulfilled"}})),s=Xo(e+"/pending",(l,u,c)=>({payload:void 0,meta:{...c||{},arg:u,requestId:l,requestStatus:"pending"}})),o=Xo(e+"/rejected",(l,u,c,h,p)=>({payload:h,error:(i&&i.serializeError||xre)(l||"Rejected"),meta:{...p||{},arg:c,requestId:u,rejectedWithValue:!!h,requestStatus:"rejected",aborted:(l==null?void 0:l.name)==="AbortError",condition:(l==null?void 0:l.name)==="ConditionError"}}));function a(l){return(u,c,h)=>{const p=i!=null&&i.idGenerator?i.idGenerator(l):XL(),m=new AbortController;let v,A;function _(S){A=S,m.abort()}const g=async function(){var E,b;let S;try{let T=(E=i==null?void 0:i.condition)==null?void 0:E.call(i,l,{getState:c,extra:h});if(Sre(T)&&(T=await T),T===!1||m.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const P=new Promise((I,z)=>{v=()=>{z({name:"AbortError",message:A||"Aborted"})},m.signal.addEventListener("abort",v)});u(s(p,l,(b=i==null?void 0:i.getPendingMeta)==null?void 0:b.call(i,{requestId:p,arg:l},{getState:c,extra:h}))),S=await Promise.race([P,Promise.resolve(t(l,{dispatch:u,getState:c,extra:h,requestId:p,signal:m.signal,abort:_,rejectWithValue:(I,z)=>new d2(I,z),fulfillWithValue:(I,z)=>new Z9(I,z)})).then(I=>{if(I instanceof d2)throw I;return I instanceof Z9?r(I.payload,p,l,I.meta):r(I,p,l)})])}catch(T){S=T instanceof d2?o(null,p,l,T.payload,T.meta):o(T,p,l)}finally{v&&m.signal.removeEventListener("abort",v)}return i&&!i.dispatchConditionRejection&&o.match(S)&&S.meta.condition||u(S),S}();return Object.assign(g,{abort:_,requestId:p,arg:l,unwrap(){return g.then(Are)}})}}return Object.assign(a,{pending:s,rejected:o,fulfilled:r,settled:yre(o,r),typePrefix:e})}return n.withTypes=()=>n,n})();function Are(n){if(n.meta&&n.meta.rejectedWithValue)throw n.payload;if(n.error)throw n.error;return n.payload}function Sre(n){return n!==null&&typeof n=="object"&&typeof n.then=="function"}var Cre=Symbol.for("rtk-slice-createasyncthunk");function Ere(n,e){return`${n}/${e}`}function Mre({creators:n}={}){var t;const e=(t=n==null?void 0:n.asyncThunk)==null?void 0:t[Cre];return function(r){const{name:s,reducerPath:o=s}=r;if(!s)throw new Error(vr(11));typeof process<"u";const a=(typeof r.reducers=="function"?r.reducers(Tre()):r.reducers)||{},l=Object.keys(a),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},c={addCase(x,E){const b=typeof x=="string"?x:x.type;if(!b)throw new Error(vr(12));if(b in u.sliceCaseReducersByType)throw new Error(vr(13));return u.sliceCaseReducersByType[b]=E,c},addMatcher(x,E){return u.sliceMatchers.push({matcher:x,reducer:E}),c},exposeAction(x,E){return u.actionCreators[x]=E,c},exposeCaseReducer(x,E){return u.sliceCaseReducersByName[x]=E,c}};l.forEach(x=>{const E=a[x],b={reducerName:x,type:Ere(s,x),createNotation:typeof r.reducers=="function"};Rre(E)?Bre(b,E,c,e):bre(b,E,c)});function h(){const[x={},E=[],b=void 0]=typeof r.extraReducers=="function"?jL(r.extraReducers):[r.extraReducers],T={...x,...u.sliceCaseReducersByType};return mre(r.initialState,P=>{for(let I in T)P.addCase(I,T[I]);for(let I of u.sliceMatchers)P.addMatcher(I.matcher,I.reducer);for(let I of E)P.addMatcher(I.matcher,I.reducer);b&&P.addDefaultCase(b)})}const p=x=>x,m=new Map;let v;function A(x,E){return v||(v=h()),v(x,E)}function _(){return v||(v=h()),v.getInitialState()}function g(x,E=!1){function b(P){let I=P[x];return typeof I>"u"&&E&&(I=_()),I}function T(P=p){const I=Y9(m,E,{insert:()=>new WeakMap});return Y9(I,P,{insert:()=>{const z={};for(const[w,D]of Object.entries(r.selectors??{}))z[w]=wre(D,P,_,E);return z}})}return{reducerPath:x,getSelectors:T,get selectors(){return T(b)},selectSlice:b}}const S={name:s,reducer:A,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:_,...g(o),injectInto(x,{reducerPath:E,...b}={}){const T=E??o;return x.inject({reducerPath:T,reducer:A},b),{...S,...g(T,!0)}}};return S}}function wre(n,e,t,i){function r(s,...o){let a=e(s);return typeof a>"u"&&i&&(a=t()),n(a,...o)}return r.unwrapped=n,r}var JL=Mre();function Tre(){function n(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return n.withTypes=()=>n,{reducer(e){return Object.assign({[e.name](...t){return e(...t)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,t){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}},asyncThunk:n}}function bre({type:n,reducerName:e,createNotation:t},i,r){let s,o;if("reducer"in i){if(t&&!Pre(i))throw new Error(vr(17));s=i.reducer,o=i.prepare}else s=i;r.addCase(n,s).exposeCaseReducer(e,s).exposeAction(e,o?Xo(n,o):Xo(n))}function Rre(n){return n._reducerDefinitionType==="asyncThunk"}function Pre(n){return n._reducerDefinitionType==="reducerWithPrepare"}function Bre({type:n,reducerName:e},t,i,r){if(!r)throw new Error(vr(18));const{payloadCreator:s,fulfilled:o,pending:a,rejected:l,settled:u,options:c}=t,h=r(n,s,c);i.exposeAction(e,h),o&&i.addCase(h.fulfilled,o),a&&i.addCase(h.pending,a),l&&i.addCase(h.rejected,l),u&&i.addMatcher(h.settled,u),i.exposeCaseReducer(e,{fulfilled:o||t0,pending:a||t0,rejected:l||t0,settled:u||t0})}function t0(){}var Ire=(n,e)=>{if(typeof n!="function")throw new Error(vr(32))},UE="listenerMiddleware",Lre=n=>{let{type:e,actionCreator:t,matcher:i,predicate:r,effect:s}=n;if(e)r=Xo(e).match;else if(t)e=t.type,r=t.match;else if(i)r=i;else if(!r)throw new Error(vr(21));return Ire(s),{predicate:r,type:e,effect:s}},Dre=Object.assign(n=>{const{type:e,predicate:t,effect:i}=Lre(n);return{id:XL(),effect:i,type:e,predicate:t,pending:new Set,unsubscribe:()=>{throw new Error(vr(22))}}},{withTypes:()=>Dre}),Fre=Object.assign(Xo(`${UE}/add`),{withTypes:()=>Fre});Xo(`${UE}/removeAll`);var Nre=Object.assign(Xo(`${UE}/remove`),{withTypes:()=>Nre});function vr(n){return`Minified Redux Toolkit error #${n}; visit https://redux-toolkit.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}const KL="http://localhost:4444/api",L0=Yn.create({withCredentials:!0,baseURL:KL});L0.interceptors.request.use(n=>(n.headers.Authorization=`Bearer ${localStorage.getItem("token")}`,n));class kE{static async login(e,t){return L0.post("/login",{email:e,password:t})}static async register(e,t,i){return L0.post("/register",{email:e,password:t,name:i})}static async logout(){return L0.post("/logout")}}const Ore={userData:{email:"",name:"",isActivated:!1,id:""},accessToken:"",refreshToken:"",isLoading:!1,isError:!1,navigateTo:"",errorMessage:""},D0=Zv("auth/login",async(n,{rejectWithValue:e})=>{try{return(await kE.login(n.email,n.password)).data}catch(t){return e(t.response.data.message)}}),F0=Zv("auth/register",async(n,{rejectWithValue:e})=>{try{return(await kE.register(n.email,n.password,n.name)).data}catch(t){return e(t.response.data.message)}}),yd=Zv("auth/logout",async(n,{rejectWithValue:e})=>{try{await kE.logout()}catch(t){return e(t.response.data.message)}}),N0=Zv("auth/checkAuth",async(n,{rejectWithValue:e})=>{try{return(await Yn.get(`${KL}/refresh`,{withCredentials:!0})).data}catch(t){e(t)}}),YL=JL({name:"auth",initialState:Ore,reducers:{resetErrorMessage:n=>{n.errorMessage=""}},extraReducers:n=>{n.addCase(D0.pending,e=>{e.isLoading=!0,e.isError=!1,e.errorMessage=""}),n.addCase(D0.fulfilled,(e,t)=>{var i,r,s,o,a,l,u;(i=t.payload)!=null&&i.user&&(e.userData=(r=t.payload)==null?void 0:r.user),(s=t.payload)!=null&&s.accessToken&&(e.accessToken=(o=t.payload)==null?void 0:o.accessToken),(a=t.payload)!=null&&a.refreshToken&&(e.refreshToken=t.payload.refreshToken),(l=t.payload)!=null&&l.navigateTo&&(e.navigateTo=t.payload.navigateTo),localStorage.setItem("token",(u=t.payload)==null?void 0:u.accessToken),e.isLoading=!1,e.isError=!1,e.errorMessage=""}),n.addCase(D0.rejected,(e,t)=>{e.isLoading=!1,e.isError=!0,e.errorMessage=t.payload}),n.addCase(F0.pending,e=>{e.isLoading=!0,e.isError=!1,e.errorMessage=""}),n.addCase(F0.fulfilled,(e,t)=>{var i,r,s,o,a,l,u;e.isLoading=!1,e.isError=!1,e.errorMessage="",(i=t.payload)!=null&&i.user&&(e.userData=(r=t.payload)==null?void 0:r.user),(s=t.payload)!=null&&s.accessToken&&(e.accessToken=(o=t.payload)==null?void 0:o.accessToken),(a=t.payload)!=null&&a.refreshToken&&(e.refreshToken=t.payload.refreshToken),(l=t.payload)!=null&&l.navigateTo&&(e.navigateTo=t.payload.navigateTo),localStorage.setItem("token",(u=t.payload)==null?void 0:u.accessToken)}),n.addCase(F0.rejected,(e,t)=>{e.isLoading=!1,e.isError=!0,e.errorMessage=t.payload}),n.addCase(yd.pending,e=>{e.isLoading=!0}),n.addCase(yd.fulfilled,e=>{e.isLoading=!1,e.accessToken="",e.refreshToken="",e.navigateTo="",e.userData={}}),n.addCase(yd.rejected,(e,t)=>{e.isLoading=!1,console.log(t.error.message)}),n.addCase(N0.pending,e=>{e.isLoading=!0}),n.addCase(N0.fulfilled,(e,t)=>{var i,r,s;e.isLoading=!1,(i=t.payload)!=null&&i.accessToken&&(localStorage.setItem("token",t.payload.accessToken),e.accessToken=t.payload.accessToken),(r=t.payload)!=null&&r.refreshToken&&(e.refreshToken=t.payload.refreshToken),(s=t.payload)!=null&&s.user&&(e.userData=t.payload.user)}),n.addCase(N0.rejected,(e,t)=>{e.isLoading=!1,console.log(t.error.message)})}}),Ure=YL.reducer,{resetErrorMessage:kre}=YL.actions,zre="/Apple-shop/assets/hand-CA6l4kTk.png",Hre={email:ff().required("Введите почту").email("Неверный формат почты"),password:ff().required("Введите пароль")},Gre={email:ff().required("Введите почту").email("Неверный формат почты"),name:ff().required("Введите имя").min(3,"Минимум 3 символа").max(20,"Максимум 20 символов"),password:ff().required("Введите пароль").min(6,"Минимум 6 символов")};function ZL({formType:n}){var h,p,m,v,A,_;const e=Jf(),{navigateTo:t,isLoading:i,isError:r,errorMessage:s}=al(g=>g.authSlice),o=nL().shape(n==="signin"?Hre:Gre);G.useEffect(()=>{e(kre())},[]);const{register:a,handleSubmit:l,formState:{errors:u}}=Xee({defaultValues:{},mode:"onChange",resolver:Wte(o)}),c=l(({email:g,name:S,password:x})=>{if(n==="signin"&&e(D0({email:g,password:x})),n==="signup"){const E={email:g,password:x,name:S};console.log(E),e(F0(E))}});return t?ce.jsx(oU,{to:t}):ce.jsxs("div",{className:zh.authWrapper,children:[ce.jsxs("div",{className:zh.container,children:[ce.jsx("img",{className:zh.img,src:zre,alt:"formimg"}),ce.jsxs("form",{onSubmit:c,className:zh.form,children:[ce.jsx($x,{register:a,registerName:"email",titleName:"Enter your email",isError:!!((h=u.email)!=null&&h.message),errorText:(p=u.email)==null?void 0:p.message}),n==="signup"&&ce.jsx($x,{register:a,registerName:"name",titleName:"Enter your name",isError:!!((m=u.name)!=null&&m.message),errorText:(v=u.name)==null?void 0:v.message}),ce.jsx($x,{register:a,registerName:"password",titleName:"Enter your password",isError:!!((A=u.password)!=null&&A.message),errorText:(_=u.password)==null?void 0:_.message}),r&&ce.jsx("div",{className:zh.error,children:s}),ce.jsx(See,{children:n==="signin"?"Sign in":"Sign up"})]})]}),i&&ce.jsx(Tee,{})]})}function Vre({}){return ce.jsx(Du,{children:ce.jsx("section",{className:cee.signup,children:ce.jsx(ZL,{formType:"signup"})})})}const Wre={};function jre({}){return ce.jsx(Du,{children:ce.jsx("section",{className:Wre.signin,children:ce.jsx(ZL,{formType:"signin"})})})}const Xre={};function Jre({}){return ce.jsx(Du,{children:ce.jsx("section",{className:Xre.cart,children:ce.jsx("h1",{children:"Cart component"})})})}const Kre={};function Yre({}){return ce.jsx(Du,{children:ce.jsx("section",{className:Kre.contacts,children:ce.jsx("h1",{children:"Contacts component"})})})}const Zre="_thanks_e2rcl_1",qre="_title_e2rcl_10",Qre="_text_e2rcl_16",$re="_email_e2rcl_22",ese="_button_e2rcl_27",tse="_img_e2rcl_42",bc={thanks:Zre,title:qre,text:Qre,email:$re,button:ese,img:tse,"globe-animation":"_globe-animation_e2rcl_1"},nse="/Apple-shop/assets/globe-DpptT2dw.png";function ise({}){const{email:n}=al(e=>e.authSlice.userData);return ce.jsx(Du,{children:ce.jsxs("section",{className:bc.thanks,children:[ce.jsxs("h3",{className:bc.title,children:["Thanks ",ce.jsx("br",{})," for registration"]}),ce.jsxs("div",{className:bc.text,children:["We have sent an account activation link to your email address",ce.jsx("span",{className:bc.email,children:n})]}),ce.jsx(Ud,{className:bc.button,style:{textDecoration:"none"},to:"/",children:"Back to home"}),ce.jsx("img",{className:bc.img,src:nse,alt:"globe"})]})})}const rse="_header_y2ph9_1",sse="_navlist_y2ph9_13",ose="_navitem_y2ph9_17",Rc={header:rse,navlist:sse,navitem:ose},ase="_navlink_n862a_1",lse={navlink:ase};function q9({text:n,href:e}){return ce.jsx(Ud,{style:{textDecoration:"none"},to:e,className:lse.navlink,children:n})}const use="_container_1isjg_1",cse="_userContainer_1isjg_5",fse="_arrow_1isjg_11",hse="_username_1isjg_18",n0={container:use,userContainer:cse,arrow:fse,username:hse},dse="_container_1o5vd_1",pse="_list_1o5vd_11",mse="_item_1o5vd_19",i0={container:dse,list:pse,item:mse},gse={userMenuIsVisible:!1,menuIsVisible:!1},qL=JL({name:"usermenu",initialState:gse,reducers:{toggleUserMenu:n=>{n.userMenuIsVisible=!n.userMenuIsVisible},toggleMenu:n=>{n.menuIsVisible=!n.menuIsVisible}}}),vse=qL.reducer,{toggleUserMenu:QL,toggleMenu:O0}=qL.actions,yse={initial:{scaleY:0},animate:{scaleY:1,transformOrigin:"top",transition:{ease:Hd}},exit:{scaleY:0,transformOrigin:"bottom",transition:{ease:Hd,delay:.2}}},Q9={initial:{opacity:0,transition:{duration:.5}},open:{opacity:1,transition:{duration:.5}}},_se={initial:{transition:{staggerChildren:.05}},open:{transition:{staggerChildren:.05}},exit:{transition:{delayChildren:.2,staggerChildren:.05}}};function xse(){const{userMenuIsVisible:n}=al(t=>t.userMenuSlice),e=Jf();return ce.jsx(dC,{children:n&&ce.jsx(Ci.div,{className:i0.container,variants:yse,initial:"initial",animate:"animate",exit:"exit",layout:!0,children:ce.jsxs(Ci.ul,{variants:_se,initial:"initial",animate:"open",exit:"initial",className:i0.list,children:[ce.jsx(Ci.li,{variants:Q9,className:i0.item,onClick:()=>{e(yd()),e(QL())},children:"Log out"}),ce.jsx(Ci.li,{variants:Q9,className:i0.item,children:"Profile"})]})})})}var $L={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},$9=Tn.createContext&&Tn.createContext($L),Ase=["attr","size","title"];function Sse(n,e){if(n==null)return{};var t=Cse(n,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}function Cse(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}function Fg(){return Fg=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Fg.apply(this,arguments)}function e8(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function Ng(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?e8(Object(t),!0).forEach(function(i){Ese(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):e8(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function Ese(n,e,t){return e=Mse(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Mse(n){var e=wse(n,"string");return typeof e=="symbol"?e:String(e)}function wse(n,e){if(typeof n!="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function eD(n){return n&&n.map((e,t)=>Tn.createElement(e.tag,Ng({key:t},e.attr),eD(e.child)))}function Tse(n){return e=>Tn.createElement(bse,Fg({attr:Ng({},n.attr)},e),eD(n.child))}function bse(n){var e=t=>{var{attr:i,size:r,title:s}=n,o=Sse(n,Ase),a=r||t.size||"1em",l;return t.className&&(l=t.className),n.className&&(l=(l?l+" ":"")+n.className),Tn.createElement("svg",Fg({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,i,o,{className:l,style:Ng(Ng({color:n.color||t.color},t.style),n.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),s&&Tn.createElement("title",null,s),n.children)};return $9!==void 0?Tn.createElement($9.Consumer,null,t=>e(t)):e($L)}function Rse(n){return Tse({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M201.4 342.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 274.7 86.6 137.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z"},child:[]}]})(n)}function Pse({name:n}){const{userMenuIsVisible:e}=al(i=>i.userMenuSlice),t=Jf();return ce.jsxs("div",{className:n0.container,children:[ce.jsxs("div",{className:n0.userContainer,children:[ce.jsx(Rse,{className:n0.arrow,style:{transform:`${e?"rotateX(180deg)":"rotateX(0deg)"}`},onClick:()=>{t(QL())}}),ce.jsx("div",{className:n0.username,children:n})]}),ce.jsx(xse,{})]})}const tD=[{id:"navitem1",text:"Home",href:"/"},{id:"navitem2",text:"Catalog",href:"/catalog"},{id:"navitem3",text:"Cart",href:"/cart"},{id:"navitem4",text:"Contacts",href:"/contacts"}],nD=[{id:"authitem1",text:"Sign up",href:"/sign-up"},{id:"authitem2",text:"Sign in",href:"/sign-in"}];function Bse({}){const{name:n}=al(e=>e.authSlice.userData);return ce.jsxs("header",{className:Rc.header,children:[ce.jsx("nav",{children:ce.jsx("ul",{className:Rc.navlist,children:tD.map(({id:e,text:t,href:i})=>ce.jsx("li",{className:Rc.navitem,children:ce.jsx(q9,{text:t,href:i})},e))})}),n?ce.jsx(Pse,{name:n}):ce.jsx("nav",{className:Rc.navauth,children:ce.jsx("ul",{className:Rc.navlist,children:nD.map(({id:e,text:t,href:i})=>ce.jsx("li",{className:Rc.navitem,children:ce.jsx(q9,{text:t,href:i})},e))})})]})}const Ise="_burgermenu_1hgv7_1",Lse="_burgernavlist_1hgv7_25",Dse="_burgernavitem_1hgv7_33",Fse="_authItem_1hgv7_41",Vl={burgermenu:Ise,burgernavlist:Lse,burgernavitem:Dse,authItem:Fse};function Nse(){const{menuIsVisible:n}=al(o=>o.userMenuSlice),{name:e}=al(o=>o.authSlice.userData),t=Jf(),i={initial:{scaleY:0},animate:{scaleY:1,transformOrigin:"top",transition:{duration:.5,ease:Hd}},exit:{scaleY:0,transformOrigin:"bottom",transition:{delay:.5}}},r={initial:{y:"30vh",opacity:0,transition:{duration:1}},open:{y:0,opacity:1,transition:{duration:1}}},s={initial:{transition:{staggerChildren:.05}},open:{transition:{staggerChildren:.05}},exit:{transition:{delayChildren:.2,staggerChildren:.05}}};return G.useEffect(()=>{function o(){n&&(document.body.style.overflow="hidden")}function a(){document.body.style.overflow="auto"}return o(),a},[n]),ce.jsx(ce.Fragment,{children:ce.jsx(dC,{children:n&&ce.jsxs(Ci.div,{className:Vl.burgermenu,variants:i,animate:"animate",exit:"exit",initial:"initial",children:[ce.jsx("nav",{children:ce.jsxs(Ci.ul,{variants:s,initial:"initial",animate:"open",exit:"initial",className:Vl.burgernavlist,children:[tD.map(({id:o,text:a,href:l})=>ce.jsx("div",{className:Vl.burgernavitem,children:ce.jsx(Ci.li,{variants:r,onClick:()=>t(O0()),children:ce.jsx(Ud,{style:{textDecoration:"none"},to:l,children:a})})},o)),e&&ce.jsx("div",{className:Vl.burgernavitem,children:ce.jsx(Ci.li,{variants:r,onClick:()=>{t(O0()),t(yd())},children:ce.jsx("div",{className:Vl.authItem,children:"Log out"})})})]})}),ce.jsx("nav",{children:ce.jsx(Ci.ul,{variants:s,initial:"initial",animate:"open",exit:"initial",className:Vl.burgernavlist,children:!e&&nD.map(({id:o,text:a,href:l})=>ce.jsx("div",{className:Vl.burgernavitem,children:ce.jsx(Ci.li,{variants:r,onClick:()=>t(O0()),children:ce.jsx(Ud,{style:{textDecoration:"none"},to:l,children:a})})},o))})})]})})})}const Ose="_burgerbutton_1gcds_1",Use="_burgerbutton_Active_1gcds_19",t8={burgerbutton:Ose,burgerbutton_Active:Use};function kse(){const{menuIsVisible:n}=al(t=>t.userMenuSlice),e=Jf();return ce.jsx("div",{className:`${t8.burgerbutton} ${n&&t8.burgerbutton_Active}`,onClick:()=>e(O0()),children:ce.jsx("div",{})})}const zse="/Apple-shop/assets/bg-C46-nzKg.gif";function Hse(){const n=Uf(),e=Jf();return G.useEffect(()=>{localStorage.getItem("token")&&e(N0())},[]),ce.jsxs(ce.Fragment,{children:[ce.jsx("div",{className:SU.background,style:{backgroundImage:`url(${zse})`}}),ce.jsx(kse,{}),ce.jsx(Nse,{}),ce.jsx(Bse,{}),ce.jsx(dC,{mode:"wait",children:ce.jsxs(lU,{location:n,children:[ce.jsx(Aa,{index:!0,element:ce.jsx(aee,{})}),ce.jsx(Aa,{path:"/catalog",element:ce.jsx(uee,{})}),ce.jsx(Aa,{path:"/sign-up",element:ce.jsx(Vre,{})}),ce.jsx(Aa,{path:"/sign-in",element:ce.jsx(jre,{})}),ce.jsx(Aa,{path:"/cart",element:ce.jsx(Jre,{})}),ce.jsx(Aa,{path:"/contacts",element:ce.jsx(Yre,{})}),ce.jsx(Aa,{path:"/thanks",element:ce.jsx(ise,{})})]},n.pathname)})]})}const Gse=IL({authSlice:Ure,userMenuSlice:vse}),Vse=()=>dre({reducer:Gse}),Wse=Vse();m2.createRoot(document.getElementById("root")).render(ce.jsx(mU,{basename:"Apple-shop",children:ce.jsx(fne,{store:Wse,children:ce.jsx(Hse,{})})}));
